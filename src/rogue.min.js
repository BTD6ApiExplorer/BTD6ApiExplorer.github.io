let e,t,a="",n={},i={},r={},s={},l=null,d=null,o=null,c=1,p=null,m={},u=!1,h={},g=null,f=null,y=null,b={},k=null,L=null,v=1,C=null,E="newest",S=!1,w=!1,A={},B=!1,x=!1,I=100,T=200,O=0,M=0,P=Date.now(),$=[],D=!1,H={},j={};function N(e,t){$.push({id:e,request:t}),D||K()}function G(e){$=$.filter((t=>t.id!==e))}function R(){const e=O/(I/2);return T+T*Math.pow(e,2)}async function K(){D||(D=!0,function e(){if(0===$.length)return void(D=!1);const t=Date.now();if(t-P>=18e4&&(O=0,P=t),O<I){const e=$.shift();O++,e.request()}const a=R();setTimeout(e,a)}())}async function U(e,t){let a=null;try{S?(a=await fetch(e,{cache:"reload"}),S=!1,B=!1):(a=await fetch(e),B=!1)}catch(e){return navigator.onLine?(B=!0,$=[],xt("You have hit the rate limit.<br>If you are browsing the leaderboards or content browsers, please slow down!<br><br>The rate limit will clear after a short time. You can also help prevent rate limiting by toggling the setting below which stops player profiles from loading automatically.","ratelimit"),Ye(),pressedStart=!1,`You have hit the rate limit. [${e}]`):(xt("You are currently offline. Please check your internet connection.","api"),`You are currently offline. [${e}]`)}try{let e=await a.json();return 1==e.success?t(e):"Rate limit"==e.reason?(w=!0,xt("You have hit the rate limit. Please try again later.","api")):(document.getElementById("loading").style.transform="scale(0)",pressedStart=!1,xt(e.error,"api")),e}catch(e){return xt(`Something went wrong with the request. Response Code: ${a.status} [${e}]`,"api"),`Something went wrong with the request. Response Code: ${a.status} [${e}]`}}async function F(e){S=!0;let t=!0;if(await U(`https://data.ninjakiwi.com/btd6/save/${e}`,(a=>{n=a.body,i=a.model,readyFlags[0]=1,t=!1,J(e)})),t&&!B){let t=document.getElementsByClassName("error-modal-overlay");for(element of t)element.parentNode.removeChild(element);delete m[e],se(),generateFrontPage(),xt("Your Open Access Key has expired. Please make a new one and try again.","expire",!0)}}async function J(e){S=!0,U(`https://data.ninjakiwi.com/btd6/users/${e}`,(t=>{r=t.body,s=t.model,m[e]={displayName:r.displayName,avatar:De(r),banner:He(r)},se(),readyFlags[1]=1,fetchDependencies()}))}async function z(){null==l?U("https://data.ninjakiwi.com/btd6/races",(e=>{l=e.body,generateRaces()})):generateRaces()}async function W(e){return l&&l[e]&&"string"==typeof l[e].metadata?U(l[e].metadata,(t=>(l[e].metadata=t.body,l[e]))):l[e]}async function V(){return o?(d=null,U(`${o}?page=${c}`,(e=>(d=e.body,p=d.length,document.getElementById("leaderboard-footer-page-number").innerHTML=`Page ${c} (#${c*p-(p-1)} - ${c*p})`,d)))):xt("Leaderboard Fetch Error: No leaderboard data found")}async function Q(e){return null==e&&(e=o),$=[],null==H[o]&&(H[o]={entries:[]},q(e)),H[o]}async function q(e){null!=e&&(H[o].nextRequested||(O++,await U(e,(t=>{H[o].entries=H[o].entries.concat(t.body),H[o].hasOwnProperty("entryPerPage")||(H[o].entryPerPage=t.body.length),addLeaderboardEntries(t.body,isNaN(e.split("=")[1])?1:parseInt(e.split("=")[1]),H[o].entryPerPage?H[o].entryPerPage:t.body.length),H[o].next=t.next,H[o].nextRequested=!1}))))}async function Y(){null==g?U("https://data.ninjakiwi.com/btd6/bosses",(e=>{g=e.body,generateBosses(showElite)})):generateBosses(showElite)}async function Z(e,t){return g&&g[e]&&"string"==typeof g[e][t?"metadataElite":"metadataStandard"]?U(g[e][t?"metadataElite":"metadataStandard"],(a=>(g[e][t?"metadataElite":"metadataStandard"]=a.body,g[e]))):g[e]}async function X(){null==f?U("https://data.ninjakiwi.com/btd6/ct",(e=>{f=e.body,generateCTs()})):generateCTs()}async function _(e){let t=null;return await U(e,(e=>(t=e.body,t))),t}async function ee(){if(null!=y)return y;await U("https://data.ninjakiwi.com/btd6/challenges/filter/daily",(e=>(y=e.body,y)))}async function te(e){return null==b[e]&&await U(`https://data.ninjakiwi.com/btd6/challenges/challenge/${e}`,(t=>(b[e]=t.body,b[e]))),b[e]}async function ae(){return L?(k=null,U(`${L}${E}?page=${v}`,(e=>(k=e.body,C=k.length,document.getElementById("browser-footer-page-number").innerHTML=`Page ${v} of 4`,d)))):xt("Content Browser Fetch Error: No data found")}async function ne(e){let t=e.split("/").pop();return null==h[t]&&await U(e,(e=>{h[t]=e.body})),h[t]}async function ie(e){return null==A[e]&&await U(`https://data.ninjakiwi.com/btd6/maps/map/${e}`,(t=>(A[e]=t.body,A[e]))),A[e]}function re(){null!=localStorage.getItem("BTD6OAKStorage")&&(m=JSON.parse(localStorage.getItem("BTD6OAKStorage")))}function se(){localStorage.setItem("BTD6OAKStorage",JSON.stringify(m))}function le(e){e.substring(0,3),parseInt(e.substring(3,7));let t=e.substring(7);return[parseInt(t.substring(0,4)),parseInt(t.substring(4,6)),parseInt(t.substring(6,8))]}function de(e,t){let a=new Date(2024,4,25),n=(t?2101:2114)-parseInt(e);return a.setDate(a.getDate()-n),(t?"adv":"rot")+e+a.toISOString().substring(0,10).replace(/-/g,"")}function oe(e,t){let a=new Date(e),n=new Date(2024,4,25).getTime()-a.getTime();return(t?"adv":"rot")+((t?2101:2114)-Math.floor(n/864e5))+e.replace(/-/g,"")}K();const ce={Clicker:"Bloons Master","Superior Clicker":"Superior Bloons Master","Ultimate Clicker":"Ultimate Bloons Master","Knowledgable Primate":"Knowledgeable Primate","Triple Threat":"Triple threat","Small Bloons":"Alchermistman and Bloonacleboy","Master of Life":"Master of life","What did it cost":"What did it cost? - Everything","2 Mega Pops":"2 MegaPops","Looking fab":"Lookin fab",GoldenTicket:"Golden Ticket","Axis of Havok":"Axis of Havoc","Co-op Popper!":"Co-op Popper",CouponCrazy:"Coupon Crazy",LimitedRun:"Limited Run",ALaCode:"A La Code",InstantGratification:"Instant Gratification","Achievement Of Achievements":"Achievement of Achievements","What is this new Bloonery":"What is this new Bloonery?","Who's the Boss":"Who's the Boss?","I'llBeBack":"I'll Be Back",SoSpiiiceyNinjaKiwi:"So Spiiicey Ninja Kiwi",DavidsVsGoliath:"Davids vs Goliath",ToolsToDarwin:"Tools to Darwin",BigSpender:"Big Spender",NotLackingCriticalInformation:"Not Lacking Critical Information",StubbornStrategy:"Stubborn Strategy","Hook Line And Sinker":"Hook, Line, and Sinker",CrashOfTheTitans:"Crash of the Titans","So Shiny":"So Shiny!","Ultimate Team Up":"Ultimate Team-up",StudentLoans:"Student Loans",StickySituation:"Sticky Situation",NoHarvest:"No Harvest",ReadyPlayerOne:"Ready Player One?",TheDailyReid:"The Daily Reid",InstaCentury:"Insta Century"},pe=Object.entries(ce).reduce(((e,[t,a])=>(e[a]=t,e)),{}),me={ObynOceanGuardian:"OceanObyn",MoltenObyn:"MountainObyn",JoanOfArcAdora:"JoanOfArc",CyberQuincy:"QuincyCyber",ETnEtienne:"ETn",SentaiCaptainChurchill:"SentaiChurchill",SleighCaptainChurchill:"SleighChurchill",TinkerfairyRosalia:"RosaliaTinkerfairy"},ue={Spikeopult:"Spike-o-pult",BuccaneerLongRange:"LongRange",BuccaneerGrapeShot:"GrapeShot",BuccaneerCrowsNest:"CrowsNest",BuccaneerHotShot:"HotShot",BuccaneerCarrierFlagship:"CarrierFlagship",BuccaneerCannonShip:"CannonShip",BuccaneerMerchantman:"Merchantman",BuccaneerFavoredTrades:"FavoredTrades",BuccaneerAircraftCarrier:"AircraftCarrier",BuccaneerDestroyer:"Destroyer",BuccaneerTradeEmpire:"TradeEmpire",BuccaneerPirateLord:"PirateLord",BuccaneerMonkeyPirates:"MonkeyPirates",HeattippedDarts:"HeatTippedDart",BioncBoomerang:"BionicBoomerang",LargeCalibre:"LongCalibre",LaserBlasts:"LaserBlast",GuidedMagic:"GuildedMagic",MortarRapidReload:"RapidReload",SupplyDrop:"CashDrop",PlasmaBlasts:"PlasmaBlast",XXXLTrap:"XXXL",OversizeNails:"OversizedNails",CenteredPath:"FlightOrders",Shockwave:"ShellShock",Monkeyopolis:"Metropolis",Spectre:"Specter",TrueSunGod:"TrueSonGod",HydraRocketPods:"HydraRockets",DartMonkeyParagon:"ApexPlasmaMaster",BoomerangMonkeyParagon:"GlaiveDominus",NinjaMonkeyParagon:"AscendedShadow",EngineerMonkeyParagon:"MasterBuilder",WizardMonkeyParagon:"MagusPerfectus",MonkeyAceParagon:"GoliathDoomship",MonkeyBuccaneerParagon:"NavarchOfTheSeas",MonkeySubParagon:"NauticSiegeCore",SmartSpikes:"DirectedSpikes",TackShooterParagon:"CycloneOfFireAndMetal"};let he={"Directed Spikes":"Smart Spikes","Directed Spikes Description":"Smart Spikes Description",CircusGwendolinSkinName:"HarlegwenGwendolinSkinName",CircusGwendolinSkinDescription:"HarlegwenGwendolinSkinDescription",OctoJonesSkinName:"OctoJonesStrikerJonesSkinName",OctoJonesSkinDescription:"OctoJonesStrikerJonesSkinDescription",MoltenObynSkinName:"ObynMountainGuardianSkinName",MoltenObynSkinDescription:"ObynMountainGuardianSkinDescription",SushiBentoSkinName:"SushiBentoBenjaminSkinName",SushiBentoSkinDescription:"SushiBentoBenjaminSkinDescription",KaijuPatSkinName:"KaijuPatFustySkinName",KaijuPatSkinDescription:"KaijuPatFustySkinDescription",GalaxiliSkinName:"GalaxiliEziliSkinName",GalaxiliSkinDescription:"GalaxiliEziliSkinDescription",VoidoraSkinName:"VoidoraAdoraSkinName",VoidoraSkinDescription:"VoidoraAdoraSkinDescription",VikingSaudaSkinName:"VikingSaudaSaudaSkinName",VikingSaudaSkinDescription:"VikingSaudaSaudaSkinDescription",JiangshiSaudaSkinName:"JiangshiSaudaSaudaSkinName",JiangshiSaudaSkinDescription:"JiangshiSaudaSaudaSkinDescription",DreadPirateBrickellSkinName:"DreadPirateBrickellAdmiralBrickellSkinName",DreadPirateBrickellSkinDescription:"DreadPirateBrickellAdmiralBrickellSkinDescription",LifeguardBrickellSkinName:"LifeguardBrickellAdmiralBrickellSkinName",LifeguardBrickellSkinDescription:"LifeguardBrickellAdmiralBrickellSkinDescription",PsimbalsSkinName:"PsimbalsPsiSkinName",PsimbalsSkinDescription:"PsimbalsPsiSkinDescription",GeraldoGentlemanGadgeteerSkinName:"GentlemonkeyGadgeteerGeraldoSkinName",GeraldoGentlemanGadgeteerSkinDescription:"GentlemonkeyGadgeteerGeraldoSkinDescription","Mode Easy":"Easy","Mode Medium":"Medium","Mode Hard":"Hard","Mode Impoppable":"Impoppable","Mode Sandbox":"Sandbox",RosaliaTinkerfairySkinName:"TinkerfairyRosaliaSkinName",RosaliaTinkerfairySkinDescription:"TinkerfairyRosaliaSkinDescription"},ge={Easy:"Bronze",PrimaryOnly:"Bronze01",Deflation:"Bronze02",Medium:"Silver",MilitaryOnly:"Silver01",Apopalypse:"Silver03",Reverse:"Silver02",Hard:"Gold",MagicOnly:"Gold01",DoubleMoabHealth:"Gold03",HalfCash:"Gold04",AlternateBloonsRounds:"Gold02",Impoppable:"Impoppable",Clicks:"ImpoppableRuby","CHIMPS-BLACK":"ImpoppableHematite"},fe={"Scientist Gwendolin":"ScientistGwendolin","Biker Bones":"BikerBones","Sentai Captain Churchill":"SentaiCaptainChurchill","Cyber Quincy":"Cyber Quincy","Octo Jones":"OctoJones","Sleigh Captain Churchill":"SleighCaptainChurchill","Wolfpack Quincy":"WolfpackQuincy",ScientistGwendolin:"Scientist Gwendolin",BikerBones:"Biker Bones",SentaiCaptainChurchill:"Sentai Captain Churchill",CyberQuincy:"Cyber Quincy",OctoJones:"Octo Jones",SleighCaptainChurchill:"Sleigh Captain Churchill",WolfpackQuincy:"Wolfpack Quincy"},ye=["ZMYVERW","ZMYUWTV","ZMYUDTK","ZMYVPGA","ZMYVPFH","ZMYWHPC"];function be(e,t){return"WizardMonkey"==e?`Assets/TowerIcon/${t}-Wizard.webp`:`Assets/TowerIcon/${t}-${e}.webp`}function ke(e,t){return"WizardMonkey"==e?`Assets/UI/InstaContainer/${t}-Wizard.webp`:`Assets/UI/InstaContainer/${t}-${e}.webp`}function Le(e,t){let a=Math.max(t[0],t[1],t[2]);switch(Math.max(t[0],t[1],t[2])){case parseInt(t[0]):a=`${a}00`;break;case parseInt(t[1]):a=`0${a}0`;break;case parseInt(t[2]):a=`00${a}`}return"WizardMonkey"==e?`Assets/InstaMonkeyIcon/${a}-WizardInsta.webp`:`Assets/InstaMonkeyIcon/${a}-${e}Insta.webp`}function ve(e){return e=e.replace(/[^a-zA-Z0-9]/g,""),ue[e]?`Assets/UpgradeIcon/${ue[e]}UpgradeIcon.webp`:`Assets/UpgradeIcon/${e}UpgradeIcon.webp`}function Ce(e){return"SubAdmiral"==e?"Assets/KnowledgeIcon/NavalUpgradesIcon.webp":`Assets/KnowledgeIcon/${e}Icon.webp`}function Ee(e,t){return 1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function Se(e){return`Assets/HeroIconSquare/HeroIcon${e=me[e]||e}.webp`}function we(e){return`Assets/HeroIconCircle/HeroIcon${e=me[e]||e}.webp`}function Ae(e,t){return e=me[e]||e,1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function Be(e){return"#ouch"==e?"Assets/MapIcon/MapSelectouchButton.webp":`Assets/MapIcon/MapSelect${e}Button.webp`}function xe(e){return`Assets/PowerIcon/${e}Icon.webp`}function Ie(e,t){return t?"Assets/AchievementIcon/HiddenIcon.webp":`Assets/AchievementIcon/${e}Icon.webp`}function Te(e){return ce[e]||e}function Oe(e){return`Assets/MedalIcon/${e}.webp`}function Me(e){return`Assets/ModeIcon/${e}Btn.webp`}function Pe(e){switch(e.type){case"MonkeyMoney":return"Assets/UI/BloonjaminsIcon.webp";case"Power":return xe(e.power);case"InstaMonkey":return Le(e.tower,e.tiers);case"KnowledgePoints":return"Assets/UI/KnowledgeIcon.webp";case"RandomInstaMonkey":return`Assets/UI/InstaRandomTier${0==e.tier?1:e.tier}.webp`;case"Trophy":return"Assets/UI/TrophyIcon.webp";default:return`Assets/UI/${e.value}Icon.webp`}}function $e(e){return`Assets/ProfileAvatar/${e}.webp`}function De(e){if(0==e.avatar)return"Assets/ProfileAvatar/ProfileAvatar01.webp";let t=parseInt(e.avatar.replace(/\D/g,""));return""==e.avatar||isNaN(t)?"Assets/ProfileAvatar/ProfileAvatar01.webp":t<=Re.profileAvatars?`Assets/ProfileAvatar/${e.avatar}.webp`:e.avatarURL}function He(e){if(0==e.banner)return"Assets/ProfileBanner/TeamsBannerDeafult.webp";let t=parseInt(e.banner.replace(/\D/g,""));return""==e.banner||isNaN(t)?"Assets/ProfileBanner/TeamsBannerDeafult.webp":t<=Re.profileBanners?`Assets/ProfileBanner/${e.banner}.webp`:e.bannerURL}function je(e){return ye.includes(e)?`Assets/CustomMapIcon/${e}.webp`:`https://data.ninjakiwi.com/btd6/maps/map/${e}/preview`}function Ne(e){return he[e]?Ke[he[e]]:Ke[e]?Ke[e]:e}let Ge,Re={},Ke={},Ue={},Fe={extractedArtifacts:[],imageOptions:{avatar:"ProfileAvatar01.webp",banner:"ProfileBanner48.webp",name:null,sort:"Rarity (Ascending)"},selectedOAK:!1,clickToCollect:!1,artifactFilter:"All",artifactSort:"Name"},Je=["BouncingProjectiles3","CeramicChunker2","FrostedTips1","OneShot2","SlowerIsHarder1","SpiritOfAdventure2","SwellingSpikes1","Wackywibblywavey1"],ze=["EssenceOfBloonarius1","EssenceOfVortex1","EssenceOfDreadbloon1","EssenceOfPhayze1","EssenceOfBlastapopoulos1"],We={Quincy:"Quincy","Cyber Quincy":"Cyber Quincy","Wolfpack Quincy":"Wolfpack Quincy",Gwendolin:"Gwendolin",CircusGwendolin:"Circus Gwendolin","Scientist Gwendolin":"Scientist Gwendolin",StrikerJones:"Striker Jones","Biker Bones":"Biker Bones","Octo Jones":"Octo Jones",ObynGreenfoot:"Obyn Greenfoot",ObynOceanGuardian:"Ocean Guardian Obyn",MoltenObyn:"Molten Obyn",CaptainChurchill:"Captain Churchill","Sentai Captain Churchill":"Sentai Churchill","Sleigh Captain Churchill":"Sleigh Churchill",Benjamin:"Benjamin",BenJammin:"BenJammin",SushiBento:"Sushi Bento",PatFusty:"Pat Fusty",FustyTheSnowman:"Fusty the Snowman",KaijuPat:"Kaiju Pat",Ezili:"Ezili",SmudgeCatt:"Smudge Catt",Galaxili:"Galaxili",Adora:"Adora",JoanOfArcAdora:"Joan of Arc Adora",Voidora:"Voidora",Etienne:"Etienne",ETnEtienne:"ETn",BookWyrmEtienne:"Book Wyrm Etienne",Sauda:"Sauda",VikingSauda:"Viking Sauda",JiangshiSauda:"Jiangshi Sauda",AdmiralBrickell:"Admiral Brickell",DreadPirateBrickell:"Dread Pirate Brickell",LifeguardBrickell:"Lifeguard Brickell",Psi:"Psi",Psimbals:"Psimbals",DreamstatePsi:"Dreamstate Psi",Geraldo:"Geraldo",GeraldoGentlemanGadgeteer:"Gentleman Gadgeteer Geraldo",Corvus:"Corvus",Rosalia:"Rosalia",RosaliaTinkerfairy:"Rosalia Tinkerfairy"},Ve={};function Qe(){let e=["EssenceOfLych1","Token"];for(let[e,t]of Object.entries(Ue.heroStarterKits))Ue.artifacts[t.artifact].starterKitHero=e;for(let e in Ue.artifacts)e.startsWith("Boost")&&delete Ue.artifacts[e];for(let t of e)delete Ue.artifacts[t]}function qe(){document.getElementById("loading").style.removeProperty("transform")}function Ye(){document.getElementById("loading").style.transform="scale(0)"}qe(),Promise.all([fetch("./data/Constants.json").then((e=>e.json())),fetch("./data/English.json").then((e=>e.json())),fetch("./data/rogueData.json").then((e=>e.json()))]).then((([e,t,a])=>{Re=e,Ke=t,Ue=a,Tt(),Qe(),ot()})).catch((e=>{console.error("Error:",e),xt(e,"js")}));const Ze=document.createElement("div");document.body.appendChild(Ze),document.body.classList.add("hex-bg");const Xe=document.createElement("div");Xe.classList.add("header"),Ze.appendChild(Xe);const _e=document.createElement("div");_e.classList.add("header-div"),Xe.appendChild(_e);let et=document.createElement("img");et.src="../Assets/UI/BackBtn.webp",et.classList.add("back-button"),et.addEventListener("click",(()=>{dt("home")})),_e.appendChild(et);const tt=document.createElement("h1");tt.classList.add("title"),tt.innerHTML="Rogue Legends Artifacts",_e.appendChild(tt);const at=document.createElement("div");at.classList.add("content"),Ze.appendChild(at);const nt=document.createElement("div");nt.id="rogue-content",nt.classList.add("content-div","extras"),nt.style.display="flex",at.appendChild(nt);const it=document.createElement("div");it.id="artifacts-content",it.classList.add("extras","content-div"),it.style.display="none",at.appendChild(it);const rt=document.createElement("div");rt.id="starter-kits-content",rt.classList.add("extras","content-div"),rt.style.display="none",at.appendChild(rt);let st=document.createElement("div");st.classList.add("rogue-image-wrapper"),st.style.overflow="hidden",Ze.appendChild(st);const lt=document.createElement("div");function dt(e){switch(Bt(),et.classList.add("visible"),e){case"Artifacts":nt.style.display="none",it.style.display="flex",ct();break;case"Hero Starter Kits":nt.style.display="none",rt.style.display="flex",gt();break;case"Export Image":nt.style.display="none",it.style.display="flex",bt();break;default:nt.style.display="flex",it.style.display="none",rt.style.display="none",lt.style.display="none",et.classList.remove("visible")}}function ot(){Ye();let e=document.createElement("div");e.classList.add("progress-page","f-wrap"),nt.appendChild(e);let t=document.createElement("div");t.classList.add("selectors-div"),e.appendChild(t);let a=document.createElement("p");a.classList.add("sku-roundset-selector-desc"),a.innerHTML="Note: At this time, the artifacts you have extracted are not available via the BTD6 Open Data API. You must manually mark them as extracted. This data will be saved in the current browsers local storage, and will not be cleared unless you clear your browsing data. If you prefer to keep a backup, use Export/Import Data.",t.appendChild(a);Object.entries({Artifacts:"RoguePermanantArtifactsBtn","Hero Starter Kits":"RogueStarterKitsBtn","Export Image":"ArtifactShareBtn"}).forEach((([e,a])=>{let n=document.createElement("div");n.classList.add("rogue-bg","d-flex","jc-between","ai-center","pointer"),n.style.margin="10px",n.addEventListener("click",(()=>{dt(e)})),t.appendChild(n);let i=document.createElement("img");i.classList.add("selector-img"),i.src="../Assets/UI/"+a+".webp",n.appendChild(i);let r=document.createElement("p");r.classList.add("selector-text","black-outline"),r.innerHTML=e,n.appendChild(r);let s=document.createElement("img");s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",n.appendChild(s)}));let n=document.createElement("div");n.classList.add("d-flex","jc-evenly"),t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","ai-center"),i.style.gap="10px",n.appendChild(i);let r=document.createElement("p");r.classList.add("selector-text","black-outline"),r.innerHTML="Export Data",i.appendChild(r);let s=document.createElement("img");s.classList.add("selector-go-img","pointer"),s.style.width="56px",s.src="../Assets/UI/DownloadBtn.webp",i.appendChild(s),s.addEventListener("click",(()=>{Ct()}));let l=document.createElement("div");l.classList.add("d-flex","ai-center"),l.style.gap="10px",n.appendChild(l);let d=document.createElement("p");d.classList.add("selector-text","black-outline"),d.innerHTML="Import Data",l.appendChild(d);let o=document.createElement("img");o.classList.add("pointer"),o.style.width="56px",o.src="../Assets/UI/UploadBtn.webp",l.appendChild(o),o.addEventListener("click",(()=>{Et()}));let c=document.createElement("div");c.classList.add("site-access-div"),e.appendChild(c);let p=document.createElement("p");p.classList.add("site-info-header","sites-text","black-outline"),p.innerHTML="Other Sites",c.appendChild(p);let m=document.createElement("div");m.classList.add("standalone-site-buttons"),c.appendChild(m);Object.entries({Roundsets:{link:"https://btd6apiexplorer.github.io/rounds",text:"Roundsets",icon:"DefaultRoundSetIcon",background:"BloonsBG"},Leaderboards:{link:"https://btd6apiexplorer.github.io/leaderboards",text:"Leaderboards",icon:"LeaderboardSiteBtn",background:"TrophyStoreTiledBG"},"Insta Tracker":{link:"https://btd6apiexplorer.github.io/insta",text:"Insta Tracker",icon:"InstaSiteBtn",background:"CollectionHelp2"},"Main Site":{link:"https://btd6apiexplorer.github.io/",text:"Main Site",icon:"SiteBtn",background:"OverviewProfile"}}).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("site-button-div","pointer"),a.style.backgroundImage=`url(Assets/UI/${t.background}.webp)`,m.appendChild(a),a.addEventListener("click",(()=>{window.location.href=t.link}));let n=document.createElement("img");n.classList.add("site-button-icon"),n.src=`./Assets/UI/${t.icon}.webp`,a.appendChild(n);let i=document.createElement("p");i.classList.add("profile-name","readability-bg","black-outline"),i.style.marginLeft="0",i.innerHTML=t.text,a.appendChild(i)}))}function ct(){let e=document.getElementById("artifacts-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("content-div","progress"),e.appendChild(t);let a=document.createElement("div");a.classList.add("insta-monkeys-header-bar"),e.appendChild(a);let n=document.createElement("div");n.classList.add("maps-progress-views"),a.appendChild(n);let i=document.createElement("p");i.classList.add("maps-progress-coop-toggle-text","black-outline"),i.classList.add("black-outline"),i.innerHTML="Filter:",n.appendChild(i);let r=document.createElement("div");r.classList.add("map-progress-filter-difficulty"),n.appendChild(r);let s=document.createElement("select");s.classList.add("map-progress-filter-difficulty-select");["All","Extracted","Unextracted","Starter Kit","Non Starter Kit"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,s.appendChild(t)})),r.appendChild(s);let l=document.createElement("div");l.classList.add("d-flex"),a.appendChild(l);let d=document.createElement("p");d.classList.add("maps-progress-coop-toggle-text","black-outline"),d.classList.add("black-outline"),d.innerHTML="Sort:",l.appendChild(d);let o=document.createElement("div");o.classList.add("map-progress-filter-difficulty"),l.appendChild(o);let c=document.createElement("select");c.classList.add("map-progress-filter-difficulty-select");["Name","Rarity (Ascending)","Rarity (Descending)","Category"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,c.appendChild(t)})),o.appendChild(c),s.addEventListener("change",(()=>{Fe.artifactFilter=s.value,pt(),It()})),c.addEventListener("change",(()=>{Fe.artifactSort=c.value,pt(),It()}));let p=document.createElement("div");p.classList.add("maps-progress-coop-toggle"),a.appendChild(p);let m=document.createElement("p");m.classList.add("maps-progress-coop-toggle-text","black-outline"),m.innerHTML="Easy Extract:",p.appendChild(m);let u=document.createElement("input");u.classList.add("maps-progress-coop-toggle-input"),u.type="checkbox",u.checked=Fe.clickToCollect,p.appendChild(u),u.addEventListener("change",(()=>{Fe.clickToCollect=u.checked,It()}));let h=document.createElement("div");h.classList.add("maps-progress-views","ai-center"),a.appendChild(h);let g=document.createElement("p");g.classList.add("rogue-progress-text","black-outline"),g.innerHTML=`${Fe.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`,h.appendChild(g),Ge=g;let f=document.createElement("img");f.src="../Assets/UI/ArtifactBag.webp",f.classList.add("artifact-bag"),h.appendChild(f);let y=document.createElement("div");y.id="artifacts-container",y.classList.add("insta-monkeys-progress-container"),e.appendChild(y),pt()}function pt(){let e=document.getElementById("artifacts-container");e.innerHTML="",Ve={};let t=document.createElement("div");t.classList.add("artifacts-div"),e.appendChild(t);let a=document.createElement("div");a.classList.add("artifacts-div"),t.appendChild(a);let n={...Ue.artifacts};switch(Fe.artifactFilter){case"Extracted":n=Object.fromEntries(Object.entries(n).filter((([e,t])=>Fe.extractedArtifacts.includes(t.nameLocKey))));break;case"Unextracted":n=Object.fromEntries(Object.entries(n).filter((([e,t])=>!Fe.extractedArtifacts.includes(t.nameLocKey))));break;case"Starter Kit":n=Object.fromEntries(Object.entries(n).filter((([e,t])=>t.hasOwnProperty("starterKitHero"))));break;case"Non Starter Kit":n=Object.fromEntries(Object.entries(n).filter((([e,t])=>!t.hasOwnProperty("starterKitHero"))))}switch(Fe.artifactSort){case"Name":break;case"Rarity (Ascending)":n=Object.fromEntries(Object.entries(n).sort(((e,t)=>e[1].tier-t[1].tier)));break;case"Rarity (Descending)":n=Object.fromEntries(Object.entries(n).sort(((e,t)=>t[1].tier-e[1].tier)));break;case"Category":n=Object.fromEntries(Object.entries(n).sort(((e,t)=>e[1].rarityFrameType.localeCompare(t[1].rarityFrameType))))}return Object.values(n).forEach((e=>{let t=mt(e);Ve[e.nameLocKey]=t,t.addEventListener("click",(()=>{Fe.clickToCollect&&!Je.includes(e.nameLocKey)?Fe.extractedArtifacts.includes(e.nameLocKey)?(Fe.extractedArtifacts=Fe.extractedArtifacts.filter((t=>t!==e.nameLocKey)),t.classList.add("artifact-unextracted"),Ge&&(Ge.innerHTML=`${Fe.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`),It()):(Fe.extractedArtifacts.push(e.nameLocKey),t.classList.remove("artifact-unextracted"),Ge&&(Ge.innerHTML=`${Fe.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`),It()):ht(e.nameLocKey)})),a.appendChild(t)})),t}function mt(e,t){let a=document.createElement("div");a.classList.add("artifact-container"),Fe.extractedArtifacts.includes(e.nameLocKey)||Je.includes(e.nameLocKey)||"preview"==t||a.classList.add("artifact-unextracted");let n=document.createElement("img");n.src=`../Assets/RogueArtifacts/${e.icon}.webp`,n.classList.add("artifact-img"),a.appendChild(n);let i=document.createElement("img");return i.src=`../Assets/RogueFrames/${ut(e)}.webp`,i.classList.add("artifact-frame"),a.appendChild(i),"modal"!=t&&"preview"!=t&&tippy(a,{content:`<p class="artifact-title">${e.title}</p>${e.description}`,allowHTML:!0,placement:"top",hideOnClick:!1,theme:"speech_bubble",popperOptions:{modifiers:[{name:"preventOverflow",options:{boundary:"viewport",padding:{right:18}}}]}}),a}function ut(e){let t=e.tier;switch(t){case 0:t="Normal";break;case 1:t="Rare";break;case 2:t="Legendary"}let a=e.rarityFrameType;return"AllMonkeyTowerSets"===a&&(a="AllTowers"),`Rarity${t}Artifact${a}`}function ht(e){let t,a=Ue.artifacts[e];document.getElementById("artifact-popout")?(t=document.getElementById("artifact-popout"),t.innerHTML=""):(t=document.createElement("div"),t.id="artifact-popout",t.classList.add("error-modal-overlay"),document.body.appendChild(t));let n=document.createElement("div");n.classList.add("rogue-artifact-modal","rogue-bg"),t.appendChild(n);let i=document.createElement("div");i.classList.add("collection-modal-header"),i.style.backgroundColor="unset",n.appendChild(i);let r=document.createElement("div");r.classList.add("rogue-modal-body"),n.appendChild(r);let s=document.createElement("div");if(s.classList.add("collection-header-modal-left"),i.appendChild(s),"AllMonkeyTowerSets"!==a.rarityFrameType){let e=document.createElement("img");e.src=`../Assets/UI/${a.rarityFrameType}Icon.webp`,e.classList.add("rogue-modal-category"),s.appendChild(e)}let l=document.createElement("p");l.classList.add("collection-modal-header-text","black-outline","d-flex","ai-center"),l.style.padding="unset",l.style.height="64px",l.innerHTML=a.title,i.appendChild(l);let d=document.createElement("img");d.classList.add("collection-modal-close"),d.src="./Assets/UI/CloseBtn.webp",d.addEventListener("click",(()=>{t.remove()})),i.appendChild(d);let o=document.createElement("div");o.classList.add("d-flex","rogue-modal-top"),r.appendChild(o);let c=document.createElement("div");c.classList.add("d-flex"),o.appendChild(c);let p=document.createElement("div");p.classList.add("modal-trophy-div"),c.appendChild(p);let m=mt(a,"modal");if(p.appendChild(m),!Je.includes(e)){let e=document.createElement("div");e.classList.add("extracted-check-div","d-flex","jc-center");let t=document.createElement("p");t.classList.add("maps-progress-coop-toggle-text","black-outline"),t.innerHTML="Extracted:",e.appendChild(t);let n=document.createElement("input");n.classList.add("maps-progress-coop-toggle-input"),n.style.backgroundColor="rgba(0,0,0,0.36)",n.type="checkbox",n.checked=Fe.extractedArtifacts.includes(a.nameLocKey),e.appendChild(n)}let u=document.createElement("div");u.classList.add("item-details-div","jc-center","fg-1"),u.style.margin="10px",c.appendChild(u);let h=document.createElement("p");h.classList.add("trophy-store-item-description","ta-center"),h.style.marginBottom="unset",h.innerHTML=a.description,u.appendChild(h);let g=document.createElement("p");g.classList.add("trophy-store-item-obtain-method","ta-center"),g.style.marginTop="unset",u.appendChild(g);let f=document.createElement("div");f.classList.add("d-flex"),o.appendChild(f);let y=document.createElement("img");y.src="../Assets/UI/RoguePermanantArtifactsBtn.webp",y.classList.add("hero-starter-kit-img","rogue-popout-starter-icon"),f.appendChild(y);let b,k,L=document.createElement("div");if(L.classList.add("item-details-div","jc-center","fg-1"),L.style.margin="10px",f.appendChild(L),Je.includes(e)){let e=document.createElement("p");e.classList.add("font-gardenia","ta-center"),e.innerHTML="This artifact is a starter artifact.",e.style.fontSize="18px",L.appendChild(e)}else{b=document.createElement("div"),b.classList.add("extracted-check-div","d-flex","jc-center"),L.appendChild(b);let e=document.createElement("p");e.classList.add("maps-progress-coop-toggle-text","black-outline"),e.innerHTML="Extracted:",b.appendChild(e),k=document.createElement("input"),k.classList.add("maps-progress-coop-toggle-input"),k.style.backgroundColor="rgba(0,0,0,0.36)",k.type="checkbox",k.checked=Fe.extractedArtifacts.includes(a.nameLocKey),b.appendChild(k)}if(a.hasOwnProperty("starterKitHero")){let e=document.createElement("div");e.classList.add("d-flex"),o.appendChild(e);let t=document.createElement("img");t.src=`${we(a.starterKitHero.replace(/ /g,""))}`,t.classList.add("hero-starter-kit-img","rogue-popout-starter-icon"),e.appendChild(t);let n=document.createElement("div");n.classList.add("item-details-div","jc-center","fg-1"),n.style.margin="10px",e.appendChild(n);let i=document.createElement("p");i.classList.add("font-gardenia","ta-center"),i.innerHTML=`This artifact is available in ${We[a.starterKitHero]}'s starter kit.`,i.style.fontSize="18px",n.appendChild(i)}let v,C=[];if(Ue.artifacts.hasOwnProperty(a.baseId+"1")&&C.push(Ue.artifacts[a.baseId+"1"]),Ue.artifacts.hasOwnProperty(a.baseId+"2")&&C.push(Ue.artifacts[a.baseId+"2"]),Ue.artifacts.hasOwnProperty(a.baseId+"3")&&C.push(Ue.artifacts[a.baseId+"3"]),C.length>1){let e=document.createElement("div");e.classList.add("other-variants"),r.appendChild(e);let t=document.createElement("p");t.classList.add("other-variants-title","black-outline","ta-center"),t.style.fontSize="24px",t.innerHTML="Other Variants",e.appendChild(t);let n=document.createElement("div");n.classList.add("other-variants-div","d-flex","jc-center"),e.appendChild(n),C.forEach((e=>{let t=mt(e,"modal");t.addEventListener("click",(()=>{ht(e.nameLocKey)})),n.appendChild(t),e.nameLocKey===a.nameLocKey&&(v=t)}))}let E=()=>{Fe.extractedArtifacts.includes(a.nameLocKey)?(Fe.extractedArtifacts=Fe.extractedArtifacts.filter((e=>e!==a.nameLocKey)),m.classList.add("artifact-unextracted"),v&&v.classList.add("artifact-unextracted"),Ve[a.nameLocKey]&&Ve[a.nameLocKey].classList.add("artifact-unextracted"),Ge&&(Ge.innerHTML=`${Fe.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`),k.checked=!1,It()):(Fe.extractedArtifacts.push(a.nameLocKey),m.classList.remove("artifact-unextracted"),v&&v.classList.remove("artifact-unextracted"),Ve[a.nameLocKey]&&Ve[a.nameLocKey].classList.remove("artifact-unextracted"),Ge&&(Ge.innerHTML=`${Fe.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`),k.checked=!0,It())};Je.includes(e)||(b.addEventListener("click",E),m.addEventListener("click",E))}function gt(){let e=document.getElementById("starter-kits-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("artifacts-div","hero-starter-kits"),e.appendChild(t),Object.values(Ue.heroStarterKits).forEach((a=>{let n=document.createElement("div");n.classList.add("starter-kit-div"),e.appendChild(n);let i=document.createElement("img");i.src=`${Se(a.heroID.replace(/ /g,""))}`,i.classList.add("starter-kit-hero-square-img"),n.appendChild(i);let r=mt(Ue.artifacts[a.artifact]);r.addEventListener("click",(()=>{ht(a.artifact)})),n.appendChild(r),a.startingInstas.forEach((e=>{n.appendChild(ft(e))})),t.appendChild(n)}))}function ft(e){let t=e.baseId,a=JSON.parse(e.tiers),n=document.createElement("div");n.classList.add("insta-monkey-tier-container");let i=document.createElement("img");i.classList.add("insta-monkey-tier-img"),i.src=Le(t,a),n.appendChild(i);let r=document.createElement("p");return r.classList.add("insta-monkey-tier-text","black-outline"),r.innerHTML=`${a[0]}-${a[1]}-${a[2]}`,n.appendChild(r),n}function yt(e,t){let a=document.createElement("div");a.style.width=`${e}px`,a.style.height=`${e}px`,a.classList.add("avatar");let n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${e}px`,n.src="../Assets/UI/InstaTowersContainer.webp",a.appendChild(n);let i=document.createElement("img");return i.classList.add("avatar-img","noSelect"),i.style.width=`${e}px`,i.src=t,a.appendChild(i),a}function bt(){let e=document.getElementById("artifacts-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("insta-monkeys-header-bar","fd-column"),t.style.width="auto",t.style.gap="10px",t.style.padding="10px",e.appendChild(t);let a=document.createElement("p");a.classList.add("black-outline"),a.style.fontSize="32px",a.innerHTML="Export Image Options",t.appendChild(a);let n=document.createElement("p");n.classList.add("sku-roundset-selector-desc"),n.innerHTML="This will generate a nice image to share with others of your progress in collecting the artifacts.",t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","fd-column"),t.appendChild(i);let r=document.createElement("div");r.classList.add("rogue-profile-div","d-flex","fd-column"),r.style.width="550px",t.appendChild(r);let s=document.createElement("div");s.classList.add("rogue-banner-div","d-flex","ai-center"),s.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/${Fe.imageOptions.banner})`,s.style.gap="50px",r.appendChild(s);let l=yt(100,`Assets/ProfileAvatar/${Fe.imageOptions.avatar}`);s.appendChild(l);let d=document.createElement("input");d.classList.add("profile-name-input","font-gardenia","ta-center"),d.style.fontSize="20px",null!=Fe.imageOptions.name?d.value=Fe.imageOptions.name:d.placeholder="Enter Name",d.addEventListener("input",(()=>{Fe.imageOptions.name=d.value,It()})),s.appendChild(d);let o=document.createElement("div");o.classList.add("d-flex","jc-center"),o.style.gap="20px",t.appendChild(o);let c=document.createElement("div");c.classList.add("start-button","black-outline"),c.innerHTML="Change Avatar",c.style.width="auto",c.addEventListener("click",(()=>{kt(Fe.imageOptions.avatar)})),o.appendChild(c);let p=document.createElement("div");p.classList.add("start-button","black-outline"),p.innerHTML="Change Banner",p.style.width="auto",p.addEventListener("click",(()=>{Lt(Fe.imageOptions.banner)})),o.appendChild(p);let u=document.createElement("div");u.classList.add("rogue-sort-preview"),t.appendChild(u);let h=document.createElement("div");h.classList.add("maps-progress-views","jc-center"),u.appendChild(h);let g=document.createElement("p");g.classList.add("maps-progress-coop-toggle-text","black-outline"),g.classList.add("black-outline"),g.innerHTML="Sort:",h.appendChild(g);let f=document.createElement("div");f.classList.add("map-progress-filter-difficulty"),h.appendChild(f);let y=document.createElement("select");y.classList.add("map-progress-filter-difficulty-select"),y.value=Fe.artifactSort;["Name","Rarity (Ascending)","Rarity (Descending)"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,y.appendChild(t)})),f.appendChild(y),y.value=Fe.imageOptions.sort;let b=document.createElement("div");b.classList.add("preview-artifacts-div"),u.appendChild(b);let k=()=>{b.innerHTML="";let e=[];switch(["SplodeyDarts","SquadronTogether","DivineIntervention"].forEach((t=>{e.push(Ue.artifacts[t+"1"]),e.push(Ue.artifacts[t+"2"]),e.push(Ue.artifacts[t+"3"])})),Fe.imageOptions.sort){case"Name":break;case"Rarity (Ascending)":e=e.sort(((e,t)=>e.tier-t.tier));break;case"Rarity (Descending)":e=e.sort(((e,t)=>t.tier-e.tier));break;case"Category":e=e.sort(((e,t)=>e.rarityFrameType.localeCompare(t.rarityFrameType)))}e.forEach((e=>{b.appendChild(mt(e,"preview"))}))};k(),y.addEventListener("change",(()=>{Fe.imageOptions.sort=y.value,It(),k()}));let L=document.createElement("div");L.classList.add("start-button","black-outline"),L.innerHTML="Download Image",L.style.width="auto",L.addEventListener("click",(()=>{vt()})),t.appendChild(L),Fe.selectedOAK||Object.entries(m).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("previous-oak-entry"),a.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(${t.banner})`,i.appendChild(a),a.appendChild(yt(100,t.avatar));let n=document.createElement("p");n.classList.add("profile-name","black-outline"),n.innerHTML=t.displayName,a.appendChild(n);let r=document.createElement("img");r.classList.add("delete-button"),r.src="./Assets/UI/ContinueBtn.webp",r.addEventListener("click",(()=>{Fe.imageOptions.avatar=t.avatar.split("/")[2],Fe.imageOptions.banner=t.banner.split("/")[2],Fe.imageOptions.name=t.displayName,d.value=t.displayName,s.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/${Fe.imageOptions.banner})`,l.querySelector(".avatar-img").src=`Assets/ProfileAvatar/${Fe.imageOptions.avatar}`,d.value=Fe.imageOptions.name,i.innerHTML="",Fe.selectedOAK=!0,It()})),a.appendChild(r)}))}function kt(){let e=document.createElement("div");e.classList.add("error-modal-overlay"),document.body.appendChild(e);let t=document.createElement("div");t.classList.add("collection-modal","rogue-bg"),e.appendChild(t);let a=document.createElement("div");a.classList.add("collection-modal-header"),a.style.backgroundColor="unset",t.appendChild(a);let n=document.createElement("div");n.classList.add("rogue-modal-body"),t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","jc-center","ai-center","f-wrap"),n.appendChild(i);for(let t=1;t<=Re.profileAvatars;t++){if(107==t)continue;let a=yt(100,`Assets/ProfileAvatar/ProfileAvatar${t<10?"0"+t:t}.webp`);a.addEventListener("click",(()=>{document.querySelector(".rogue-profile-div .avatar-img").src=`Assets/ProfileAvatar/ProfileAvatar${t<10?"0"+t:t}.webp`,Fe.imageOptions.avatar=`ProfileAvatar${t<10?"0"+t:t}.webp`,It(),e.remove()})),i.appendChild(a)}}function Lt(){let e=document.createElement("div");e.classList.add("error-modal-overlay"),document.body.appendChild(e);let t=document.createElement("div");t.classList.add("collection-modal","rogue-bg"),e.appendChild(t);let a=document.createElement("div");a.classList.add("collection-modal-header"),a.style.backgroundColor="unset",t.appendChild(a);let n=document.createElement("div");n.classList.add("rogue-modal-body"),t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","jc-center","ai-center","f-wrap"),n.appendChild(i);for(let t=1;t<=Re.profileBanners;t++){let a=document.createElement("img");a.src=`Assets/ProfileBanner/ProfileBanner${t}.webp`,a.classList.add("profile-banner-img"),a.addEventListener("click",(()=>{document.querySelector(".rogue-banner-div").style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/ProfileBanner${t}.webp)`,Fe.imageOptions.banner=`ProfileBanner${t}.webp`,It(),e.remove()})),i.appendChild(a)}for(let t=1;t<=Re.teamsBanners;t++){let a=document.createElement("img");a.src=`Assets/ProfileBanner/TeamsBanner${t}.webp`,a.classList.add("profile-banner-img"),a.addEventListener("click",(()=>{document.querySelector(".rogue-banner-div").style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/TeamsBanner${t}.webp)`,Fe.imageOptions.banner=`TeamsBanner${t}.webp`,It(),e.remove()})),i.appendChild(a)}}function vt(){let e=document.getElementById("rogue-image-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("rogue-image","totem-bg"),e.appendChild(t);let a=document.createElement("div");a.classList.add("rogue-image-header"),t.appendChild(a),a.style.backgroundImage="url(../Assets/UI/RogueTopBarLong.webp)";let n=document.createElement("div");n.classList.add("rogue-profile-div","rogue-header-sides"),n.style.backgroundImage=`url(../Assets/ProfileBanner/${Fe.imageOptions.banner})`,a.appendChild(n),n.appendChild(yt(100,`Assets/ProfileAvatar/${Fe.imageOptions.avatar}`));let i=document.createElement("p");i.classList.add("profile-name","black-outline"),i.style.fontSize="40px",i.innerHTML=Fe.imageOptions.name,n.appendChild(i);let r=document.createElement("div");r.classList.add("rogue-title-div"),a.appendChild(r);const s=document.createElement("h1");s.classList.add("title","rogue-title"),s.innerHTML="Extracted Artifacts",r.appendChild(s);let l=document.createElement("div");l.classList.add("rogue-header-sides","rogue-right-div"),a.appendChild(l);let d=document.createElement("p");d.classList.add("rogue-progress-text-export","black-outline"),d.innerHTML=`${Fe.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`,l.appendChild(d);let o=document.createElement("img");o.src="../Assets/UI/ArtifactBag.webp",o.classList.add("artifact-bag-export"),l.appendChild(o);let c=document.createElement("div");c.classList.add("rogue-image-artifacts"),t.appendChild(c);let p=document.createElement("div");c.appendChild(p);let m=document.createElement("div");m.classList.add("artifacts-div"),p.appendChild(m);let u=document.createElement("div");u.classList.add("artifacts-div"),u.style.justifyContent="space-between",p.appendChild(u);let h={...Ue.artifacts};switch(Fe.imageOptions.sort){case"Name":break;case"Rarity (Ascending)":h=Object.fromEntries(Object.entries(h).sort(((e,t)=>e[1].tier-t[1].tier)));break;case"Rarity (Descending)":h=Object.fromEntries(Object.entries(h).sort(((e,t)=>t[1].tier-e[1].tier)));break;case"Category":h=Object.fromEntries(Object.entries(h).sort(((e,t)=>e[1].rarityFrameType.localeCompare(t[1].rarityFrameType))))}Object.values(h).forEach((e=>{Je.includes(e.nameLocKey)||u.appendChild(mt(e,"modal"))}));let g=document.createElement("div");g.classList.add("rogue-bottom-text-div","d-flex","jc-between"),g.style.fontSize="24px",g.style.padding="10px 20px",t.appendChild(g);let f=document.createElement("p");f.classList.add("rogue-bottom-text","black-outline"),f.innerHTML=(new Date).toLocaleDateString(),g.appendChild(f);let y=document.createElement("p");y.classList.add("rogue-bottom-text","black-outline"),y.innerHTML="Generated From btd6apiexplorer.github.io/rogue",g.appendChild(y),qe(),document.getElementById("rogue-image-content").style.display="block",setTimeout((function(){htmlToImage.toJpeg(document.getElementById("rogue-image-content"),{width:1800,quality:.85,style:{opacity:1},pixelRatio:2}).then((function(e){var t=document.createElement("a");t.href=e,t.download=`RogueLegendsArtifacts_${(new Date).toLocaleDateString()}.webp`,t.click(),Ye()})).then((function(){document.getElementById("rogue-image-content").style.display="none"}))}),1e3)}function Ct(){let e=localStorage.getItem("rogueSaveData"),t=document.createElement("a");t.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),t.download=`RogueLegendsArtifactsSave_${(new Date).toLocaleDateString()}.json`,t.click()}function Et(){let e=document.createElement("input");e.type="file",e.accept=".json",e.click(),e.addEventListener("change",(e=>{let t=e.target.files[0],a=new FileReader;a.onload=function(e){let t=e.target.result;localStorage.setItem("rogueSaveData",t),console.log("Imported Save Data"),Tt()},a.readAsText(t)}))}function St(e){let t=document.getElementsByClassName("loading-icon")[0].cloneNode(!0);t.classList.add("loading-icon-leaderboard"),t.style.height="unset",e.appendChild(t)}function wt(e){null!=e?document.body.style.backgroundColor=`rgb(${255*e[0]},${255*e[1]},${255*e[2]})`:document.body.style.removeProperty("background-color")}function At(e,t,a,n,i){switch(e){case 1:return a*(n/i);case 2:return t*(i/n);case 3:return i*(t/a);case 4:return n*(a/t)}}function Bt(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function xt(e,t,a){if(w&&!a)return;let n=document.createElement("div");n.classList.add("error-modal-overlay"),document.body.appendChild(n);let i=document.createElement("div");i.id="error-modal",i.classList.add("error-modal"),n.appendChild(i);let r=document.createElement("div");r.id="error-modal-header",r.classList.add("error-modal-header"),i.appendChild(r);let s=document.createElement("img");s.id="error-modal-header-img",s.classList.add("error-modal-header-img"),s.src="./Assets/UI/BadConnectionBtn.webp",r.appendChild(s);let l=document.createElement("p");l.classList.add("error-modal-header-text","black-outline"),l.innerHTML="Error",r.appendChild(l);let d=document.createElement("div");d.classList.add("error-modal-dummy"),r.appendChild(d);let o=document.createElement("div");o.id="error-modal-content",o.classList.add("error-modal-content"),o.innerHTML=""+e,i.appendChild(o);let c=document.createElement("div");if(c.classList.add("error-modal-content"),"Invalid user ID / Player Does not play this game"===e)c.innerHTML="Please try again or create a new Open Access Key.",i.appendChild(c);if("ratelimit"==t){let e=document.createElement("div");e.classList.add("error-toggle-div"),i.appendChild(e);let t=document.createElement("p");t.classList.add("maps-progress-coop-toggle-text","black-outline"),t.innerHTML="Manually Load Profiles: ",e.appendChild(t);let a=document.createElement("input");a.classList.add("maps-progress-coop-toggle-input"),a.type="checkbox",a.checked=x,a.addEventListener("change",(()=>{x=!!a.checked})),e.appendChild(a)}let p=document.createElement("div");p.classList.add("error-modal-ok-button-div"),i.appendChild(p);let m=document.createElement("div");m.classList.add("start-button","modal-ok-button","black-outline"),m.innerHTML="OK",m.addEventListener("click",(()=>{w=!1,document.body.removeChild(n)})),p.appendChild(m);let u=document.createElement("img");u.classList.add("error-modal-close"),u.src="./Assets/UI/CloseBtn.webp",u.addEventListener("click",(()=>{w=!1,document.body.removeChild(n)})),o.appendChild(u),w=!0}function It(){localStorage.setItem("rogueSaveData",JSON.stringify(Fe))}function Tt(){let e=localStorage.getItem("rogueSaveData");e&&(Fe=JSON.parse(e)),re()}lt.id="rogue-image-content",lt.classList.add("rogue-image-content"),lt.style.display="none",lt.style.opacity="0",st.appendChild(lt);