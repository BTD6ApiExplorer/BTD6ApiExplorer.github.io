let e,t,a="",n={},i={},r={},s={},l=null,d=null,c=null,o=1,p=null,m={},u=!1,h={},g=null,f=null,y=null,b={},L=null,k=null,v=1,C=null,E="newest",w=!1,S=!1,A={},x=!1,O=!1,B=100,I=200,T=0,M=0,P=Date.now(),j=[],H=!1,D={},$={};function R(e,t){j.push({id:e,request:t}),H||G()}function K(e){j=j.filter((t=>t.id!==e))}function N(){const e=T/(B/2);return I+I*Math.pow(e,2)}async function G(){H||(H=!0,function e(){if(0===j.length)return void(H=!1);const t=Date.now();if(t-P>=18e4&&(T=0,P=t),T<B){const e=j.shift();T++,e.request()}const a=N();setTimeout(e,a)}())}async function F(e,t){let a=null;try{w?(a=await fetch(e,{cache:"reload"}),w=!1,x=!1):(a=await fetch(e),x=!1)}catch(e){return navigator.onLine?(x=!0,j=[],jt("You have hit the rate limit.<br>If you are browsing the leaderboards or content browsers, please slow down!<br><br>The rate limit will clear after a short time. You can also help prevent rate limiting by toggling the setting below which stops player profiles from loading automatically.","ratelimit"),_e(),pressedStart=!1,`You have hit the rate limit. [${e}]`):(jt("You are currently offline. Please check your internet connection.","api"),`You are currently offline. [${e}]`)}try{let e=await a.json();return 1==e.success?t(e):"Rate limit"==e.reason?(S=!0,jt("You have hit the rate limit. Please try again later.","api")):(document.getElementById("loading").style.transform="scale(0)",pressedStart=!1,jt(e.error,"api")),e}catch(e){return jt(`Something went wrong with the request. Response Code: ${a.status} [${e}]`,"api"),`Something went wrong with the request. Response Code: ${a.status} [${e}]`}}async function U(e){w=!0;let t=!0;if(await F(`https://data.ninjakiwi.com/btd6/save/${e}`,(a=>{n=a.body,i=a.model,readyFlags[0]=1,t=!1,J(e)})),t&&!x){let t=document.getElementsByClassName("error-modal-overlay");for(element of t)element.parentNode.removeChild(element);delete m[e],se(),generateFrontPage(),jt("Your Open Access Key has expired. Please make a new one and try again.","expire",!0)}}async function J(e){w=!0,F(`https://data.ninjakiwi.com/btd6/users/${e}`,(t=>{r=t.body,s=t.model,m[e]={displayName:r.displayName,avatar:He(r),banner:De(r)},se(),readyFlags[1]=1,fetchDependencies()}))}async function z(){null==l?F("https://data.ninjakiwi.com/btd6/races",(e=>{l=e.body,generateRaces()})):generateRaces()}async function V(e){return l&&l[e]&&"string"==typeof l[e].metadata?F(l[e].metadata,(t=>(l[e].metadata=t.body,l[e]))):l[e]}async function W(){return c?(d=null,F(`${c}?page=${o}`,(e=>(d=e.body,p=d.length,document.getElementById("leaderboard-footer-page-number").innerHTML=`Page ${o} (#${o*p-(p-1)} - ${o*p})`,d)))):jt("Leaderboard Fetch Error: No leaderboard data found")}async function q(e){return null==e&&(e=c),j=[],null==D[c]&&(D[c]={entries:[]},Q(e)),D[c]}async function Q(e){null!=e&&(D[c].nextRequested||(T++,await F(e,(t=>{D[c].entries=D[c].entries.concat(t.body),D[c].hasOwnProperty("entryPerPage")||(D[c].entryPerPage=t.body.length),addLeaderboardEntries(t.body,isNaN(e.split("=")[1])?1:parseInt(e.split("=")[1]),D[c].entryPerPage?D[c].entryPerPage:t.body.length),D[c].next=t.next,D[c].nextRequested=!1}))))}async function Y(){null==g?F("https://data.ninjakiwi.com/btd6/bosses",(e=>{g=e.body,generateBosses(showElite)})):generateBosses(showElite)}async function Z(e,t){return g&&g[e]&&"string"==typeof g[e][t?"metadataElite":"metadataStandard"]?F(g[e][t?"metadataElite":"metadataStandard"],(a=>(g[e][t?"metadataElite":"metadataStandard"]=a.body,g[e]))):g[e]}async function X(){null==f?F("https://data.ninjakiwi.com/btd6/ct",(e=>{f=e.body,generateCTs()})):generateCTs()}async function _(e){let t=null;return await F(e,(e=>(t=e.body,t))),t}async function ee(){if(null!=y)return y;await F("https://data.ninjakiwi.com/btd6/challenges/filter/daily",(e=>(y=e.body,y)))}async function te(e){return null==b[e]&&await F(`https://data.ninjakiwi.com/btd6/challenges/challenge/${e}`,(t=>(b[e]=t.body,b[e]))),b[e]}async function ae(){return k?(L=null,F(`${k}${E}?page=${v}`,(e=>(L=e.body,C=L.length,document.getElementById("browser-footer-page-number").innerHTML=`Page ${v} of 4`,d)))):jt("Content Browser Fetch Error: No data found")}async function ne(e){let t=e.split("/").pop();return null==h[t]&&await F(e,(e=>{h[t]=e.body})),h[t]}async function ie(e){return null==A[e]&&await F(`https://data.ninjakiwi.com/btd6/maps/map/${e}`,(t=>(A[e]=t.body,A[e]))),A[e]}function re(){null!=localStorage.getItem("BTD6OAKStorage")&&(m=JSON.parse(localStorage.getItem("BTD6OAKStorage")))}function se(){localStorage.setItem("BTD6OAKStorage",JSON.stringify(m))}function le(e){e.substring(0,3),parseInt(e.substring(3,7));let t=e.substring(7);return[parseInt(t.substring(0,4)),parseInt(t.substring(4,6)),parseInt(t.substring(6,8))]}function de(e,t){let a=new Date(2024,4,25),n=(t?2101:2114)-parseInt(e);return a.setDate(a.getDate()-n),(t?"adv":"rot")+e+a.toISOString().substring(0,10).replace(/-/g,"")}function ce(e,t){let a=new Date(e),n=new Date(2024,4,25).getTime()-a.getTime();return(t?"adv":"rot")+((t?2101:2114)-Math.floor(n/864e5))+e.replace(/-/g,"")}G();const oe={Clicker:"Bloons Master","Superior Clicker":"Superior Bloons Master","Ultimate Clicker":"Ultimate Bloons Master","Knowledgable Primate":"Knowledgeable Primate","Triple Threat":"Triple threat","Small Bloons":"Alchermistman and Bloonacleboy","Master of Life":"Master of life","What did it cost":"What did it cost? - Everything","2 Mega Pops":"2 MegaPops","Looking fab":"Lookin fab",GoldenTicket:"Golden Ticket","Axis of Havok":"Axis of Havoc","Co-op Popper!":"Co-op Popper",CouponCrazy:"Coupon Crazy",LimitedRun:"Limited Run",ALaCode:"A La Code",InstantGratification:"Instant Gratification","Achievement Of Achievements":"Achievement of Achievements","What is this new Bloonery":"What is this new Bloonery?","Who's the Boss":"Who's the Boss?","I'llBeBack":"I'll Be Back",SoSpiiiceyNinjaKiwi:"So Spiiicey Ninja Kiwi",DavidsVsGoliath:"Davids vs Goliath",ToolsToDarwin:"Tools to Darwin",BigSpender:"Big Spender",NotLackingCriticalInformation:"Not Lacking Critical Information",StubbornStrategy:"Stubborn Strategy","Hook Line And Sinker":"Hook, Line, and Sinker",CrashOfTheTitans:"Crash of the Titans","So Shiny":"So Shiny!","Ultimate Team Up":"Ultimate Team-up",StudentLoans:"Student Loans",StickySituation:"Sticky Situation",NoHarvest:"No Harvest",ReadyPlayerOne:"Ready Player One?",TheDailyReid:"The Daily Reid",InstaCentury:"Insta Century"},pe=Object.entries(oe).reduce(((e,[t,a])=>(e[a]=t,e)),{}),me={ObynOceanGuardian:"OceanObyn",MoltenObyn:"MountainObyn",JoanOfArcAdora:"JoanOfArc",CyberQuincy:"QuincyCyber",ETnEtienne:"ETn",SentaiCaptainChurchill:"SentaiChurchill",SleighCaptainChurchill:"SleighChurchill",TinkerfairyRosalia:"RosaliaTinkerfairy"},ue={Spikeopult:"Spike-o-pult",BuccaneerLongRange:"LongRange",BuccaneerGrapeShot:"GrapeShot",BuccaneerCrowsNest:"CrowsNest",BuccaneerHotShot:"HotShot",BuccaneerCarrierFlagship:"CarrierFlagship",BuccaneerCannonShip:"CannonShip",BuccaneerMerchantman:"Merchantman",BuccaneerFavoredTrades:"FavoredTrades",BuccaneerAircraftCarrier:"AircraftCarrier",BuccaneerDestroyer:"Destroyer",BuccaneerTradeEmpire:"TradeEmpire",BuccaneerPirateLord:"PirateLord",BuccaneerMonkeyPirates:"MonkeyPirates",HeattippedDarts:"HeatTippedDart",BioncBoomerang:"BionicBoomerang",LargeCalibre:"LongCalibre",LaserBlasts:"LaserBlast",GuidedMagic:"GuildedMagic",MortarRapidReload:"RapidReload",SupplyDrop:"CashDrop",PlasmaBlasts:"PlasmaBlast",XXXLTrap:"XXXL",OversizeNails:"OversizedNails",CenteredPath:"FlightOrders",Shockwave:"ShellShock",Monkeyopolis:"Metropolis",Spectre:"Specter",TrueSunGod:"TrueSonGod",HydraRocketPods:"HydraRockets",DartMonkeyParagon:"ApexPlasmaMaster",BoomerangMonkeyParagon:"GlaiveDominus",NinjaMonkeyParagon:"AscendedShadow",EngineerMonkeyParagon:"MasterBuilder",WizardMonkeyParagon:"MagusPerfectus",MonkeyAceParagon:"GoliathDoomship",MonkeyBuccaneerParagon:"NavarchOfTheSeas",MonkeySubParagon:"NauticSiegeCore",SmartSpikes:"DirectedSpikes",TackShooterParagon:"CycloneOfFireAndMetal"};let he={"Directed Spikes":"Smart Spikes","Directed Spikes Description":"Smart Spikes Description",CircusGwendolinSkinName:"HarlegwenGwendolinSkinName",CircusGwendolinSkinDescription:"HarlegwenGwendolinSkinDescription",OctoJonesSkinName:"OctoJonesStrikerJonesSkinName",OctoJonesSkinDescription:"OctoJonesStrikerJonesSkinDescription",MoltenObynSkinName:"ObynMountainGuardianSkinName",MoltenObynSkinDescription:"ObynMountainGuardianSkinDescription",SushiBentoSkinName:"SushiBentoBenjaminSkinName",SushiBentoSkinDescription:"SushiBentoBenjaminSkinDescription",KaijuPatSkinName:"KaijuPatFustySkinName",KaijuPatSkinDescription:"KaijuPatFustySkinDescription",GalaxiliSkinName:"GalaxiliEziliSkinName",GalaxiliSkinDescription:"GalaxiliEziliSkinDescription",VoidoraSkinName:"VoidoraAdoraSkinName",VoidoraSkinDescription:"VoidoraAdoraSkinDescription",VikingSaudaSkinName:"VikingSaudaSaudaSkinName",VikingSaudaSkinDescription:"VikingSaudaSaudaSkinDescription",JiangshiSaudaSkinName:"JiangshiSaudaSaudaSkinName",JiangshiSaudaSkinDescription:"JiangshiSaudaSaudaSkinDescription",DreadPirateBrickellSkinName:"DreadPirateBrickellAdmiralBrickellSkinName",DreadPirateBrickellSkinDescription:"DreadPirateBrickellAdmiralBrickellSkinDescription",LifeguardBrickellSkinName:"LifeguardBrickellAdmiralBrickellSkinName",LifeguardBrickellSkinDescription:"LifeguardBrickellAdmiralBrickellSkinDescription",PsimbalsSkinName:"PsimbalsPsiSkinName",PsimbalsSkinDescription:"PsimbalsPsiSkinDescription",GeraldoGentlemanGadgeteerSkinName:"GentlemonkeyGadgeteerGeraldoSkinName",GeraldoGentlemanGadgeteerSkinDescription:"GentlemonkeyGadgeteerGeraldoSkinDescription","Mode Easy":"Easy","Mode Medium":"Medium","Mode Hard":"Hard","Mode Impoppable":"Impoppable","Mode Sandbox":"Sandbox",RosaliaTinkerfairySkinName:"TinkerfairyRosaliaSkinName",RosaliaTinkerfairySkinDescription:"TinkerfairyRosaliaSkinDescription"},ge={Easy:"Bronze",PrimaryOnly:"Bronze01",Deflation:"Bronze02",Medium:"Silver",MilitaryOnly:"Silver01",Apopalypse:"Silver03",Reverse:"Silver02",Hard:"Gold",MagicOnly:"Gold01",DoubleMoabHealth:"Gold03",HalfCash:"Gold04",AlternateBloonsRounds:"Gold02",Impoppable:"Impoppable",Clicks:"ImpoppableRuby","CHIMPS-BLACK":"ImpoppableHematite"},fe={"Scientist Gwendolin":"ScientistGwendolin","Biker Bones":"BikerBones","Sentai Captain Churchill":"SentaiCaptainChurchill","Cyber Quincy":"Cyber Quincy","Octo Jones":"OctoJones","Sleigh Captain Churchill":"SleighCaptainChurchill","Wolfpack Quincy":"WolfpackQuincy",ScientistGwendolin:"Scientist Gwendolin",BikerBones:"Biker Bones",SentaiCaptainChurchill:"Sentai Captain Churchill",CyberQuincy:"Cyber Quincy",OctoJones:"Octo Jones",SleighCaptainChurchill:"Sleigh Captain Churchill",WolfpackQuincy:"Wolfpack Quincy"},ye=["ZMYVERW","ZMYUWTV","ZMYUDTK","ZMYVPGA","ZMYVPFH","ZMYWHPC"];function be(e,t){return"WizardMonkey"==e?`Assets/TowerIcon/${t}-Wizard.webp`:`Assets/TowerIcon/${t}-${e}.webp`}function Le(e,t){return"WizardMonkey"==e?`Assets/UI/InstaContainer/${t}-Wizard.webp`:`Assets/UI/InstaContainer/${t}-${e}.webp`}function ke(e,t){let a=Math.max(t[0],t[1],t[2]);switch(Math.max(t[0],t[1],t[2])){case parseInt(t[0]):a=`${a}00`;break;case parseInt(t[1]):a=`0${a}0`;break;case parseInt(t[2]):a=`00${a}`}return"WizardMonkey"==e?`Assets/InstaMonkeyIcon/${a}-WizardInsta.webp`:`Assets/InstaMonkeyIcon/${a}-${e}Insta.webp`}function ve(e){return e=e.replace(/[^a-zA-Z0-9]/g,""),ue[e]?`Assets/UpgradeIcon/${ue[e]}UpgradeIcon.webp`:`Assets/UpgradeIcon/${e}UpgradeIcon.webp`}function Ce(e){return"SubAdmiral"==e?"Assets/KnowledgeIcon/NavalUpgradesIcon.webp":`Assets/KnowledgeIcon/${e}Icon.webp`}function Ee(e,t){return 1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function we(e){return`Assets/HeroIconSquare/HeroIcon${e=me[e]||e}.webp`}function Se(e){return`Assets/HeroIconCircle/HeroIcon${e=me[e]||e}.webp`}function Ae(e,t){return e=me[e]||e,1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function xe(e){return"#ouch"==e?"Assets/MapIcon/MapSelectouchButton.webp":`Assets/MapIcon/MapSelect${e}Button.webp`}function Oe(e){return`Assets/PowerIcon/${e}Icon.webp`}function Be(e,t){return t?"Assets/AchievementIcon/HiddenIcon.webp":`Assets/AchievementIcon/${e}Icon.webp`}function Ie(e){return oe[e]||e}function Te(e){return`Assets/MedalIcon/${e}.webp`}function Me(e){return`Assets/ModeIcon/${e}Btn.webp`}function Pe(e){switch(e.type){case"MonkeyMoney":return"Assets/UI/BloonjaminsIcon.webp";case"Power":return Oe(e.power);case"InstaMonkey":return ke(e.tower,e.tiers);case"KnowledgePoints":return"Assets/UI/KnowledgeIcon.webp";case"RandomInstaMonkey":return`Assets/UI/InstaRandomTier${0==e.tier?1:e.tier}.webp`;case"Trophy":return"Assets/UI/TrophyIcon.webp";default:return`Assets/UI/${e.value}Icon.webp`}}function je(e){return`Assets/ProfileAvatar/${e}.webp`}function He(e){if(0==e.avatar)return"Assets/ProfileAvatar/ProfileAvatar01.webp";let t=parseInt(e.avatar.replace(/\D/g,""));return""==e.avatar||isNaN(t)?"Assets/ProfileAvatar/ProfileAvatar01.webp":t<=Ge.profileAvatars?`Assets/ProfileAvatar/${e.avatar}.webp`:e.avatarURL}function De(e){if(0==e.banner)return"Assets/ProfileBanner/TeamsBannerDeafult.webp";let t=parseInt(e.banner.replace(/\D/g,""));return""==e.banner||isNaN(t)?"Assets/ProfileBanner/TeamsBannerDeafult.webp":t<=Ge.profileBanners?`Assets/ProfileBanner/${e.banner}.webp`:e.bannerURL}function $e(e){return ye.includes(e)?`Assets/CustomMapIcon/${e}.webp`:`https://data.ninjakiwi.com/btd6/maps/map/${e}/preview`}function Re(e){return he[e]?Fe[he[e]]:Fe[e]?Fe[e]:e}let Ke,Ne,Ge={},Fe={},Ue={},Je={extractedArtifacts:[],imageOptions:{avatar:"ProfileAvatar01.webp",banner:"ProfileBanner48.webp",name:null,sort:"Rarity (Ascending)"},selectedOAK:!1,clickToCollect:!1,artifactFilter:"All",artifactSort:"Name",highlightExtracted:!1,extractionFilter:"All",showStarterArtifacts:!0,showBossArtifacts:!0,categoryFilter:["Common","Rare","Legendary"]},ze=["BouncingProjectiles3","CeramicChunker2","FrostedTips1","OneShot2","SlowerIsHarder1","SpiritOfAdventure2","SwellingSpikes1","Wackywibblywavey1"],Ve=["EssenceOfBloonarius1","EssenceOfVortex1","EssenceOfDreadbloon1","EssenceOfPhayze1","EssenceOfBlastapopoulos1"],We={Quincy:"Quincy","Cyber Quincy":"Cyber Quincy","Wolfpack Quincy":"Wolfpack Quincy",Gwendolin:"Gwendolin",CircusGwendolin:"Circus Gwendolin","Scientist Gwendolin":"Scientist Gwendolin",StrikerJones:"Striker Jones","Biker Bones":"Biker Bones","Octo Jones":"Octo Jones",ObynGreenfoot:"Obyn Greenfoot",ObynOceanGuardian:"Ocean Guardian Obyn",MoltenObyn:"Molten Obyn",CaptainChurchill:"Captain Churchill","Sentai Captain Churchill":"Sentai Churchill","Sleigh Captain Churchill":"Sleigh Churchill",Benjamin:"Benjamin",BenJammin:"BenJammin",SushiBento:"Sushi Bento",PatFusty:"Pat Fusty",FustyTheSnowman:"Fusty the Snowman",KaijuPat:"Kaiju Pat",Ezili:"Ezili",SmudgeCatt:"Smudge Catt",Galaxili:"Galaxili",Adora:"Adora",JoanOfArcAdora:"Joan of Arc Adora",Voidora:"Voidora",Etienne:"Etienne",ETnEtienne:"ETn",BookWyrmEtienne:"Book Wyrm Etienne",Sauda:"Sauda",VikingSauda:"Viking Sauda",JiangshiSauda:"Jiangshi Sauda",AdmiralBrickell:"Admiral Brickell",DreadPirateBrickell:"Dread Pirate Brickell",LifeguardBrickell:"Lifeguard Brickell",Psi:"Psi",Psimbals:"Psimbals",DreamstatePsi:"Dreamstate Psi",Geraldo:"Geraldo",GeraldoGentlemanGadgeteer:"Gentleman Gadgeteer Geraldo",Corvus:"Corvus",Rosalia:"Rosalia",RosaliaTinkerfairy:"Rosalia Tinkerfairy",SheRa:"She-Ra Adora"},qe={},Qe={},Ye="home";function Ze(){let e=["EssenceOfLych1","Token","ProjectileCarousel1"];for(let[e,t]of Object.entries(Ue.heroStarterKits))Ue.artifacts[t.artifact].starterKitHero=e;for(let e in Ue.artifacts)e.startsWith("Boost")&&delete Ue.artifacts[e];for(let t of e)delete Ue.artifacts[t]}function Xe(){document.getElementById("loading").style.removeProperty("transform")}function _e(){document.getElementById("loading").style.transform="scale(0)"}Xe(),Promise.all([fetch("./data/Constants.json").then((e=>e.json())),fetch("./data/English.json").then((e=>e.json())),fetch("./data/rogueData.json").then((e=>e.json()))]).then((([e,t,a])=>{Ge=e,Fe=t,Ue=a,Dt(),Ze(),ut()})).catch((e=>{console.error("Error:",e),jt(e,"js")}));const et=document.createElement("div");document.body.appendChild(et),document.body.classList.add("hex-bg");const tt=document.createElement("div");tt.classList.add("header"),et.appendChild(tt);const at=document.createElement("div");at.classList.add("header-div"),tt.appendChild(at);let nt=document.createElement("img");nt.src="../Assets/UI/BackBtn.webp",nt.classList.add("back-button","pointer"),nt.addEventListener("click",(()=>{pt()})),at.appendChild(nt);const it=document.createElement("h1");it.classList.add("title"),it.innerHTML="Rogue Legends Artifacts",at.appendChild(it);const rt=document.createElement("div");rt.classList.add("content"),et.appendChild(rt);const st=document.createElement("div");st.id="rogue-content",st.classList.add("content-div","extras"),st.style.display="flex",rt.appendChild(st);const lt=document.createElement("div");lt.id="artifacts-content",lt.classList.add("extras","content-div"),lt.style.display="none",rt.appendChild(lt);const dt=document.createElement("div");dt.id="starter-kits-content",dt.classList.add("extras","content-div"),dt.style.display="none",rt.appendChild(dt);let ct=document.createElement("div");ct.classList.add("rogue-image-wrapper"),ct.style.overflow="hidden",et.appendChild(ct);const ot=document.createElement("div");function pt(){switch(Ye){case"home":mt();break;case"artifactInfoModal":case"imageBuilderModal":document.querySelector(".error-modal-overlay").remove(),Ye="home";break;case"artifactSettings":ht(),Ye="home"}}function mt(e){switch(Pt(),nt.classList.add("visible"),e){case"Artifacts":st.style.display="none",lt.style.display="flex",ht();break;case"Hero Starter Kits":st.style.display="none",dt.style.display="flex",vt();break;case"Export Image":st.style.display="none",lt.style.display="flex",wt();break;default:st.style.display="flex",lt.style.display="none",dt.style.display="none",ot.style.display="none",nt.classList.remove("visible")}}function ut(){_e();let e=document.createElement("div");e.classList.add("progress-page","f-wrap"),st.appendChild(e);let t=document.createElement("div");t.classList.add("selectors-div"),e.appendChild(t);let a=document.createElement("p");a.classList.add("sku-roundset-selector-desc"),a.innerHTML="Note: At this time, the artifacts you have extracted are not available via the BTD6 Open Data API. You must manually mark them as extracted. This data will be saved in the current browsers local storage, and will not be cleared unless you clear your browsing data. If you prefer to keep a backup, use Export/Import Data.",t.appendChild(a);Object.entries({Artifacts:"RoguePermanantArtifactsBtn","Hero Starter Kits":"RogueStarterKitsBtn","Export Image":"ArtifactShareBtn"}).forEach((([e,a])=>{let n=document.createElement("div");n.classList.add("rogue-bg","d-flex","jc-between","ai-center","pointer"),n.style.margin="10px",n.addEventListener("click",(()=>{mt(e)})),t.appendChild(n);let i=document.createElement("img");i.classList.add("selector-img"),i.src="../Assets/UI/"+a+".webp",n.appendChild(i);let r=document.createElement("p");r.classList.add("selector-text","black-outline"),r.innerHTML=e,n.appendChild(r);let s=document.createElement("img");s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",n.appendChild(s)}));let n=document.createElement("div");n.classList.add("d-flex","jc-evenly"),t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","ai-center"),i.style.gap="10px",n.appendChild(i);let r=document.createElement("p");r.classList.add("selector-text","black-outline"),r.innerHTML="Export Data",i.appendChild(r);let s=document.createElement("img");s.classList.add("selector-go-img","pointer"),s.style.width="56px",s.src="../Assets/UI/DownloadBtn.webp",i.appendChild(s),s.addEventListener("click",(()=>{Ot()}));let l=document.createElement("div");l.classList.add("d-flex","ai-center"),l.style.gap="10px",n.appendChild(l);let d=document.createElement("p");d.classList.add("selector-text","black-outline"),d.innerHTML="Import Data",l.appendChild(d);let c=document.createElement("img");c.classList.add("pointer"),c.style.width="56px",c.src="../Assets/UI/UploadBtn.webp",l.appendChild(c),c.addEventListener("click",(()=>{Bt()}));let o=document.createElement("div");o.classList.add("site-access-div"),e.appendChild(o);let p=document.createElement("p");p.classList.add("site-info-header","sites-text","black-outline"),p.innerHTML="Other Sites",o.appendChild(p);let m=document.createElement("div");m.classList.add("standalone-site-buttons"),o.appendChild(m);Object.entries({Roundsets:{link:"https://btd6apiexplorer.github.io/rounds",text:"Roundsets",icon:"DefaultRoundSetIcon",background:"BloonsBG"},Leaderboards:{link:"https://btd6apiexplorer.github.io/leaderboards",text:"Leaderboards",icon:"LeaderboardSiteBtn",background:"TrophyStoreTiledBG"},"Insta Tracker":{link:"https://btd6apiexplorer.github.io/insta",text:"Insta Tracker",icon:"InstaSiteBtn",background:"CollectionHelp2"},"Main Site":{link:"https://btd6apiexplorer.github.io/",text:"Main Site",icon:"SiteBtn",background:"OverviewProfile"}}).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("site-button-div","pointer"),a.style.backgroundImage=`url(Assets/UI/${t.background}.webp)`,m.appendChild(a),a.addEventListener("click",(()=>{window.location.href=t.link}));let n=document.createElement("img");n.classList.add("site-button-icon"),n.src=`./Assets/UI/${t.icon}.webp`,a.appendChild(n);let i=document.createElement("p");i.classList.add("profile-name","readability-bg","black-outline"),i.style.marginLeft="0",i.innerHTML=t.text,a.appendChild(i)}))}function ht(){let e=document.getElementById("artifacts-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("rogue-bg","d-flex","jc-between","ai-center"),t.style.height="20px",e.appendChild(t);let a=document.createElement("div");a.style.width="200px",t.appendChild(a);let n=document.createElement("img");n.src="../Assets/UI/SettingsBtn.webp",n.style.width="50px",n.style.height="50px",n.classList.add("artifact-bag","pointer"),n.addEventListener("click",(()=>{Ye="artifactSettings",gt()})),a.appendChild(n);let i=document.createElement("div");i.classList.add("pos-rel"),t.appendChild(i);let r=document.createElement("input");r.classList.add("search-box","font-gardenia","rogue-search"),r.placeholder="Search",r.style.paddingRight="40px",r.addEventListener("input",(()=>{let e=r.value.toLowerCase().replace(/[^a-z0-9]/g,"");Object.values(qe).forEach((t=>{t.alt.toLowerCase().replace(/[^a-z0-9]/g,"").includes(e)?t.style.display="flex":t.style.display="none"})),Ne.style.display=Object.values(qe).every((e=>"none"==e.style.display))?"block":"none"}));let s=document.createElement("img");s.src="../Assets/UI/SearchIcon.webp",s.classList.add("search-icon"),i.appendChild(s),i.appendChild(r);let l=document.createElement("div");l.style.width="200px",l.classList.add("d-flex","jc-end","ai-center"),t.appendChild(l);let d=document.createElement("p");d.classList.add("rogue-progress-text","black-outline"),d.innerHTML=`${Je.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`,l.appendChild(d),Ke=d;let c=document.createElement("img");c.src="../Assets/UI/ArtifactBag.webp",c.classList.add("artifact-bag"),l.appendChild(c);let o=document.createElement("div");o.id="artifacts-container",o.classList.add("insta-monkeys-progress-container"),e.appendChild(o),ft(),Ne=document.createElement("p"),Ne.classList.add("rogue-no-results","font-gardenia"),Ne.innerHTML="No artifacts to display. Check your search term, or change your filter settings.",Ne.style.display=Object.values(qe).every((e=>"none"==e.style.display))?"block":"none",e.appendChild(Ne)}function gt(){let e=document.getElementById("artifacts-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("content-div","rogue-bg","d-flex","ai-center"),e.appendChild(t);let a=document.createElement("div");t.appendChild(a);let n=document.createElement("div");n.classList.add("maps-progress-views"),a.appendChild(n);let i=document.createElement("p");i.classList.add("settings-header","black-outline"),i.style.fontSize="32px",i.innerHTML="Artifact View Settings",n.appendChild(i);let r=document.createElement("div");r.classList.add("settings-content","d-flex","jc-evenly","f-wrap"),t.appendChild(r);let s=document.createElement("div");s.classList.add("settings-box","d-flex","fd-column","jc-between","fg-1"),s.style.gap="10px",r.appendChild(s);let l=$t("Highlight Extracted",Je.highlightExtracted,(e=>{Je.highlightExtracted=e,Ht()}));l.classList.add("jc-between"),s.appendChild(l);let d=document.createElement("p");d.style.margin="20px",d.style.lineHeight="1.5",d.classList.add("font-gardenia");let c=()=>{switch(Je.extractionFilter){case"All":d.innerHTML="Showing all artifacts extracted and not extracted.";break;case"Only Extracted":d.innerHTML="Only extracted artifacts will be shown.";break;case"Only Unextracted":d.innerHTML="Extracted artifacts will be hidden."}};c();let o=Rt("Extracted Filter:",["All","Only Extracted","Only Unextracted"],Je.extractionFilter,(e=>{Je.extractionFilter=e,c(),Ht()}));o.classList.add("jc-between");let p=$t("One Click Extract",Je.clickToCollect,(e=>{Je.clickToCollect=e,Ht()}));s.appendChild(p);let m=document.createElement("div");m.classList.add("settings-box","d-flex","fd-column","fg-1"),m.style.gap="10px",r.appendChild(m);let u=$t("Show Starter Artifacts",Je.showStarterArtifacts,(e=>{Je.showStarterArtifacts=e,Ht()}));u.classList.add("jc-between");let h=$t("Show Boss Artifacts",Je.showBossArtifacts,(e=>{Je.showBossArtifacts=e,Ht()}));h.classList.add("jc-between"),m.appendChild(u),m.appendChild(h);let g=document.createElement("div");g.classList.add("settings-box","d-flex","ai-center","fd-column","fg-1"),r.appendChild(g);let f=document.createElement("p");function y(){switch(Je.artifactFilter){case"All":f.innerHTML="All Artifacts will be included to start.";break;case"Extracted":f.innerHTML="Only Artifacts that have been extracted will be included to start.";break;case"Unextracted":f.innerHTML="Only Artifacts that have not been extracted will be included to start.";break;case"Starter Kit":f.innerHTML="Only Artifacts that are available in Hero Starter Kits will be included to start.";break;case"Non Starter Kit":f.innerHTML="Only Artifacts that are not available in Hero Starter Kits will be included to start.";break;case"One Variant":f.innerHTML="Only Artifacts that have only one tier will be included to start.";break;case"Two Variants":f.innerHTML="Only Artifacts that have only have two tiers will be included to start.";break;case"Update 48":f.innerHTML="Only Artifacts that were added in Update 48 will be included to start."}}f.classList.add("font-gardenia"),f.style.margin="20px",f.style.lineHeight="1.5",f.innerHTML="All Artifacts will be included to start.";let b=Rt("Artifact Filter:",["All","Starter Kit","Non Starter Kit","One Variant","Two Variants","Update 48"],Je.artifactFilter,(e=>{Je.artifactFilter=e,y(),Ht()}));y(),g.appendChild(b),g.appendChild(f),g.appendChild(o),g.appendChild(d);let L=document.createElement("p");L.innerHTML="Rarity Filter:",L.style.fontSize="24px",L.style.padding="5px",L.classList.add("black-outline"),g.appendChild(L);let k=document.createElement("div");k.classList.add("d-flex","ai-center","fd-column"),g.appendChild(k);Object.entries({Common:"RarityNormalArtifactAllTowers",Rare:"RarityRareArtifactAllTowers",Legendary:"RarityLegendaryArtifactAllTowers"}).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("d-flex","ai-center","jc-between"),a.style.width="250px",k.appendChild(a);let n=document.createElement("img");n.src=`../Assets/RogueFrames/${t}.webp`,n.style.width="50px",a.appendChild(n);let i=$t(e,Je.categoryFilter.includes(e),(t=>{Je.categoryFilter.includes(e)?Je.categoryFilter=Je.categoryFilter.filter((t=>t!==e)):Je.categoryFilter.push(e),Ht()}));a.appendChild(i)}));let v=document.createElement("div");v.classList.add("settings-box","d-flex","ai-center","fd-column","fg-1"),r.appendChild(v);let C=document.createElement("div");C.classList.add("preview-artifacts-div");let E=()=>{C.innerHTML="";let e=[];switch(["SplodeyDarts","SquadronTogether","DivineIntervention"].forEach((t=>{e.push(Ue.artifacts[t+"1"]),e.push(Ue.artifacts[t+"2"]),e.push(Ue.artifacts[t+"3"])})),Je.artifactSort){case"Rarity (Ascending)":e=e.sort(((e,t)=>e.tier-t.tier));break;case"Rarity (Descending)":e=e.sort(((e,t)=>t.tier-e.tier));break;case"Category":e=e.sort(((e,t)=>e.rarityFrameType.localeCompare(t.rarityFrameType)))}e.forEach((e=>{C.appendChild(yt(e,"preview"))}))};E();let w=Rt("Sort:",["Name","Rarity (Ascending)","Rarity (Descending)"],Je.artifactSort,(e=>{Je.artifactSort=e,Ht(),E()}));v.appendChild(w),v.appendChild(C);let S=document.createElement("div");S.classList.add("start-button","black-outline"),S.innerHTML="Apply",S.addEventListener("click",(()=>{pt()})),t.appendChild(S)}function ft(){let e=document.getElementById("artifacts-container");e.innerHTML="",qe={};let t=document.createElement("div");t.classList.add("artifacts-div"),e.appendChild(t);let a=document.createElement("div");switch(a.classList.add("artifacts-div"),t.appendChild(a),Qe={...Ue.artifacts},Je.artifactFilter){case"Extracted":Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>Je.extractedArtifacts.includes(t.nameLocKey))));break;case"Unextracted":Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>!Je.extractedArtifacts.includes(t.nameLocKey))));break;case"Starter Kit":Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>t.hasOwnProperty("starterKitHero"))));break;case"Non Starter Kit":let e=[];Object.values(Ue.heroStarterKits).map((e=>e.artifact)).concat(ze).forEach((t=>{let a=Ue.artifacts[t];switch(t.slice(-1)){case"1":e.push(a.baseId+"1"),e.push(a.baseId+"2"),e.push(a.baseId+"3");break;case"2":e.push(a.baseId+"2"),e.push(a.baseId+"3");break;case"3":e.push(a.baseId+"3")}})),Qe=Object.fromEntries(Object.entries(Qe).filter((([t,a])=>!e.includes(a.nameLocKey))));break;case"Two Variants":Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>Ue.artifacts.hasOwnProperty(t.baseId+"1")&&Ue.artifacts.hasOwnProperty(t.baseId+"2")&&!Ue.artifacts.hasOwnProperty(t.baseId+"3"))));break;case"One Variant":Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>Ue.artifacts.hasOwnProperty(t.baseId+"1")&&!Ue.artifacts.hasOwnProperty(t.baseId+"2")&&!Ue.artifacts.hasOwnProperty(t.baseId+"3"))));break;case"Update 48":Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>48==t.added)))}Je.showStarterArtifacts||(Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>!ze.includes(t.nameLocKey))))),Je.showBossArtifacts||(Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>!Ve.includes(t.nameLocKey)))));const n={Common:0,Rare:1,Legendary:2};switch(Qe=Object.fromEntries(Object.entries(Qe).filter((([e,t])=>Je.categoryFilter.includes(Object.keys(n).find((e=>n[e]===t.tier)))))),Je.extractionFilter){case"Only Extracted":let e=Je.extractedArtifacts.concat(ze);Qe=Object.fromEntries(Object.entries(Qe).filter((([t,a])=>e.includes(a.nameLocKey))));break;case"Only Unextracted":let t=Je.extractedArtifacts.concat(ze);Qe=Object.fromEntries(Object.entries(Qe).filter((([e,a])=>!t.includes(a.nameLocKey))))}switch(Je.artifactSort){case"Name":Qe=Object.fromEntries(Object.entries(Qe).sort(((e,t)=>e[1].nameLocKey.localeCompare(t[1].nameLocKey))));break;case"Rarity (Ascending)":Qe=Object.fromEntries(Object.entries(Qe).sort(((e,t)=>e[1].tier-t[1].tier)));break;case"Rarity (Descending)":Qe=Object.fromEntries(Object.entries(Qe).sort(((e,t)=>t[1].tier-e[1].tier)));break;case"Category":Qe=Object.fromEntries(Object.entries(Qe).sort(((e,t)=>e[1].rarityFrameType.localeCompare(t[1].rarityFrameType))))}return Object.values(Qe).forEach((e=>{if(!Je.showStarterArtifacts&&ze.includes(e.nameLocKey))return;if(!Je.showBossArtifacts&&Ve.includes(e.nameLocKey))return;let t=yt(e);t.alt=e.title,qe[e.nameLocKey]=t,t.addEventListener("click",(()=>{Je.clickToCollect&&Je.highlightExtracted&&!ze.includes(e.nameLocKey)?Je.extractedArtifacts.includes(e.nameLocKey)?(Je.extractedArtifacts=Je.extractedArtifacts.filter((t=>t!==e.nameLocKey)),t.classList.add("artifact-unextracted"),kt(),Ht()):(Je.extractedArtifacts.push(e.nameLocKey),t.classList.remove("artifact-unextracted"),kt(),Ht()):Lt(e.nameLocKey)})),a.appendChild(t)})),kt(),t}function yt(e,t){let a=document.createElement("div");a.classList.add("artifact-container"),!Je.highlightExtracted&&"force"!=t||Je.extractedArtifacts.includes(e.nameLocKey)||ze.includes(e.nameLocKey)||"preview"==t||a.classList.add("artifact-unextracted");let n=document.createElement("img");n.src=`../Assets/RogueArtifacts/${e.icon}.webp`,n.classList.add("artifact-img"),a.appendChild(n);let i=document.createElement("img");return i.src=`../Assets/RogueFrames/${bt(e)}.webp`,i.classList.add("artifact-frame"),a.appendChild(i),"modal"!=t&&"preview"!=t&&tippy(a,{content:`<p class="artifact-title">${e.title}</p>${e.description}`,allowHTML:!0,placement:"top",hideOnClick:!1,theme:"speech_bubble",popperOptions:{modifiers:[{name:"preventOverflow",options:{boundary:"viewport",padding:{right:18}}}]}}),a}function bt(e){let t=e.tier;switch(t){case 0:t="Normal";break;case 1:t="Rare";break;case 2:t="Legendary"}let a=e.rarityFrameType;return"AllMonkeyTowerSets"===a&&(a="AllTowers"),`Rarity${t}Artifact${a}`}function Lt(e){let t,a=Ue.artifacts[e];document.getElementById("artifact-popout")?(t=document.getElementById("artifact-popout"),t.innerHTML=""):(t=document.createElement("div"),t.id="artifact-popout",t.classList.add("error-modal-overlay"),document.body.appendChild(t));let n=document.createElement("div");n.classList.add("rogue-artifact-modal","rogue-bg"),t.appendChild(n);let i=document.createElement("div");i.classList.add("collection-modal-header"),i.style.backgroundColor="unset",n.appendChild(i);let r=document.createElement("div");r.classList.add("rogue-modal-body"),n.appendChild(r);let s=document.createElement("div");if(s.classList.add("collection-header-modal-left"),i.appendChild(s),"AllMonkeyTowerSets"!==a.rarityFrameType){let e=document.createElement("img");e.src=`../Assets/UI/${a.rarityFrameType}Icon.webp`,e.classList.add("rogue-modal-category"),s.appendChild(e)}let l=document.createElement("p");l.classList.add("collection-modal-header-text","black-outline","d-flex","ai-center"),l.style.padding="unset",l.style.height="64px",l.innerHTML=a.title,i.appendChild(l);let d=document.createElement("img");d.classList.add("collection-modal-close","pointer"),d.src="./Assets/UI/CloseBtn.webp",d.addEventListener("click",(()=>{t.remove(),Ye="home"})),i.appendChild(d);let c=document.createElement("div");c.classList.add("d-flex","rogue-modal-top"),r.appendChild(c);let o=document.createElement("div");o.classList.add("d-flex"),c.appendChild(o);let p=document.createElement("div");p.classList.add("modal-trophy-div"),o.appendChild(p);let m=yt(a,"modal");if(p.appendChild(m),!ze.includes(e)){let e=document.createElement("div");e.classList.add("extracted-check-div","d-flex","jc-center");let t=document.createElement("p");t.classList.add("maps-progress-coop-toggle-text","black-outline"),t.innerHTML="Extracted:",e.appendChild(t);let n=document.createElement("input");n.classList.add("maps-progress-coop-toggle-input"),n.style.backgroundColor="rgba(0,0,0,0.36)",n.type="checkbox",n.checked=Je.extractedArtifacts.includes(a.nameLocKey),e.appendChild(n)}let u=document.createElement("div");u.classList.add("item-details-div","jc-center","fg-1"),u.style.margin="10px",o.appendChild(u);let h=document.createElement("p");h.classList.add("trophy-store-item-description","ta-center"),h.style.marginBottom="unset",h.innerHTML=a.description,u.appendChild(h);let g=document.createElement("p");g.classList.add("trophy-store-item-obtain-method","ta-center"),g.style.marginTop="unset",u.appendChild(g);let f=document.createElement("div");f.classList.add("d-flex"),c.appendChild(f);let y=document.createElement("img");y.src="../Assets/UI/RoguePermanantArtifactsBtn.webp",y.classList.add("hero-starter-kit-img","rogue-popout-starter-icon"),f.appendChild(y);let b,L,k=document.createElement("div");if(k.classList.add("item-details-div","jc-center","fg-1"),k.style.margin="10px",f.appendChild(k),ze.includes(e)){let e=document.createElement("p");e.classList.add("font-gardenia","ta-center"),e.innerHTML="This artifact is a starter artifact.",e.style.fontSize="18px",k.appendChild(e)}else{b=document.createElement("div"),b.classList.add("extracted-check-div","d-flex","jc-center"),k.appendChild(b);let e=document.createElement("p");e.classList.add("maps-progress-coop-toggle-text","black-outline"),e.innerHTML="Extracted:",b.appendChild(e),L=document.createElement("input"),L.classList.add("maps-progress-coop-toggle-input"),L.style.backgroundColor="rgba(0,0,0,0.36)",L.type="checkbox",L.checked=Je.extractedArtifacts.includes(a.nameLocKey),b.appendChild(L)}if(a.hasOwnProperty("starterKitHero")){let e=document.createElement("div");e.classList.add("d-flex"),c.appendChild(e);let t=document.createElement("img");t.src=`${Se(a.starterKitHero.replace(/ /g,""))}`,t.classList.add("hero-starter-kit-img","rogue-popout-starter-icon"),e.appendChild(t);let n=document.createElement("div");n.classList.add("item-details-div","jc-center","fg-1"),n.style.margin="10px",e.appendChild(n);let i=document.createElement("p");i.classList.add("font-gardenia","ta-center"),i.innerHTML=`This artifact is available in ${We[a.starterKitHero]}'s starter kit.`,i.style.fontSize="18px",n.appendChild(i)}let v,C=[];if(Ue.artifacts.hasOwnProperty(a.baseId+"1")&&C.push(Ue.artifacts[a.baseId+"1"]),Ue.artifacts.hasOwnProperty(a.baseId+"2")&&C.push(Ue.artifacts[a.baseId+"2"]),Ue.artifacts.hasOwnProperty(a.baseId+"3")&&C.push(Ue.artifacts[a.baseId+"3"]),C.length>1){let e=document.createElement("div");e.classList.add("other-variants"),r.appendChild(e);let t=document.createElement("p");t.classList.add("other-variants-title","black-outline","ta-center"),t.style.fontSize="24px",t.innerHTML="Other Variants",e.appendChild(t);let n=document.createElement("div");n.classList.add("other-variants-div","d-flex","jc-center","pointer"),e.appendChild(n),C.forEach((e=>{let t=yt(e,"modal");t.addEventListener("click",(()=>{Lt(e.nameLocKey)})),n.appendChild(t),e.nameLocKey===a.nameLocKey&&(v=t)}))}let E=()=>{Je.extractedArtifacts.includes(a.nameLocKey)?(Je.extractedArtifacts=Je.extractedArtifacts.filter((e=>e!==a.nameLocKey)),Je.highlightExtracted&&(m.classList.add("artifact-unextracted"),v&&v.classList.add("artifact-unextracted"),qe[a.nameLocKey]&&qe[a.nameLocKey].classList.add("artifact-unextracted")),kt(),L.checked=!1,Ht()):(Je.extractedArtifacts.push(a.nameLocKey),Je.highlightExtracted&&(m.classList.remove("artifact-unextracted"),v&&v.classList.remove("artifact-unextracted"),qe[a.nameLocKey]&&qe[a.nameLocKey].classList.remove("artifact-unextracted")),kt(),L.checked=!0,Ht())};ze.includes(e)||(b.addEventListener("click",E),m.addEventListener("click",E)),Ye="artifactInfoModal"}function kt(){let e=Object.keys(Qe).length;0===Object.keys(Qe).length&&(e=Object.keys(Ue.artifacts).length);let t=Je.extractedArtifacts.concat(ze).reduce(((e,t)=>Qe.hasOwnProperty(t)?e+1:e),0);Ke&&(Ke.innerHTML=`${t}/${e}`)}function vt(){let e=document.getElementById("starter-kits-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("artifacts-div","hero-starter-kits"),e.appendChild(t),Object.values(Ue.heroStarterKits).forEach((a=>{let n=document.createElement("div");n.classList.add("starter-kit-div"),e.appendChild(n);let i=document.createElement("img");i.src=`${we(a.heroID.replace(/ /g,""))}`,i.classList.add("starter-kit-hero-square-img"),n.appendChild(i);let r=yt(Ue.artifacts[a.artifact]);r.addEventListener("click",(()=>{Lt(a.artifact)})),n.appendChild(r),a.startingInstas.forEach((e=>{n.appendChild(Ct(e))})),t.appendChild(n)}))}function Ct(e){let t=e.baseId,a=JSON.parse(e.tiers),n=document.createElement("div");n.classList.add("insta-monkey-tier-container");let i=document.createElement("img");i.classList.add("insta-monkey-tier-img"),i.src=ke(t,a),n.appendChild(i);let r=document.createElement("p");return r.classList.add("insta-monkey-tier-text","black-outline"),r.innerHTML=`${a[0]}-${a[1]}-${a[2]}`,n.appendChild(r),n}function Et(e,t){let a=document.createElement("div");a.style.width=`${e}px`,a.style.height=`${e}px`,a.classList.add("avatar");let n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${e}px`,n.src="../Assets/UI/InstaTowersContainer.webp",a.appendChild(n);let i=document.createElement("img");return i.classList.add("avatar-img","noSelect"),i.style.width=`${e}px`,i.src=t,a.appendChild(i),a}function wt(){let e=document.getElementById("artifacts-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("insta-monkeys-header-bar","fd-column"),t.style.width="auto",t.style.gap="10px",t.style.padding="10px",e.appendChild(t);let a=document.createElement("p");a.classList.add("black-outline"),a.style.fontSize="32px",a.innerHTML="Extracted Artifacts Image",t.appendChild(a);let n=document.createElement("p");n.classList.add("sku-roundset-selector-desc","ta-center"),n.innerHTML="This will generate a nice image to share with others of your progress in extracting the artifacts.<br>This may not work as intended on mobile.",t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","fd-column"),t.appendChild(i);let r=document.createElement("div");r.classList.add("rogue-profile-div","d-flex","fd-column"),r.style.width="550px",t.appendChild(r);let s=document.createElement("div");s.classList.add("rogue-banner-div","d-flex","ai-center"),s.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/${Je.imageOptions.banner})`,s.style.gap="50px",r.appendChild(s);let l=Et(100,`Assets/ProfileAvatar/${Je.imageOptions.avatar}`);s.appendChild(l);let d=document.createElement("input");d.classList.add("profile-name-input","font-gardenia","ta-center"),d.style.fontSize="20px",null!=Je.imageOptions.name?d.value=Je.imageOptions.name:d.placeholder="Enter Name",d.addEventListener("input",(()=>{Je.imageOptions.name=d.value,Ht()})),s.appendChild(d);let c=document.createElement("div");c.classList.add("d-flex","jc-center"),c.style.gap="20px",t.appendChild(c);let o=document.createElement("div");o.classList.add("start-button","black-outline"),o.innerHTML="Change Avatar",o.style.width="auto",o.addEventListener("click",(()=>{Ye="imageBuilderModal",St(Je.imageOptions.avatar)})),c.appendChild(o);let p=document.createElement("div");p.classList.add("start-button","black-outline"),p.innerHTML="Change Banner",p.style.width="auto",p.addEventListener("click",(()=>{Ye="imageBuilderModal",At(Je.imageOptions.banner)})),c.appendChild(p);let u=document.createElement("div");u.classList.add("rogue-sort-preview"),t.appendChild(u);let h=document.createElement("div");h.classList.add("maps-progress-views","jc-center"),u.appendChild(h);let g=document.createElement("p");g.classList.add("maps-progress-coop-toggle-text","black-outline"),g.classList.add("black-outline"),g.innerHTML="Sort:",h.appendChild(g);let f=document.createElement("div");f.classList.add("map-progress-filter-difficulty"),h.appendChild(f);let y=document.createElement("select");y.classList.add("map-progress-filter-difficulty-select"),y.value=Je.artifactSort;["Name","Rarity (Ascending)","Rarity (Descending)"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,y.appendChild(t)})),f.appendChild(y),y.value=Je.imageOptions.sort;let b=document.createElement("div");b.classList.add("preview-artifacts-div"),u.appendChild(b);let L=()=>{b.innerHTML="";let e=[];switch(["SplodeyDarts","SquadronTogether","DivineIntervention"].forEach((t=>{e.push(Ue.artifacts[t+"1"]),e.push(Ue.artifacts[t+"2"]),e.push(Ue.artifacts[t+"3"])})),Je.imageOptions.sort){case"Rarity (Ascending)":e=e.sort(((e,t)=>e.tier-t.tier));break;case"Rarity (Descending)":e=e.sort(((e,t)=>t.tier-e.tier));break;case"Category":e=e.sort(((e,t)=>e.rarityFrameType.localeCompare(t.rarityFrameType)))}e.forEach((e=>{b.appendChild(yt(e,"preview"))}))};L(),y.addEventListener("change",(()=>{Je.imageOptions.sort=y.value,Ht(),L()}));let k=document.createElement("div");k.classList.add("start-button","black-outline"),k.innerHTML="Download Image",k.style.width="auto",k.addEventListener("click",(()=>{xt()})),t.appendChild(k),Je.selectedOAK||Object.entries(m).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("previous-oak-entry"),a.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(${t.banner})`,i.appendChild(a),a.appendChild(Et(100,t.avatar));let n=document.createElement("p");n.classList.add("profile-name","black-outline"),n.innerHTML=t.displayName,a.appendChild(n);let r=document.createElement("img");r.classList.add("delete-button"),r.src="./Assets/UI/ContinueBtn.webp",r.addEventListener("click",(()=>{Je.imageOptions.avatar=t.avatar.split("/")[2],Je.imageOptions.banner=t.banner.split("/")[2],Je.imageOptions.name=t.displayName,d.value=t.displayName,s.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/${Je.imageOptions.banner})`,l.querySelector(".avatar-img").src=`Assets/ProfileAvatar/${Je.imageOptions.avatar}`,d.value=Je.imageOptions.name,i.innerHTML="",Je.selectedOAK=!0,Ht()})),a.appendChild(r)}))}function St(){let e=document.createElement("div");e.classList.add("error-modal-overlay"),document.body.appendChild(e);let t=document.createElement("div");t.classList.add("collection-modal","rogue-bg"),e.appendChild(t);let a=document.createElement("div");a.classList.add("collection-modal-header"),a.style.backgroundColor="unset",t.appendChild(a);let n=document.createElement("div");n.classList.add("rogue-modal-body"),t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","jc-center","ai-center","f-wrap"),n.appendChild(i);for(let t=1;t<=Ge.profileAvatars;t++){if(107==t)continue;let a=Et(100,`Assets/ProfileAvatar/ProfileAvatar${t<10?"0"+t:t}.webp`);a.addEventListener("click",(()=>{document.querySelector(".rogue-profile-div .avatar-img").src=`Assets/ProfileAvatar/ProfileAvatar${t<10?"0"+t:t}.webp`,Je.imageOptions.avatar=`ProfileAvatar${t<10?"0"+t:t}.webp`,Ht(),e.remove(),Ye="home"})),i.appendChild(a)}}function At(){let e=document.createElement("div");e.classList.add("error-modal-overlay"),document.body.appendChild(e);let t=document.createElement("div");t.classList.add("collection-modal","rogue-bg"),e.appendChild(t);let a=document.createElement("div");a.classList.add("collection-modal-header"),a.style.backgroundColor="unset",t.appendChild(a);let n=document.createElement("div");n.classList.add("rogue-modal-body"),t.appendChild(n);let i=document.createElement("div");i.classList.add("d-flex","jc-center","ai-center","f-wrap"),n.appendChild(i);for(let t=1;t<=Ge.profileBanners;t++){let a=document.createElement("img");a.src=`Assets/ProfileBanner/ProfileBanner${t}.webp`,a.classList.add("profile-banner-img"),a.addEventListener("click",(()=>{document.querySelector(".rogue-banner-div").style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/ProfileBanner${t}.webp)`,Je.imageOptions.banner=`ProfileBanner${t}.webp`,Ht(),e.remove(),Ye="home"})),i.appendChild(a)}for(let t=1;t<=Ge.teamsBanners;t++){let a=document.createElement("img");a.src=`Assets/ProfileBanner/TeamsBanner${t}.webp`,a.classList.add("profile-banner-img"),a.addEventListener("click",(()=>{document.querySelector(".rogue-banner-div").style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(../Assets/ProfileBanner/TeamsBanner${t}.webp)`,Je.imageOptions.banner=`TeamsBanner${t}.webp`,Ht(),e.remove()})),i.appendChild(a)}}function xt(){let e=document.getElementById("rogue-image-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("rogue-image","totem-bg"),e.appendChild(t);let a=document.createElement("div");a.classList.add("rogue-image-header"),t.appendChild(a),a.style.backgroundImage="url(../Assets/UI/RogueTopBarLong.webp)";let n=document.createElement("div");n.classList.add("rogue-profile-div","rogue-header-sides"),n.style.backgroundImage=`url(../Assets/ProfileBanner/${Je.imageOptions.banner})`,a.appendChild(n),n.appendChild(Et(100,`Assets/ProfileAvatar/${Je.imageOptions.avatar}`));let i=document.createElement("p");i.classList.add("profile-name","black-outline"),i.style.fontSize="40px",i.innerHTML=Je.imageOptions.name,n.appendChild(i);let r=document.createElement("div");r.classList.add("rogue-title-div"),a.appendChild(r);const s=document.createElement("h1");s.classList.add("title","rogue-title"),s.innerHTML="Extracted Artifacts",r.appendChild(s);let l=document.createElement("div");l.classList.add("rogue-header-sides","rogue-right-div"),a.appendChild(l);let d=document.createElement("p");d.classList.add("rogue-progress-text-export","black-outline"),d.innerHTML=`${Je.extractedArtifacts.length}/${Object.keys(Ue.artifacts).length}`,l.appendChild(d);let c=document.createElement("img");c.src="../Assets/UI/ArtifactBag.webp",c.classList.add("artifact-bag-export"),l.appendChild(c);let o=document.createElement("div");o.classList.add("rogue-image-artifacts"),t.appendChild(o);let p=document.createElement("div");o.appendChild(p);let m=document.createElement("div");m.classList.add("artifacts-div"),p.appendChild(m);let u=document.createElement("div");u.classList.add("artifacts-div"),u.style.justifyContent="space-between",p.appendChild(u);let h={...Ue.artifacts};switch(Je.imageOptions.sort){case"Rarity (Ascending)":h=Object.fromEntries(Object.entries(h).sort(((e,t)=>e[1].tier-t[1].tier)));break;case"Rarity (Descending)":h=Object.fromEntries(Object.entries(h).sort(((e,t)=>t[1].tier-e[1].tier)))}Object.values(h).forEach((e=>{ze.includes(e.nameLocKey)||u.appendChild(yt(e,"force"))}));let g=document.createElement("div");g.classList.add("rogue-bottom-text-div","d-flex","jc-between"),g.style.fontSize="24px",g.style.padding="10px 20px",t.appendChild(g);let f=document.createElement("p");f.classList.add("rogue-bottom-text","black-outline"),f.innerHTML=(new Date).toLocaleDateString(),g.appendChild(f);let y=document.createElement("p");y.classList.add("rogue-bottom-text","black-outline"),y.innerHTML="Generated From btd6apiexplorer.github.io/rogue",g.appendChild(y),Xe(),document.getElementById("rogue-image-content").style.display="block",setTimeout((function(){htmlToImage.toJpeg(document.getElementById("rogue-image-content"),{width:1800,quality:.85,style:{opacity:1},pixelRatio:2}).then((function(e){var t=document.createElement("a");t.href=e,t.download=`RogueLegendsArtifacts_${(new Date).toLocaleDateString()}.jpeg`,t.click(),_e()})).then((function(){document.getElementById("rogue-image-content").style.display="none"}))}),1e3)}function Ot(){let e=localStorage.getItem("rogueSaveData"),t=document.createElement("a");t.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),t.download=`RogueLegendsArtifactsSave_${(new Date).toLocaleDateString()}.json`,t.click()}function Bt(){let e=document.createElement("input");e.type="file",e.accept=".json",e.click(),e.addEventListener("change",(e=>{let t=e.target.files[0],a=new FileReader;a.onload=function(e){let t=e.target.result;localStorage.setItem("rogueSaveData",t),console.log("Imported Save Data"),Dt()},a.readAsText(t)}))}function It(e){let t=document.getElementsByClassName("loading-icon")[0].cloneNode(!0);t.classList.add("loading-icon-leaderboard"),t.style.height="unset",e.appendChild(t)}function Tt(e){null!=e?document.body.style.backgroundColor=`rgb(${255*e[0]},${255*e[1]},${255*e[2]})`:document.body.style.removeProperty("background-color")}function Mt(e,t,a,n,i){switch(e){case 1:return a*(n/i);case 2:return t*(i/n);case 3:return i*(t/a);case 4:return n*(a/t)}}function Pt(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function jt(e,t,a){if(S&&!a)return;let n=document.createElement("div");n.classList.add("error-modal-overlay"),document.body.appendChild(n);let i=document.createElement("div");i.id="error-modal",i.classList.add("error-modal"),n.appendChild(i);let r=document.createElement("div");r.id="error-modal-header",r.classList.add("error-modal-header"),i.appendChild(r);let s=document.createElement("img");s.id="error-modal-header-img",s.classList.add("error-modal-header-img"),s.src="./Assets/UI/BadConnectionBtn.webp",r.appendChild(s);let l=document.createElement("p");l.classList.add("error-modal-header-text","black-outline"),l.innerHTML="Error",r.appendChild(l);let d=document.createElement("div");d.classList.add("error-modal-dummy"),r.appendChild(d);let c=document.createElement("div");c.id="error-modal-content",c.classList.add("error-modal-content"),c.innerHTML=""+e,i.appendChild(c);let o=document.createElement("div");if(o.classList.add("error-modal-content"),"Invalid user ID / Player Does not play this game"===e)o.innerHTML="Please try again or create a new Open Access Key.",i.appendChild(o);if("ratelimit"==t){let e=document.createElement("div");e.classList.add("error-toggle-div"),i.appendChild(e);let t=document.createElement("p");t.classList.add("maps-progress-coop-toggle-text","black-outline"),t.innerHTML="Manually Load Profiles: ",e.appendChild(t);let a=document.createElement("input");a.classList.add("maps-progress-coop-toggle-input"),a.type="checkbox",a.checked=O,a.addEventListener("change",(()=>{O=!!a.checked})),e.appendChild(a)}let p=document.createElement("div");p.classList.add("error-modal-ok-button-div"),i.appendChild(p);let m=document.createElement("div");m.classList.add("start-button","modal-ok-button","black-outline"),m.innerHTML="OK",m.addEventListener("click",(()=>{S=!1,document.body.removeChild(n)})),p.appendChild(m);let u=document.createElement("img");u.classList.add("error-modal-close"),u.src="./Assets/UI/CloseBtn.webp",u.addEventListener("click",(()=>{S=!1,document.body.removeChild(n)})),c.appendChild(u),S=!0}function Ht(){localStorage.setItem("rogueSaveData",JSON.stringify(Je))}function Dt(){let e=localStorage.getItem("rogueSaveData");e&&(Je=JSON.parse(e)),re()}function $t(e,t,a){let n=document.createElement("div");n.classList.add("checkbox-div");let i=document.createElement("p");i.classList.add("checkbox-label","black-outline"),i.innerHTML=e,n.appendChild(i);let r=document.createElement("input");return r.classList.add("checkbox-input"),r.type="checkbox",r.checked=t,a&&r.addEventListener("change",(()=>{a(r.checked)})),n.appendChild(r),n}function Rt(e,t,a,n){let i=document.createElement("div");i.classList.add("d-flex","ai-center");let r=document.createElement("p");r.classList.add("dropdown-label","black-outline"),r.innerHTML=e,i.appendChild(r);let s=document.createElement("select");return s.classList.add("dropdown-select"),t.forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,s.appendChild(t)})),i.appendChild(s),s.value=a,s.addEventListener("change",(()=>{n(s.value)})),i.appendChild(s),i}ot.id="rogue-image-content",ot.classList.add("rogue-image-content"),ot.style.display="none",ot.style.opacity="0",ct.appendChild(ot);