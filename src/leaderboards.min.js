let e,t,a="",n={},l={},s={},d={},o=null,i=null,r=null,c=1,p=null,m={},u=!1,h={},b=null,y=null,L=null,g={},C=null,E=null,v=1,k=null,w="newest",f=!1,S=!1,M={},T=!1,B=!1,D=100,P=200,I=0,A=0,H=Date.now(),$=[],G=!1,x={},R={};function O(e,t){$.push({id:e,request:t}),G||U()}function N(e){$=$.filter((t=>t.id!==e))}function _(){const e=I/(D/2);return P+P*Math.pow(e,2)}async function U(){G||(G=!0,function e(){if(0===$.length)return void(G=!1);const t=Date.now();if(t-H>=18e4&&(I=0,H=t),I<D){const e=$.shift();I++,e.request()}const a=_();setTimeout(e,a)}())}async function j(e,t){let a=null;try{f?(a=await fetch(e,{cache:"reload"}),f=!1,T=!1):(a=await fetch(e),T=!1)}catch(e){return navigator.onLine?(T=!0,$=[],bt("You have hit the rate limit.<br>If you are browsing the leaderboards or content browsers, please slow down!<br><br>The rate limit will clear after a short time. You can also help prevent rate limiting by toggling the setting below which stops player profiles from loading automatically.","ratelimit"),je(),pressedStart=!1,`You have hit the rate limit. [${e}]`):(bt("You are currently offline. Please check your internet connection.","api"),`You are currently offline. [${e}]`)}try{let e=await a.json();return 1==e.success?t(e):"Rate limit"==e.reason?(S=!0,bt("You have hit the rate limit. Please try again later.","api")):(document.getElementById("loading").style.transform="scale(0)",pressedStart=!1,bt(e.error,"api")),e}catch(e){return bt(`Something went wrong with the request. Response Code: ${a.status} [${e}]`,"api"),`Something went wrong with the request. Response Code: ${a.status} [${e}]`}}async function z(e){f=!0;let t=!0;if(await j(`https://data.ninjakiwi.com/btd6/save/${e}`,(a=>{n=a.body,l=a.model,readyFlags[0]=1,t=!1,W(e)})),t&&!T){let t=document.getElementsByClassName("error-modal-overlay");for(element of t)element.parentNode.removeChild(element);delete m[e],de(),generateFrontPage(),bt("Your Open Access Key has expired. Please make a new one and try again.","expire",!0)}}async function W(e){f=!0,j(`https://data.ninjakiwi.com/btd6/users/${e}`,(t=>{s=t.body,d=t.model,m[e]={displayName:s.displayName,avatar:Ge(s),banner:xe(s)},de(),readyFlags[1]=1,fetchDependencies()}))}async function F(){null==o?j("https://data.ninjakiwi.com/btd6/races",(e=>{o=e.body,generateRaces()})):generateRaces()}async function K(e){return o&&o[e]&&"string"==typeof o[e].metadata?j(o[e].metadata,(t=>(o[e].metadata=t.body,o[e]))):o[e]}async function J(){return r?(i=null,j(`${r}?page=${c}`,(e=>(i=e.body,p=i.length,document.getElementById("leaderboard-footer-page-number").innerHTML=`Page ${c} (#${c*p-(p-1)} - ${c*p})`,i)))):bt("Leaderboard Fetch Error: No leaderboard data found")}async function V(e){return null==e&&(e=r),$=[],null==x[r]&&(x[r]={entries:[]},Y(e)),x[r]}async function Y(e){null!=e&&(x[r].nextRequested||(I++,await j(e,(t=>{x[r].entries=x[r].entries.concat(t.body),x[r].hasOwnProperty("entryPerPage")||(x[r].entryPerPage=t.body.length),tt(t.body,isNaN(e.split("=")[1])?1:parseInt(e.split("=")[1]),x[r].entryPerPage?x[r].entryPerPage:t.body.length),x[r].next=t.next,x[r].nextRequested=!1}))))}async function Q(){null==b?j("https://data.ninjakiwi.com/btd6/bosses",(e=>{b=e.body,generateBosses(showElite)})):generateBosses(showElite)}async function q(e,t){return b&&b[e]&&"string"==typeof b[e][t?"metadataElite":"metadataStandard"]?j(b[e][t?"metadataElite":"metadataStandard"],(a=>(b[e][t?"metadataElite":"metadataStandard"]=a.body,b[e]))):b[e]}async function Z(){null==y?j("https://data.ninjakiwi.com/btd6/ct",(e=>{y=e.body,generateCTs()})):generateCTs()}async function X(e){let t=null;return await j(e,(e=>(t=e.body,t))),t}async function ee(){if(null!=L)return L;await j("https://data.ninjakiwi.com/btd6/challenges/filter/daily",(e=>(L=e.body,L)))}async function te(e){return null==g[e]&&await j(`https://data.ninjakiwi.com/btd6/challenges/challenge/${e}`,(t=>(g[e]=t.body,g[e]))),g[e]}async function ae(){return E?(C=null,j(`${E}${w}?page=${v}`,(e=>(C=e.body,k=C.length,document.getElementById("browser-footer-page-number").innerHTML=`Page ${v} of 4`,i)))):bt("Content Browser Fetch Error: No data found")}async function ne(e){let t=e.split("/").pop();return null==h[t]&&await j(e,(e=>{h[t]=e.body})),h[t]}async function le(e){return null==M[e]&&await j(`https://data.ninjakiwi.com/btd6/maps/map/${e}`,(t=>(M[e]=t.body,M[e]))),M[e]}function se(){null!=localStorage.getItem("BTD6OAKStorage")&&(m=JSON.parse(localStorage.getItem("BTD6OAKStorage")))}function de(){localStorage.setItem("BTD6OAKStorage",JSON.stringify(m))}function oe(e){e.substring(0,3),parseInt(e.substring(3,7));let t=e.substring(7);return[parseInt(t.substring(0,4)),parseInt(t.substring(4,6)),parseInt(t.substring(6,8))]}function ie(e,t){let a=new Date(2024,4,25),n=(t?2101:2114)-parseInt(e);return a.setDate(a.getDate()-n),(t?"adv":"rot")+e+a.toISOString().substring(0,10).replace(/-/g,"")}function re(e,t){let a=new Date(e),n=new Date(2024,4,25).getTime()-a.getTime();return(t?"adv":"rot")+((t?2101:2114)-Math.floor(n/864e5))+e.replace(/-/g,"")}U();const ce={Clicker:"Bloons Master","Superior Clicker":"Superior Bloons Master","Ultimate Clicker":"Ultimate Bloons Master","Knowledgable Primate":"Knowledgeable Primate","Triple Threat":"Triple threat","Small Bloons":"Alchermistman and Bloonacleboy","Master of Life":"Master of life","What did it cost":"What did it cost? - Everything","2 Mega Pops":"2 MegaPops","Looking fab":"Lookin fab",GoldenTicket:"Golden Ticket","Axis of Havok":"Axis of Havoc","Co-op Popper!":"Co-op Popper",CouponCrazy:"Coupon Crazy",LimitedRun:"Limited Run",ALaCode:"A La Code",InstantGratification:"Instant Gratification","Achievement Of Achievements":"Achievement of Achievements","What is this new Bloonery":"What is this new Bloonery?","Who's the Boss":"Who's the Boss?","I'llBeBack":"I'll Be Back",SoSpiiiceyNinjaKiwi:"So Spiiicey Ninja Kiwi",DavidsVsGoliath:"Davids vs Goliath",ToolsToDarwin:"Tools to Darwin",BigSpender:"Big Spender",NotLackingCriticalInformation:"Not Lacking Critical Information",StubbornStrategy:"Stubborn Strategy","Hook Line And Sinker":"Hook, Line, and Sinker",CrashOfTheTitans:"Crash of the Titans","So Shiny":"So Shiny!","Ultimate Team Up":"Ultimate Team-up",StudentLoans:"Student Loans",StickySituation:"Sticky Situation",NoHarvest:"No Harvest",ReadyPlayerOne:"Ready Player One?",TheDailyReid:"The Daily Reid",InstaCentury:"Insta Century"},pe=Object.entries(ce).reduce(((e,[t,a])=>(e[a]=t,e)),{}),me={ObynOceanGuardian:"OceanObyn",MoltenObyn:"MountainObyn",JoanOfArcAdora:"JoanOfArc",CyberQuincy:"QuincyCyber",ETnEtienne:"ETn",SentaiCaptainChurchill:"SentaiChurchill",SleighCaptainChurchill:"SleighChurchill",TinkerfairyRosalia:"RosaliaTinkerfairy"},ue={Spikeopult:"Spike-o-pult",BuccaneerLongRange:"LongRange",BuccaneerGrapeShot:"GrapeShot",BuccaneerCrowsNest:"CrowsNest",BuccaneerHotShot:"HotShot",BuccaneerCarrierFlagship:"CarrierFlagship",BuccaneerCannonShip:"CannonShip",BuccaneerMerchantman:"Merchantman",BuccaneerFavoredTrades:"FavoredTrades",BuccaneerAircraftCarrier:"AircraftCarrier",BuccaneerDestroyer:"Destroyer",BuccaneerTradeEmpire:"TradeEmpire",BuccaneerPirateLord:"PirateLord",BuccaneerMonkeyPirates:"MonkeyPirates",HeattippedDarts:"HeatTippedDart",BioncBoomerang:"BionicBoomerang",LargeCalibre:"LongCalibre",LaserBlasts:"LaserBlast",GuidedMagic:"GuildedMagic",MortarRapidReload:"RapidReload",SupplyDrop:"CashDrop",PlasmaBlasts:"PlasmaBlast",XXXLTrap:"XXXL",OversizeNails:"OversizedNails",CenteredPath:"FlightOrders",Shockwave:"ShellShock",Monkeyopolis:"Metropolis",Spectre:"Specter",TrueSunGod:"TrueSonGod",HydraRocketPods:"HydraRockets",DartMonkeyParagon:"ApexPlasmaMaster",BoomerangMonkeyParagon:"GlaiveDominus",NinjaMonkeyParagon:"AscendedShadow",EngineerMonkeyParagon:"MasterBuilder",WizardMonkeyParagon:"MagusPerfectus",MonkeyAceParagon:"GoliathDoomship",MonkeyBuccaneerParagon:"NavarchOfTheSeas",MonkeySubParagon:"NauticSiegeCore",SmartSpikes:"DirectedSpikes",TackShooterParagon:"CycloneOfFireAndMetal"};let he={"Directed Spikes":"Smart Spikes","Directed Spikes Description":"Smart Spikes Description",CircusGwendolinSkinName:"HarlegwenGwendolinSkinName",CircusGwendolinSkinDescription:"HarlegwenGwendolinSkinDescription",OctoJonesSkinName:"OctoJonesStrikerJonesSkinName",OctoJonesSkinDescription:"OctoJonesStrikerJonesSkinDescription",MoltenObynSkinName:"ObynMountainGuardianSkinName",MoltenObynSkinDescription:"ObynMountainGuardianSkinDescription",SushiBentoSkinName:"SushiBentoBenjaminSkinName",SushiBentoSkinDescription:"SushiBentoBenjaminSkinDescription",KaijuPatSkinName:"KaijuPatFustySkinName",KaijuPatSkinDescription:"KaijuPatFustySkinDescription",GalaxiliSkinName:"GalaxiliEziliSkinName",GalaxiliSkinDescription:"GalaxiliEziliSkinDescription",VoidoraSkinName:"VoidoraAdoraSkinName",VoidoraSkinDescription:"VoidoraAdoraSkinDescription",VikingSaudaSkinName:"VikingSaudaSaudaSkinName",VikingSaudaSkinDescription:"VikingSaudaSaudaSkinDescription",JiangshiSaudaSkinName:"JiangshiSaudaSaudaSkinName",JiangshiSaudaSkinDescription:"JiangshiSaudaSaudaSkinDescription",DreadPirateBrickellSkinName:"DreadPirateBrickellAdmiralBrickellSkinName",DreadPirateBrickellSkinDescription:"DreadPirateBrickellAdmiralBrickellSkinDescription",LifeguardBrickellSkinName:"LifeguardBrickellAdmiralBrickellSkinName",LifeguardBrickellSkinDescription:"LifeguardBrickellAdmiralBrickellSkinDescription",PsimbalsSkinName:"PsimbalsPsiSkinName",PsimbalsSkinDescription:"PsimbalsPsiSkinDescription",GeraldoGentlemanGadgeteerSkinName:"GentlemonkeyGadgeteerGeraldoSkinName",GeraldoGentlemanGadgeteerSkinDescription:"GentlemonkeyGadgeteerGeraldoSkinDescription","Mode Easy":"Easy","Mode Medium":"Medium","Mode Hard":"Hard","Mode Impoppable":"Impoppable","Mode Sandbox":"Sandbox",RosaliaTinkerfairySkinName:"TinkerfairyRosaliaSkinName",RosaliaTinkerfairySkinDescription:"TinkerfairyRosaliaSkinDescription"},be={Easy:"Bronze",PrimaryOnly:"Bronze01",Deflation:"Bronze02",Medium:"Silver",MilitaryOnly:"Silver01",Apopalypse:"Silver03",Reverse:"Silver02",Hard:"Gold",MagicOnly:"Gold01",DoubleMoabHealth:"Gold03",HalfCash:"Gold04",AlternateBloonsRounds:"Gold02",Impoppable:"Impoppable",Clicks:"ImpoppableRuby","CHIMPS-BLACK":"ImpoppableHematite"},ye={"Scientist Gwendolin":"ScientistGwendolin","Biker Bones":"BikerBones","Sentai Captain Churchill":"SentaiCaptainChurchill","Cyber Quincy":"Cyber Quincy","Octo Jones":"OctoJones","Sleigh Captain Churchill":"SleighCaptainChurchill","Wolfpack Quincy":"WolfpackQuincy",ScientistGwendolin:"Scientist Gwendolin",BikerBones:"Biker Bones",SentaiCaptainChurchill:"Sentai Captain Churchill",CyberQuincy:"Cyber Quincy",OctoJones:"Octo Jones",SleighCaptainChurchill:"Sleigh Captain Churchill",WolfpackQuincy:"Wolfpack Quincy"},Le=["ZMYVERW","ZMYUWTV","ZMYUDTK","ZMYVPGA","ZMYVPFH","ZMYWHPC"];function ge(e,t){return"WizardMonkey"==e?`Assets/TowerIcon/${t}-Wizard.webp`:`Assets/TowerIcon/${t}-${e}.webp`}function Ce(e,t){return"WizardMonkey"==e?`Assets/UI/InstaContainer/${t}-Wizard.webp`:`Assets/UI/InstaContainer/${t}-${e}.webp`}function Ee(e,t){let a=Math.max(t[0],t[1],t[2]);switch(Math.max(t[0],t[1],t[2])){case parseInt(t[0]):a=`${a}00`;break;case parseInt(t[1]):a=`0${a}0`;break;case parseInt(t[2]):a=`00${a}`}return"WizardMonkey"==e?`Assets/InstaMonkeyIcon/${a}-WizardInsta.webp`:`Assets/InstaMonkeyIcon/${a}-${e}Insta.webp`}function ve(e){return e=e.replace(/[^a-zA-Z0-9]/g,""),ue[e]?`Assets/UpgradeIcon/${ue[e]}UpgradeIcon.webp`:`Assets/UpgradeIcon/${e}UpgradeIcon.webp`}function ke(e){return"SubAdmiral"==e?"Assets/KnowledgeIcon/NavalUpgradesIcon.webp":`Assets/KnowledgeIcon/${e}Icon.webp`}function we(e,t){return 1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function fe(e){return`Assets/HeroIconSquare/HeroIcon${e=me[e]||e}.webp`}function Se(e){return`Assets/HeroIconCircle/HeroIcon${e=me[e]||e}.webp`}function Me(e,t){return e=me[e]||e,1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function Te(e){return"#ouch"==e?"Assets/MapIcon/MapSelectouchButton.webp":`Assets/MapIcon/MapSelect${e}Button.webp`}function Be(e){return`Assets/PowerIcon/${e}Icon.webp`}function De(e,t){return t?"Assets/AchievementIcon/HiddenIcon.webp":`Assets/AchievementIcon/${e}Icon.webp`}function Pe(e){return ce[e]||e}function Ie(e){return`Assets/MedalIcon/${e}.webp`}function Ae(e){return`Assets/ModeIcon/${e}Btn.webp`}function He(e){switch(e.type){case"MonkeyMoney":return"Assets/UI/BloonjaminsIcon.webp";case"Power":return Be(e.power);case"InstaMonkey":return Ee(e.tower,e.tiers);case"KnowledgePoints":return"Assets/UI/KnowledgeIcon.webp";case"RandomInstaMonkey":return`Assets/UI/InstaRandomTier${0==e.tier?1:e.tier}.webp`;case"Trophy":return"Assets/UI/TrophyIcon.webp";default:return`Assets/UI/${e.value}Icon.webp`}}function $e(e){return`Assets/ProfileAvatar/${e}.webp`}function Ge(e){if(0==e.avatar)return"Assets/ProfileAvatar/ProfileAvatar01.webp";let t=parseInt(e.avatar.replace(/\D/g,""));return""==e.avatar||isNaN(t)?"Assets/ProfileAvatar/ProfileAvatar01.webp":t<=Ne.profileAvatars?`Assets/ProfileAvatar/${e.avatar}.webp`:e.avatarURL}function xe(e){if(0==e.banner)return"Assets/ProfileBanner/TeamsBannerDeafult.webp";let t=parseInt(e.banner.replace(/\D/g,""));return""==e.banner||isNaN(t)?"Assets/ProfileBanner/TeamsBannerDeafult.webp":t<=Ne.profileBanners?`Assets/ProfileBanner/${e.banner}.webp`:e.bannerURL}function Re(e){return Le.includes(e)?`Assets/CustomMapIcon/${e}.webp`:`https://data.ninjakiwi.com/btd6/maps/map/${e}/preview`}function Oe(e){return he[e]?_e[he[e]]:_e[e]?_e[e]:e}let Ne={},_e={};function Ue(){document.getElementById("loading").style.removeProperty("transform")}function je(){document.getElementById("loading").style.transform="scale(0)"}Ue(),Promise.all([fetch("./data/Constants.json").then((e=>e.json())),fetch("./data/English.json").then((e=>e.json()))]).then((([e,t])=>{Ne=e,_e=t,qe()})).catch((e=>{console.error("Error:",e),bt(e,"js")}));const ze=document.createElement("div");document.body.appendChild(ze),document.body.classList.add("hex-bg");const We=document.createElement("div");We.classList.add("header"),ze.appendChild(We);const Fe=document.createElement("div");Fe.classList.add("header-div"),We.appendChild(Fe);const Ke=document.createElement("h1");Ke.classList.add("title"),Ke.innerHTML="Bloons TD 6 Leaderboards",Fe.appendChild(Ke);const Je=document.createElement("div");Je.classList.add("content"),ze.appendChild(Je);const Ve=document.createElement("div");Ve.id="leaderboards-content",Ve.classList.add("extras","content-div"),Ve.style.display="flex",Je.appendChild(Ve);const Ye=document.createElement("div");Ye.id="leaderboard-content",Ye.classList.add("content-div"),Ye.style.display="none",Je.appendChild(Ye);const Qe=document.createElement("div");async function qe(){null==o&&await j("https://data.ninjakiwi.com/btd6/races",(e=>{o=e.body})),null==b&&await j("https://data.ninjakiwi.com/btd6/bosses",(e=>{b=e.body})),null==y&&await j("https://data.ninjakiwi.com/btd6/ct",(e=>{y=e.body})),je();let e=document.getElementById("leaderboards-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("leaderboard-page","page-extra"),e.appendChild(t);let a=document.createElement("p");a.classList.add("hero-progress-header-text","leaderboards-header-text"),a.style.backgroundImage="url('../Assets/UI/BlueTxtTextureMain.webp')",a.innerHTML="Active Events",t.appendChild(a);let n=document.createElement("div");n.classList.add("selectors-div"),t.appendChild(n);let l=document.createElement("p");l.classList.add("hero-progress-header-text","leaderboards-header-text"),l.innerHTML="Finished Events",t.appendChild(l);let s=document.createElement("div");s.id="maps-progress-views",s.classList.add("maps-progress-views"),t.appendChild(s);let d=document.createElement("p");d.classList.add("maps-progress-coop-toggle-text","black-outline"),d.innerHTML="Filter:",s.appendChild(d);let i=document.createElement("div");i.classList.add("maps-progress-view","black-outline","stats-tab-yellow"),i.innerHTML="All",i.addEventListener("click",(()=>{i.classList.add("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),c.classList.remove("stats-tab-yellow"),p.classList.remove("stats-tab-yellow"),Ze("all")})),s.appendChild(i);let r=document.createElement("div");r.classList.add("maps-progress-view","black-outline"),r.innerHTML="Race",r.addEventListener("click",(()=>{i.classList.remove("stats-tab-yellow"),r.classList.add("stats-tab-yellow"),c.classList.remove("stats-tab-yellow"),p.classList.remove("stats-tab-yellow"),Ze("race")})),s.appendChild(r);let c=document.createElement("div");c.classList.add("maps-progress-view","black-outline"),c.innerHTML="Boss",c.addEventListener("click",(()=>{i.classList.remove("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),c.classList.add("stats-tab-yellow"),p.classList.remove("stats-tab-yellow"),Ze("boss")})),s.appendChild(c);let p=document.createElement("div");p.classList.add("maps-progress-view","black-outline"),p.innerHTML="Contested Territory",p.addEventListener("click",(()=>{i.classList.remove("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),c.classList.remove("stats-tab-yellow"),p.classList.add("stats-tab-yellow"),Ze("ct")})),s.appendChild(p);let m=document.createElement("div");m.id="leaderboard-selectors",m.classList.add("selectors-div"),t.appendChild(m);let u=[],h=new Date;o.forEach((e=>{let t=document.createElement("div");t.classList.add("roundset-selector-div"),h>new Date(e.start)&&h<new Date(e.end)?n.appendChild(t):u.push([e,t,e.totalScores]),t.addEventListener("click",(()=>{Xe("leaderboards",e,"Race"),Ue()}));let a=document.createElement("img");a.classList.add("roundset-selector-img"),t.appendChild(a),a.src="../Assets/UI/EventRaceBtn.webp",t.classList.add("race-roundset");let l=document.createElement("div");l.classList.add("roundset-selector-text-div"),t.appendChild(l);let s=document.createElement("p");s.classList.add("selector-text","black-outline"),s.innerHTML=`${e.name}`,l.appendChild(s);let d=document.createElement("p");d.id="time-left-"+e.name,d.classList.add("selector-text","black-outline"),l.appendChild(d),new Date<new Date(e.start)?d.innerHTML="Coming Soon!":new Date(e.end)>new Date?(mt(new Date(e.end),d.id),timerInterval=setInterval((()=>mt(new Date(e.end),d.id)),1e3)):d.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let o=document.createElement("p");o.innerHTML=`Total Scores: ${e.totalScores}`,o.classList.add("selector-text","black-outline"),l.appendChild(o);let i=document.createElement("img");i.classList.add("selector-go-img"),i.src="../Assets/UI/EventLeaderboardBtn.webp",t.appendChild(i)})),b.forEach((e=>{let t=`${e.bossType.toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase()))} ${e.name.replace(/\D/g,"")}`,a=document.createElement("div");a.classList.add("roundset-selector-div"),h>new Date(e.start)&&h<new Date(e.end)?n.appendChild(a):u.push([e,a,e.totalScores_standard]),a.addEventListener("click",(()=>{Xe("leaderboards",e,"Boss"),Ue()}));let l=document.createElement("img");l.classList.add("roundset-selector-img"),a.appendChild(l),l.src=`../Assets/BossIcon/${e.bossType[0].toUpperCase()+e.bossType.slice(1)}EventIcon.webp`,a.style.backgroundImage=`url(../Assets/EventBanner/EventBannerSmall${e.bossType[0].toUpperCase()+e.bossType.slice(1)}.webp)`,a.classList.add("boss-roundset");let s=document.createElement("div");s.classList.add("roundset-selector-text-div"),a.appendChild(s);let d=document.createElement("p");d.classList.add("selector-text","black-outline"),d.innerHTML=`${t}`,s.appendChild(d);let o=document.createElement("p");o.id="time-left-"+t,o.classList.add("selector-text","black-outline"),s.appendChild(o),new Date<new Date(e.start)?o.innerHTML="Coming Soon!":new Date(e.end)>new Date?(mt(new Date(e.end),o.id),timerInterval=setInterval((()=>mt(new Date(e.end),o.id)),1e3)):o.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let i=document.createElement("p");i.innerHTML=`Total Scores: ${e.totalScores_standard}`,i.classList.add("selector-text","black-outline"),s.appendChild(i);let r=document.createElement("img");r.classList.add("selector-go-img"),r.src="../Assets/UI/EventLeaderboardBtn.webp",a.appendChild(r)})),b.forEach((e=>{let t=`Elite ${e.bossType.toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase()))} ${e.name.replace(/\D/g,"")}`,a=document.createElement("div");a.classList.add("roundset-selector-div"),h>new Date(e.start)&&h<new Date(e.end)?n.appendChild(a):u.push([e,a,e.totalScores_elite]),a.addEventListener("click",(()=>{Xe("leaderboards",e,"BossElite"),Ue()}));let l=document.createElement("img");l.classList.add("roundset-selector-img"),a.appendChild(l),l.src=`../Assets/BossIcon/Elite${e.bossType[0].toUpperCase()+e.bossType.slice(1)}EventIcon.webp`,a.style.backgroundImage=`url(../Assets/EventBanner/EventBannerSmall${e.bossType[0].toUpperCase()+e.bossType.slice(1)}.webp)`,a.classList.add("boss-roundset");let s=document.createElement("div");s.classList.add("roundset-selector-text-div"),a.appendChild(s);let d=document.createElement("p");d.classList.add("selector-text","black-outline"),d.innerHTML=`${t}`,s.appendChild(d);let o=document.createElement("p");o.id="time-left-"+t,o.classList.add("selector-text","black-outline"),s.appendChild(o),new Date<new Date(e.start)?o.innerHTML="Coming Soon!":new Date(e.end)>new Date?(mt(new Date(e.end),o.id),timerInterval=setInterval((()=>mt(new Date(e.end),o.id)),1e3)):o.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let i=document.createElement("p");i.innerHTML=`Total Scores: ${e.totalScores_elite}`,i.classList.add("selector-text","black-outline"),s.appendChild(i);let r=document.createElement("img");r.classList.add("selector-go-img"),r.src="../Assets/UI/EventLeaderboardBtn.webp",a.appendChild(r)})),y.forEach((e=>{let t=document.createElement("div");t.classList.add("roundset-selector-div"),h>new Date(e.start)&&h<new Date(e.end)?n.appendChild(t):u.push([e,t,e.totalScores_team]),t.addEventListener("click",(()=>{Xe("leaderboards",e,"CTTeam"),Ue()}));let a=document.createElement("img");a.classList.add("roundset-selector-img"),t.appendChild(a),a.src="../Assets/UI/ContestedLeaderboardBtn.webp",t.classList.add("ct-leaderboard-btn");let l=document.createElement("div");l.classList.add("roundset-selector-text-div"),t.appendChild(l);let s=document.createElement("p");s.classList.add("selector-text","black-outline"),s.innerHTML="Contested Territory - Teams",l.appendChild(s);let d=document.createElement("p");d.id="time-left-"+e.id+"-teams",d.classList.add("selector-text","black-outline"),l.appendChild(d),new Date<new Date(e.start)?d.innerHTML="Coming Soon!":new Date(e.end)>new Date?(mt(new Date(e.end),d.id),timerInterval=setInterval((()=>mt(new Date(e.end),d.id)),1e3)):d.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let o=document.createElement("p");o.innerHTML=`Total Scores: ${e.totalScores_team}`,o.classList.add("selector-text","black-outline"),l.appendChild(o);let i=document.createElement("img");i.classList.add("selector-go-img"),i.src="../Assets/UI/EventLeaderboardBtn.webp",t.appendChild(i)})),y.forEach((e=>{let t=document.createElement("div");t.classList.add("roundset-selector-div"),h>new Date(e.start)&&h<new Date(e.end)?n.appendChild(t):u.push([e,t,e.totalScores_player]),t.addEventListener("click",(()=>{Xe("leaderboards",e,"CTPlayer"),Ue()}));let a=document.createElement("img");a.classList.add("roundset-selector-img"),t.appendChild(a),a.src="../Assets/UI/ContestedTerritoryEventBtn.webp",t.classList.add("ct-leaderboard-btn");let l=document.createElement("div");l.classList.add("roundset-selector-text-div"),t.appendChild(l);let s=document.createElement("p");s.classList.add("selector-text","black-outline"),s.innerHTML="Contested Territory - Players",l.appendChild(s);let d=document.createElement("p");d.id="time-left-"+e.id,d.classList.add("selector-text","black-outline"),l.appendChild(d),new Date<new Date(e.start)?d.innerHTML="Coming Soon!":new Date(e.end)>new Date?(mt(new Date(e.end),d.id),timerInterval=setInterval((()=>mt(new Date(e.end),d.id)),1e3)):d.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let o=document.createElement("p");o.innerHTML=`Total Scores: ${e.totalScores_player}`,o.classList.add("selector-text","black-outline"),l.appendChild(o);let i=document.createElement("img");i.classList.add("selector-go-img"),i.src="../Assets/UI/EventLeaderboardBtn.webp",t.appendChild(i)})),u.sort(((e,t)=>new Date(t[0].end)-new Date(e[0].end))),u.forEach((([e,t,a])=>{h<new Date(e.start)||0!=a&&m.appendChild(t)})),0==n.childNodes.length&&(a.style.display="none",n.style.display="none");let L=document.createElement("div");L.classList.add("site-access-div"),t.appendChild(L);let g=document.createElement("p");g.classList.add("site-info-header","sites-text","black-outline"),g.innerHTML="Other Sites",L.appendChild(g);let C=document.createElement("div");C.classList.add("standalone-site-buttons"),L.appendChild(C);Object.entries({Roundsets:{link:"https://btd6apiexplorer.github.io/rounds",text:"Roundsets",icon:"DefaultRoundSetIcon",background:"BloonsBG"},"Rogue Artifacts":{link:"https://btd6apiexplorer.github.io/rogue",text:"Rogue Artifacts",icon:"RogueSiteBtn",background:"RogueBG"},"Insta Tracker":{link:"https://btd6apiexplorer.github.io/insta",text:"Insta Tracker",icon:"InstaSiteBtn",background:"CollectionHelp2"},"Main Site":{link:"https://btd6apiexplorer.github.io/",text:"Main Site",icon:"SiteBtn",background:"OverviewProfile"}}).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("site-button-div","pointer"),a.style.backgroundImage=`url(Assets/UI/${t.background}.webp)`,C.appendChild(a),a.addEventListener("click",(()=>{window.location.href=t.link}));let n=document.createElement("img");n.classList.add("site-button-icon"),n.src=`./Assets/UI/${t.icon}.webp`,a.appendChild(n);let l=document.createElement("p");l.classList.add("profile-name","readability-bg","black-outline"),l.style.marginLeft="0",l.innerHTML=t.text,a.appendChild(l)}))}function Ze(e){let t=document.getElementById("leaderboard-selectors");switch(e){case"race":t.childNodes.forEach((e=>{e.classList.contains("race-roundset")?e.style.display="flex":e.style.display="none"}));break;case"boss":t.childNodes.forEach((e=>{e.classList.contains("boss-roundset")?e.style.display="flex":e.style.display="none"}));break;case"ct":t.childNodes.forEach((e=>{e.classList.contains("ct-leaderboard-btn")?e.style.display="flex":e.style.display="none"}));break;default:t.childNodes.forEach((e=>{e.style.display="flex"}))}}function Xe(e,t,a){switch(a){case"Boss":r!=t.leaderboard_standard_players_1&&(c=1),r=t.leaderboard_standard_players_1;break;case"BossElite":r!=t.leaderboard_elite_players_1&&(c=1),r=t.leaderboard_elite_players_1;break;case"CTPlayer":r!=t.leaderboard_player&&(c=1),r=t.leaderboard_player;break;case"CTTeam":r!=t.leaderboard_team&&(c=1),r=t.leaderboard_team;break;default:r!=t.leaderboard&&(c=1),r=t.leaderboard}let n=document.getElementById("leaderboard-content");n.style.display="flex",n.innerHTML="",document.getElementById(`${e}-content`).style.display="none";let l=document.createElement("div");l.classList.add("full-leaderboard-div"),n.appendChild(l);let s=document.createElement("div");s.classList.add("leaderboard-top"),l.appendChild(s);let d=document.createElement("div");d.classList.add("leaderboard-header"),s.appendChild(d);let o=document.createElement("div");o.classList.add("leaderboard-header-left"),d.appendChild(o);let i=document.createElement("img");i.classList.add("modal-close"),i.src="./Assets/UI/CloseBtn.webp",i.addEventListener("click",(()=>{n.style.display="none",document.getElementById(`${e}-content`).style.display="flex"})),o.appendChild(i);let p=document.createElement("div");p.classList.add(`leaderboard-header-middle-${a.toLowerCase()}`),d.appendChild(p);let m=document.createElement("div");m.classList.add(`leaderboard-header-${a.toLowerCase()}`),p.appendChild(m);let u=document.createElement("p");switch(u.classList.add("leaderboard-header-title-text"),m.appendChild(u),a){case"Race":u.classList.add("black-outline"),u.innerHTML="Race Leaderboard";break;case"Boss":u.classList.add("black-outline"),u.innerHTML="Boss Leaderboard";break;case"BossElite":u.classList.add("black-outline"),u.innerHTML="Elite Boss Leaderboard";break;case"CTPlayer":u.classList.add("ct-text"),u.innerHTML="Contested Territory <br> Player Leaderboard";break;case"CTTeam":u.classList.add("ct-text"),u.innerHTML="Contested Territory <br> Team Leaderboard"}let h=document.createElement("div");if(h.classList.add("leaderboard-header-right"),d.appendChild(h),"Boss"==a||"BossElite"==a){let e=document.createElement("p");e.classList.add("leaderboard-disclaimer","black-outline"),e.innerHTML="Note: Only singleplayer boss leaderboards are available on the API currently.",s.appendChild(e)}let b=document.createElement("div");b.id="leaderboard-column-labels",b.classList.add("leaderboard-column-labels"),s.appendChild(b);let y=document.createElement("div");y.id="leaderboard-entries",y.classList.add("leaderboard-entries"),l.appendChild(y),et(t,a)}async function et(e,a){await V(r);let n=null;switch(a){case"CTTeam":n="CTTeam";break;case"CTPlayer":n="CTPlayer"}if(e.hasOwnProperty("leaderboard")&&e.leaderboard.includes("races")&&(n="GameTime"),e.hasOwnProperty("bossType"))switch(e.scoringType){case"GameTime":n="GameTime";break;case"LeastCash":n="LeastCash";break;case"LeastTiers":n="LeastTiers"}R=e,t=a,at(n),document.getElementById("leaderboard-entries").innerHTML="",tt(x[r].entries,1,x[r].entries.length)}function tt(e,a,n){let l=document.getElementById("leaderboard-entries"),s=R,d=t;if(e.length>0&&je(),null!=e)e.forEach(((t,o)=>{let i={};t.hasOwnProperty("scoreParts")&&t.scoreParts.forEach(((e,t)=>{i[e.name]=e}));let c=document.createElement("div");c.classList.add("leaderboard-entry"),"CTTeam"!=d&&c.addEventListener("click",(()=>{nt("leaderboard",t.profile)})),l.appendChild(c);let p=document.createElement("div");p.classList.add("leaderboard-entry-div"),c.appendChild(p);let m=document.createElement("p");m.classList.add("leaderboard-entry-rank","black-outline"),m.innerHTML=o+(a-1)*n+1,p.appendChild(m);let u=document.createElement("div");u.classList.add("leaderboard-entry-player"),p.appendChild(u);let b=null,y=null,L=null;"CTTeam"==d?(b=document.createElement("div"),b.classList.add("leaderboard-entry-icon-ct"),u.appendChild(b),y=document.createElement("img"),y.classList.add("leaderboard-entry-frame"),y.src="./Assets/UI/TeamFrame1.webp",b.appendChild(y),L=document.createElement("img"),L.classList.add("leaderboard-entry-emblem"),L.src="./Assets/UI/TeamIcon1.webp",b.appendChild(L)):(b=document.createElement("img"),b.classList.add("leaderboard-entry-icon"),b.src="./Assets/ProfileAvatar/ProfileAvatar01.webp",u.appendChild(b));let g=document.createElement("p");g.classList.add("leaderboard-entry-name","leaderboard-outline"),g.innerHTML=t.displayName,u.appendChild(g);let C=document.createElement("div");C.classList.add("leaderboard-entry-time-submit-div"),p.appendChild(C);let E=document.createElement("div");E.classList.add("leaderboard-entry-score"),p.appendChild(E);let v=document.createElement("img");v.classList.add("leaderboard-entry-score-icon"),v.src="./Assets/UI/StopWatch.webp",E.appendChild(v);let k=document.createElement("p");if(k.classList.add("leaderboard-entry-main-score","leaderboard-outline"),E.appendChild(k),s.hasOwnProperty("leaderboard")&&s.leaderboard.includes("races")){let e=new Date(s.start+i["Time after event start"].score),a=document.createElement("p");a.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),a.innerHTML=e.toLocaleString(),C.appendChild(a);let n=document.createElement("p");n.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),n.innerHTML=rt(new Date,e),C.appendChild(n),k.innerHTML=it(t.score)}if(s.hasOwnProperty("bossType"))switch(s.scoringType){case"GameTime":let e=new Date(s.start+i["Time after event start"].score),a=document.createElement("p");a.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),a.innerHTML=e.toLocaleString(),C.appendChild(a);let n=document.createElement("p");n.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),n.innerHTML=rt(new Date,e),C.appendChild(n),k.innerHTML=it(t.score);break;case"LeastCash":k.innerHTML=t.score.toLocaleString(),v.src="./Assets/UI/LeastCashIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large");let l=document.createElement("div");l.classList.add("leaderboard-entry-game-time"),p.appendChild(l);let d=document.createElement("img");d.classList.add("leaderboard-entry-score-icon"),d.src="./Assets/UI/StopWatch.webp",l.appendChild(d);let o=document.createElement("p");o.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),o.innerHTML=it(i["Game Time"].score),l.appendChild(o);break;case"LeastTiers":k.innerHTML=t.score.toLocaleString(),v.src="./Assets/UI/LeastTiersIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large");let r=document.createElement("div");r.classList.add("leaderboard-entry-game-time"),p.appendChild(r);let c=document.createElement("img");c.classList.add("leaderboard-entry-score-icon"),c.src="./Assets/UI/StopWatch.webp",r.appendChild(c);let m=document.createElement("p");m.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),m.innerHTML=it(i["Game Time"].score),r.appendChild(m),E.classList.add("leaderboard-entry-score-tiers")}if(s.hasOwnProperty("tiles")&&(v.src="./Assets/UI/CtPointsIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large"),k.innerHTML=t.score.toLocaleString(),u.classList.add("leaderboard-entry-team")),!B){new IntersectionObserver(((l,s)=>{l.forEach((async l=>{l.isIntersecting?(e.length==o+1&&(Y(x[r].next),x[r].nextRequested=!0),1==a&&o+(a-1)*n+1<=50&&O(t.profile,(async()=>{try{let e=await ne(t.profile);null!=e&&(e.hasOwnProperty("owner")?(y.src=e.frameURL,L.src=e.iconURL,p.style.backgroundImage=`url(${xe(e)})`):(b.src=Ge(e),p.style.backgroundImage=`url(${xe(e)})`),s.unobserve(l.target))}catch(e){console.error("Error fetching user profile:",e)}}))):N(t.profile)}))})).observe(b)}if(null!=h[t.profile.split("/").pop()]){let e=h[t.profile.split("/").pop()];e.hasOwnProperty("owner")?(y.src=e.frameURL,L.src=e.iconURL,p.style.backgroundImage=`url(${xe(e)})`):(b.src=Ge(e),p.style.backgroundImage=`url(${xe(e)})`)}}));else{let e=document.createElement("p");e.classList.add("no-data-found","black-outline"),e.style.width="250px",e.innerHTML="No Data Found",l.appendChild(e)}}function at(e){let t=document.getElementById("leaderboard-column-labels");t.innerHTML="";let a=document.createElement("p");a.classList.add("leaderboard-column-rank","black-outline"),a.innerHTML="Rank",t.appendChild(a);let n=document.createElement("p");switch(n.classList.add("leaderboard-column-name","black-outline"),n.innerHTML="Player",t.appendChild(n),e){case"GameTime":let e=document.createElement("p");e.classList.add("leaderboard-column-time-submitted","black-outline"),e.innerHTML="Time Submitted",t.appendChild(e);let a=document.createElement("p");a.classList.add("leaderboard-column-time-score","black-outline"),a.innerHTML="Game Time",t.appendChild(a);break;case"LeastCash":let l=document.createElement("p");l.classList.add("leaderboard-column-cash-spent","black-outline"),l.innerHTML="Cash Spent",t.appendChild(l);let s=document.createElement("p");s.classList.add("leaderboard-column-time-score","black-outline"),s.innerHTML="Game Time",t.appendChild(s);break;case"LeastTiers":let d=document.createElement("p");d.classList.add("leaderboard-column-tiers-used","black-outline"),d.innerHTML="Tiers Used",t.appendChild(d);let o=document.createElement("p");o.classList.add("leaderboard-column-time-score","black-outline"),o.innerHTML="Game Time",t.appendChild(o);break;case"CTTeam":n.innerHTML="Team";case"CTPlayer":let i=document.createElement("p");i.classList.add("leaderboard-column-ct-points","black-outline"),i.innerHTML="CT Points",t.appendChild(i)}}async function nt(e,t){if(null==(t=await ne(t)))return;ht(),document.getElementById(`${e}-content`).style.display="none";let a=document.getElementById("publicprofile-content");a.style.display="flex",a.innerHTML="";let n=document.createElement("div");n.classList.add("publicprofile-div"),a.appendChild(n);let l=document.createElement("img");l.classList.add("error-modal-close"),l.src="./Assets/UI/CloseBtn.webp",l.addEventListener("click",(()=>{lt(e)})),n.appendChild(l);let s=document.createElement("div");s.classList.add("profile-header","profile-banner"),s.style.backgroundImage=`linear-gradient(to bottom, transparent 50%, var(--profile-primary) 70%),url('${xe(t)}')`,n.appendChild(s),s.appendChild(st(100,Ge(t)));let d=document.createElement("div");d.classList.add("profile-top-bottom"),s.appendChild(d);let o=document.createElement("div");o.classList.add("profile-top-public"),d.appendChild(o);let i=document.createElement("p");i.classList.add("profile-name","black-outline"),i.innerHTML=t.displayName,o.appendChild(i);let r=document.createElement("div");r.classList.add("rank-star-public"),o.appendChild(r);let c=document.createElement("img");c.classList.add("rank-img"),c.src="../Assets/UI/LvlHolder.webp",r.appendChild(c);let p=document.createElement("p");if(p.classList.add("rank-text","black-outline"),p.innerHTML=t.rank,r.appendChild(p),t.veteranRank>0){let e=document.createElement("div");e.classList.add("rank-star-public"),o.appendChild(e);let a=document.createElement("img");a.classList.add("rank-img"),a.src="../Assets/UI/LvlHolderVeteran.webp",e.appendChild(a);let n=document.createElement("p");n.classList.add("rank-text","black-outline"),n.innerHTML=t.veteranRank,e.appendChild(n)}let m=document.createElement("div");m.classList.add("profile-followers"),o.appendChild(m);let u=document.createElement("p");u.classList.add("followers-label","black-outline"),u.innerHTML="Followers",m.appendChild(u);let h=document.createElement("p");h.classList.add("followers-count"),h.innerHTML=t.followers.toLocaleString(),m.appendChild(h);let b=document.createElement("div");b.classList.add("below-profile-header"),n.appendChild(b);let y=document.createElement("div");y.classList.add("left-column-div"),b.appendChild(y);let L=document.createElement("div");L.classList.add("left-column-header"),y.appendChild(L);let g=document.createElement("p");g.classList.add("column-header-text","black-outline"),g.innerHTML="Medals",L.appendChild(g);let C={},E={};for(let[e,a]of Object.entries(be))C["Medal"+a]=t._medalsSinglePlayer[e]||0,E["MedalCoop"+a]=t._medalsMultiplayer[e]||0;C={...C,...E},C.PhayzeEliteBadge=t.bossBadgesElite.Phayze||0,C.PhayzeBadge=t.bossBadgesNormal.Phayze||0,C.DreadbloonEliteBadge=t.bossBadgesElite.Dreadbloon||0,C.DreadbloonBadge=t.bossBadgesNormal.Dreadbloon||0,C.VortexEliteBadge=t.bossBadgesElite.Vortex||0,C.VortexBadge=t.bossBadgesNormal.Vortex||0,C.LychEliteBadge=t.bossBadgesElite.Lych||0,C.LychBadge=t.bossBadgesNormal.Lych||0,C.BloonariusEliteBadge=t.bossBadgesElite.Bloonarius||0,C.BloonariusBadge=t.bossBadgesNormal.Bloonarius||0,C.MedalEventBronzeMedal=t._medalsRace.Bronze||0,C.MedalEventSilverMedal=t._medalsRace.Silver||0,C.MedalEventGoldSilverMedal=t._medalsRace.GoldSilver||0,C.MedalEventDoubleGoldMedal=t._medalsRace.DoubleGold||0,C.MedalEventGoldDiamondMedal=t._medalsRace.GoldDiamond||0,C.MedalEventDiamondMedal=t._medalsRace.Diamond||0,C.MedalEventRedDiamondMedal=t._medalsRace.RedDiamond||0,C.MedalEventBlackDiamondMedal=t._medalsRace.BlackDiamond||0,C.OdysseyStarIcon=t.gameplay.totalOdysseyStars||0,C.BossMedalEventBronzeMedal=t._medalsBoss.Bronze||0,C.BossMedalEventSilverMedal=t._medalsBoss.Silver||0,C.BossMedalEventDoubleSilverMedal=t._medalsBoss.DoubleSilver||0,C.BossMedalEventGoldSilverMedal=t._medalsBoss.GoldSilver||0,C.BossMedalEventDoubleGoldMedal=t._medalsBoss.DoubleGold||0,C.BossMedalEventGoldDiamondMedal=t._medalsBoss.GoldDiamond||0,C.BossMedalEventDiamondMedal=t._medalsBoss.Diamond||0,C.BossMedalEventRedDiamondMedal=t._medalsBoss.RedDiamond||0,C.BossMedalEventBlackDiamondMedal=t._medalsBoss.BlackDiamond||0,C.EliteBossMedalEventBronzeMedal=t._medalsBossElite.Bronze||0,C.EliteBossMedalEventSilverMedal=t._medalsBossElite.Silver||0,C.EliteBossMedalEventDoubleSilverMedal=t._medalsBossElite.DoubleSilver||0,C.EliteBossMedalEventGoldSilverMedal=t._medalsBossElite.GoldSilver||0,C.EliteBossMedalEventDoubleGoldMedal=t._medalsBossElite.DoubleGold||0,C.EliteBossMedalEventGoldDiamondMedal=t._medalsBossElite.GoldDiamond||0,C.EliteBossMedalEventDiamondMedal=t._medalsBossElite.Diamond||0,C.EliteBossMedalEventRedDiamondMedal=t._medalsBossElite.RedDiamond||0,C.EliteBossMedalEventBlackDiamondMedal=t._medalsBossElite.BlackDiamond||0,C.CtLocalPlayerBronzeMedal=t._medalsCTLocal.Bronze||0,C.CtLocalPlayerSilverMedal=t._medalsCTLocal.Silver||0,C.CtLocalPlayerDoubleGoldMedal=t._medalsCTLocal.DoubleGold||0,C.CtLocalPlayerGoldDiamondMedal=t._medalsCTLocal.GoldDiamond||0,C.CtLocalPlayerDiamondMedal=t._medalsCTLocal.Diamond||0,C.CtLocalPlayerRedDiamondMedal=t._medalsCTLocal.RedDiamond||0,C.CtLocalPlayerBlackDiamondMedal=t._medalsCTLocal.BlackDiamond||0,C.CtGlobalPlayerBronzeMedal=t._medalsCTGlobal.Bronze||0,C.CtGlobalPlayerSilverMedal=t._medalsCTGlobal.Silver||0,C.CtGlobalPlayerDoubleSilverMedal=t._medalsCTGlobal.DoubleSilver||0,C.CtGlobalPlayerGoldSilverMedal=t._medalsCTGlobal.GoldSilver||0,C.CtGlobalPlayerDoubleGoldMedal=t._medalsCTGlobal.DoubleGold||0,C.CtGlobalPlayerGoldDiamondMedal=t._medalsCTGlobal.GoldDiamond||0,C.CtGlobalPlayerDiamondMedal=t._medalsCTGlobal.Diamond||0,C.CtGlobalPlayerRedDiamondMedal=t._medalsCTGlobal.RedDiamond||0,C.CtGlobalPlayerBlackDiamondMedal=t._medalsCTGlobal.BlackDiamond||0;let v=document.createElement("div");v.classList.add("currency-medals-div"),y.appendChild(v);let k=document.createElement("div");k.classList.add("medals-div"),v.appendChild(k);for(let[e,t]of Object.entries(C)){if(0===t)continue;let a=document.createElement("div");a.classList.add("medal-div"),a.title=Ne.medalLabels[e],k.appendChild(a);let n=document.createElement("img");n.classList.add("medal-img"),n.src=Ie(e),n.style.display="none",n.addEventListener("load",(()=>{n.width<n.height?n.style.width=`${ut(3,70,256,0,n.width)}px`:n.style.height=`${ut(3,70,256,0,n.height)}px`,n.style.removeProperty("display")})),a.appendChild(n);let l=document.createElement("p");l.classList.add("medal-text","black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l),tippy(a,{content:Ne.medalLabels[e],placement:"top",theme:"speech_bubble"})}let w=document.createElement("div");w.classList.add("top-heroes-monkeys-div"),y.appendChild(w);let f=document.createElement("div");f.classList.add("top-heroes-div"),w.appendChild(f);let S=document.createElement("div");S.classList.add("top-heroes-top-div"),f.appendChild(S);let M=document.createElement("div");M.classList.add("top-heroes-top-ribbon-div"),S.appendChild(M);let T=document.createElement("p");T.classList.add("top-heroes-text","black-outline"),T.innerHTML="Top Heroes",M.appendChild(T);let B=document.createElement("div");B.classList.add("maps-progress-coop-toggle"),S.appendChild(B);let D=document.createElement("p");D.classList.add("maps-progress-coop-toggle-text","black-outline"),D.innerHTML="Show All: ",B.appendChild(D);let P=document.createElement("input");P.classList.add("maps-progress-coop-toggle-input"),P.type="checkbox",B.appendChild(P);let I=document.createElement("div");I.classList.add("top-heroes-list"),f.appendChild(I);let A=document.createElement("div");A.classList.add("top-3-heroes-div"),I.appendChild(A);let H=document.createElement("div");H.classList.add("other-heroes-div"),H.style.display="none",I.appendChild(H),P.addEventListener("change",(()=>{P.checked?H.style.display="flex":H.style.display="none"}));let $=0,G=Object.keys(Ne.heroesInOrder);for(let[e,a]of Object.entries(t.heroesPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===a)continue;if(!G.includes(e))continue;let t=document.createElement("div");t.classList.add("hero-div"),$<3?A.appendChild(t):H.appendChild(t);let n=document.createElement("img");n.classList.add("hero-img"),n.src=we(e,1),n.style.display="none",n.addEventListener("load",(()=>{n.width<n.height?n.style.width=`${ut(3,150,1920,0,n.width)}px`:n.style.height=`${ut(3,150,1920,0,n.height)}px`,n.style.removeProperty("display")})),t.appendChild(n);let l=document.createElement("p");l.classList.add("hero-text","black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),$++,tippy(t,{content:`${Oe(e)} Placed ${a.toLocaleString()} Times`,placement:"top",theme:"speech_bubble"})}let x=document.createElement("div");x.classList.add("top-heroes-div"),w.appendChild(x);let R=document.createElement("div");R.classList.add("top-heroes-top-div"),x.appendChild(R);let O=document.createElement("div");O.classList.add("top-heroes-top-ribbon-div"),R.appendChild(O);let N=document.createElement("p");N.classList.add("top-heroes-text","black-outline"),N.innerHTML="Top Towers",O.appendChild(N);let _=document.createElement("div");_.classList.add("maps-progress-coop-toggle"),R.appendChild(_);let U=document.createElement("p");U.classList.add("maps-progress-coop-toggle-text","black-outline"),U.innerHTML="Show All: ",_.appendChild(U);let j=document.createElement("input");j.classList.add("maps-progress-coop-toggle-input"),j.type="checkbox",_.appendChild(j);let z=document.createElement("div");z.classList.add("top-heroes-list"),x.appendChild(z);let W=document.createElement("div");W.classList.add("top-3-heroes-div"),z.appendChild(W);let F=document.createElement("div");F.classList.add("other-heroes-div"),F.style.display="none",z.appendChild(F),j.addEventListener("change",(()=>{j.checked?F.style.display="flex":F.style.display="none"})),$=0;let K=Object.keys(Ne.towersInOrder);for(let[e,a]of Object.entries(t.towersPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===a)continue;if(!K.includes(e))continue;let t=document.createElement("div");t.classList.add("hero-div"),$<3?W.appendChild(t):F.appendChild(t);let n=document.createElement("img");n.classList.add("hero-img"),n.src=Ce(e,"000"),t.appendChild(n);let l=document.createElement("p");l.classList.add("hero-text","black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),$++,tippy(t,{content:`${Oe(e)} Placed ${a.toLocaleString()} Times`,placement:"top",theme:"speech_bubble"})}let J=document.createElement("div");J.classList.add("right-column-div"),b.appendChild(J);let V=document.createElement("div");V.classList.add("overview-right-column-header"),J.appendChild(V);let Y=document.createElement("p");Y.classList.add("column-header-text","black-outline"),Y.innerHTML="Overall Stats",V.appendChild(Y);let Q={};Q["Games Played"]=t.gameplay.gameCount,Q["Games Won"]=t.gameplay.gamesWon,Q["Highest Round (All Time)"]=t.gameplay.highestRound,Q["Highest Round (CHIMPS)"]=t.gameplay.highestRoundCHIMPS,Q["Highest Round (Deflation)"]=t.gameplay.highestRoundDeflation,Q["Monkeys Placed"]=t.gameplay.monkeysPlaced,Q["Total Pop Count"]=t.bloonsPopped.bloonsPopped,Q["Total Co-Op Pop Count"]=t.bloonsPopped.coopBloonsPopped,Q["Camo Bloons Popped"]=t.bloonsPopped.camosPopped,Q["Lead Bloons Popped"]=t.bloonsPopped.leadsPopped,Q["Purple Bloons Popped"]=t.bloonsPopped.purplesPopped,Q["Regrow Bloons Popped"]=t.bloonsPopped.regrowsPopped,Q["Ceramic Bloons Popped"]=t.bloonsPopped.ceramicsPopped,Q["MOABs Popped"]=t.bloonsPopped.moabsPopped,Q["BFBs Popped"]=t.bloonsPopped.bfbsPopped,Q["ZOMGs Popped"]=t.bloonsPopped.zomgsPopped,Q["DDTs Popped"]=t.bloonsPopped.ddtsPopped,Q["BADs Popped"]=t.bloonsPopped.badsPopped,Q["Bloons Leaked"]=t.bloonsPopped.bloonsLeaked,Q["Cash Generated"]=t.gameplay.cashEarned,Q["Cash Gifted"]=t.gameplay.coopCashGiven,Q["Abilities Used"]=t.gameplay.abilitiesUsed,Q["Powers Used"]=t.gameplay.powersUsed,Q["Insta Monkeys Used"]=t.gameplay.instaMonkeysUsed,Q["Daily Reward Chests Opened"]=t.gameplay.dailyRewards,Q["Challenges Completed"]=t.gameplay.challengesCompleted,Q.Achievements=`${t.achievements}/150`,Q["Odysseys Completed"]=t.gameplay.totalOdysseysCompleted,Q["Lifetime Trophies"]=t.gameplay.totalTrophiesEarned,Q["Necro Bloons Reanimated"]=t.bloonsPopped.necroBloonsReanimated,Q["Transforming Tonics Used"]=t.bloonsPopped.transformingTonicsUsed,Q["Most Experienced Monkey"]=Oe(t.mostExperiencedMonkey),Q["Insta Monkey Collection"]=`${t.gameplay.instaMonkeyCollection}/${Ne.totalInstaMonkeys}`,Q["Collection Chests Opened"]=t.gameplay.collectionChestsOpened,Q["Golden Bloons Popped"]=t.bloonsPopped.goldenBloonsPopped,Q["Monkey Teams Wins"]=t.gameplay.monkeyTeamsWins,Q["Bosses Popped"]=t.bloonsPopped.bossesPopped,Q["Damage Done To Bosses"]=t.gameplay.damageDoneToBosses;let q=document.createElement("div");q.classList.add("profile-stats"),J.appendChild(q);for(let[e,t]of Object.entries(Q)){let a=document.createElement("div");a.classList.add("stat"),q.appendChild(a);let n=document.createElement("p");n.classList.add("stat-name"),n.innerHTML=e,a.appendChild(n);let l=document.createElement("p");l.classList.add("stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}}function lt(e){document.getElementById("publicprofile-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}function st(e,t){let a=document.createElement("div");a.style.width=`${e}px`,a.style.height=`${e}px`,a.classList.add("avatar");let n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${e}px`,n.src="../Assets/UI/InstaTowersContainer.webp",a.appendChild(n);let l=document.createElement("img");return l.classList.add("avatar-img","noSelect"),l.style.width=`${e}px`,l.src=t,a.appendChild(l),a}function dt(e){let t=document.getElementsByClassName("loading-icon")[0].cloneNode(!0);t.classList.add("loading-icon-leaderboard"),t.style.height="unset",e.appendChild(t)}function ot(e){return[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)].map((e=>e<10?"0"+e:e)).join(":")}function it(e){let t=Math.floor(e/1e3),a=e%1e3,n=Math.floor(t/3600);t%=3600;let l=Math.floor(t/60),s=t%60;l=l.toString().padStart(2,"0"),s=s.toString().padStart(2,"0"),a=a.toString().padStart(3,"0");let d=`${l}:${s}.${a}`;return n>0&&(n=n.toString().padStart(2,"0"),d=`${n}:${d}`),d}function rt(e,t){const a=[{name:"year",ms:31536e6},{name:"month",ms:2592e6},{name:"day",ms:864e5},{name:"hour",ms:36e5},{name:"minute",ms:6e4},{name:"second",ms:1e3}],n=e-t;for(const e of a){if(n<e.ms)continue;let t=Math.round(n/e.ms);return`${t} ${e.name}${t>1?"s":""} ago`}}function ct(e){null!=e?document.body.style.backgroundColor=`rgb(${255*e[0]},${255*e[1]},${255*e[2]})`:document.body.style.removeProperty("background-color")}function ot(e){return[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)].map((e=>e<10?"0"+e:e)).join(":")}function pt(e){return(e-new Date)/1e3}function mt(e,t){const a=pt(e),n=document.getElementById(t);if(a>172800){const e=Math.ceil(a/86400);n.textContent=`${e} days left`}else n.textContent=a<0?"Finished":ot(a)}function ut(e,t,a,n,l){switch(e){case 1:return a*(n/l);case 2:return t*(l/n);case 3:return l*(t/a);case 4:return n*(a/t)}}function ht(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function bt(e,t,a){if(S&&!a)return;let n=document.createElement("div");n.classList.add("error-modal-overlay"),document.body.appendChild(n);let l=document.createElement("div");l.id="error-modal",l.classList.add("error-modal"),n.appendChild(l);let s=document.createElement("div");s.id="error-modal-header",s.classList.add("error-modal-header"),l.appendChild(s);let d=document.createElement("img");d.id="error-modal-header-img",d.classList.add("error-modal-header-img"),d.src="./Assets/UI/BadConnectionBtn.webp",s.appendChild(d);let o=document.createElement("p");o.classList.add("error-modal-header-text","black-outline"),o.innerHTML="Error",s.appendChild(o);let i=document.createElement("div");i.classList.add("error-modal-dummy"),s.appendChild(i);let r=document.createElement("div");r.id="error-modal-content",r.classList.add("error-modal-content"),r.innerHTML=""+e,l.appendChild(r);let c=document.createElement("div");if(c.classList.add("error-modal-content"),"Invalid user ID / Player Does not play this game"===e)c.innerHTML="Please try again or create a new Open Access Key.",l.appendChild(c);if("ratelimit"==t){let e=document.createElement("div");e.classList.add("error-toggle-div"),l.appendChild(e);let t=document.createElement("p");t.classList.add("maps-progress-coop-toggle-text","black-outline"),t.innerHTML="Manually Load Profiles: ",e.appendChild(t);let a=document.createElement("input");a.classList.add("maps-progress-coop-toggle-input"),a.type="checkbox",a.checked=B,a.addEventListener("change",(()=>{B=!!a.checked})),e.appendChild(a)}let p=document.createElement("div");p.classList.add("error-modal-ok-button-div"),l.appendChild(p);let m=document.createElement("div");m.classList.add("start-button","modal-ok-button","black-outline"),m.innerHTML="OK",m.addEventListener("click",(()=>{S=!1,document.body.removeChild(n)})),p.appendChild(m);let u=document.createElement("img");u.classList.add("error-modal-close"),u.src="./Assets/UI/CloseBtn.webp",u.addEventListener("click",(()=>{S=!1,document.body.removeChild(n)})),r.appendChild(u),S=!0}Qe.id="publicprofile-content",Qe.classList.add("extras","content-div"),Qe.style.display="none",Je.appendChild(Qe);