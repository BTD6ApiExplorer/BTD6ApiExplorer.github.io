let e,t,a="",n={},l={},d={},s={},o=null,i=null,r=null,c=1,p=null,m={},u=!1,h={},b=null,y=null,L=null,g={},C=null,E=null,v=1,w=null,k="newest",f=!1,M=!1,S={},T=!1,B=!1,D=100,P=200,I=0,H=0,A=Date.now(),$=[],G=!1,x={},O={};function N(e){$.push(e),G||_()}function R(){const e=I/(D/2);return P+P*Math.pow(e,2)}async function _(){G||(G=!0,function e(){if(0===$.length)return void(G=!1);const t=Date.now();if(t-A>=18e4&&(I=0,A=t),I<D){const e=$.shift();I++,e()}const a=R();setTimeout(e,a)}())}async function U(e,t){let a=null;try{f?(a=await fetch(e,{cache:"reload"}),f=!1,T=!1):(a=await fetch(e),T=!1)}catch(e){return navigator.onLine?(T=!0,$=[],ht("You have hit the rate limit.<br>If you are browsing the leaderboards or content browsers, please slow down!<br><br>The rate limit will clear after a short time. You can also help prevent rate limiting by toggling the setting below which stops player profiles from loading automatically.","ratelimit"),Ue(),pressedStart=!1,`You have hit the rate limit. [${e}]`):(ht("You are currently offline. Please check your internet connection.","api"),`You are currently offline. [${e}]`)}try{let e=await a.json();return 1==e.success?t(e):"Rate limit"==e.reason?(M=!0,ht("You have hit the rate limit. Please try again later.","api")):(document.getElementById("loading").style.transform="scale(0)",pressedStart=!1,ht(e.error,"api")),e}catch(e){return ht(`Something went wrong with the request. Response Code: ${a.status} [${e}]`,"api"),`Something went wrong with the request. Response Code: ${a.status} [${e}]`}}async function j(e){f=!0;let t=!0;if(await U(`https://data.ninjakiwi.com/btd6/save/${e}`,(a=>{n=a.body,l=a.model,readyFlags[0]=1,t=!1,z(e)})),t&&!T){let t=document.getElementsByClassName("error-modal-overlay");for(element of t)element.parentNode.removeChild(element);delete m[e],de(),generateFrontPage(),ht("Your Open Access Key has expired. Please make a new one and try again.","expire",!0)}}async function z(e){f=!0,U(`https://data.ninjakiwi.com/btd6/users/${e}`,(t=>{d=t.body,s=t.model,m[e]={displayName:d.displayName,avatar:$e(d),banner:Ge(d)},de(),readyFlags[1]=1,fetchDependencies()}))}async function W(){null==o?U("https://data.ninjakiwi.com/btd6/races",(e=>{o=e.body,generateRaces()})):generateRaces()}async function F(e){return o&&o[e]&&"string"==typeof o[e].metadata?U(o[e].metadata,(t=>(o[e].metadata=t.body,o[e]))):o[e]}async function K(){return r?(i=null,U(`${r}?page=${c}`,(e=>(i=e.body,p=i.length,document.getElementById("leaderboard-footer-page-number").innerHTML=`Page ${c} (#${c*p-(p-1)} - ${c*p})`,i)))):ht("Leaderboard Fetch Error: No leaderboard data found")}async function J(e){return null==e&&(e=r),$=[],null==x[r]&&(x[r]={entries:[]},V(e)),x[r]}async function V(e){null!=e&&(I++,await U(e,(t=>{x[r].entries=x[r].entries.concat(t.body),et(t.body,isNaN(e.split("=")[1])?1:parseInt(e.split("=")[1]),t.body.length),x[r].next=t.next})))}async function Y(){null==b?U("https://data.ninjakiwi.com/btd6/bosses",(e=>{b=e.body,generateBosses(showElite)})):generateBosses(showElite)}async function Q(e,t){return b&&b[e]&&"string"==typeof b[e][t?"metadataElite":"metadataStandard"]?U(b[e][t?"metadataElite":"metadataStandard"],(a=>(b[e][t?"metadataElite":"metadataStandard"]=a.body,b[e]))):b[e]}async function Z(){null==y?U("https://data.ninjakiwi.com/btd6/ct",(e=>{y=e.body,generateCTs()})):generateCTs()}async function X(e){let t=null;return await U(e,(e=>(t=e.body,t))),t}async function q(){if(null!=L)return L;await U("https://data.ninjakiwi.com/btd6/challenges/filter/daily",(e=>(L=e.body,L)))}async function ee(e){return null==g[e]&&await U(`https://data.ninjakiwi.com/btd6/challenges/challenge/${e}`,(t=>(g[e]=t.body,g[e]))),g[e]}async function te(){return E?(C=null,U(`${E}${k}?page=${v}`,(e=>(C=e.body,w=C.length,document.getElementById("browser-footer-page-number").innerHTML=`Page ${v} of 4`,i)))):ht("Content Browser Fetch Error: No data found")}async function ae(e){let t=e.split("/").pop();return null==h[t]&&await U(e,(e=>{h[t]=e.body})),h[t]}async function ne(e){return null==S[e]&&await U(`https://data.ninjakiwi.com/btd6/maps/map/${e}`,(t=>(S[e]=t.body,S[e]))),S[e]}function le(){null!=localStorage.getItem("BTD6OAKStorage")&&(m=JSON.parse(localStorage.getItem("BTD6OAKStorage")))}function de(){localStorage.setItem("BTD6OAKStorage",JSON.stringify(m))}function se(e){e.substring(0,3),parseInt(e.substring(3,7));let t=e.substring(7);return[parseInt(t.substring(0,4)),parseInt(t.substring(4,6)),parseInt(t.substring(6,8))]}function oe(e,t){let a=new Date(2024,4,25),n=(t?2101:2114)-parseInt(e);return a.setDate(a.getDate()-n),(t?"adv":"rot")+e+a.toISOString().substring(0,10).replace(/-/g,"")}function ie(e,t){let a=new Date(e),n=new Date(2024,4,25).getTime()-a.getTime();return(t?"adv":"rot")+((t?2101:2114)-Math.floor(n/864e5))+e.replace(/-/g,"")}_();const re={Clicker:"Bloons Master","Superior Clicker":"Superior Bloons Master","Ultimate Clicker":"Ultimate Bloons Master","Knowledgable Primate":"Knowledgeable Primate","Triple Threat":"Triple threat","Small Bloons":"Alchermistman and Bloonacleboy","Master of Life":"Master of life","What did it cost":"What did it cost? - Everything","2 Mega Pops":"2 MegaPops","Looking fab":"Lookin fab",GoldenTicket:"Golden Ticket","Axis of Havok":"Axis of Havoc","Co-op Popper!":"Co-op Popper",CouponCrazy:"Coupon Crazy",LimitedRun:"Limited Run",ALaCode:"A La Code",InstantGratification:"Instant Gratification","Achievement Of Achievements":"Achievement of Achievements","What is this new Bloonery":"What is this new Bloonery?","Who's the Boss":"Who's the Boss?","I'llBeBack":"I'll Be Back",SoSpiiiceyNinjaKiwi:"So Spiiicey Ninja Kiwi",DavidsVsGoliath:"Davids vs Goliath",ToolsToDarwin:"Tools to Darwin",BigSpender:"Big Spender",NotLackingCriticalInformation:"Not Lacking Critical Information",StubbornStrategy:"Stubborn Strategy","Hook Line And Sinker":"Hook, Line, and Sinker",CrashOfTheTitans:"Crash of the Titans","So Shiny":"So Shiny!","Ultimate Team Up":"Ultimate Team-up",StudentLoans:"Student Loans",StickySituation:"Sticky Situation",NoHarvest:"No Harvest",ReadyPlayerOne:"Ready Player One?",TheDailyReid:"The Daily Reid",InstaCentury:"Insta Century"},ce=Object.entries(re).reduce(((e,[t,a])=>(e[a]=t,e)),{}),pe={ObynOceanGuardian:"OceanObyn",MoltenObyn:"MountainObyn",JoanOfArcAdora:"JoanOfArc",CyberQuincy:"QuincyCyber",ETnEtienne:"ETn",SentaiCaptainChurchill:"SentaiChurchill",SleighCaptainChurchill:"SleighChurchill"},me={Spikeopult:"Spike-o-pult",BuccaneerLongRange:"LongRange",BuccaneerGrapeShot:"GrapeShot",BuccaneerCrowsNest:"CrowsNest",BuccaneerHotShot:"HotShot",BuccaneerCarrierFlagship:"CarrierFlagship",BuccaneerCannonShip:"CannonShip",BuccaneerMerchantman:"Merchantman",BuccaneerFavoredTrades:"FavoredTrades",BuccaneerAircraftCarrier:"AircraftCarrier",BuccaneerDestroyer:"Destroyer",BuccaneerTradeEmpire:"TradeEmpire",BuccaneerPirateLord:"PirateLord",BuccaneerMonkeyPirates:"MonkeyPirates",HeattippedDarts:"HeatTippedDart",BioncBoomerang:"BionicBoomerang",LargeCalibre:"LongCalibre",LaserBlasts:"LaserBlast",GuidedMagic:"GuildedMagic",MortarRapidReload:"RapidReload",SupplyDrop:"CashDrop",PlasmaBlasts:"PlasmaBlast",XXXLTrap:"XXXL",OversizeNails:"OversizedNails",CenteredPath:"FlightOrders",Shockwave:"ShellShock",Monkeyopolis:"Metropolis",Spectre:"Specter",TrueSunGod:"TrueSonGod",HydraRocketPods:"HydraRockets",DartMonkeyParagon:"ApexPlasmaMaster",BoomerangMonkeyParagon:"GlaiveDominus",NinjaMonkeyParagon:"AscendedShadow",EngineerMonkeyParagon:"MasterBuilder",WizardMonkeyParagon:"MagusPerfectus",MonkeyAceParagon:"GoliathDoomship",MonkeyBuccaneerParagon:"NavarchOfTheSeas",MonkeySubParagon:"NauticSiegeCore",SmartSpikes:"DirectedSpikes",TackShooterParagon:"CycloneOfFireAndMetal"};let ue={"Directed Spikes":"Smart Spikes","Directed Spikes Description":"Smart Spikes Description",CircusGwendolinSkinName:"HarlegwenGwendolinSkinName",CircusGwendolinSkinDescription:"HarlegwenGwendolinSkinDescription",OctoJonesSkinName:"OctoJonesStrikerJonesSkinName",OctoJonesSkinDescription:"OctoJonesStrikerJonesSkinDescription",MoltenObynSkinName:"ObynMountainGuardianSkinName",MoltenObynSkinDescription:"ObynMountainGuardianSkinDescription",SushiBentoSkinName:"SushiBentoBenjaminSkinName",SushiBentoSkinDescription:"SushiBentoBenjaminSkinDescription",KaijuPatSkinName:"KaijuPatFustySkinName",KaijuPatSkinDescription:"KaijuPatFustySkinDescription",GalaxiliSkinName:"GalaxiliEziliSkinName",GalaxiliSkinDescription:"GalaxiliEziliSkinDescription",VoidoraSkinName:"VoidoraAdoraSkinName",VoidoraSkinDescription:"VoidoraAdoraSkinDescription",VikingSaudaSkinName:"VikingSaudaSaudaSkinName",VikingSaudaSkinDescription:"VikingSaudaSaudaSkinDescription",JiangshiSaudaSkinName:"JiangshiSaudaSaudaSkinName",JiangshiSaudaSkinDescription:"JiangshiSaudaSaudaSkinDescription",DreadPirateBrickellSkinName:"DreadPirateBrickellAdmiralBrickellSkinName",DreadPirateBrickellSkinDescription:"DreadPirateBrickellAdmiralBrickellSkinDescription",LifeguardBrickellSkinName:"LifeguardBrickellAdmiralBrickellSkinName",LifeguardBrickellSkinDescription:"LifeguardBrickellAdmiralBrickellSkinDescription",PsimbalsSkinName:"PsimbalsPsiSkinName",PsimbalsSkinDescription:"PsimbalsPsiSkinDescription",GeraldoGentlemanGadgeteerSkinName:"GentlemonkeyGadgeteerGeraldoSkinName",GeraldoGentlemanGadgeteerSkinDescription:"GentlemonkeyGadgeteerGeraldoSkinDescription","Mode Easy":"Easy","Mode Medium":"Medium","Mode Hard":"Hard","Mode Impoppable":"Impoppable","Mode Sandbox":"Sandbox"},he={Easy:"Bronze",PrimaryOnly:"Bronze01",Deflation:"Bronze02",Medium:"Silver",MilitaryOnly:"Silver01",Apopalypse:"Silver03",Reverse:"Silver02",Hard:"Gold",MagicOnly:"Gold01",DoubleMoabHealth:"Gold03",HalfCash:"Gold04",AlternateBloonsRounds:"Gold02",Impoppable:"Impoppable",Clicks:"ImpoppableRuby","CHIMPS-BLACK":"ImpoppableHematite"},be={"Scientist Gwendolin":"ScientistGwendolin","Biker Bones":"BikerBones","Sentai Captain Churchill":"SentaiCaptainChurchill","Cyber Quincy":"Cyber Quincy","Octo Jones":"OctoJones","Sleigh Captain Churchill":"SleighCaptainChurchill","Wolfpack Quincy":"WolfpackQuincy",ScientistGwendolin:"Scientist Gwendolin",BikerBones:"Biker Bones",SentaiCaptainChurchill:"Sentai Captain Churchill",CyberQuincy:"Cyber Quincy",OctoJones:"Octo Jones",SleighCaptainChurchill:"Sleigh Captain Churchill",WolfpackQuincy:"Wolfpack Quincy"},ye=["ZMYVERW","ZMYUWTV","ZMYUDTK","ZMYVPGA","ZMYVPFH","ZMYWHPC"];function Le(e,t){return"WizardMonkey"==e?`Assets/TowerIcon/${t}-Wizard.webp`:`Assets/TowerIcon/${t}-${e}.webp`}function ge(e,t){return"WizardMonkey"==e?`Assets/UI/InstaContainer/${t}-Wizard.webp`:`Assets/UI/InstaContainer/${t}-${e}.webp`}function Ce(e,t){let a=Math.max(t[0],t[1],t[2]);switch(Math.max(t[0],t[1],t[2])){case parseInt(t[0]):a=`${a}00`;break;case parseInt(t[1]):a=`0${a}0`;break;case parseInt(t[2]):a=`00${a}`}return"WizardMonkey"==e?`Assets/InstaMonkeyIcon/${a}-WizardInsta.webp`:`Assets/InstaMonkeyIcon/${a}-${e}Insta.webp`}function Ee(e){return e=e.replace(/[^a-zA-Z0-9]/g,""),me[e]?`Assets/UpgradeIcon/${me[e]}UpgradeIcon.webp`:`Assets/UpgradeIcon/${e}UpgradeIcon.webp`}function ve(e){return"SubAdmiral"==e?"Assets/KnowledgeIcon/NavalUpgradesIcon.webp":`Assets/KnowledgeIcon/${e}Icon.webp`}function we(e,t){return 1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function ke(e){return`Assets/HeroIconSquare/HeroIcon${e=pe[e]||e}.webp`}function fe(e){return`Assets/HeroIconCircle/HeroIcon${e=pe[e]||e}.webp`}function Me(e,t){return e=pe[e]||e,1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function Se(e){return"#ouch"==e?"Assets/MapIcon/MapSelectouchButton.webp":`Assets/MapIcon/MapSelect${e}Button.webp`}function Te(e){return`Assets/PowerIcon/${e}Icon.webp`}function Be(e,t){return t?"Assets/AchievementIcon/HiddenIcon.webp":`Assets/AchievementIcon/${e}Icon.webp`}function De(e){return re[e]||e}function Pe(e){return`Assets/MedalIcon/${e}.webp`}function Ie(e){return`Assets/ModeIcon/${e}Btn.webp`}function He(e){switch(e.type){case"MonkeyMoney":return"Assets/UI/BloonjaminsIcon.webp";case"Power":return Te(e.power);case"InstaMonkey":return Ce(e.tower,e.tiers);case"KnowledgePoints":return"Assets/UI/KnowledgeIcon.webp";case"RandomInstaMonkey":return`Assets/UI/InstaRandomTier${0==e.tier?1:e.tier}.webp`;case"Trophy":return"Assets/UI/TrophyIcon.webp";default:return`Assets/UI/${e.value}Icon.webp`}}function Ae(e){return`Assets/ProfileAvatar/${e}.webp`}function $e(e){if(0==e.avatar)return"Assets/ProfileAvatar/ProfileAvatar01.webp";let t=parseInt(e.avatar.replace(/\D/g,""));return""==e.avatar||isNaN(t)?"Assets/ProfileAvatar/ProfileAvatar01.webp":t<=Ne.profileAvatars?`Assets/ProfileAvatar/${e.avatar}.webp`:e.avatarURL}function Ge(e){if(0==e.banner)return"Assets/ProfileBanner/TeamsBannerDeafult.webp";let t=parseInt(e.banner.replace(/\D/g,""));return""==e.banner||isNaN(t)?"Assets/ProfileBanner/TeamsBannerDeafult.webp":t<=Ne.profileBanners?`Assets/ProfileBanner/${e.banner}.webp`:e.bannerURL}function xe(e){return ye.includes(e)?`Assets/CustomMapIcon/${e}.webp`:`https://data.ninjakiwi.com/btd6/maps/map/${e}/preview`}function Oe(e){return ue[e]?Re[ue[e]]:Re[e]?Re[e]:e}let Ne={},Re={};function _e(){let e=0;function t(){e--,0===e&&(document.getElementById("loading").style.transform="scale(0)")}new MutationObserver((a=>{a.forEach((a=>{"childList"===a.type&&a.addedNodes.forEach((a=>{"IMG"===a.nodeName&&(e++,a.addEventListener("load",t))}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.getElementById("loading").style.removeProperty("transform")}function Ue(){document.getElementById("loading").style.transform="scale(0)"}_e(),Promise.all([fetch("./data/Constants.json").then((e=>e.json())),fetch("./data/English.json").then((e=>e.json()))]).then((([e,t])=>{Ne=e,Re=t,Qe()})).catch((e=>{console.error("Error:",e),ht(e,"js")}));const je=document.createElement("div");document.body.appendChild(je),document.body.classList.add("hex-bg");const ze=document.createElement("div");ze.classList.add("header"),je.appendChild(ze);const We=document.createElement("div");We.classList.add("header-div"),ze.appendChild(We);const Fe=document.createElement("h1");Fe.classList.add("title"),Fe.innerHTML="Bloons TD 6 Leaderboards",We.appendChild(Fe);const Ke=document.createElement("div");Ke.classList.add("content"),je.appendChild(Ke);const Je=document.createElement("div");Je.id="leaderboards-content",Je.classList.add("extras","content-div"),Je.style.display="flex",Ke.appendChild(Je);const Ve=document.createElement("div");Ve.id="leaderboard-content",Ve.classList.add("content-div"),Ve.style.display="none",Ke.appendChild(Ve);const Ye=document.createElement("div");async function Qe(){null==o&&await U("https://data.ninjakiwi.com/btd6/races",(e=>{o=e.body})),null==b&&await U("https://data.ninjakiwi.com/btd6/bosses",(e=>{b=e.body})),null==y&&await U("https://data.ninjakiwi.com/btd6/ct",(e=>{y=e.body}));let e=document.getElementById("leaderboards-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("leaderboard-page","page-extra"),e.appendChild(t);let a=document.createElement("p");a.classList.add("leaderboards-header-text","black-outline"),a.innerHTML="Active Events",t.appendChild(a);let n=document.createElement("div");n.classList.add("selectors-div"),t.appendChild(n);let l=document.createElement("p");l.classList.add("leaderboards-header-text","black-outline"),l.innerHTML="Finished Events",t.appendChild(l);let d=document.createElement("div");d.id="maps-progress-views",d.classList.add("maps-progress-views"),t.appendChild(d);let s=document.createElement("p");s.classList.add("maps-progress-coop-toggle-text","black-outline"),s.innerHTML="Filter:",d.appendChild(s);let i=document.createElement("div");i.classList.add("maps-progress-view","black-outline","stats-tab-yellow"),i.innerHTML="All",i.addEventListener("click",(()=>{i.classList.add("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),c.classList.remove("stats-tab-yellow"),p.classList.remove("stats-tab-yellow"),Ze("all")})),d.appendChild(i);let r=document.createElement("div");r.classList.add("maps-progress-view","black-outline"),r.innerHTML="Race",r.addEventListener("click",(()=>{i.classList.remove("stats-tab-yellow"),r.classList.add("stats-tab-yellow"),c.classList.remove("stats-tab-yellow"),p.classList.remove("stats-tab-yellow"),Ze("race")})),d.appendChild(r);let c=document.createElement("div");c.classList.add("maps-progress-view","black-outline"),c.innerHTML="Boss",c.addEventListener("click",(()=>{i.classList.remove("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),c.classList.add("stats-tab-yellow"),p.classList.remove("stats-tab-yellow"),Ze("boss")})),d.appendChild(c);let p=document.createElement("div");p.classList.add("maps-progress-view","black-outline"),p.innerHTML="Contested Territory",p.addEventListener("click",(()=>{i.classList.remove("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),c.classList.remove("stats-tab-yellow"),p.classList.add("stats-tab-yellow"),Ze("ct")})),d.appendChild(p);let m=document.createElement("div");m.id="leaderboard-selectors",m.classList.add("selectors-div"),t.appendChild(m);let u=[];o.forEach((e=>{let t=document.createElement("div");t.classList.add("roundset-selector-div"),t.addEventListener("click",(()=>{_e(),Xe("leaderboards",e,"Race")}));let a=new Date;a>new Date(e.start)&&a<new Date(e.end)?n.appendChild(t):u.push([e,t]);let l=document.createElement("img");l.classList.add("roundset-selector-img"),t.appendChild(l),l.src="../Assets/UI/EventRaceBtn.webp",t.classList.add("race-roundset");let d=document.createElement("div");d.classList.add("roundset-selector-text-div"),t.appendChild(d);let s=document.createElement("p");s.classList.add("selector-text","black-outline"),s.innerHTML=`${e.name}`,d.appendChild(s);let o=document.createElement("p");o.id="time-left-"+e.name,o.classList.add("selector-text","black-outline"),d.appendChild(o),new Date<new Date(e.start)?o.innerHTML="Coming Soon!":new Date(e.end)>new Date?(pt(new Date(e.end),o.id),timerInterval=setInterval((()=>pt(new Date(e.end),o.id)),1e3)):o.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let i=document.createElement("p");i.innerHTML=`Total Scores: ${e.totalScores}`,i.classList.add("selector-text","black-outline"),d.appendChild(i);let r=document.createElement("img");r.classList.add("selector-go-img"),r.src="../Assets/UI/EventLeaderboardBtn.webp",t.appendChild(r)})),b.forEach((e=>{let t=`${e.bossType.toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase()))} ${e.name.replace(/\D/g,"")}`,a=document.createElement("div");a.classList.add("roundset-selector-div"),a.addEventListener("click",(()=>{_e(),Xe("leaderboards",e,"Boss")}));let l=new Date;l>new Date(e.start)&&l<new Date(e.end)?n.appendChild(a):u.push([e,a]);let d=document.createElement("img");d.classList.add("roundset-selector-img"),a.appendChild(d),d.src=`../Assets/BossIcon/${e.bossType[0].toUpperCase()+e.bossType.slice(1)}EventIcon.webp`,a.style.backgroundImage=`url(../Assets/EventBanner/EventBannerSmall${e.bossType[0].toUpperCase()+e.bossType.slice(1)}.webp)`,a.classList.add("boss-roundset");let s=document.createElement("div");s.classList.add("roundset-selector-text-div"),a.appendChild(s);let o=document.createElement("p");o.classList.add("selector-text","black-outline"),o.innerHTML=`${t}`,s.appendChild(o);let i=document.createElement("p");i.id="time-left-"+t,i.classList.add("selector-text","black-outline"),s.appendChild(i),new Date<new Date(e.start)?i.innerHTML="Coming Soon!":new Date(e.end)>new Date?(pt(new Date(e.end),i.id),timerInterval=setInterval((()=>pt(new Date(e.end),i.id)),1e3)):i.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let r=document.createElement("p");r.innerHTML=`Total Scores: ${e.totalScores_standard}`,r.classList.add("selector-text","black-outline"),s.appendChild(r);let c=document.createElement("img");c.classList.add("selector-go-img"),c.src="../Assets/UI/EventLeaderboardBtn.webp",a.appendChild(c)})),b.forEach((e=>{let t=`Elite ${e.bossType.toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase()))} ${e.name.replace(/\D/g,"")}`,a=document.createElement("div");a.classList.add("roundset-selector-div"),a.addEventListener("click",(()=>{_e(),Xe("leaderboards",e,"BossElite")}));let l=new Date;l>new Date(e.start)&&l<new Date(e.end)?n.appendChild(a):u.push([e,a]);let d=document.createElement("img");d.classList.add("roundset-selector-img"),a.appendChild(d),d.src=`../Assets/BossIcon/Elite${e.bossType[0].toUpperCase()+e.bossType.slice(1)}EventIcon.webp`,a.style.backgroundImage=`url(../Assets/EventBanner/EventBannerSmall${e.bossType[0].toUpperCase()+e.bossType.slice(1)}.webp)`,a.classList.add("boss-roundset");let s=document.createElement("div");s.classList.add("roundset-selector-text-div"),a.appendChild(s);let o=document.createElement("p");o.classList.add("selector-text","black-outline"),o.innerHTML=`${t}`,s.appendChild(o);let i=document.createElement("p");i.id="time-left-"+t,i.classList.add("selector-text","black-outline"),s.appendChild(i),new Date<new Date(e.start)?i.innerHTML="Coming Soon!":new Date(e.end)>new Date?(pt(new Date(e.end),i.id),timerInterval=setInterval((()=>pt(new Date(e.end),i.id)),1e3)):i.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let r=document.createElement("p");r.innerHTML=`Total Scores: ${e.totalScores_elite}`,r.classList.add("selector-text","black-outline"),s.appendChild(r);let c=document.createElement("img");c.classList.add("selector-go-img"),c.src="../Assets/UI/EventLeaderboardBtn.webp",a.appendChild(c)})),y.forEach((e=>{let t=document.createElement("div");t.classList.add("roundset-selector-div"),t.addEventListener("click",(()=>{_e(),Xe("leaderboards",e,"CTTeam")}));let a=new Date;a>new Date(e.start)&&a<new Date(e.end)?n.appendChild(t):u.push([e,t]);let l=document.createElement("img");l.classList.add("roundset-selector-img"),t.appendChild(l),l.src="../Assets/UI/ContestedLeaderboardBtn.webp",t.classList.add("ct-leaderboard-btn");let d=document.createElement("div");d.classList.add("roundset-selector-text-div"),t.appendChild(d);let s=document.createElement("p");s.classList.add("selector-text","black-outline"),s.innerHTML="Contested Territory - Teams",d.appendChild(s);let o=document.createElement("p");o.id="time-left-"+e.id+"-teams",o.classList.add("selector-text","black-outline"),d.appendChild(o),new Date<new Date(e.start)?o.innerHTML="Coming Soon!":new Date(e.end)>new Date?(pt(new Date(e.end),o.id),timerInterval=setInterval((()=>pt(new Date(e.end),o.id)),1e3)):o.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let i=document.createElement("p");i.innerHTML=`Total Scores: ${e.totalScores_team}`,i.classList.add("selector-text","black-outline"),d.appendChild(i);let r=document.createElement("img");r.classList.add("selector-go-img"),r.src="../Assets/UI/EventLeaderboardBtn.webp",t.appendChild(r)})),y.forEach((e=>{let t=document.createElement("div");t.classList.add("roundset-selector-div"),t.addEventListener("click",(()=>{_e(),Xe("leaderboards",e,"CTPlayer")}));let a=new Date;a>new Date(e.start)&&a<new Date(e.end)?n.appendChild(t):u.push([e,t]);let l=document.createElement("img");l.classList.add("roundset-selector-img"),t.appendChild(l),l.src="../Assets/UI/ContestedTerritoryEventBtn.webp",t.classList.add("ct-leaderboard-btn");let d=document.createElement("div");d.classList.add("roundset-selector-text-div"),t.appendChild(d);let s=document.createElement("p");s.classList.add("selector-text","black-outline"),s.innerHTML="Contested Territory - Players",d.appendChild(s);let o=document.createElement("p");o.id="time-left-"+e.id,o.classList.add("selector-text","black-outline"),d.appendChild(o),new Date<new Date(e.start)?o.innerHTML="Coming Soon!":new Date(e.end)>new Date?(pt(new Date(e.end),o.id),timerInterval=setInterval((()=>pt(new Date(e.end),o.id)),1e3)):o.innerHTML=`${new Date(e.start).toLocaleDateString()} - ${new Date(e.end).toLocaleDateString()}`;let i=document.createElement("p");i.innerHTML=`Total Scores: ${e.totalScores_player}`,i.classList.add("selector-text","black-outline"),d.appendChild(i);let r=document.createElement("img");r.classList.add("selector-go-img"),r.src="../Assets/UI/EventLeaderboardBtn.webp",t.appendChild(r)})),u.sort(((e,t)=>new Date(t[0].end)-new Date(e[0].end))),u.forEach((([e,t])=>{m.appendChild(t)}))}function Ze(e){let t=document.getElementById("leaderboard-selectors");switch(e){case"race":t.childNodes.forEach((e=>{e.classList.contains("race-roundset")?e.style.display="flex":e.style.display="none"}));break;case"boss":t.childNodes.forEach((e=>{e.classList.contains("boss-roundset")?e.style.display="flex":e.style.display="none"}));break;case"ct":t.childNodes.forEach((e=>{e.classList.contains("ct-leaderboard-btn")?e.style.display="flex":e.style.display="none"}));break;default:t.childNodes.forEach((e=>{e.style.display="flex"}))}}function Xe(e,t,a){switch(a){case"Boss":r!=t.leaderboard_standard_players_1&&(c=1),r=t.leaderboard_standard_players_1;break;case"BossElite":r!=t.leaderboard_elite_players_1&&(c=1),r=t.leaderboard_elite_players_1;break;case"CTPlayer":r!=t.leaderboard_player&&(c=1),r=t.leaderboard_player;break;case"CTTeam":r!=t.leaderboard_team&&(c=1),r=t.leaderboard_team;break;default:r!=t.leaderboard&&(c=1),r=t.leaderboard}let n=document.getElementById("leaderboard-content");n.style.display="flex",n.innerHTML="",document.getElementById(`${e}-content`).style.display="none";let l=document.createElement("div");l.classList.add("full-leaderboard-div"),n.appendChild(l);let d=document.createElement("div");d.classList.add("leaderboard-top"),l.appendChild(d);let s=document.createElement("div");s.classList.add("leaderboard-header"),d.appendChild(s);let o=document.createElement("div");o.classList.add("leaderboard-header-left"),s.appendChild(o);let i=document.createElement("img");i.classList.add("modal-close"),i.src="./Assets/UI/CloseBtn.webp",i.addEventListener("click",(()=>{n.style.display="none",document.getElementById(`${e}-content`).style.display="flex"})),o.appendChild(i);let p=document.createElement("div");p.classList.add(`leaderboard-header-middle-${a.toLowerCase()}`),s.appendChild(p);let m=document.createElement("div");m.classList.add(`leaderboard-header-${a.toLowerCase()}`),p.appendChild(m);let u=document.createElement("p");switch(u.classList.add("leaderboard-header-title-text"),m.appendChild(u),a){case"Race":u.classList.add("black-outline"),u.innerHTML="Race Leaderboard";break;case"Boss":u.classList.add("black-outline"),u.innerHTML="Boss Leaderboard";break;case"BossElite":u.classList.add("black-outline"),u.innerHTML="Elite Boss Leaderboard";break;case"CTPlayer":u.classList.add("ct-text"),u.innerHTML="Contested Territory <br> Player Leaderboard";break;case"CTTeam":u.classList.add("ct-text"),u.innerHTML="Contested Territory <br> Team Leaderboard"}let h=document.createElement("div");if(h.classList.add("leaderboard-header-right"),s.appendChild(h),"Boss"==a||"BossElite"==a){let e=document.createElement("p");e.classList.add("leaderboard-disclaimer","black-outline"),e.innerHTML="Note: Only singleplayer boss leaderboards are available on the API currently.",d.appendChild(e)}let b=document.createElement("div");b.id="leaderboard-column-labels",b.classList.add("leaderboard-column-labels"),d.appendChild(b);let y=document.createElement("div");y.id="leaderboard-entries",y.classList.add("leaderboard-entries"),l.appendChild(y),dt(y),qe(t,a)}async function qe(e,a){await J(r);let n=null;switch(a){case"CTTeam":n="CTTeam";break;case"CTPlayer":n="CTPlayer"}if(e.hasOwnProperty("leaderboard")&&e.leaderboard.includes("races")&&(n="GameTime"),e.hasOwnProperty("bossType"))switch(e.scoringType){case"GameTime":n="GameTime";break;case"LeastCash":n="LeastCash";break;case"LeastTiers":n="LeastTiers"}O=e,t=a,tt(n),document.getElementById("leaderboard-entries").innerHTML="",et(x[r].entries,1,x[r].entries.length)}function et(e,a,n){let l=document.getElementById("leaderboard-entries"),d=O,s=t;if(null!=e)e.forEach(((t,o)=>{let i={};t.hasOwnProperty("scoreParts")&&t.scoreParts.forEach(((e,t)=>{i[e.name]=e}));let c=document.createElement("div");c.classList.add("leaderboard-entry"),"CTTeam"!=s&&c.addEventListener("click",(()=>{at("leaderboard",t.profile)})),l.appendChild(c);let p=document.createElement("div");p.classList.add("leaderboard-entry-div"),c.appendChild(p);let m=document.createElement("p");m.classList.add("leaderboard-entry-rank","black-outline"),m.innerHTML=o+(a-1)*n+1,p.appendChild(m);let u=document.createElement("div");u.classList.add("leaderboard-entry-player"),p.appendChild(u);let b=null,y=null,L=null;"CTTeam"==s?(b=document.createElement("div"),b.classList.add("leaderboard-entry-icon-ct"),u.appendChild(b),y=document.createElement("img"),y.classList.add("leaderboard-entry-frame"),y.src="./Assets/UI/TeamFrame1.webp",b.appendChild(y),L=document.createElement("img"),L.classList.add("leaderboard-entry-emblem"),L.src="./Assets/UI/TeamIcon1.webp",b.appendChild(L)):(b=document.createElement("img"),b.classList.add("leaderboard-entry-icon"),b.src="./Assets/ProfileAvatar/ProfileAvatar01.webp",u.appendChild(b));let g=document.createElement("p");g.classList.add("leaderboard-entry-name","leaderboard-outline"),g.innerHTML=t.displayName,u.appendChild(g);let C=document.createElement("div");C.classList.add("leaderboard-entry-time-submit-div"),p.appendChild(C);let E=document.createElement("div");E.classList.add("leaderboard-entry-score"),p.appendChild(E);let v=document.createElement("img");v.classList.add("leaderboard-entry-score-icon"),v.src="./Assets/UI/StopWatch.webp",E.appendChild(v);let w=document.createElement("p");if(w.classList.add("leaderboard-entry-main-score","leaderboard-outline"),E.appendChild(w),d.hasOwnProperty("leaderboard")&&d.leaderboard.includes("races")){let e=new Date(d.start+i["Time after event start"].score),a=document.createElement("p");a.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),a.innerHTML=e.toLocaleString(),C.appendChild(a);let n=document.createElement("p");n.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),n.innerHTML=it(new Date,e),C.appendChild(n),w.innerHTML=ot(t.score)}if(d.hasOwnProperty("bossType"))switch(d.scoringType){case"GameTime":let e=new Date(d.start+i["Time after event start"].score),a=document.createElement("p");a.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),a.innerHTML=e.toLocaleString(),C.appendChild(a);let n=document.createElement("p");n.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),n.innerHTML=it(new Date,e),C.appendChild(n),w.innerHTML=ot(t.score);break;case"LeastCash":w.innerHTML=t.score.toLocaleString(),v.src="./Assets/UI/LeastCashIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large");let l=document.createElement("div");l.classList.add("leaderboard-entry-game-time"),p.appendChild(l);let s=document.createElement("img");s.classList.add("leaderboard-entry-score-icon"),s.src="./Assets/UI/StopWatch.webp",l.appendChild(s);let o=document.createElement("p");o.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),o.innerHTML=ot(i["Game Time"].score),l.appendChild(o);break;case"LeastTiers":w.innerHTML=t.score.toLocaleString(),v.src="./Assets/UI/LeastTiersIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large");let r=document.createElement("div");r.classList.add("leaderboard-entry-game-time"),p.appendChild(r);let c=document.createElement("img");c.classList.add("leaderboard-entry-score-icon"),c.src="./Assets/UI/StopWatch.webp",r.appendChild(c);let m=document.createElement("p");m.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),m.innerHTML=ot(i["Game Time"].score),r.appendChild(m),E.classList.add("leaderboard-entry-score-tiers")}if(d.hasOwnProperty("tiles")&&(v.src="./Assets/UI/CtPointsIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large"),w.innerHTML=t.score.toLocaleString(),u.classList.add("leaderboard-entry-team")),!B){new IntersectionObserver(((l,d)=>{l.forEach((async l=>{l.isIntersecting&&(e.length==o+1&&V(x[r].next),1==a&&o+(a-1)*n+1<50&&N((async()=>{try{let e=await ae(t.profile);null!=e&&(e.hasOwnProperty("owner")?(y.src=e.frameURL,L.src=e.iconURL,p.style.backgroundImage=`url(${Ge(e)})`):(b.src=$e(e),p.style.backgroundImage=`url(${Ge(e)})`),d.unobserve(l.target))}catch(e){console.error("Error fetching user profile:",e)}})))}))})).observe(b)}if(null!=h[t.profile.split("/").pop()]){let e=h[t.profile.split("/").pop()];e.hasOwnProperty("owner")?(y.src=e.frameURL,L.src=e.iconURL,p.style.backgroundImage=`url(${Ge(e)})`):(b.src=$e(e),p.style.backgroundImage=`url(${Ge(e)})`)}}));else{let e=document.createElement("p");e.classList.add("no-data-found","black-outline"),e.style.width="250px",e.innerHTML="No Data Found",l.appendChild(e)}}function tt(e){let t=document.getElementById("leaderboard-column-labels");t.innerHTML="";let a=document.createElement("p");a.classList.add("leaderboard-column-rank","black-outline"),a.innerHTML="Rank",t.appendChild(a);let n=document.createElement("p");switch(n.classList.add("leaderboard-column-name","black-outline"),n.innerHTML="Player",t.appendChild(n),e){case"GameTime":let e=document.createElement("p");e.classList.add("leaderboard-column-time-submitted","black-outline"),e.innerHTML="Time Submitted",t.appendChild(e);let a=document.createElement("p");a.classList.add("leaderboard-column-time-score","black-outline"),a.innerHTML="Game Time",t.appendChild(a);break;case"LeastCash":let l=document.createElement("p");l.classList.add("leaderboard-column-cash-spent","black-outline"),l.innerHTML="Cash Spent",t.appendChild(l);let d=document.createElement("p");d.classList.add("leaderboard-column-time-score","black-outline"),d.innerHTML="Game Time",t.appendChild(d);break;case"LeastTiers":let s=document.createElement("p");s.classList.add("leaderboard-column-tiers-used","black-outline"),s.innerHTML="Tiers Used",t.appendChild(s);let o=document.createElement("p");o.classList.add("leaderboard-column-time-score","black-outline"),o.innerHTML="Game Time",t.appendChild(o);break;case"CTTeam":n.innerHTML="Team";case"CTPlayer":let i=document.createElement("p");i.classList.add("leaderboard-column-ct-points","black-outline"),i.innerHTML="CT Points",t.appendChild(i)}}async function at(e,t){if(null==(t=await ae(t)))return;ut(),document.getElementById(`${e}-content`).style.display="none";let a=document.getElementById("publicprofile-content");a.style.display="flex",a.innerHTML="";let n=document.createElement("div");n.classList.add("publicprofile-div"),a.appendChild(n);let l=document.createElement("img");l.classList.add("error-modal-close"),l.src="./Assets/UI/CloseBtn.webp",l.addEventListener("click",(()=>{nt(e)})),n.appendChild(l);let d=document.createElement("div");d.classList.add("profile-header","profile-banner"),d.style.backgroundImage=`linear-gradient(to bottom, transparent 50%, var(--profile-primary) 70%),url('${Ge(t)}')`,n.appendChild(d),d.appendChild(lt(100,$e(t)));let s=document.createElement("div");s.classList.add("profile-top-bottom"),d.appendChild(s);let o=document.createElement("div");o.classList.add("profile-top-public"),s.appendChild(o);let i=document.createElement("p");i.classList.add("profile-name","black-outline"),i.innerHTML=t.displayName,o.appendChild(i);let r=document.createElement("div");r.classList.add("rank-star-public"),o.appendChild(r);let c=document.createElement("img");c.classList.add("rank-img"),c.src="../Assets/UI/LvlHolder.webp",r.appendChild(c);let p=document.createElement("p");if(p.classList.add("rank-text","black-outline"),p.innerHTML=t.rank,r.appendChild(p),t.veteranRank>0){let e=document.createElement("div");e.classList.add("rank-star-public"),o.appendChild(e);let a=document.createElement("img");a.classList.add("rank-img"),a.src="../Assets/UI/LvlHolderVeteran.webp",e.appendChild(a);let n=document.createElement("p");n.classList.add("rank-text","black-outline"),n.innerHTML=t.veteranRank,e.appendChild(n)}let m=document.createElement("div");m.classList.add("profile-followers"),o.appendChild(m);let u=document.createElement("p");u.classList.add("followers-label","black-outline"),u.innerHTML="Followers",m.appendChild(u);let h=document.createElement("p");h.classList.add("followers-count"),h.innerHTML=t.followers.toLocaleString(),m.appendChild(h);let b=document.createElement("div");b.classList.add("below-profile-header"),n.appendChild(b);let y=document.createElement("div");y.classList.add("left-column-div"),b.appendChild(y);let L=document.createElement("div");L.classList.add("left-column-header"),y.appendChild(L);let g=document.createElement("p");g.classList.add("column-header-text","black-outline"),g.innerHTML="Medals",L.appendChild(g);let C={},E={};for(let[e,a]of Object.entries(he))C["Medal"+a]=t._medalsSinglePlayer[e]||0,E["MedalCoop"+a]=t._medalsMultiplayer[e]||0;C={...C,...E},C.PhayzeEliteBadge=t.bossBadgesElite.Phayze||0,C.PhayzeBadge=t.bossBadgesNormal.Phayze||0,C.DreadbloonEliteBadge=t.bossBadgesElite.Dreadbloon||0,C.DreadbloonBadge=t.bossBadgesNormal.Dreadbloon||0,C.VortexEliteBadge=t.bossBadgesElite.Vortex||0,C.VortexBadge=t.bossBadgesNormal.Vortex||0,C.LychEliteBadge=t.bossBadgesElite.Lych||0,C.LychBadge=t.bossBadgesNormal.Lych||0,C.BloonariusEliteBadge=t.bossBadgesElite.Bloonarius||0,C.BloonariusBadge=t.bossBadgesNormal.Bloonarius||0,C.MedalEventBronzeMedal=t._medalsRace.Bronze||0,C.MedalEventSilverMedal=t._medalsRace.Silver||0,C.MedalEventGoldSilverMedal=t._medalsRace.GoldSilver||0,C.MedalEventDoubleGoldMedal=t._medalsRace.DoubleGold||0,C.MedalEventGoldDiamondMedal=t._medalsRace.GoldDiamond||0,C.MedalEventDiamondMedal=t._medalsRace.Diamond||0,C.MedalEventRedDiamondMedal=t._medalsRace.RedDiamond||0,C.MedalEventBlackDiamondMedal=t._medalsRace.BlackDiamond||0,C.OdysseyStarIcon=t.gameplay.totalOdysseyStars||0,C.BossMedalEventBronzeMedal=t._medalsBoss.Bronze||0,C.BossMedalEventSilverMedal=t._medalsBoss.Silver||0,C.BossMedalEventDoubleSilverMedal=t._medalsBoss.DoubleSilver||0,C.BossMedalEventGoldSilverMedal=t._medalsBoss.GoldSilver||0,C.BossMedalEventDoubleGoldMedal=t._medalsBoss.DoubleGold||0,C.BossMedalEventGoldDiamondMedal=t._medalsBoss.GoldDiamond||0,C.BossMedalEventDiamondMedal=t._medalsBoss.Diamond||0,C.BossMedalEventRedDiamondMedal=t._medalsBoss.RedDiamond||0,C.BossMedalEventBlackDiamondMedal=t._medalsBoss.BlackDiamond||0,C.EliteBossMedalEventBronzeMedal=t._medalsBossElite.Bronze||0,C.EliteBossMedalEventSilverMedal=t._medalsBossElite.Silver||0,C.EliteBossMedalEventDoubleSilverMedal=t._medalsBossElite.DoubleSilver||0,C.EliteBossMedalEventGoldSilverMedal=t._medalsBossElite.GoldSilver||0,C.EliteBossMedalEventDoubleGoldMedal=t._medalsBossElite.DoubleGold||0,C.EliteBossMedalEventGoldDiamondMedal=t._medalsBossElite.GoldDiamond||0,C.EliteBossMedalEventDiamondMedal=t._medalsBossElite.Diamond||0,C.EliteBossMedalEventRedDiamondMedal=t._medalsBossElite.RedDiamond||0,C.EliteBossMedalEventBlackDiamondMedal=t._medalsBossElite.BlackDiamond||0,C.CtLocalPlayerBronzeMedal=t._medalsCTLocal.Bronze||0,C.CtLocalPlayerSilverMedal=t._medalsCTLocal.Silver||0,C.CtLocalPlayerDoubleGoldMedal=t._medalsCTLocal.DoubleGold||0,C.CtLocalPlayerGoldDiamondMedal=t._medalsCTLocal.GoldDiamond||0,C.CtLocalPlayerDiamondMedal=t._medalsCTLocal.Diamond||0,C.CtLocalPlayerRedDiamondMedal=t._medalsCTLocal.RedDiamond||0,C.CtLocalPlayerBlackDiamondMedal=t._medalsCTLocal.BlackDiamond||0,C.CtGlobalPlayerBronzeMedal=t._medalsCTGlobal.Bronze||0,C.CtGlobalPlayerSilverMedal=t._medalsCTGlobal.Silver||0,C.CtGlobalPlayerDoubleSilverMedal=t._medalsCTGlobal.DoubleSilver||0,C.CtGlobalPlayerGoldSilverMedal=t._medalsCTGlobal.GoldSilver||0,C.CtGlobalPlayerDoubleGoldMedal=t._medalsCTGlobal.DoubleGold||0,C.CtGlobalPlayerGoldDiamondMedal=t._medalsCTGlobal.GoldDiamond||0,C.CtGlobalPlayerDiamondMedal=t._medalsCTGlobal.Diamond||0,C.CtGlobalPlayerRedDiamondMedal=t._medalsCTGlobal.RedDiamond||0,C.CtGlobalPlayerBlackDiamondMedal=t._medalsCTGlobal.BlackDiamond||0;let v=document.createElement("div");v.classList.add("currency-medals-div"),y.appendChild(v);let w=document.createElement("div");w.classList.add("medals-div"),v.appendChild(w);for(let[e,t]of Object.entries(C)){if(0===t)continue;let a=document.createElement("div");a.classList.add("medal-div"),a.title=Ne.medalLabels[e],w.appendChild(a);let n=document.createElement("img");n.classList.add("medal-img"),n.src=Pe(e),n.style.display="none",n.addEventListener("load",(()=>{n.width<n.height?n.style.width=`${mt(3,70,256,0,n.width)}px`:n.style.height=`${mt(3,70,256,0,n.height)}px`,n.style.removeProperty("display")})),a.appendChild(n);let l=document.createElement("p");l.classList.add("medal-text","black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}let k=document.createElement("div");k.classList.add("top-heroes-monkeys-div"),y.appendChild(k);let f=document.createElement("div");f.classList.add("top-heroes-div"),k.appendChild(f);let M=document.createElement("div");M.classList.add("top-heroes-top-div"),f.appendChild(M);let S=document.createElement("div");S.classList.add("top-heroes-top-ribbon-div"),M.appendChild(S);let T=document.createElement("p");T.classList.add("top-heroes-text","black-outline"),T.innerHTML="Top Heroes",S.appendChild(T);let B=document.createElement("div");B.classList.add("maps-progress-coop-toggle"),M.appendChild(B);let D=document.createElement("p");D.classList.add("maps-progress-coop-toggle-text","black-outline"),D.innerHTML="Show All: ",B.appendChild(D);let P=document.createElement("input");P.classList.add("maps-progress-coop-toggle-input"),P.type="checkbox",B.appendChild(P);let I=document.createElement("div");I.classList.add("top-heroes-list"),f.appendChild(I);let H=document.createElement("div");H.classList.add("top-3-heroes-div"),I.appendChild(H);let A=document.createElement("div");A.classList.add("other-heroes-div"),A.style.display="none",I.appendChild(A),P.addEventListener("change",(()=>{P.checked?A.style.display="flex":A.style.display="none"}));let $=0,G=Object.keys(Ne.heroesInOrder);for(let[e,a]of Object.entries(t.heroesPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===a)continue;if(!G.includes(e))continue;let t=document.createElement("div");t.classList.add("hero-div"),$<3?H.appendChild(t):A.appendChild(t);let n=document.createElement("img");n.classList.add("hero-img"),n.src=we(e,1),n.style.display="none",n.addEventListener("load",(()=>{n.width<n.height?n.style.width=`${mt(3,150,1920,0,n.width)}px`:n.style.height=`${mt(3,150,1920,0,n.height)}px`,n.style.removeProperty("display")})),t.appendChild(n);let l=document.createElement("p");l.classList.add("hero-text","black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),$++}let x=document.createElement("div");x.classList.add("top-heroes-div"),k.appendChild(x);let O=document.createElement("div");O.classList.add("top-heroes-top-div"),x.appendChild(O);let N=document.createElement("div");N.classList.add("top-heroes-top-ribbon-div"),O.appendChild(N);let R=document.createElement("p");R.classList.add("top-heroes-text","black-outline"),R.innerHTML="Top Towers",N.appendChild(R);let _=document.createElement("div");_.classList.add("maps-progress-coop-toggle"),O.appendChild(_);let U=document.createElement("p");U.classList.add("maps-progress-coop-toggle-text","black-outline"),U.innerHTML="Show All: ",_.appendChild(U);let j=document.createElement("input");j.classList.add("maps-progress-coop-toggle-input"),j.type="checkbox",_.appendChild(j);let z=document.createElement("div");z.classList.add("top-heroes-list"),x.appendChild(z);let W=document.createElement("div");W.classList.add("top-3-heroes-div"),z.appendChild(W);let F=document.createElement("div");F.classList.add("other-heroes-div"),F.style.display="none",z.appendChild(F),j.addEventListener("change",(()=>{j.checked?F.style.display="flex":F.style.display="none"})),$=0;let K=Object.keys(Ne.towersInOrder);for(let[e,a]of Object.entries(t.towersPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===a)continue;if(!K.includes(e))continue;let t=document.createElement("div");t.classList.add("hero-div"),$<3?W.appendChild(t):F.appendChild(t);let n=document.createElement("img");n.classList.add("hero-img"),n.src=ge(e,"000"),t.appendChild(n);let l=document.createElement("p");l.classList.add("hero-text","black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),$++}let J=document.createElement("div");J.classList.add("right-column-div"),b.appendChild(J);let V=document.createElement("div");V.classList.add("overview-right-column-header"),J.appendChild(V);let Y=document.createElement("p");Y.classList.add("column-header-text","black-outline"),Y.innerHTML="Overall Stats",V.appendChild(Y);let Q={};Q["Games Played"]=t.gameplay.gameCount,Q["Games Won"]=t.gameplay.gamesWon,Q["Highest Round (All Time)"]=t.gameplay.highestRound,Q["Highest Round (CHIMPS)"]=t.gameplay.highestRoundCHIMPS,Q["Highest Round (Deflation)"]=t.gameplay.highestRoundDeflation,Q["Monkeys Placed"]=t.gameplay.monkeysPlaced,Q["Total Pop Count"]=t.bloonsPopped.bloonsPopped,Q["Total Co-Op Pop Count"]=t.bloonsPopped.coopBloonsPopped,Q["Camo Bloons Popped"]=t.bloonsPopped.camosPopped,Q["Lead Bloons Popped"]=t.bloonsPopped.leadsPopped,Q["Purple Bloons Popped"]=t.bloonsPopped.purplesPopped,Q["Regrow Bloons Popped"]=t.bloonsPopped.regrowsPopped,Q["Ceramic Bloons Popped"]=t.bloonsPopped.ceramicsPopped,Q["MOABs Popped"]=t.bloonsPopped.moabsPopped,Q["BFBs Popped"]=t.bloonsPopped.bfbsPopped,Q["ZOMGs Popped"]=t.bloonsPopped.zomgsPopped,Q["DDTs Popped"]=t.bloonsPopped.ddtsPopped,Q["BADs Popped"]=t.bloonsPopped.badsPopped,Q["Bloons Leaked"]=t.bloonsPopped.bloonsLeaked,Q["Cash Generated"]=t.gameplay.cashEarned,Q["Cash Gifted"]=t.gameplay.coopCashGiven,Q["Abilities Used"]=t.gameplay.abilitiesUsed,Q["Powers Used"]=t.gameplay.powersUsed,Q["Insta Monkeys Used"]=t.gameplay.instaMonkeysUsed,Q["Daily Reward Chests Opened"]=t.gameplay.dailyRewards,Q["Challenges Completed"]=t.gameplay.challengesCompleted,Q.Achievements=`${t.achievements}/150`,Q["Odysseys Completed"]=t.gameplay.totalOdysseysCompleted,Q["Lifetime Trophies"]=t.gameplay.totalTrophiesEarned,Q["Necro Bloons Reanimated"]=t.bloonsPopped.necroBloonsReanimated,Q["Transforming Tonics Used"]=t.bloonsPopped.transformingTonicsUsed,Q["Most Experienced Monkey"]=Oe(t.mostExperiencedMonkey),Q["Insta Monkey Collection"]=`${t.gameplay.instaMonkeyCollection}/${Ne.totalInstaMonkeys}`,Q["Collection Chests Opened"]=t.gameplay.collectionChestsOpened,Q["Golden Bloons Popped"]=t.bloonsPopped.goldenBloonsPopped,Q["Monkey Teams Wins"]=t.gameplay.monkeyTeamsWins,Q["Bosses Popped"]=t.bloonsPopped.bossesPopped,Q["Damage Done To Bosses"]=t.gameplay.damageDoneToBosses;let Z=document.createElement("div");Z.classList.add("profile-stats"),J.appendChild(Z);for(let[e,t]of Object.entries(Q)){let a=document.createElement("div");a.classList.add("stat"),Z.appendChild(a);let n=document.createElement("p");n.classList.add("stat-name"),n.innerHTML=e,a.appendChild(n);let l=document.createElement("p");l.classList.add("stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}}function nt(e){document.getElementById("publicprofile-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}function lt(e,t){let a=document.createElement("div");a.style.width=`${e}px`,a.style.height=`${e}px`,a.classList.add("avatar");let n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${e}px`,n.src="../Assets/UI/InstaTowersContainer.webp",a.appendChild(n);let l=document.createElement("img");return l.classList.add("avatar-img","noSelect"),l.style.width=`${e}px`,l.src=t,a.appendChild(l),a}function dt(e){let t=document.getElementsByClassName("loading-icon")[0].cloneNode(!0);t.classList.add("loading-icon-leaderboard"),t.style.height="unset",e.appendChild(t)}function st(e){return[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)].map((e=>e<10?"0"+e:e)).join(":")}function ot(e){let t=Math.floor(e/1e3),a=e%1e3,n=Math.floor(t/3600);t%=3600;let l=Math.floor(t/60),d=t%60;l=l.toString().padStart(2,"0"),d=d.toString().padStart(2,"0"),a=a.toString().padStart(3,"0");let s=`${l}:${d}.${a}`;return n>0&&(n=n.toString().padStart(2,"0"),s=`${n}:${s}`),s}function it(e,t){const a=[{name:"year",ms:31536e6},{name:"month",ms:2592e6},{name:"day",ms:864e5},{name:"hour",ms:36e5},{name:"minute",ms:6e4},{name:"second",ms:1e3}],n=e-t;for(const e of a){if(n<e.ms)continue;let t=Math.round(n/e.ms);return`${t} ${e.name}${t>1?"s":""} ago`}}function rt(e){null!=e?document.body.style.backgroundColor=`rgb(${255*e[0]},${255*e[1]},${255*e[2]})`:document.body.style.removeProperty("background-color")}function st(e){return[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)].map((e=>e<10?"0"+e:e)).join(":")}function ct(e){return(e-new Date)/1e3}function pt(e,t){const a=ct(e),n=document.getElementById(t);if(a>172800){const e=Math.ceil(a/86400);n.textContent=`${e} days left`}else n.textContent=a<0?"Finished":st(a)}function mt(e,t,a,n,l){switch(e){case 1:return a*(n/l);case 2:return t*(l/n);case 3:return l*(t/a);case 4:return n*(a/t)}}function ut(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function ht(e,t,a){if(M&&!a)return;let n=document.createElement("div");n.classList.add("error-modal-overlay"),document.body.appendChild(n);let l=document.createElement("div");l.id="error-modal",l.classList.add("error-modal"),n.appendChild(l);let d=document.createElement("div");d.id="error-modal-header",d.classList.add("error-modal-header"),l.appendChild(d);let s=document.createElement("img");s.id="error-modal-header-img",s.classList.add("error-modal-header-img"),s.src="./Assets/UI/BadConnectionBtn.webp",d.appendChild(s);let o=document.createElement("p");o.classList.add("error-modal-header-text","black-outline"),o.innerHTML="Error",d.appendChild(o);let i=document.createElement("div");i.classList.add("error-modal-dummy"),d.appendChild(i);let r=document.createElement("div");r.id="error-modal-content",r.classList.add("error-modal-content"),r.innerHTML=""+e,l.appendChild(r);let c=document.createElement("div");if(c.classList.add("error-modal-content"),"Invalid user ID / Player Does not play this game"===e)c.innerHTML="Please try again or create a new Open Access Key.",l.appendChild(c);if("ratelimit"==t){let e=document.createElement("div");e.classList.add("error-toggle-div"),l.appendChild(e);let t=document.createElement("p");t.classList.add("maps-progress-coop-toggle-text","black-outline"),t.innerHTML="Manually Load Profiles: ",e.appendChild(t);let a=document.createElement("input");a.classList.add("maps-progress-coop-toggle-input"),a.type="checkbox",a.checked=B,a.addEventListener("change",(()=>{B=!!a.checked})),e.appendChild(a)}let p=document.createElement("div");p.classList.add("error-modal-ok-button-div"),l.appendChild(p);let m=document.createElement("div");m.classList.add("start-button","modal-ok-button","black-outline"),m.innerHTML="OK",m.addEventListener("click",(()=>{M=!1,document.body.removeChild(n)})),p.appendChild(m);let u=document.createElement("img");u.classList.add("error-modal-close"),u.src="./Assets/UI/CloseBtn.webp",u.addEventListener("click",(()=>{M=!1,document.body.removeChild(n)})),r.appendChild(u),M=!0}Ye.id="publicprofile-content",Ye.classList.add("extras","content-div"),Ye.style.display="none",Ke.appendChild(Ye);