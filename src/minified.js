let e="",t={},d={},a={},s={},n={};async function i(e){let a=await fetch(`https://data.ninjakiwi.com/btd6/save/${e}`);try{let s=await a.json();return 1==s.success?(t=s.body,d=s.model,A[0]=1,l(e)):Tt(s.error,"api"),s}catch(e){return`Something went wrong with the request. Response Code: ${a.status} [${e}]`}}async function l(e){let t=await fetch(`https://data.ninjakiwi.com/btd6/users/${e}`);try{let d=await t.json();return 1==d.success?(a=d.body,s=d.model,n[e]={displayName:a.displayName,avatar:a.avatarURL,banner:a.bannerURL},r(),A[1]=1,ie()):console.log(d.error),d}catch(e){return`Something went wrong with the request. Response Code: ${t.status} [${e}]`}}function o(){null!=localStorage.getItem("BTD6OAKStorage")&&(n=JSON.parse(localStorage.getItem("BTD6OAKStorage")))}function r(){localStorage.setItem("BTD6OAKStorage",JSON.stringify(n))}const c={Clicker:"Bloons Master","Superior Clicker":"Superior Bloons Master","Ultimate Clicker":"Ultimate Bloons Master","Knowledgable Primate":"Knowledgeable Primate","Triple Threat":"Triple threat","Small Bloons":"Alchermistman and Bloonacleboy","Master of Life":"Master of life","What did it cost":"What did it cost? - Everything","2 Mega Pops":"2 MegaPops","Looking fab":"Lookin fab",GoldenTicket:"Golden Ticket","Axis of Havok":"Axis of Havoc","Co-op Popper!":"Co-op Popper",CouponCrazy:"Coupon Crazy",LimitedRun:"Limited Run",ALaCode:"A La Code",InstantGratification:"Instant Gratification","Achievement Of Achievements":"Achievement of Achievements","What is this new Bloonery":"What is this new Bloonery?","Who's the Boss":"Who's the Boss?","I'llBeBack":"I'll Be Back",SoSpiiiceyNinjaKiwi:"So Spiiicey Ninja Kiwi",DavidsVsGoliath:"Davids vs Goliath",ToolsToDarwin:"Tools to Darwin",BigSpender:"Big Spender",NotLackingCriticalInformation:"Not Lacking Critical Information",StubbornStrategy:"Stubborn Strategy","Hook Line And Sinker":"Hook, Line, and Sinker",CrashOfTheTitans:"Crash of the Titans","So Shiny":"So Shiny!","Ultimate Team Up":"Ultimate Team-up",StudentLoans:"Student Loans",StickySituation:"Sticky Situation",NoHarvest:"No Harvest",ReadyPlayerOne:"Ready Player One?",TheDailyReid:"The Daily Reid",InstaCentury:"Insta Century"},p=Object.entries(c).reduce(((e,[t,d])=>(e[d]=t,e)),{}),m={ObynOceanGuardian:"OceanObyn",MoltenObyn:"MountainObyn",JoanOfArcAdora:"JoanOfArc",CyberQuincy:"QuincyCyber",ETnEtienne:"ETn",SentaiCaptainChurchill:"SentaiChurchill",SleighCaptainChurchill:"SleighChurchill"},u={Spikeopult:"Spike-o-pult",BuccaneerLongRange:"LongRange",BuccaneerGrapeShot:"GrapeShot",BuccaneerCrowsNest:"CrowsNest",BuccaneerHotShot:"HotShot",BuccaneerCarrierFlagship:"CarrierFlagship",BuccaneerCannonShip:"CannonShip",BuccaneerMerchantman:"Merchantman",BuccaneerFavoredTrades:"FavoredTrades",BuccaneerAircraftCarrier:"AircraftCarrier",BuccaneerDestroyer:"Destroyer",BuccaneerTradeEmpire:"TradeEmpire",BuccaneerPirateLord:"PirateLord",BuccaneerMonkeyPirates:"MonkeyPirates",HeattippedDarts:"HeatTippedDart",BioncBoomerang:"BionicBoomerang",LargeCalibre:"LongCalibre",LaserBlasts:"LaserBlast",GuidedMagic:"GuildedMagic",MortarRapidReload:"RapidReload",SupplyDrop:"CashDrop",PlasmaBlasts:"PlasmaBlast",XXXLTrap:"XXXL",OversizeNails:"OversizedNails",CenteredPath:"FlightOrders",Shockwave:"ShellShock",Monkeyopolis:"Metropolis",Spectre:"Specter",TrueSunGod:"TrueSonGod",HydraRocketPods:"HydraRockets",DartMonkeyParagon:"ApexPlasmaMaster",BoomerangMonkeyParagon:"GlaiveDominus",NinjaMonkeyParagon:"AscendedShadow",EngineerMonkeyParagon:"MasterBuilder",WizardMonkeyParagon:"MagusPerfectus",MonkeyAceParagon:"GoliathDoomship",MonkeyBuccaneerParagon:"NavarchOfTheSeas",MonkeySubParagon:"NauticSiegeCore",SmartSpikes:"DirectedSpikes"};let g={"Directed Spikes":"Smart Spikes","Directed Spikes Description":"Smart Spikes Description",CircusGwendolinSkinName:"HarlegwenGwendolinSkinName",CircusGwendolinSkinDescription:"HarlegwenGwendolinSkinDescription",OctoJonesSkinName:"OctoJonesStrikerJonesSkinName",OctoJonesSkinDescription:"OctoJonesStrikerJonesSkinDescription",MoltenObynSkinName:"ObynMountainGuardianSkinName",MoltenObynSkinDescription:"ObynMountainGuardianSkinDescription",SushiBentoSkinName:"SushiBentoBenjaminSkinName",SushiBentoSkinDescription:"SushiBentoBenjaminSkinDescription",KaijuPatSkinName:"KaijuPatFustySkinName",KaijuPatSkinDescription:"KaijuPatFustySkinDescription",GalaxiliSkinName:"GalaxiliEziliSkinName",GalaxiliSkinDescription:"GalaxiliEziliSkinDescription",VoidoraSkinName:"VoidoraAdoraSkinName",VoidoraSkinDescription:"VoidoraAdoraSkinDescription",VikingSaudaSkinName:"VikingSaudaSaudaSkinName",VikingSaudaSkinDescription:"VikingSaudaSaudaSkinDescription",JiangshiSaudaSkinName:"JiangshiSaudaSaudaSkinName",JiangshiSaudaSkinDescription:"JiangshiSaudaSaudaSkinDescription",DreadPirateBrickellSkinName:"DreadPirateBrickellAdmiralBrickellSkinName",DreadPirateBrickellSkinDescription:"DreadPirateBrickellAdmiralBrickellSkinDescription",LifeguardBrickellSkinName:"LifeguardBrickellAdmiralBrickellSkinName",LifeguardBrickellSkinDescription:"LifeguardBrickellAdmiralBrickellSkinDescription",PsimbalsSkinName:"PsimbalsPsiSkinName",PsimbalsSkinDescription:"PsimbalsPsiSkinDescription",GadgeteerGeraldoSkinName:"GentlemonkeyGadgeteerGeraldoSkinName",GadgeteerGeraldoSkinDescription:"GentlemonkeyGadgeteerGeraldoSkinDescription","Mode Easy":"Easy","Mode Medium":"Medium","Mode Hard":"Hard","Mode Impoppable":"Impoppable","Mode Sandbox":"Sandbox"},h={Easy:"Bronze",PrimaryOnly:"Bronze01",Deflation:"Bronze02",Medium:"Silver",MilitaryOnly:"Silver01",Apopalypse:"Silver03",Reverse:"Silver02",Hard:"Gold",MagicOnly:"Gold01",DoubleMoabHealth:"Gold03",HalfCash:"Gold04",AlternateBloonsRounds:"Gold02",Impoppable:"Impoppable",Clicks:"ImpoppableRuby","CHIMPS-BLACK":"ImpoppableHematite"},L={"Scientist Gwendolin":"ScientistGwendolin","Biker Bones":"BikerBones","Sentai Captain Churchill":"SentaiCaptainChurchill","Cyber Quincy":"Cyber Quincy","Octo Jones":"OctoJones","Sleigh Captain Churchill":"SleighCaptainChurchill","Wolfpack Quincy":"WolfpackQuincy",ScientistGwendolin:"Scientist Gwendolin",BikerBones:"Biker Bones",SentaiCaptainChurchill:"Sentai Captain Churchill",CyberQuincy:"Cyber Quincy",OctoJones:"Octo Jones",SleighCaptainChurchill:"Sleigh Captain Churchill",WolfpackQuincy:"Wolfpack Quincy"};function v(e,t){return"WizardMonkey"==e?`Assets/TowerIcon/${t}-Wizard.webp`:`Assets/TowerIcon/${t}-${e}.webp`}function y(e,t){return"WizardMonkey"==e?`Assets/UI/InstaContainer/${t}-Wizard.webp`:`Assets/UI/InstaContainer/${t}-${e}.webp`}function k(e,t){let d=Math.max(t[0],t[1],t[2]);switch(Math.max(t[0],t[1],t[2])){case parseInt(t[0]):d=`${d}00`;break;case parseInt(t[1]):d=`0${d}0`;break;case parseInt(t[2]):d=`00${d}`}return"WizardMonkey"==e?`Assets/InstaMonkeyIcon/${d}-WizardInsta.webp`:`Assets/InstaMonkeyIcon/${d}-${e}Insta.webp`}function E(e){return e=e.replace(/[^a-zA-Z0-9]/g,""),u[e]?`Assets/UpgradeIcon/${u[e]}UpgradeIcon.webp`:`Assets/UpgradeIcon/${e}UpgradeIcon.webp`}function C(e){return"SubAdmiral"==e?"Assets/KnowledgeIcon/NavalUpgradesIcon.webp":`Assets/KnowledgeIcon/${e}Icon.webp`}function b(e,t){return 1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function f(e){return`Assets/HeroIconSquare/HeroIcon${e=m[e]||e}.webp`}function w(e){return`Assets/HeroIconCircle/HeroIcon${e=m[e]||e}.webp`}function M(e,t){return e=m[e]||e,1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function B(e){return"#ouch"==e?"Assets/MapIcon/MapSelectouchButton.webp":`Assets/MapIcon/MapSelect${e}Button.webp`}function T(e){return`Assets/PowerIcon/${e}Icon.webp`}function S(e,t){return t?"Assets/AchievementIcon/HiddenIcon.webp":`Assets/AchievementIcon/${e}Icon.webp`}function I(e){return c[e]||e}function $(e){return`Assets/MedalIcon/${e}.webp`}function H(e){return`Assets/ModeIcon/${e}Btn.webp`}function x(e){switch(e.type){case"MonkeyMoney":return"Assets/UI/BloonjaminsIcon.webp";case"Power":return T(e.power);case"InstaMonkey":return k(e.tower,e.tiers);case"KnowledgePoints":return"Assets/UI/KnowledgeIcon.webp";case"RandomInstaMonkey":return`Assets/UI/InstaRandomTier${0==e.tier?1:e.tier}.webp`;case"Trophy":return"Assets/UI/TrophyIcon.webp";default:return`Assets/UI/${e.value}Icon.webp`}}function P(e){return g[e]?G[g[e]]:G[e]}let A=[0,0,0,0,0],O=!1,D=[],G={},N={},j={},R={},U={rank:1,xp:null,xpGoal:null},K=2e7,_={rank:1,xp:null,xpGoal:2e7},z={},q={},W={},X={},F={Maps:{},Medals:{single:{},coop:{}},Borders:{single:{},coop:{}}},J="",V=!1,Q=!1,Y="grid",Z=!1,ee="All",te=0,de="game",ae="game",se="None",ne={TowerTotal:{},TowerTierTotals:{},TowerMissingByTier:{},TowerBorders:{}};function ie(){fetch("./data/English.json").then((e=>e.json())).then((e=>{G=e,A[2]=1,le()})).catch((e=>console.error("Error:",e))),fetch("./data/Achievements150.json").then((e=>e.json())).then((e=>{N=e,A[3]=1,le()})).catch((e=>console.error("Error:",e))),ve(),le()}function le(){A.every((e=>1===e))&&(document.getElementById("front-page").style.display="none",document.body.classList.add("transition-bg"),Me(),oe(),re(),ce(),pe(),me(),ue(),ge(),he(),Le(),Se(),D.push("overview"),Be("overview"))}function oe(){if(18e7===t.xp)return U.rank=155,U.xp=null,void(U.xpGoal=null);let e=parseInt(t.xp);for(let[t,d]of Object.entries(R.Rank))if(t=parseInt(t),e<d.totalXpNeeded)return e-=parseInt(R.Rank[t-1].totalXpNeeded),xpGoal=parseInt(d.totalXpNeeded)-parseInt(R.Rank[t-1].totalXpNeeded),U.rank=t-1,U.xp=e,void(U.xpGoal=xpGoal)}function re(){let e=parseInt(t.veteranXp);for(;e>=K;)e-=K,_.rank+=1;_.xp=e}function ce(){for(let[e,t]of Object.entries(N))j[t.name]=t}function pe(){z["Games Played"]=a.gameplay.gameCount,z["Games Won"]=a.gameplay.gamesWon,z["Highest Round (All Time)"]=a.gameplay.highestRound,z["Highest Round (CHIMPS)"]=a.gameplay.highestRoundCHIMPS,z["Highest Round (Deflation)"]=a.gameplay.highestRoundDeflation,z["Monkeys Placed"]=a.gameplay.monkeysPlaced,z["Total Pop Count"]=a.bloonsPopped.bloonsPopped,z["Total Co-Op Pop Count"]=a.bloonsPopped.coopBloonsPopped,z["Camo Bloons Popped"]=a.bloonsPopped.camosPopped,z["Lead Bloons Popped"]=a.bloonsPopped.leadsPopped,z["Purple Bloons Popped"]=a.bloonsPopped.purplesPopped,z["Regrow Bloons Popped"]=a.bloonsPopped.regrowsPopped,z["Ceramic Bloons Popped"]=a.bloonsPopped.ceramicsPopped,z["MOABs Popped"]=a.bloonsPopped.moabsPopped,z["BFBs Popped"]=a.bloonsPopped.bfbsPopped,z["ZOMGs Popped"]=a.bloonsPopped.zomgsPopped,z["DDTs Popped"]=a.bloonsPopped.ddtsPopped,z["BADs Popped"]=a.bloonsPopped.badsPopped,z["Bloons Leaked"]=a.bloonsPopped.bloonsLeaked,z["Cash Generated"]=a.gameplay.cashEarned,z["Cash Gifted"]=a.gameplay.coopCashGiven,z["Abilities Used"]=a.gameplay.abilitiesUsed,z["Powers Used"]=a.gameplay.powersUsed,z["Insta Monkeys Used"]=a.gameplay.instaMonkeysUsed,z["Daily Reward Chests Opened"]=a.gameplay.dailyRewards,z["Challenges Completed"]=a.gameplay.challengesCompleted,z.Achievements=a.gameplay.achievements,z["Hidden Achievements"]=0,z["Odysseys Completed"]=a.gameplay.totalOdysseysCompleted,z["Lifetime Trophies"]=a.gameplay.totalTrophiesEarned,z["Necro Bloons Reanimated"]=a.bloonsPopped.necroBloonsReanimated,z["Transforming Tonics Used"]=a.bloonsPopped.transformingTonicsUsed,z["Most Experienced Monkey"]=a.mostExperiencedMonkey,z["Most Experienced Monkey XP"]=t.towerXP[a.mostExperiencedMonkey],z["Most Experienced Monkey"]=G[z["Most Experienced Monkey"]],z["Insta Monkey Collection"]=`${a.gameplay.instaMonkeyCollection}/${R.totalInstaMonkeys}`,z["Collection Chests Opened"]=a.gameplay.collectionChestsOpened,z["Golden Bloons Popped"]=a.bloonsPopped.goldenBloonsPopped,z["Monkey Teams Wins"]=a.gameplay.monkeyTeamsWins,z["Bosses Popped"]=a.bloonsPopped.bossesPopped,z["Damage Done To Bosses"]=a.gameplay.damageDoneToBosses,z["Daily Challenges Completed"]=t.totalDailyChallengesCompleted,z["Consecutive DCs Completed"]=t.consecutiveDailyChallengesCompleted,z["Race Attempts"]=t.totalRacesEntered,z["Challenges Played"]=t.challengesPlayed,z["Challenges Shared"]=t.challengesShared,z["Continues Used"]=t.continuesUsed;let e=0,d=0;t.achievementsClaimed.forEach((t=>{j[I(t)].model.hidden?e+=1:d+=1})),z["Hidden Achievements"]=`${e}/${R.hiddenAchievements}`,z.Achievements=`${d}/${R.achievements}`}function me(){let e={};for(let[t,d]of Object.entries(h))q["Medal"+d]=a._medalsSinglePlayer[t]||0,e["MedalCoop"+d]=a._medalsMultiplayer[t]||0;q={...q,...e},q.MedalEventBronzeMedal=a._medalsRace.Bronze||0,q.MedalEventSilverMedal=a._medalsRace.Silver||0,q.MedalEventGoldSilverMedal=a._medalsRace.GoldSilver||0,q.MedalEventDoubleGoldMedal=a._medalsRace.DoubleGold||0,q.MedalEventGoldDiamondMedal=a._medalsRace.GoldDiamond||0,q.MedalEventRedDiamondMedal=a._medalsRace.RedDiamond||0,q.MedalEventBlackDiamondMedal=a._medalsRace.BlackDiamond||0,q.OdysseyStarIcon=a.gameplay.totalOdysseyStars||0,q.BossMedalEventBronzeMedal=a._medalsBoss.Bronze||0,q.BossMedalEventSilverMedal=a._medalsBoss.Silver||0,q.BossMedalEventDoubleSilverMedal=a._medalsBoss.DoubleSilver||0,q.BossMedalEventGoldSilverMedal=a._medalsBoss.GoldSilver||0,q.BossMedalEventDoubleGoldMedal=a._medalsBoss.DoubleGold||0,q.BossMedalEventGoldDiamondMedal=a._medalsBoss.GoldDiamond||0,q.BossMedalEventDiamondMedal=a._medalsBoss.Diamond||0,q.BossMedalEventRedDiamondMedal=a._medalsBoss.RedDiamond||0,q.BossMedalEventBlackDiamondMedal=a._medalsBoss.BlackDiamond||0,q.EliteBossMedalEventBronzeMedal=a._medalsBossElite.Bronze||0,q.EliteBossMedalEventSilverMedal=a._medalsBossElite.Silver||0,q.EliteBossMedalEventDoubleSilverMedal=a._medalsBossElite.DoubleSilver||0,q.EliteBossMedalEventGoldSilverMedal=a._medalsBossElite.GoldSilver||0,q.EliteBossMedalEventDoubleGoldMedal=a._medalsBossElite.DoubleGold||0,q.EliteBossMedalEventGoldDiamondMedal=a._medalsBossElite.GoldDiamond||0,q.EliteBossMedalEventDiamondMedal=a._medalsBossElite.Diamond||0,q.EliteBossMedalEventRedDiamondMedal=a._medalsBossElite.RedDiamond||0,q.EliteBossMedalEventBlackDiamondMedal=a._medalsBossElite.BlackDiamond||0,q.CtLocalPlayerBronzeMedal=a._medalsCTLocal.Bronze||0,q.CtLocalPlayerSilverMedal=a._medalsCTLocal.Silver||0,q.CtLocalPlayerDoubleGoldMedal=a._medalsCTLocal.DoubleGold||0,q.CtLocalPlayerDiamondMedal=a._medalsCTLocal.Diamond||0,q.CtLocalPlayerRedDiamondMedal=a._medalsCTLocal.RedDiamond||0,q.CtLocalPlayerBlackDiamondMedal=a._medalsCTLocal.BlackDiamond||0,q.CtGlobalPlayerBronzeMedal=a._medalsCTGlobal.Bronze||0,q.CtGlobalPlayerSilverMedal=a._medalsCTGlobal.Silver||0,q.CtGlobalPlayerDoubleSilverMedal=a._medalsCTGlobal.DoubleSilver||0,q.CtGlobalPlayerGoldSilverMedal=a._medalsCTGlobal.GoldSilver||0,q.CtGlobalPlayerDoubleGoldMedal=a._medalsCTGlobal.DoubleGold||0,q.CtGlobalPlayerGoldDiamondMedal=a._medalsCTGlobal.GoldDiamond||0,q.CtGlobalPlayerDiamondMedal=a._medalsCTGlobal.Diamond||0}function ue(){W["Big Bloons"]=t.unlockedBigBloons,W["Small Bloons"]=t.unlockedSmallBloons,W["Big Monkey Towers"]=t.seenBigTowers,W["Small Monkey Towers"]=t.unlockedSmallTowers,W["Small Bosses"]=t.achievementsClaimed.includes("25 to Life")}function ge(){X.Towers=`${Object.keys(t.unlockedTowers).filter((e=>t.unlockedTowers[e])).length}/${Object.keys(t.unlockedTowers).length} Towers Unlocked`,X.Heroes=`${Object.keys(t.unlockedHeros).filter((e=>t.unlockedHeros[e])).length}/${Object.keys(t.unlockedHeros).length} Heroes Unlocked`,X.Knowledge=`${Object.keys(t.acquiredKnowledge).filter((e=>t.acquiredKnowledge[e])).length}/${Object.keys(t.acquiredKnowledge).length} Knowledge Unlocked`,X.MapProgress=`${Object.keys(t.mapProgress).filter((e=>t.mapProgress[e])).length}/${R.totalMaps} Maps Played`,X.Powers=`${Object.values(t.powers).map((e=>e.quantity)).reduce(((e,t)=>e+t))} Powers Accumulated`,X.InstaMonkeys=`${a.gameplay.instaMonkeyCollection}/${R.totalInstaMonkeys} Instas Collected`,X.Achievements=`${a.achievements}/${R.achievements+R.hiddenAchievements} Achievements`,X.Extras=`${Object.keys(W).filter((e=>W[e])).length} Extras Unlocked`}function he(){for(let[e,d]of Object.entries(t.mapProgress)){let t={single:{},coop:{}};t.single.Easy=d.difficulty?.Easy?.single?.Standard,t.single.PrimaryOnly=d.difficulty?.Easy?.single?.PrimaryOnly,t.single.Deflation=d.difficulty?.Easy?.single?.Deflation,t.single.Medium=d.difficulty?.Medium?.single?.Standard,t.single.MilitaryOnly=d.difficulty?.Medium?.single?.MilitaryOnly,t.single.Apopalypse=d.difficulty?.Medium?.single?.Apopalypse,t.single.Reverse=d.difficulty?.Medium?.single?.Reverse,t.single.Hard=d.difficulty?.Hard?.single?.Standard,t.single.MagicOnly=d.difficulty?.Hard?.single?.MagicOnly,t.single.DoubleMoabHealth=d.difficulty?.Hard?.single?.DoubleMoabHealth,t.single.HalfCash=d.difficulty?.Hard?.single?.HalfCash,t.single.AlternateBloonsRounds=d.difficulty?.Hard?.single?.AlternateBloonsRounds,t.single.Impoppable=d.difficulty?.Hard?.single?.Impoppable,t.single.Clicks=d.difficulty?.Hard?.single?.Clicks,t.coop.Easy=d.difficulty?.Easy?.coop?.Standard,t.coop.PrimaryOnly=d.difficulty?.Easy?.coop?.PrimaryOnly,t.coop.Deflation=d.difficulty?.Easy?.coop?.Deflation,t.coop.Medium=d.difficulty?.Medium?.coop?.Standard,t.coop.MilitaryOnly=d.difficulty?.Medium?.coop?.MilitaryOnly,t.coop.Apopalypse=d.difficulty?.Medium?.coop?.Apopalypse,t.coop.Reverse=d.difficulty?.Medium?.coop?.Reverse,t.coop.Hard=d.difficulty?.Hard?.coop?.Standard,t.coop.MagicOnly=d.difficulty?.Hard?.coop?.MagicOnly,t.coop.DoubleMoabHealth=d.difficulty?.Hard?.coop?.DoubleMoabHealth,t.coop.HalfCash=d.difficulty?.Hard?.coop?.HalfCash,t.coop.AlternateBloonsRounds=d.difficulty?.Hard?.coop?.AlternateBloonsRounds,t.coop.Impoppable=d.difficulty?.Hard?.coop?.Impoppable,t.coop.Clicks=d.difficulty?.Hard?.coop?.Clicks;for(let[e,d]of Object.entries(t.single))d&&!1===d.completed&&(d.bestRound>=R.modeBestRoundFix[e]||d.completedWithoutLoadingSave)&&(d.completed=!0);for(let[e,d]of Object.entries(t.coop))d&&!1===d.completed&&(d.bestRound>=R.modeBestRoundFix[e]||d.completedWithoutLoadingSave)&&(d.completed=!0);F.Medals.single[e]={},F.Medals.coop[e]={};for(let[d,a]of Object.entries(t.single))a&&a.completed?F.Medals.single[e][d]=!0:F.Medals.single[e][d]=!1;for(let[d,a]of Object.entries(t.coop))a&&a.completed?F.Medals.coop[e][d]=!0:F.Medals.coop[e][d]=!1;F.Medals.single[e]["CHIMPS-BLACK"]=!!t.single.Clicks&&t.single.Clicks.completedWithoutLoadingSave,F.Medals.coop[e]["CHIMPS-BLACK"]=!!t.coop.Clicks&&t.coop.Clicks.completedWithoutLoadingSave;let a=["Easy","PrimaryOnly","Deflation"].every((e=>t.single[e]&&!0===t.single[e].completed)),s=a&&["Medium","MilitaryOnly","Apopalypse","Reverse"].every((e=>t.single[e]&&!0===t.single[e].completed)),n=s&&["Hard","MagicOnly","DoubleMoabHealth","HalfCash","AlternateBloonsRounds","Impoppable","Clicks"].every((e=>t.single[e]&&!0===t.single[e].completed)),i=n&&t.single.Clicks.completedWithoutLoadingSave;F.Borders.single[e]=i?"Black":n?"Gold":s?"Silver":a?"Bronze":"None",a=["Easy","PrimaryOnly","Deflation"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),s=a&&["Medium","MilitaryOnly","Apopalypse","Reverse"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),n=s&&["Hard","MagicOnly","DoubleMoabHealth","HalfCash","AlternateBloonsRounds","Impoppable","Clicks"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),i=n&&t.coop.Clicks.completedWithoutLoadingSave,F.Borders.coop[e]=i?"Black":n?"Gold":s?"Silver":a?"Bronze":"None",F.Maps[e]=t}}function Le(){let e={},d={},a={},s={};for(let[n,i]of Object.entries(t.instaTowers)){e[n]=0;let t={1:0,2:0,3:0,4:0,5:0};d[n]=d[n]||t;let l={1:[],2:[],3:[],4:[],5:[]};a[n]=a[n]||l;for(let[t,a]of Object.entries(i))e[n]+=a,R.instaTiers[5].includes(t)&&(d[n][5]+=1),R.instaTiers[4].includes(t)&&(d[n][4]+=1),R.instaTiers[3].includes(t)&&(d[n][3]+=1),R.instaTiers[2].includes(t)&&(d[n][2]+=1),R.instaTiers[1].includes(t)&&(d[n][1]+=1);if(R.collectionOrder.forEach((e=>{null==i[e]&&(R.instaTiers[5].includes(e)&&a[n][5].push(e),R.instaTiers[4].includes(e)&&a[n][4].push(e),R.instaTiers[3].includes(e)&&a[n][3].push(e),R.instaTiers[2].includes(e)&&a[n][2].push(e),R.instaTiers[1].includes(e)&&a[n][1].push(e))})),d[n][4]==R.instaTiers[4].length&&d[n][3]==R.instaTiers[3].length&&d[n][2]==R.instaTiers[2].length&&d[n][1]==R.instaTiers[1].length){if(d[n][5]==R.instaTiers[5].length){s[n]="Black";continue}s[n]="Gold"}else s[n]=""}ne.TowerTotal=e,ne.TowerTierTotals=d,ne.TowerMissingByTier=a,ne.TowerBorders=s}function ve(){let e=0;function t(){e--,0===e&&(document.getElementById("loading").style.transform="scale(0)")}new MutationObserver((d=>{d.forEach((d=>{"childList"===d.type&&d.addedNodes.forEach((d=>{"IMG"===d.nodeName&&(e++,d.addEventListener("load",t))}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.getElementById("loading").style.removeProperty("transform")}fetch("./data/Constants.json").then((e=>e.json())).then((e=>{R=e,A[4]=1,le(),we()})).catch((e=>console.error("Error:",e)));const ye=document.createElement("div");ye.id="container",document.body.appendChild(ye),document.body.classList.add("hex-bg");const ke=document.createElement("div");ke.id="header",ke.classList.add("header"),ye.appendChild(ke);const Ee=document.createElement("div");Ee.id="header-div",Ee.classList.add("header-div"),ke.appendChild(Ee);const Ce=document.createElement("h1");Ce.id="title",Ce.classList.add("title"),Ce.innerHTML="Bloons TD 6 API Explorer",Ee.appendChild(Ce);const be=document.createElement("div");function fe(){const t=document.createElement("div");t.id="front-page",t.classList.add("front-page"),be.appendChild(t);const d=document.createElement("p");d.id="front-page-text",d.classList.add("front-page-text"),d.innerHTML="Enter your Open Access Key (OAK) to get started: ",t.appendChild(d);let a=document.createElement("div");a.id="previous-oak",a.classList.add("previous-oak"),t.appendChild(a),Object.entries(n).forEach((([t,d])=>{let s=document.createElement("div");s.id="previous-oak-entry",s.classList.add("previous-oak-entry"),s.style.backgroundImage=`url(${d.banner})`,a.appendChild(s),s.appendChild(Ie(100,d.avatar));let l=document.createElement("p");l.id="profile-name",l.classList.add("profile-name"),l.classList.add("black-outline"),l.innerHTML=d.displayName,s.appendChild(l);let o=document.createElement("img");o.id="use-button",o.classList.add("use-button"),o.src="./Assets/UI/ContinueBtn.webp",o.addEventListener("click",(()=>{O||(O=!0,document.getElementById("loading").style.removeProperty("transform"),e=t,i(t))})),s.appendChild(o);let c=document.createElement("img");c.id="delete-button",c.classList.add("delete-button"),c.src="./Assets/UI/CloseBtn.webp",c.addEventListener("click",(()=>{delete n[t],r(),a.removeChild(s)})),s.appendChild(c)}));let s=document.createElement("input");s.id="key-entry",s.classList.add("key-entry"),s.placeholder="Enter your OAK here",t.appendChild(s);let l=document.createElement("div");l.id="start-button",l.classList.add("start-button"),l.classList.add("black-outline"),l.innerHTML="Start",l.addEventListener("click",(()=>{0!==document.getElementById("key-entry").value.length?O||(document.getElementById("loading").style.removeProperty("transform"),O=!0,e=s.value,i(e)):alert('Please enter a valid OAK! This will start with "oak_".')})),t.appendChild(l);let o=document.createElement("div");o.id="info-buttons",o.classList.add("info-buttons"),t.appendChild(o);let c=document.createElement("p");c.id="where-button",c.classList.add("where-button"),c.classList.add("black-outline"),c.innerHTML="How do I get it?",o.appendChild(c);let p=document.createElement("p");p.id="faq-button",p.classList.add("where-button"),p.classList.add("faq-button"),p.classList.add("black-outline"),p.innerHTML="FAQ",o.appendChild(p);let m=document.createElement("p");m.id="privacy-button",m.classList.add("where-button"),m.classList.add("privacy-button"),m.classList.add("black-outline"),m.innerHTML="Privacy Policy",o.appendChild(m);let u=document.createElement("div");u.id="oak-instructions-div",u.classList.add("oak-instructions-div"),u.style.display="none",t.appendChild(u);let g=document.createElement("div");g.id="faq-div",g.classList.add("faq-div"),g.style.display="none",t.appendChild(g);let h=document.createElement("div");h.id="privacy-div",h.classList.add("privacy-div"),h.style.display="none",t.appendChild(h);let L=document.createElement("div");function v(e){["oak-instructions","faq","privacy"].forEach((t=>{let d=document.getElementById(t+"-div");d.style.display=t===e&&"none"===d.style.display?"block":"none"}))}L.id="version-div",L.classList.add("version-div"),t.appendChild(L),c.addEventListener("click",(()=>{v("oak-instructions")})),p.addEventListener("click",(()=>{v("faq")})),m.addEventListener("click",(()=>{v("privacy")}));let y=document.createElement("p");y.id="oak-instructions-header",y.classList.add("oak-instructions-header"),y.classList.add("black-outline"),y.innerHTML="What is an Open Access Key?",u.appendChild(y);let k=document.createElement("p");k.id="oak-instructions-text",k.classList.add("oak-instructions-text"),k.innerHTML="An Open Access Key (OAK) is a unique key that allows you to access your Bloons TD 6 data from Ninja Kiwi's Open Data API.",u.appendChild(k);let E=document.createElement("p");E.id="oak-instructions-header",E.classList.add("oak-instructions-header"),E.classList.add("black-outline"),E.innerHTML="How do I get one?",u.appendChild(E);let C=document.createElement("p");C.id="oak-instructions-text2",C.classList.add("oak-instructions-text"),C.innerHTML="Step 1: Login and Backup your progress with a Ninja Kiwi Account. You can do this by going to settings from the main menu and clicking on the Account button. NOTE: This is not available for BTD6+ on Apple Arcade and BTD6 Netflix. ",u.appendChild(C);let b=document.createElement("img");b.id="oak-instruction-img",b.classList.add("oak-instruction-img"),b.src="./Assets/UI/OAKTutorial1.webp",u.appendChild(b);let f=document.createElement("p");f.id="oak-instructions-text3",f.classList.add("oak-instructions-text"),f.innerHTML='Step 2: Select "Open Data API" at the bottom right of the account screen.',u.appendChild(f);let w=document.createElement("img");w.id="oak-instruction-img2",w.classList.add("oak-instruction-img"),w.src="./Assets/UI/OAKTutorial2.webp",u.appendChild(w);let M=document.createElement("p");M.id="oak-instructions-text4",M.classList.add("oak-instructions-text"),M.innerHTML='Step 3: Generate a key and copy that in to the above text field. It should start with "oak_". Then click "Start" to begin!',u.appendChild(M);let B=document.createElement("img");B.id="oak-instruction-img3",B.classList.add("oak-instruction-img"),B.src="./Assets/UI/OAKTutorial3.webp",u.appendChild(B);let T=document.createElement("p");T.id="faq-header",T.classList.add("oak-instructions-header"),T.classList.add("black-outline"),T.innerHTML="Frequently Asked Questions",g.appendChild(T);let S={"What can I do with this?":"You can view more detailed stats and progress than you can see in the game such as your highest round for every mode on every map you've played. You can also view your Insta Monkey collection and use this as a tracker as the data pulled is always up to date! You'll eventually be able to explore the API for leaderboards, more advanced challenge stats and more!","How long does the API take to update after I do something in the game?":"15 minutes is the most I've seen. Be sure to press the save button in settings if you want to minimize the time it takes to update!","Why is this not available for BTD6+ and Netflix?":"This is because the data is stored differently for these versions such as using iCloud for BTD6+. This is not compatible with the Open Data API."};for(let[e,t]of Object.entries(S)){let d=document.createElement("div");d.classList.add("faq-entry-div"),g.appendChild(d);let a=document.createElement("div");a.classList.add("faq-question-div"),d.appendChild(a);let s=document.createElement("p");s.classList.add("faq-question"),s.innerHTML=e,a.appendChild(s);let n=document.createElement("img");n.classList.add("arrow-hide-btn"),n.src="./Assets/UI/ArrowHideBtn.webp",a.appendChild(n);let i=document.createElement("div");i.classList.add("faq-answer-div"),i.style.display="none",d.appendChild(i);let l=document.createElement("p");l.classList.add("faq-answer"),l.innerHTML=t,i.appendChild(l),a.addEventListener("click",(()=>{"none"===i.style.display?(i.style.display="block",n.style.transform="rotate(180deg)"):(i.style.display="none",n.style.transform="rotate(0deg)")}))}let I=document.createElement("p");I.id="privacy-header",I.classList.add("oak-instructions-header"),I.classList.add("black-outline"),I.innerHTML="Privacy Policy",h.appendChild(I);let $=document.createElement("p");$.id="privacy-text",$.classList.add("oak-instructions-text"),$.innerHTML='This app does not store any data being sent to or retrieved from Ninja Kiwi\'s servers outside of your browser/device. localStorage is used to prevent users from having to re-enter their OAK every time they visit the site. If you would like to delete this stored data, you can do so by clicking the "X" on the profile you would like to delete on this page.',h.appendChild($)}function we(){let e=document.getElementById("version-div"),t=document.createElement("p");t.id="tool-version-text",t.classList.add("tool-version-text"),t.innerHTML=`App Version: ${R.version} / Game Content Version: v${R.projectContentVersion}`,e.appendChild(t)}function Me(){const e=document.createElement("div");e.id="header",e.classList.add("header-container"),ke.appendChild(e);let t=["Overview","Progress","Explore","Export","Settings"];t.forEach((t=>{t=t.toLowerCase();let d=document.createElement("p");d.classList.add("header-label"),d.classList.add("black-outline"),d.id=t.toLowerCase(),d.innerHTML=t,d.addEventListener("click",(()=>{Be(t.toLowerCase())})),e.appendChild(d)})),t.forEach((e=>{e=e.toLowerCase();let t=document.createElement("div");t.id=e+"-content",t.classList.add("content-div"),t.classList.add(e),t.style.display="none",be.appendChild(t)}))}function Be(e){document.body.scrollTop=0,document.documentElement.scrollTop=0,Mt(R.BGColor);let t=document.getElementsByClassName("content-div");for(let e of t)e.style.display="none",document.getElementById(e.id.replace("-content","")).classList.remove("selected");if(document.getElementById(e+"-content").style.display="flex",document.getElementById(e).classList.add("selected"),!D.includes(e))switch(e){case"overview":Se(),D.push(e);break;case"progress":He();break;case"explore":Ct();break;case"export":bt();break;case"settings":ft()}}be.id="content",be.classList.add("content"),ye.appendChild(be),o(),fe();let Te=0;function Se(){let e=document.createElement("div");e.id="profile-header",e.classList.add("profile-header"),e.classList.add("profile-banner"),e.style.backgroundImage=`linear-gradient(to bottom, transparent 50%, var(--profile-primary) 70%),url('${a.bannerURL}')`,document.getElementById("overview-content").appendChild(e),e.appendChild(Ie(100,a.avatarURL));let d=document.createElement("div");d.id="profile-top-bottom",d.classList.add("profile-top-bottom"),e.appendChild(d);let s=document.createElement("div");s.id="profile-top",s.classList.add("profile-top"),d.appendChild(s);let n=document.createElement("p");n.id="profile-name",n.classList.add("profile-name"),n.classList.add("black-outline"),n.innerHTML=a.displayName,s.appendChild(n);let i=document.createElement("div");i.id="profile-bottom",i.classList.add("profile-bottom"),d.appendChild(i),i.appendChild($e()),t.veteranXp>0&&i.appendChild($e(!0));let l=document.createElement("div");l.id="below-profile-header",l.classList.add("below-profile-header"),document.getElementById("overview-content").appendChild(l);let o=document.createElement("div");o.id="left-column-div",o.classList.add("left-column-div"),l.appendChild(o);let r=document.createElement("div");r.id="left-column-header",r.classList.add("left-column-header"),o.appendChild(r);let c=document.createElement("p");c.id="left-column-header-text",c.classList.add("column-header-text"),c.classList.add("black-outline"),c.innerHTML="Currency and Medals",r.appendChild(c);let p=document.createElement("div");p.id="currency-medals-div",p.classList.add("currency-medals-div"),o.appendChild(p);let m=document.createElement("div");m.id="currency-div",m.classList.add("currency-div"),p.appendChild(m);let u=document.createElement("div");u.id="currency-mm-div",u.classList.add("currency-mm-div"),m.appendChild(u);let g=document.createElement("img");g.id="currency-mm-img",g.classList.add("currency-mm-img"),g.src="../Assets/UI/BloonjaminsIcon.webp",u.appendChild(g);let h=document.createElement("p");h.id="currency-mm-text",h.classList.add("currency-mm-text"),h.classList.add("mm-outline"),h.innerHTML="$"+t.monkeyMoney.toLocaleString(),u.appendChild(h);let L=document.createElement("div");L.id="currency-knowledge-div",L.classList.add("currency-knowledge-div"),m.appendChild(L);let v=document.createElement("img");v.id="currency-knowledge-img",v.classList.add("currency-knowledge-img"),v.src="../Assets/UI/KnowledgeIcon.webp",L.appendChild(v);let k=document.createElement("p");k.id="currency-knowledge-text",k.classList.add("currency-knowledge-text"),k.classList.add("knowledge-outline"),k.innerHTML=t.knowledgePoints.toLocaleString(),L.appendChild(k);let E=document.createElement("div");E.id="currency-trophies-div",E.classList.add("currency-trophies-div"),m.appendChild(E);let C=document.createElement("img");C.id="currency-trophies-img",C.classList.add("currency-trophies-img"),C.src="../Assets/UI/TrophyIcon.webp",E.appendChild(C);let f=document.createElement("p");f.id="currency-trophies-text",f.classList.add("currency-trophies-text"),f.classList.add("black-outline"),f.innerHTML=t.trophies.toLocaleString(),E.appendChild(f);let w=document.createElement("div");w.id="medals-div",w.classList.add("medals-div"),p.appendChild(w);for(let[e,t]of Object.entries(q)){if(0===t)continue;let d=document.createElement("div");d.id="medal-div",d.classList.add("medal-div"),w.appendChild(d);let a=document.createElement("img");a.id="medal-img",a.classList.add("medal-img"),a.src=$(e),a.style.display="none",a.addEventListener("load",(()=>{a.width<a.height?a.style.width=`${Bt(3,70,256,0,a.width)}px`:a.style.height=`${Bt(3,70,256,0,a.height)}px`,a.style.removeProperty("display")})),d.appendChild(a);let s=document.createElement("p");s.id="medal-text",s.classList.add("medal-text"),s.classList.add("black-outline"),s.innerHTML=t.toLocaleString(),d.appendChild(s)}let M=document.createElement("div");M.id="top-heroes-monkeys-div",M.classList.add("top-heroes-monkeys-div"),o.appendChild(M);let B=document.createElement("div");B.id="top-heroes-div",B.classList.add("top-heroes-div"),M.appendChild(B);let T=document.createElement("div");T.id="top-heroes-top-div",T.classList.add("top-heroes-top-div"),B.appendChild(T);let S=document.createElement("div");S.id="top-heroes-top-div",S.classList.add("top-heroes-top-ribbon-div"),T.appendChild(S);let I=document.createElement("p");I.id="top-heroes-text",I.classList.add("top-heroes-text"),I.classList.add("black-outline"),I.innerHTML="Top Heroes",S.appendChild(I);let H=document.createElement("div");H.id="maps-progress-coop-toggle",H.classList.add("maps-progress-coop-toggle"),T.appendChild(H);let x=document.createElement("p");x.id="maps-progress-coop-toggle-text",x.classList.add("maps-progress-coop-toggle-text"),x.classList.add("black-outline"),x.innerHTML="Show All: ",H.appendChild(x);let P=document.createElement("input");P.classList.add("maps-progress-coop-toggle-input"),P.type="checkbox",P.addEventListener("change",(()=>{P.checked?document.getElementById("other-heroes-div").style.display="flex":document.getElementById("other-heroes-div").style.display="none"})),H.appendChild(P);let A=document.createElement("div");A.id="top-heroes-list",A.classList.add("top-heroes-list"),B.appendChild(A);let O=document.createElement("div");O.id="top-3-heroes-div",O.classList.add("top-3-heroes-div"),A.appendChild(O);let D=document.createElement("div");D.id="other-heroes-div",D.classList.add("other-heroes-div"),D.style.display="none",A.appendChild(D);let G=0;for(let[e,t]of Object.entries(a.heroesPlaced).sort(((e,t)=>t[1]-e[1]))){let d=document.createElement("div");d.id="hero-div",d.classList.add("hero-div"),G<3?O.appendChild(d):D.appendChild(d);let a=document.createElement("img");a.id="hero-img",a.classList.add("hero-img"),a.src=b(e,1),a.style.display="none",a.addEventListener("load",(()=>{a.width<a.height?a.style.width=`${Bt(3,150,1920,0,a.width)}px`:a.style.height=`${Bt(3,150,1920,0,a.height)}px`,a.style.removeProperty("display")})),d.appendChild(a);let s=document.createElement("p");s.id="hero-text",s.classList.add("hero-text"),s.classList.add("black-outline"),s.innerHTML=t.toLocaleString(),d.appendChild(s),G++}let N=document.createElement("div");N.id="top-towers-div",N.classList.add("top-heroes-div"),M.appendChild(N);let j=document.createElement("div");j.id="top-towers-top-div",j.classList.add("top-heroes-top-div"),N.appendChild(j);let R=document.createElement("div");R.id="top-towers-top-div",R.classList.add("top-heroes-top-ribbon-div"),j.appendChild(R);let U=document.createElement("p");U.id="top-towers-text",U.classList.add("top-heroes-text"),U.classList.add("black-outline"),U.innerHTML="Top Towers",R.appendChild(U);let K=document.createElement("div");K.id="maps-progress-coop-toggle",K.classList.add("maps-progress-coop-toggle"),j.appendChild(K);let _=document.createElement("p");_.id="maps-progress-coop-toggle-text",_.classList.add("maps-progress-coop-toggle-text"),_.classList.add("black-outline"),_.innerHTML="Show All: ",K.appendChild(_);let W=document.createElement("input");W.classList.add("maps-progress-coop-toggle-input"),W.type="checkbox",W.addEventListener("change",(()=>{W.checked?document.getElementById("other-towers-div").style.display="flex":document.getElementById("other-towers-div").style.display="none"})),K.appendChild(W);let X=document.createElement("div");X.id="top-towers-list",X.classList.add("top-heroes-list"),N.appendChild(X);let F=document.createElement("div");F.id="top-3-towers-div",F.classList.add("top-3-heroes-div"),X.appendChild(F);let J=document.createElement("div");J.id="other-towers-div",J.classList.add("other-heroes-div"),J.style.display="none",X.appendChild(J),G=0;for(let[e,t]of Object.entries(a.towersPlaced).sort(((e,t)=>t[1]-e[1]))){let d=document.createElement("div");d.id="tower-div",d.classList.add("hero-div"),G<3?F.appendChild(d):J.appendChild(d);let a=document.createElement("img");a.id="tower-img",a.classList.add("hero-img"),a.src=y(e,"000"),d.appendChild(a);let s=document.createElement("p");s.id="tower-text",s.classList.add("hero-text"),s.classList.add("black-outline"),s.innerHTML=t.toLocaleString(),d.appendChild(s),G++}let V=document.createElement("div");V.id="right-column-div",V.classList.add("right-column-div"),l.appendChild(V);let Q=document.createElement("div");Q.id="right-column-header",Q.classList.add("right-column-header"),V.appendChild(Q);let Y=document.createElement("p");Y.id="right-column-header-text",Y.classList.add("column-header-text"),Y.classList.add("black-outline"),Y.innerHTML="Overall Stats",Q.appendChild(Y);let Z=document.createElement("div");Z.id="profile-stats",Z.classList.add("profile-stats"),V.appendChild(Z);for(let[e,t]of Object.entries(z)){let d=document.createElement("div");d.id="stat",d.classList.add("stat"),Z.appendChild(d);let a=document.createElement("p");a.id="stat-name",a.classList.add("stat-name"),a.innerHTML=e,d.appendChild(a);let s=document.createElement("p");s.id="stat-value",s.classList.add("stat-value"),s.innerHTML=t.toLocaleString(),d.appendChild(s)}}function Ie(e,t){let d=document.createElement("div");d.id="avatar",d.classList.add("avatar");let a=document.createElement("img");a.id="avatar-frame",a.classList.add("avatar-frame"),a.classList.add("noSelect"),a.style.width=`${e}px`,a.src="../Assets/UI/InstaTowersContainer.webp",d.appendChild(a);let s=document.createElement("img");return s.id="avatar-img",s.classList.add("avatar-img"),s.classList.add("noSelect"),s.style.width=`${e}px`,s.src=t,d.appendChild(s),d}function $e(e){let t=document.createElement("div");t.id="rank",t.classList.add("rank");let d=document.createElement("div");d.id="rank-star",d.classList.add("rank-star"),t.appendChild(d);let a=document.createElement("img");a.id="rank-img",a.classList.add("rank-img"),a.src=e?"../Assets/UI/LvlHolderVeteran.webp":"../Assets/UI/LvlHolder.webp",d.appendChild(a);let s=document.createElement("p");s.id="rank-text",s.classList.add("rank-text"),s.classList.add("black-outline"),s.innerHTML=e?_.rank:U.rank,d.appendChild(s);let n=document.createElement("div");n.id="rank-bar",n.classList.add("rank-bar"),t.appendChild(n);let i=document.createElement("div");i.id="rank-bar-fill",i.classList.add("rank-bar-fill"),e?(n.classList.add("rank-bar-veteran"),i.classList.add("rank-bar-fill-veteran"),i.style.width=null===_.xp?"100%":_.xp/_.xpGoal*100+"%"):i.style.width=null===U.xp?"100%":U.xp/U.xpGoal*100+"%",n.appendChild(i);let l=document.createElement("p");return l.id="rank-bar-text",l.classList.add("rank-bar-text"),l.innerHTML=e?null===_.xp?"Max Level":`${_.xp.toLocaleString()}/${_.xpGoal.toLocaleString()}`:null===U.xp?"Max Level":`${U.xp.toLocaleString()}/${U.xpGoal.toLocaleString()}`,null!=U.xp||e||l.classList.add("rank-bar-text-max"),n.appendChild(l),t}function He(){let e=document.getElementById("progress-content");e.innerHTML="";let d=document.createElement("img");d.id="progress-clipboard",d.classList.add("progress-clipboard"),d.src="../Assets/UI/ClipboardTop.webp",e.appendChild(d);let a=document.createElement("div");a.id="progress-page",a.classList.add("progress-page"),e.appendChild(a);let s=document.createElement("div");s.id="selectors-div",s.classList.add("selectors-div"),a.appendChild(s);["Towers","Heroes","Knowledge","MapProgress","Powers","InstaMonkeys","Achievements","Extras"].forEach((e=>{if(X[e].includes("0 Extras"))return;let d=document.createElement("div");d.id=e.toLowerCase()+"-div",d.classList.add("selector-div"),d.addEventListener("click",(()=>{xe(e)})),s.appendChild(d);let a=document.createElement("img");a.id=e.toLowerCase()+"-img",a.classList.add("selector-img"),a.src="Heroes"==e?`../Assets/HeroIconCircle/HeroIcon${t.primaryHero}.webp`:"../Assets/UI/"+e.replace(" ","")+"Btn.webp",d.appendChild(a);let n=document.createElement("p");n.id=e.toLowerCase()+"-text",n.classList.add("selector-text"),n.classList.add("black-outline"),n.innerHTML=X[e],d.appendChild(n);let i=document.createElement("img");i.id=e.toLowerCase()+"-go-img",i.classList.add("selector-go-img"),i.src="../Assets/UI/ContinueBtn.webp",d.appendChild(i)}))}function xe(e){switch(document.body.scrollTop=0,document.documentElement.scrollTop=0,e){case"Towers":Pe();break;case"Heroes":Re();break;case"Knowledge":Mt(R.ParagonBGColor),qe();break;case"MapProgress":Y="grid",Z=!1,ee="All",te=0,Xe();break;case"Powers":st();break;case"InstaMonkeys":nt();break;case"Achievements":Lt();break;case"Extras":yt()}}function Pe(){let e=document.getElementById("progress-content");e.innerHTML="";let d=document.createElement("div");d.id="tower-progress-container",d.classList.add("tower-progress-container"),e.appendChild(d);let a=document.createElement("div");a.id="tower-progress-div",a.classList.add("tower-progress-div"),d.appendChild(a);let s=document.createElement("div");s.id="tower-selector-header-top",s.classList.add("tower-selector-header-top"),a.appendChild(s);let n=document.createElement("p");n.id="tower-selector-header-text",n.classList.add("tower-selector-header-text"),n.classList.add("black-outline"),n.innerHTML="Towers",s.appendChild(n);let i=document.createElement("div");i.id="tower-selector-header",i.classList.add("tower-selector-header"),a.appendChild(i);for(let[e,d]of Object.entries(R.towersInOrder)){let a=document.createElement("div");a.id=e+"-selector",a.classList.add(`tower-selector-${d.toLowerCase()}`),t.unlockedTowers[e]||a.classList.add("hero-selector-div-disabled"),a.addEventListener("click",(()=>{t.unlockedTowers[e]&&Ae(e)})),i.appendChild(a);let s=document.createElement("img");s.id=e+"-selector-img",s.classList.add("tower-selector-img"),s.src=y(e,"000"),a.appendChild(s);let n=document.createElement("div");n.id=e+"-selector-highlight",n.classList.add("tower-selector-highlight"),a.appendChild(n)}let l=document.createElement("div");l.id="tower-progress-content",l.classList.add("tower-progress-content"),d.appendChild(l),d.append(Ae("DartMonkey"))}function Ae(e){let d=document.getElementById("tower-progress-content");d.innerHTML="";let a=0;for(let d of Object.values(R.towerPaths[e]))for(let e of Object.keys(d))t.acquiredUpgrades[e]&&(a+=1);a=15===a;let s=!!R.paragonsAvailable.includes(e)&&t.acquiredUpgrades[`${e} Paragon`],n=document.createElement("div");n.id="tower-progress-top",n.classList.add("tower-progress-top"),s&&n.classList.add("tower-progress-top-paragon"),d.appendChild(n);let i=document.createElement("div");i.id="tower-progress-content-top",i.classList.add("tower-progress-content-top"),n.appendChild(i);let l=document.createElement("div");l.id="tower-progress-info-container",l.classList.add("tower-progress-info-container"),i.appendChild(l);let o=document.createElement("p");o.id="tower-progress-content-text",o.classList.add("tower-progress-content-text"),o.classList.add(s?"knowledge-outline":"black-outline"),o.innerHTML=G[e],l.appendChild(o);let r=document.createElement("p");r.id="tower-progress-content-xp",r.classList.add("tower-progress-content-xp"),r.classList.add("mm-outline"),r.innerHTML=`XP: ${t.towerXP[e].toLocaleString()}`,l.appendChild(r);let c=document.createElement("p");c.id="tower-progress-content-desc",c.classList.add("tower-progress-content-desc"+(s?"-paragon":"")),c.innerHTML=G[`${e} Description`],i.appendChild(c);let p=document.createElement("div");p.id="tower-name-and-portrait",p.classList.add("tower-name-and-portrait"),d.appendChild(p);let m=document.createElement("p");m.id="tower-portrait-name",m.classList.add("tower-portrait-name"),m.classList.add("black-outline"),m.innerHTML=G[e],p.appendChild(m);let u=document.createElement("div");u.id="tower-progress-portrait",u.classList.add("tower-progress-portrait"),u.classList.add(`tower-progress-portrait-${R.towersInOrder[e].toLowerCase()}`),p.appendChild(u);let g=document.createElement("img");g.id="tower-progress-portrait-img",g.classList.add("tower-progress-portrait-img"),g.src=v(e,"000"),u.appendChild(g);let h=document.createElement("div");h.id="upgrade-tooltip",h.classList.add("upgrade-tooltip"),h.innerHTML=G[`${e} Description`],d.appendChild(h);let L=document.createElement("div");L.id="tower-progress-main-div",L.classList.add("tower-progress-main-div"),d.appendChild(L),L.appendChild(Oe(e,a,s));let y=document.createElement("div");y.id="tower-progress-bottom",y.classList.add("tower-progress-bottom"),d.appendChild(y);for(let e of document.getElementsByClassName("tower-selector-highlight"))e.style.display="none";return document.getElementById(`${e}-selector-highlight`).style.display="block",s?Mt(R.ParagonBGColor):Mt(),d}function Oe(e,d,a){let s=document.createElement("div");s.id="upgrade-container",s.classList.add("upgrade-container");let n=document.createElement("div");n.id="upgrade-rows",n.classList.add("upgrade-rows"),s.appendChild(n);let i=document.createElement("div");i.id="upgrade-row-1",i.classList.add("upgrade-row"),n.appendChild(i);let l=document.createElement("div");l.id="upgrade-row-2",l.classList.add("upgrade-row"),n.appendChild(l);let o=document.createElement("div");o.id="upgrade-row-3",o.classList.add("upgrade-row"),n.appendChild(o);let r=0,c=!1;for(let[d,s]of Object.entries(R.towerPaths[e].path1)){let s=t.acquiredUpgrades[d]?"unlocked":"locked";i.appendChild(De(e,d,s,1,r,a,c)),"locked"==s&&(c=!0),r++}r=0,c=!1;for(let[d,s]of Object.entries(R.towerPaths[e].path2)){let s=t.acquiredUpgrades[d]?"unlocked":"locked";l.appendChild(De(e,d,s,2,r,a,c)),"locked"==s&&(c=!0),r++}r=0,c=!1;for(let[d,s]of Object.entries(R.towerPaths[e].path3)){let s=t.acquiredUpgrades[d]?"unlocked":"locked";o.appendChild(De(e,d,s,3,r,a,c)),"locked"==s&&(c=!0),r++}if(R.paragonsAvailable.includes(e)&&d){let d=document.createElement("div");d.id="upgrade-container-paragon",d.classList.add("upgrade-container-paragon"),s.appendChild(d),d.appendChild(Ge(e,`${e} Paragon`,t.acquiredUpgrades[`${e} Paragon`]?"unlocked":"locked"))}return s}function De(e,d,a,s,n,i,l){let o=document.createElement("div");o.id=`${e}-${d}-div`,o.classList.add("upgrade-div");let r="";switch(s){case 1:r=`${n+1}00`;break;case 2:r=`0${n+1}0`;break;case 3:r=`00${n+1}`}let c=document.createElement("div");c.id=`${e}-${d}-glow`,o.appendChild(c);let p=document.createElement("div");p.id=`${e}-${d}-bg-img`,p.classList.add("upgrade-bg-img");let m=t.towerXP[e]>=R.towerPaths[e][`path${s}`][d];4==n?t.acquiredUpgrades[d]?p.classList.add("upgrade-t5"):p.classList.add("upgrade-t5-locked"):p.classList.add(`upgrade-${i?"paragon":"unlocked"==a?a:m?"green":"red"}`),o.appendChild(p);let u=document.createElement("img");u.id=`${e}-${d}-img`,u.classList.add("upgrade-img"),u.src=E(d),t.acquiredUpgrades[d]||4!=n||(u.style.visibility="hidden"),o.appendChild(u);let g=document.createElement("p");return g.id=`${e}-${d}-text`,g.classList.add("upgrade-text"),g.innerHTML=P(d),o.appendChild(g),o.addEventListener("click",(()=>{Ne(e,d,r),document.getElementById("upgrade-tooltip").innerHTML=P(`${d} Description`),Array.from(document.getElementsByClassName("upgrade-glow")).forEach((e=>{e.classList.remove("upgrade-glow")})),document.getElementsByClassName("upgrade-glow-paragon").length>0&&document.getElementsByClassName("upgrade-glow-paragon")[0].classList.remove("upgrade-glow-paragon"),c.classList.add("upgrade-glow")})),l&&(p.classList.add("upgrade-after-locked"),u.classList.add("upgrade-after-locked")),o}function Ge(e,d,a){let s=document.createElement("div");s.id=`${e}-paragon-div`,s.classList.add("upgrade-div");let n=document.createElement("div");n.id=`${e}-${d}-bg-img`,n.classList.add("upgrade-bg-img"),n.classList.add("upgrade-paragon-special"+(t.acquiredUpgrades[d]?"":"-locked")),s.appendChild(n);let i=document.createElement("div");i.id="paragon-glow",s.appendChild(i);let l=document.createElement("img");l.id=`${e}-paragon-img`,l.classList.add("upgrade-img"),l.src=E(`${e} Paragon`),t.acquiredUpgrades[d]||(l.style.visibility="hidden"),s.appendChild(l);let o=document.createElement("p");return o.id=`${e}-${d}-text`,o.classList.add("upgrade-text"),o.innerHTML=P(d),s.appendChild(o),s.addEventListener("click",(()=>{je(e,d,"Paragon"),document.getElementById("upgrade-tooltip").innerHTML=P(`${d} Description`),Array.from(document.getElementsByClassName("upgrade-glow")).forEach((e=>{e.classList.remove("upgrade-glow")})),i.classList.add("upgrade-glow-paragon")})),s}function Ne(e,d,a){let s=document.getElementById("tower-progress-portrait"),n=document.getElementById("tower-portrait-name"),i=document.getElementById("tower-progress-portrait-img");if(n.innerHTML=P(d),a.includes("5")&&!t.acquiredUpgrades[d])return s.classList.add("tower-progress-portrait-t5-locked"),void(i.src="");s.classList.contains("tower-progress-portrait-t5-locked")&&s.classList.remove("tower-progress-portrait-t5-locked"),s.classList.contains("tower-progress-portrait-paragon")&&s.classList.remove("tower-progress-portrait-paragon"),s.classList.contains("tower-progress-portrait-paragon-locked")&&s.classList.remove("tower-progress-portrait-paragon-locked"),s.classList.add(`tower-progress-portrait-${R.towersInOrder[e].toLowerCase()}`);for(let e of document.getElementsByClassName("upgrade-div"))e.classList.remove("selected");null!=document.getElementById(`${e}-paragon-div`)&&document.getElementById(`${e}-paragon-div`).classList.remove("selected-paragon"),i.src=v(e,a)}function je(e,d,a){let s=document.getElementById("tower-progress-portrait"),n=document.getElementById("tower-portrait-name"),i=document.getElementById("tower-progress-portrait-img");if(n.innerHTML=P(d),a.includes("Paragon")&&!t.acquiredUpgrades[d])return s.classList.add("tower-progress-portrait-paragon-locked"),void(i.src="");s.classList.contains(`tower-progress-portrait-${R.towersInOrder[e].toLowerCase()}`)&&s.classList.remove(`tower-progress-portrait-${R.towersInOrder[e].toLowerCase()}`),s.classList.add("tower-progress-portrait-paragon");for(let e of document.getElementsByClassName("upgrade-div"))e.classList.remove("selected");i.src=v(e,a)}function Re(){let e=document.getElementById("progress-content");e.innerHTML="";let d=document.createElement("div");d.id="tower-progress-container",d.classList.add("tower-progress-container"),e.appendChild(d);let a=document.createElement("div");a.id="hero-progress-div",a.classList.add("hero-progress-div"),d.appendChild(a);let s=document.createElement("div");s.id="tower-selector-header-top",s.classList.add("tower-selector-header-top"),a.appendChild(s);let n=document.createElement("p");n.id="hero-selector-header-text",n.classList.add("hero-selector-header-text"),n.classList.add("black-outline"),n.innerHTML="Heroes",s.appendChild(n);let i=document.createElement("div");i.id="hero-selector-header",i.classList.add("hero-selector-header"),a.appendChild(i);for(let[e,d]of Object.entries(R.heroesInOrder)){let a=document.createElement("div");a.id=e+"-selector",a.classList.add("hero-selector-div"),t.unlockedHeros[e]||a.classList.add("hero-selector-div-disabled"),a.addEventListener("click",(()=>{t.unlockedHeros[e]&&Ue(e,d)})),i.appendChild(a);let s=document.createElement("img");s.id=e+"-selector-img",s.classList.add("hero-selector-img"),s.src=f(e),a.appendChild(s);let n=document.createElement("div");n.id=e+"-selector-highlight",n.classList.add("hero-selector-highlight"),a.appendChild(n)}let l=document.createElement("div");l.id="hero-progress-content",l.classList.add("hero-progress-content"),d.appendChild(l),Ue(t.primaryHero,R.heroesInOrder[t.primaryHero])}function Ue(e,d){J=e;let a=document.getElementById("hero-progress-content");a.innerHTML="";let s=document.createElement("div");s.id="hero-progress-container",s.classList.add("hero-progress-container"),a.appendChild(s);let n=document.createElement("div");n.id="hero-progress-top",n.classList.add("hero-progress-top"),s.appendChild(n);let i=document.createElement("div");i.id="hero-progress-header",i.classList.add("hero-progress-header"),n.appendChild(i);let l=document.createElement("img");l.id="hero-progress-trail-fx",l.classList.add("hero-progress-trail-fx"),l.src="./Assets/UI/TrailFX.webp",i.appendChild(l);let o=document.createElement("p");o.id="hero-progress-header-text",o.classList.add("hero-progress-header-text"),o.style.backgroundImage=`url('../Assets/UI/${d}TxtTextureMain.webp')`,o.innerHTML=G[e],i.appendChild(o);let r=document.createElement("p");r.id="hero-progress-header-subtitle",r.classList.add("hero-progress-header-subtitle"),r.classList.add("subtitle-outline"),r.innerHTML=P(`${e} Short Description`),i.appendChild(r);let c=document.createElement("div");c.id="hero-progress-middle",c.classList.add("hero-progress-middle"),s.appendChild(c);let p=document.createElement("div");p.id="hero-portrait-level-select-btns",p.classList.add("hero-portrait-level-select-btns"),c.appendChild(p),ze(e);let m=document.createElement("div");m.id="hero-portrait-div",m.classList.add("hero-portrait-div"),c.appendChild(m);let u=document.createElement("img");u.id="hero-portrait-img",u.classList.add("hero-portrait-img"),u.src=b(e,1),m.appendChild(u);let g=document.createElement("div");g.id="hero-portrait-bar",g.classList.add("hero-portrait-bar"),m.appendChild(g);let h=document.createElement("div");h.id="hero-portrait-glow",h.classList.add("hero-portrait-glow"),h.style.background=`radial-gradient(circle, rgb(${255*R.HeroBGColors[e][0]},${255*R.HeroBGColors[e][1]},${255*R.HeroBGColors[e][2]}) 0%, transparent 70%)`,m.appendChild(h);let v=document.createElement("div");v.id="hero-skins-div",v.classList.add("hero-skins-div"),c.appendChild(v),R.heroSkins[e].forEach((d=>{if((0==t.unlockedSkins[L[d]||d]||null==t.unlockedSkins[L[d]||d])&&d!=e)return;let a=document.createElement("img");a.id=`${e}-${d}-skin`,a.classList.add("hero-skin"),a.src=w(d),a.addEventListener("click",(()=>{let t=R.HeroBGColors[d]?R.HeroBGColors[d]:R.HeroBGColors[e];Mt(t),Ke(d,e==d),document.getElementById("hero-portrait-glow").style.background=`radial-gradient(circle, rgb(${255*t[0]},${255*t[1]},${255*t[2]}) 0%, transparent 70%)`})),v.appendChild(a)}));let y=document.createElement("div");y.id="hero-progress-bottom",y.classList.add("hero-progress-bottom"),s.appendChild(y);let k=document.createElement("p");k.id="hero-progress-desc",k.classList.add("hero-progress-desc"),k.innerHTML=P(`${e} Description`),y.appendChild(k);let E=document.createElement("div");E.id="hero-level-descs",E.classList.add("hero-level-descs"),y.appendChild(E);for(let t=1;t<21;t++){let d=document.createElement("div");d.id=`hero-level-desc-div-${t}`,d.classList.add("hero-level-desc-div"),E.appendChild(d);let a=document.createElement("div");a.id=`hero-level-desc-icon-div-${t}`,a.classList.add("hero-level-desc-icon-div"),20==t?a.classList.add("hero-level-desc-image-purple"):R.heroLevelIcons[e].includes(t)?a.classList.add("hero-level-desc-image-gold"):a.classList.add("hero-level-desc-image"),d.appendChild(a);let s=document.createElement("p");s.id=`hero-level-desc-text-${t}`,s.classList.add("hero-level-desc-text"),s.classList.add("black-outline"),s.innerHTML=t,a.appendChild(s);let n=document.createElement("p");n.id=`hero-level-desc-${t}`,n.classList.add("hero-level-desc"),n.innerHTML=P(`${e} Level ${t} Description`),d.appendChild(n)}for(let e of document.getElementsByClassName("hero-selector-highlight"))e.style.display="none";return document.getElementById(`${e}-selector-highlight`).style.display="block",Mt(R.HeroBGColors[e]),a}function Ke(e,t){J=e,document.getElementById("hero-progress-header-subtitle").innerHTML=P(t?`${e} Short Description`:`${e}SkinName`),document.getElementById("hero-progress-desc").innerHTML=P(t?`${e} Description`:`${e}SkinDescription`),_e(1),document.body.style.display="none",document.body.offsetHeight,document.body.style.removeProperty("display")}function _e(e){document.getElementById("hero-portrait-img").src=M(J,e),ze(J);for(let e of document.getElementsByClassName("hero-level-select-btn"))e.classList.remove("selected-level-btn");document.getElementById(`${e}-level-select-btn`).classList.add("selected-level-btn")}function ze(e){let d=document.getElementById("hero-portrait-level-select-btns");d.innerHTML="",R.HeroPortraitLevels[e].forEach((e=>{if("20SunGod"==e&&!t.acquiredUpgrades["True Sun God"])return;if(("20SunGodVengeful"==e||"20SunGodVengful"==e)&&!t.achievementsClaimed.includes("Strangely Adorable"))return;let a=document.createElement("div");a.id=`${e}-level-select-div`,a.classList.add("hero-level-select-div"),d.appendChild(a);let s=document.createElement("div");if(s.id=`${e}-level-select-btn`,s.classList.add("hero-level-select-btn"),a.appendChild(s),"20SunGod"==e||"20SunGodVengeful"==e||"20SunGodVengful"==e){let t=document.createElement("img");t.id=`${e}-level-select-img`,t.classList.add("hero-level-select-img"),t.src="20SunGod"==e?"./Assets/UI/BuffIconTrueSunGod5xx.webp":"./Assets/UI/BuffIconTrueSunGod555.webp",a.appendChild(t)}else{let t=document.createElement("p");t.id=`${e}-level-select-text`,t.classList.add("hero-level-select-text"),t.classList.add("black-outline"),t.innerHTML=e,a.appendChild(t)}a.addEventListener("click",(()=>{_e(e)}))})),document.getElementById("1-level-select-btn").classList.add("selected-level-btn")}function qe(){let e=document.getElementById("progress-content");e.innerHTML="";let d=document.createElement("div");d.id="knowledge-progress-container",d.classList.add("knowledge-progress-container"),e.appendChild(d);let a=document.createElement("div");a.id="recommended-knowledge-container-div",a.classList.add("knowledge-progress-container-div"),d.appendChild(a);let s=document.createElement("p");s.id="left-column-header-text",s.classList.add("column-header-text"),s.classList.add("black-outline"),s.innerHTML="Recommended Knowledge Points",a.appendChild(s);let n=document.createElement("div");n.id="recommended-knowledge-div",n.classList.add("knowledge-progress-div"),a.appendChild(n);let i=document.createElement("div");i.classList.add("knowledge-progress-container-div"),d.appendChild(i);let l=document.createElement("p");l.id="right-column-header-text",l.classList.add("column-header-text"),l.classList.add("black-outline"),l.innerHTML="Unlocked Knowledge Points",i.appendChild(l);let o=document.createElement("div");o.id="knowledge-progress-unlocked-div",o.classList.add("knowledge-progress-div"),i.appendChild(o);let r=document.createElement("div");r.classList.add("knowledge-progress-container-div"),d.appendChild(r);let c=document.createElement("p");c.id="right-column-header-text",c.classList.add("column-header-text"),c.classList.add("black-outline"),c.innerHTML="Locked Knowledge Points",r.appendChild(c);let p=document.createElement("div");p.id="knowledge-progress-locked-div",p.classList.add("knowledge-progress-div"),r.appendChild(p);for(let[e,d]of Object.entries(t.acquiredKnowledge)){let t=document.createElement("div");t.id=`${e}-icon-div`,t.classList.add("knowledge-icon-div"),d?o.appendChild(t):R.RecommendedKnowledge.includes(e)?n.appendChild(t):p.appendChild(t);let a=document.createElement("div");a.id=`${e}-glow`,t.appendChild(a);let s=document.createElement("img");s.id=`${e}-icon`,s.classList.add("knowledge-icon"),s.src=C(e),t.appendChild(s),t.addEventListener("click",(()=>{We(e),Array.from(document.getElementsByClassName("knowledge-glow")).forEach((e=>{e.classList.remove("knowledge-glow")})),a.classList.add("knowledge-glow")}))}""==n.innerHTML&&(s.style.display="none"),""==p.innerHTML&&(c.style.display="none"),""==o.innerHTML&&(l.style.display="none");let m=document.createElement("div");m.id="tooltip-container-help-me",m.classList.add("tooltip-container-help-me"),d.appendChild(m);let u=document.createElement("div");u.id="knowledge-progress-floating-tooltip",u.classList.add("knowledge-progress-floating-tooltip"),m.appendChild(u);let g=document.createElement("p");g.id="knowledge-name-text",g.classList.add("knowledge-name-text"),g.classList.add("black-outline"),u.appendChild(g);let h=document.createElement("p");h.id="knowledge-desc-text",h.classList.add("knowledge-desc-text"),u.appendChild(h)}function We(e){document.getElementById("knowledge-progress-floating-tooltip").style.display="block",document.getElementById("knowledge-name-text").innerHTML=P(e),document.getElementById("knowledge-desc-text").innerHTML=P(`${e}Description`)}function Xe(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="maps-progress-header-bar",t.classList.add("maps-progress-header-bar"),e.appendChild(t);let d=document.createElement("div");d.id="maps-progress-views",d.classList.add("maps-progress-views"),t.appendChild(d);let a=document.createElement("p");a.id="maps-progress-views-text",a.classList.add("maps-progress-coop-toggle-text"),a.classList.add("black-outline"),a.innerHTML="Display Type:",d.appendChild(a);let s=document.createElement("div");s.id="maps-progress-grid",s.classList.add("maps-progress-view"),s.classList.add("black-outline"),s.classList.add("maps-progress-view-selected"),s.innerHTML="Grid",s.addEventListener("click",(()=>{Fe("grid")})),d.appendChild(s);let n=document.createElement("div");n.id="maps-progress-list",n.classList.add("maps-progress-view"),n.classList.add("maps-progress-view-list"),n.classList.add("black-outline"),n.innerHTML="List",n.addEventListener("click",(()=>{Fe("list")})),d.appendChild(n);let i=document.createElement("div");i.id="maps-progress-game",i.classList.add("maps-progress-view"),i.classList.add("black-outline"),i.innerHTML="Game",i.addEventListener("click",(()=>{Fe("game")})),d.appendChild(i);let l=document.createElement("div");l.id="maps-progress-filter",l.classList.add("maps-progress-filter"),t.appendChild(l);let o=document.createElement("div");o.id="map-progress-filter-difficulty",o.classList.add("map-progress-filter-difficulty"),l.appendChild(o);let r=document.createElement("p");r.id="maps-progress-filter-difficulty-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Filter Difficulty:",o.appendChild(r);let c=document.createElement("select");c.id="map-progress-filter-difficulty-select",c.classList.add("map-progress-filter-difficulty-select"),c.addEventListener("change",(()=>{Ve(c.value)}));["All","Beginner","Intermediate","Advanced","Expert"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,c.appendChild(t)})),o.appendChild(c);let p=document.createElement("div");p.id="maps-progress-coop-toggle",p.classList.add("maps-progress-coop-toggle"),l.appendChild(p);let m=document.createElement("p");m.id="maps-progress-coop-toggle-text",m.classList.add("maps-progress-coop-toggle-text"),m.classList.add("black-outline"),m.innerHTML="Co-op: ",p.appendChild(m);let u=document.createElement("input");u.id="maps-progress-coop-toggle-input",u.classList.add("maps-progress-coop-toggle-input"),u.type="checkbox",u.addEventListener("change",(()=>{Je(u.checked)})),p.appendChild(u);let g=document.createElement("div");g.id="maps-progress-container",g.classList.add("maps-progress-container"),e.appendChild(g);let h=document.createElement("div");h.id="map-progress-container",h.classList.add("map-progress-container"),h.style.display="none",e.appendChild(h),Fe("grid")}function Fe(e){switch(Y=e,e){case"grid":tt();break;case"list":dt();break;case"game":at()}}function Je(e){switch(Z=e,document.getElementById("maps-progress-coop-toggle-input").checked=e,Y){case"grid":tt();break;case"list":dt();break;case"game":at()}}function Ve(e){switch(ee=e,Y){case"grid":tt();break;case"list":dt();break;case"game":at()}}function Qe(e){document.getElementById("maps-progress-container").style.display="none",document.getElementById("maps-progress-header-bar").style.display="none",document.getElementById("map-progress-container").style.display="flex",Ze(e)}function Ye(){document.getElementById("map-progress-container").style.display="none",document.getElementById("maps-progress-header-bar").style.display="flex",document.getElementById("maps-progress-container").style.display="block"}function Ze(e){let d=document.getElementById("map-progress-container");d.innerHTML="";let a=document.createElement("div");a.id="map-progress-header-bar",a.classList.add("single-map-progress-header-bar"),d.appendChild(a);let s=document.createElement("div");s.id="map-next-and-prev",s.classList.add("map-next-and-prev"),a.appendChild(s);let n=document.createElement("div");n.id="map-progress-prev-btn",n.classList.add("maps-progress-view"),n.classList.add("black-outline"),n.innerHTML="Previous",n.addEventListener("click",(()=>{let d=Object.keys(R.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));0==d.indexOf(e)?Qe(d[d.length-1]):Qe(d[d.indexOf(e)-1])})),s.appendChild(n);let i=document.createElement("div");i.id="map-progress-next-btn",i.classList.add("maps-progress-view"),i.classList.add("black-outline"),i.innerHTML="Next",i.addEventListener("click",(()=>{let d=Object.keys(R.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));d.indexOf(e)==d.length-1?Qe(d[0]):Qe(d[d.indexOf(e)+1])})),s.appendChild(i);let l=document.createElement("div");l.id="map-progress-exit-btn",l.classList.add("maps-progress-view"),l.classList.add("black-outline"),l.innerHTML="Exit",l.addEventListener("click",(()=>{Ye()})),a.appendChild(l);let o=document.createElement("div");o.id="map-below-header-bar",o.classList.add("map-below-header-bar"),d.appendChild(o);let r=document.createElement("div");r.id="map-left-column",r.classList.add("map-left-column"),o.appendChild(r);let c=document.createElement("div");c.id="map-progress-div",c.classList.add("map-progress-div"),r.appendChild(c);let p=document.createElement("div");p.id="map-name-top",p.classList.add("map-name-top"),c.appendChild(p);let m=document.createElement("img");m.id="map-difficulty-icon",m.classList.add("map-difficulty-icon"),m.src=`./Assets/DifficultyIcon/Map${R.mapsInOrder[e]}Btn.webp`,p.appendChild(m);let u=document.createElement("div");u.id="map-name-and-medals",u.classList.add("map-name-and-medals"),p.appendChild(u);let g=document.createElement("p");g.id="map-name",g.classList.add("map-name-large"),g.classList.add("black-outline"),g.innerHTML=P(e),u.appendChild(g);let L=document.createElement("div");L.id="map-progress-single",L.classList.add("map-progress-subtext"),L.innerHTML=`${Object.values(F.Medals.single[e]).filter((e=>1==e)).length}/15 Single Player Medals`,u.appendChild(L);let v=document.createElement("div");v.id="map-progress-coop",v.classList.add("map-progress-subtext"),v.innerHTML=`${Object.values(F.Medals.coop[e]).filter((e=>1==e)).length}/15 Coop Medals`,u.appendChild(v);let y=document.createElement("img");y.id="map-icon",y.classList.add("map-icon"),y.src=B(e),c.appendChild(y);let k=document.createElement("div");switch(k.id="map-progress-single-medals",k.classList.add("map-progress-medals"),r.appendChild(k),F.Borders.single[e]){case"None":k.classList.add("none-border");break;case"Bronze":k.classList.add("bronze-border");break;case"Silver":k.classList.add("silver-border");break;case"Gold":k.classList.add("gold-border");break;case"Black":k.classList.add("black-border")}for(let[t,d]of Object.entries(F.Medals.single[e])){if(null==d)continue;let a=document.createElement("div");a.id=`${t}-div`,a.classList.add("medal-div"),k.appendChild(a);let s=document.createElement("img");s.id=`${t}-img`,s.classList.add("medal-img"),s.src=$(d?`Medal${h[t]}`:"MedalEmpty"),"Black"==F.Borders.single[e]&&s.classList.add("medal-glow"),s.style.display="none",s.addEventListener("load",(()=>{s.width<s.height?s.style.width=`${Bt(3,70,256,0,s.width)}px`:s.style.height=`${Bt(3,70,256,0,s.height)}px`,s.style.removeProperty("display")})),a.appendChild(s)}let E=document.createElement("div");E.id="map-progress-coop-medals",E.classList.add("map-progress-medals"),r.appendChild(E);for(let[t,d]of Object.entries(F.Medals.coop[e])){if(null==d)continue;let a=document.createElement("div");a.id=`${t}-div`,a.classList.add("medal-div"),E.appendChild(a);let s=document.createElement("img");s.id=`${t}-img`,s.classList.add("medal-img"),s.src=$(d?`Medal${h[t]}`:"MedalCoopEmpty"),s.style.display="none","Black"==F.Borders.coop[e]&&s.classList.add("medal-glow"),s.addEventListener("load",(()=>{s.width<s.height?s.style.width=`${Bt(3,70,256,0,s.width)}px`:s.style.height=`${Bt(3,70,256,0,s.height)}px`,s.style.removeProperty("display")})),a.appendChild(s)}switch(F.Borders.coop[e]){case"None":E.classList.add("coop-border");break;case"Bronze":E.classList.add("bronze-border");break;case"Silver":E.classList.add("silver-border");break;case"Gold":E.classList.add("gold-border");break;case"Black":E.classList.add("black-border")}let C=document.createElement("div");C.id="map-right-column",C.classList.add("map-right-column"),o.appendChild(C);let b=document.createElement("div");b.id="right-column-header",b.classList.add("right-column-header"),C.appendChild(b);let f=document.createElement("p");f.id="right-column-header-text",f.classList.add("column-header-text"),f.classList.add("black-outline"),f.innerHTML="Mode Stats",b.appendChild(f);let w=document.createElement("div");w.id="maps-progress-coop-toggle",w.classList.add("maps-progress-coop-toggle"),b.appendChild(w);let M=document.createElement("p");M.id="maps-progress-coop-toggle-text",M.classList.add("maps-progress-coop-toggle-text"),M.classList.add("black-outline"),M.innerHTML="Co-op: ",w.appendChild(M);let T=document.createElement("input");T.id="maps-progress-coop-toggle-input",T.classList.add("maps-progress-coop-toggle-input"),T.type="checkbox",T.addEventListener("change",(()=>{Je(T.checked),et(e,Z)})),T.checked=Z,w.appendChild(T);let S=document.createElement("div");S.id="map-stats-container",S.classList.add("map-stats-container"),C.appendChild(S),et(e,Z)}function et(e,t){let d=document.getElementById("map-stats-container");d.innerHTML="";for(let[a,s]of Object.entries(t?F.Maps[e].coop:F.Maps[e].single)){if(null==s)continue;let e=document.createElement("div");e.id=`${a}-div`,e.classList.add("map-stats-div"),d.appendChild(e);let t=document.createElement("img");t.id=`${a}-icon`,t.classList.add("map-stats-icon"),t.src=H(a),e.appendChild(t);let n=document.createElement("div");n.id=`${a}-text-div`,n.classList.add("map-stats-text-div"),e.appendChild(n);let i=document.createElement("p");i.id=`${a}-text`,i.classList.add("map-stats-text-mode"),i.classList.add("black-outline"),i.innerHTML=P(`Mode ${a}`),n.appendChild(i);let l=document.createElement("p");l.id=`${a}-text`,l.classList.add("map-stats-text"),l.innerHTML=`Times Completed: ${s.timesCompleted}`,n.appendChild(l);let o=document.createElement("p");o.id=`${a}-best-round`,o.classList.add("map-stats-text"),o.innerHTML=`Best Round: ${s.bestRound}`,n.appendChild(o)}if(""==d.innerHTML){let e=document.createElement("p");e.id="no-data-found",e.classList.add("no-data-found"),e.classList.add("black-outline"),e.innerHTML="No Data Found.",d.appendChild(e)}}function tt(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="maps-grid-container",t.classList.add("maps-grid-container"),e.appendChild(t);for(let[e,a]of Object.entries(R.mapsInOrder)){if(!d.parameters.mapProgress.default.allowed.includes(e))continue;if(null==F.Borders[Z?"coop":"single"][e])continue;if("All"!=ee&&a!=ee)continue;let s=document.createElement("div");switch(s.id=`${e}-div`,s.classList.add("map-div"),F.Borders[Z?"coop":"single"][e]){case"None":Z?s.classList.add("coop-border"):s.classList.add("none-border");break;case"Bronze":s.classList.add("bronze-border");break;case"Silver":s.classList.add("silver-border");break;case"Gold":s.classList.add("gold-border");break;case"Black":s.classList.add("black-border")}t.appendChild(s);let n=document.createElement("img");n.id=`${e}-img`,n.classList.add("map-img"),n.src=B(e),s.appendChild(n);let i=document.createElement("p");i.id=`${e}-name`,i.classList.add("map-name"),i.classList.add("black-outline"),i.innerHTML=P(e),s.appendChild(i);let l=document.createElement("div");l.id=`${e}-progress`,l.classList.add("map-progress"),s.appendChild(l),s.addEventListener("click",(()=>{Qe(e)}))}}function dt(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="maps-list-container",t.classList.add("maps-list-container"),e.appendChild(t);let a=!1;for(let[e,s]of Object.entries(R.mapsInOrder)){if(!d.parameters.mapProgress.default.allowed.includes(e))continue;if(null==F.Borders[Z?"coop":"single"][e])continue;if("All"!=ee&&s!=ee)continue;if(Object.entries(Z?F.Maps[e].coop:F.Maps[e].single).every((([e,t])=>null==t)))continue;let n=document.createElement("div");n.id=`${e}-container`,n.classList.add("map-container"),n.style.backgroundColor=a?"var(--profile-secondary)":"var(--profile-tertiary)",a=!a,t.appendChild(n);let i=document.createElement("div");switch(i.id=`${e}-div`,i.classList.add("map-div"),F.Borders[Z?"coop":"single"][e]){case"None":Z?i.classList.add("coop-border"):i.classList.add("none-border");break;case"Bronze":i.classList.add("bronze-border");break;case"Silver":i.classList.add("silver-border");break;case"Gold":i.classList.add("gold-border");break;case"Black":i.classList.add("black-border")}n.appendChild(i);let l=document.createElement("img");l.id=`${e}-img`,l.classList.add("map-img"),l.src=B(e),i.appendChild(l);let o=document.createElement("p");o.id=`${e}-name`,o.classList.add("map-name"),o.classList.add("black-outline"),o.innerHTML=P(e),i.appendChild(o);let r=document.createElement("div");r.id=`${e}-sections`,r.classList.add("map-sections"),n.appendChild(r);let c=document.createElement("div");c.id=`${e}-section`,c.classList.add("map-section"),r.appendChild(c);let p=document.createElement("p");p.id=`${e}-label-medals`,p.classList.add("map-label-medals"),p.classList.add("black-outline"),c.appendChild(p);let m=document.createElement("p");m.id=`${e}-label-best-round`,m.classList.add("map-label-rounds"),m.classList.add("black-outline"),m.innerHTML="Best Round:",c.appendChild(m);let u=document.createElement("p");u.id=`${e}-label-times-completed`,u.classList.add("map-label-completed"),u.classList.add("black-outline"),u.innerHTML="Times Completed:",c.appendChild(u);for(let[t,d]of Object.entries(Z?F.Maps[e].coop:F.Maps[e].single)){if(null==d)continue;let a=document.createElement("div");a.id=`${e}-${t}-column`,a.classList.add("map-section-column"),r.appendChild(a);let s=document.createElement("div");s.id=`${e}-${t}-medal`,s.classList.add("map-section-medal"),a.appendChild(s);let n=document.createElement("img");n.id=`${e}-${t}-medal-img`,n.classList.add("map-section-medal-img"),n.src=$("Clicks"==t&&d.completedWithoutLoadingSave?`Medal${Z?"Coop":""}${h["CHIMPS-BLACK"]}`:`Medal${Z?"Coop":""}${h[t]}`),n.style.display="none",!d.completed&&d.bestRound<R.modeBestRoundFix[t]&&!d.completedWithoutLoadingSave&&(n.style.filter="brightness(0.5)"),n.addEventListener("load",(()=>{n.width<n.height?n.style.width=`${Bt(3,70,256,0,n.width)}px`:n.style.height=`${Bt(3,70,256,0,n.height)}px`,n.style.removeProperty("display")})),s.appendChild(n);let i=document.createElement("p");i.id=`${e}-${t}-best-round`,i.classList.add("map-section-text"),i.classList.add("black-outline"),i.innerHTML=d.bestRound,a.appendChild(i);let l=document.createElement("p");l.id=`${e}-${t}-times-completed`,l.classList.add("map-section-text"),l.classList.add("black-outline"),l.innerHTML=d.timesCompleted,a.appendChild(l)}i.addEventListener("click",(()=>{Qe(e)}))}}function at(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let d=document.createElement("div");d.id="maps-game-container",d.classList.add("maps-game-container"),e.appendChild(d);let a=Object.keys(R.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));"All"!=ee&&(a=a.filter((e=>R.mapsInOrder[e]==ee)));let s=Math.ceil(a.length/6)-1;te>s&&(te=0),te<0&&(te=s);let n=a.slice(6*te,6*te+6),i=document.createElement("div");i.id="map-prev-arrow",i.classList.add("map-arrow"),d.appendChild(i);let l=document.createElement("img");l.id="map-prev-arrow-img",l.classList.add("map-arrow-img"),l.src="./Assets/UI/PrevArrow.webp",i.appendChild(l);let o=document.createElement("div");o.id="maps-game-grid",o.classList.add("maps-game-grid"),d.appendChild(o);for(let e of n){let t=document.createElement("div");switch(t.id=`${e}-div`,t.classList.add("map-div-ingame"),F.Borders[Z?"coop":"single"][e]){case"None":Z?t.classList.add("coop-border"):t.classList.add("none-border");break;case"Bronze":t.classList.add("bronze-border");break;case"Silver":t.classList.add("silver-border");break;case"Gold":t.classList.add("gold-border");break;case"Black":t.classList.add("black-border")}o.appendChild(t);let d=document.createElement("img");d.id=`${e}-img`,d.classList.add("map-img-ingame"),d.src=B(e),t.appendChild(d);let a=document.createElement("p");a.id=`${e}-name`,a.classList.add("map-name"),a.classList.add("black-outline"),a.innerHTML=P(e),t.appendChild(a);for(let[d,a]of Z?Object.entries(F.Medals.coop[e]):Object.entries(F.Medals.single[e])){if(null==a)continue;let e=document.createElement("div");e.id=`${d}-div`,["Easy","Medium","Hard","Impoppable"].includes(d)?e.classList.add("medal-div-large"):e.classList.add("medal-div-small"),e.classList.add(`medal-div-${d.toLowerCase()}`),t.appendChild(e);let s=document.createElement("img");s.id=`${d}-img`,s.classList.add("medal-img"),s.src=$(a?`Medal${h[d]}`:"MedalEmpty"),a||s.classList.add("medal-div-unobtained"),s.style.display="none",s.addEventListener("load",(()=>{s.width<s.height?s.style.width=`${Bt(3,70,256,0,s.width)}px`:s.style.height=`${Bt(3,70,256,0,s.height)}px`,s.style.removeProperty("display")})),e.appendChild(s)}t.addEventListener("click",(()=>{Qe(e)}))}let r=document.createElement("div");r.id="map-next-arrow",r.classList.add("map-arrow"),d.appendChild(r);let c=document.createElement("img");c.id="map-next-arrow-img",c.classList.add("map-arrow-img"),c.src="./Assets/UI/NextArrow.webp",r.appendChild(c),i.addEventListener("click",(()=>{te--,at()})),r.addEventListener("click",(()=>{te++,at()}));let p=document.createElement("div");p.id="map-page-dots",p.classList.add("map-page-dots"),e.appendChild(p);for(let e=0;e<=s;e++){let t=document.createElement("div");t.id=`map-page-dot-${e}`,t.classList.add("map-page-dot"),e==te&&t.classList.add("map-page-dot-active"),p.appendChild(t),t.addEventListener("click",(()=>{te=e,at()}))}}function st(){let e=document.getElementById("progress-content");e.innerHTML="";let d=document.createElement("div");d.id="powers-progress-container",d.classList.add("powers-progress-container"),e.appendChild(d);for(let[e,a]of Object.entries(t.powers)){let t=document.createElement("div");t.id=`${e}-div`,t.classList.add("power-div"),d.appendChild(t);let s=document.createElement("img");s.id=`${e}-img`,s.classList.add("power-img"),s.src=T(e),t.appendChild(s);let n=document.createElement("p");n.id=`${e}-name`,n.classList.add("power-name"),n.classList.add("black-outline"),n.innerHTML=P(e),t.appendChild(n);let i=document.createElement("div");i.id=`${e}-progress`,i.classList.add("power-progress"),t.appendChild(i);let l=document.createElement("p");l.id=`${e}-progress-text`,l.classList.add("power-progress-text"),l.classList.add("black-outline"),l.innerHTML=`${a.quantity}`,i.appendChild(l)}}function nt(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkeys-header-bar",t.classList.add("insta-monkeys-header-bar"),e.appendChild(t);let d=document.createElement("div");d.id="insta-monkeys-views",d.classList.add("maps-progress-views"),t.appendChild(d);let a=document.createElement("p");a.id="maps-progress-views-text",a.classList.add("maps-progress-coop-toggle-text"),a.classList.add("black-outline"),a.innerHTML="Display Type:",d.appendChild(a);let s=document.createElement("div");s.id="insta-monkeys-game-view",s.classList.add("maps-progress-view"),s.classList.add("black-outline"),s.innerHTML="Game",s.addEventListener("click",(()=>{it("game")})),d.appendChild(s);let n=document.createElement("div");n.id="insta-monkeys-list-view",n.classList.add("maps-progress-view"),n.classList.add("black-outline"),n.innerHTML="List",n.addEventListener("click",(()=>{it("list")})),d.appendChild(n);let i=document.createElement("div");i.id="insta-monkeys-extras",i.classList.add("maps-progress-views"),t.appendChild(i);let l=document.createElement("div");l.id="insta-monkeys-obtain-view",l.classList.add("maps-progress-view"),l.classList.add("black-outline"),l.innerHTML="Coming Soon",l.addEventListener("click",(()=>{it("obtain")})),i.appendChild(l);let o=document.createElement("div");o.id="insta-monkeys-rotations-view",o.classList.add("maps-progress-view"),o.classList.add("black-outline"),o.innerHTML="Coming Soon",o.addEventListener("click",(()=>{it("rotations")})),i.appendChild(o);let r=document.createElement("div");r.id="insta-monkeys-progress-container",r.classList.add("insta-monkeys-progress-container"),e.appendChild(r);let c=document.createElement("div");c.id="insta-monkey-progress-container",c.classList.add("insta-monkey-progress-container"),c.style.display="none",e.appendChild(c),it("game")}function it(e){switch(de=e,document.getElementById("insta-monkeys-progress-container").style.removeProperty("display"),document.getElementById("insta-monkey-progress-container").style.display="none",e){case"game":lt();break;case"list":gt()}}function lt(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkey-game-container",t.classList.add("insta-monkey-game-container"),e.appendChild(t);let d=document.createElement("div");d.id="towers-container",d.classList.add("towers-container"),t.appendChild(d),Object.keys(R.towersInOrder).forEach((e=>{let t=document.createElement("div");t.id=`${e}-container`,t.classList.add("tower-container"),t.style.backgroundImage=`url(./Assets/UI/InstaTowersContainer${ne.TowerBorders[e]}.webp)`,t.addEventListener("click",(()=>{ot(e)})),d.appendChild(t);let a=document.createElement("img");a.id=`${e}-img`,a.classList.add("tower-img"),a.src=y(e,"000"),t.appendChild(a);let s=document.createElement("p");s.id=`${e}-name`,s.classList.add("tower-name"),s.classList.add("black-outline"),s.innerHTML=P(e),t.appendChild(s);let n=document.createElement("p");n.id=`${e}-total-div`,n.classList.add("insta-progress"),t.appendChild(n);let i=document.createElement("p");i.id=`${e}-total`,i.classList.add("power-progress-text"),i.classList.add("black-outline"),i.innerHTML=ne.TowerTotal[e],n.appendChild(i)}))}function ot(e){document.getElementById("insta-monkeys-progress-container").style.display="none",document.getElementById("insta-monkey-progress-container").style.display="flex",rt(e)}function rt(e){let t=document.getElementById("insta-monkey-progress-container");t.innerHTML="";let d=document.createElement("div");t.appendChild(d);let a=document.createElement("div");a.id=`${e}-top-bar`,a.classList.add("insta-monkey-top-bar"),d.appendChild(a);let s=document.createElement("div");s.id="map-prev-arrow",s.classList.add("insta-arrow"),s.addEventListener("click",(()=>{mt(e)})),a.appendChild(s);let n=document.createElement("img");n.id="map-prev-arrow-img",n.classList.add("map-arrow-img"),n.src="./Assets/UI/PrevArrow.webp",s.appendChild(n);let i=document.createElement("div");switch(i.id=`${e}-header-div`,i.classList.add("insta-monkey-header-div"),ne.TowerBorders[e]){case"Gold":i.classList.add("insta-topbar-gold");break;case"Black":i.classList.add("insta-topbar-black")}a.appendChild(i);let l=document.createElement("div");l.id="map-next-arrow",l.classList.add("insta-arrow"),l.addEventListener("click",(()=>{ut(e)})),a.appendChild(l);let o=document.createElement("img");o.id="map-next-arrow-img",o.classList.add("map-arrow-img"),o.src="./Assets/UI/NextArrow.webp",l.appendChild(o);let r=document.createElement("div");r.id="maps-progress-coop-toggle",r.classList.add("maps-progress-coop-toggle"),i.appendChild(r);let c=document.createElement("p");c.id="maps-progress-coop-toggle-text",c.classList.add("maps-progress-coop-toggle-text"),c.classList.add("black-outline"),c.innerHTML="Missing: ",r.appendChild(c);let p=document.createElement("input");p.id="insta-progress-missing-toggle-input",p.classList.add("insta-progress-missing-toggle-input"),p.classList.add("MkOffRed"),p.type="checkbox",p.addEventListener("change",(()=>{pt()})),p.checked=Z,r.appendChild(p);let m=document.createElement("p");m.id=`${e}-name`,m.classList.add("insta-monkey-name"),m.classList.add("black-outline"),m.innerHTML=P(e),i.appendChild(m);let u=document.createElement("div");u.id=`${e}-progress`,u.classList.add("insta-monkey-progress"),i.appendChild(u);let g=document.createElement("p");g.id=`${e}-progress-text`,g.classList.add("insta-monkey-progress-text"),g.classList.add("black-outline"),g.innerHTML=`${Object.values(ne.TowerTierTotals[e]).reduce(((e,t)=>e+t),0)}/64`,u.appendChild(g);let h=document.createElement("div");h.id=`${e}-main-container`,h.classList.add("insta-monkey-main-container"),d.appendChild(h),ct(e)}function ct(e){let d=document.getElementById(`${e}-main-container`);d.innerHTML="";let a=document.createElement("div");a.id=`${e}-icons-container`,a.classList.add("insta-monkey-icons-container"),d.appendChild(a),R.collectionOrder.forEach((d=>{let s=document.createElement("div");if(s.id=`${e}-${d}-container`,s.classList.add("insta-monkey-tier-container"),t.instaTowers[e][d]||(s.style.display="none",s.classList.add("insta-monkey-unobtained")),a.appendChild(s),t.instaTowers[e][d]>1){let a=document.createElement("p");a.id=`${e}-total-div`,a.classList.add("insta-progress"),a.classList.add("insta-tier-scale"),s.appendChild(a);let n=document.createElement("p");n.id=`${e}-total`,n.classList.add("power-progress-text"),n.classList.add("black-outline"),n.innerHTML=t.instaTowers[e][d],a.appendChild(n)}let n=document.createElement("img");n.id=`${e}-${d}-img`,n.classList.add("insta-monkey-tier-img"),n.src=t.instaTowers[e][d]?k(e,d):"./Assets/UI/InstaUncollected.webp",s.appendChild(n);let i=document.createElement("p");i.id=`${e}-${d}-text`,i.classList.add("insta-monkey-tier-text"),i.classList.add("black-outline"),i.innerHTML=`${d[0]}-${d[1]}-${d[2]}`,s.appendChild(i)}))}function pt(){for(let e of document.getElementsByClassName("insta-monkey-unobtained"))e.style.display=document.getElementById("insta-progress-missing-toggle-input").checked?"block":"none"}function mt(e){let t=Object.keys(R.towersInOrder),d=t.indexOf(e);0==d?d=t.length-1:d--,ot(t[d])}function ut(e){let t=Object.keys(R.towersInOrder),d=t.indexOf(e);d==t.length-1?d=0:d++,ot(t[d])}function gt(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkeys-list-container",t.classList.add("insta-monkeys-list-container"),e.appendChild(t);let d=document.createElement("div");d.id="insta-monkeys-list",d.classList.add("insta-monkeys-list"),t.appendChild(d),Object.keys(R.towersInOrder).forEach((e=>{if(null==ne.TowerTierTotals[e])return;let t=document.createElement("div");t.id=`${e}-div`,t.classList.add("insta-monkey-div"),d.appendChild(t);let a=document.createElement("div");a.id=`${e}-container`,a.classList.add("tower-container"),a.style.backgroundImage=`url(./Assets/UI/InstaTowersContainer${ne.TowerBorders[e]}.webp)`,a.addEventListener("click",(()=>{ot(e)})),t.appendChild(a);let s=document.createElement("img");s.id=`${e}-img`,s.classList.add("tower-img"),s.src=y(e,"000"),a.appendChild(s);let n=document.createElement("p");n.id=`${e}-name`,n.classList.add("tower-name"),n.classList.add("black-outline"),n.innerHTML=P(e),a.appendChild(n);let i=document.createElement("div");i.id=`${e}-top-bottom`,i.classList.add("insta-monkey-top-bottom"),t.appendChild(i);let l=document.createElement("div");l.id=`${e}-progress`,l.classList.add("insta-monkey-progress-list"),i.appendChild(l);let o=document.createElement("div");o.classList.add("insta-monkey-total"),l.appendChild(o);let r=document.createElement("p");r.id=`${e}-total-label-text`,r.classList.add("insta-monkey-progress-label-text"),r.classList.add("black-outline"),r.innerHTML="Total Instas:",o.appendChild(r);let c=document.createElement("p");c.id=`${e}-total-text`,c.classList.add("insta-monkey-total-text"),c.classList.add("black-outline"),c.innerHTML=ne.TowerTotal[e],o.appendChild(c);let p=document.createElement("div");p.id=`${e}-tier-progress`,p.classList.add("insta-monkey-tier-progress"),l.appendChild(p);let m=document.createElement("p");m.id=`${e}-progress-label-text`,m.classList.add("insta-monkey-progress-label-text"),m.classList.add("black-outline"),m.innerHTML="Unique Instas:",p.appendChild(m);let u=document.createElement("p");u.id=`${e}-progress-text`,u.classList.add("insta-monkey-progress-text"),u.classList.add("black-outline"),u.innerHTML=`${Object.values(ne.TowerTierTotals[e]).reduce(((e,t)=>e+t),0)}/64`,p.appendChild(u);let g=document.createElement("div");g.id=`${e}-tiers-container`,g.classList.add("insta-monkey-tiers-container"),i.appendChild(g);let h=document.createElement("p");h.id=`${e}-tiers-label`,h.classList.add("insta-monkey-tiers-label"),h.classList.add("black-outline"),h.innerHTML="Unique By Tier:",g.appendChild(h);for(let[t,d]of Object.entries(ne.TowerTierTotals[e])){let e=document.createElement("div");e.classList.add("insta-monkey-tier-div"),g.appendChild(e);let a=document.createElement("p");a.classList.add("insta-monkey-tier-text-list"),a.classList.add(`insta-tier-text-${t}`),"5"==t?a.classList.add("t5-insta-outline"):a.classList.add("black-outline"),e.style.backgroundImage=`url(./Assets/UI/InstaTier${t}Container.webp)`,a.innerHTML=`${d}/${R.instaTiers[t].length}`,e.appendChild(a)}}))}function ht(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("p");t.id="insta-monkeys-guide-title-text",t.classList.add("insta-monkeys-guide-title-text"),t.classList.add("black-outline"),t.innerHTML="Where To Get More Insta Monkeys",e.appendChild(t);let d=document.createElement("p");d.id="insta-monkeys-guide-title-desc",d.classList.add("insta-monkeys-guide-title-desc"),d.classList.add("black-outline"),d.innerHTML="Select a button to read more about that method.",e.appendChild(d)}function Lt(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="achievements-progress-container",t.classList.add("achievements-progress-container"),e.appendChild(t);let d=document.createElement("div");d.id="achievements-header-bar",d.classList.add("achievements-header-bar"),t.appendChild(d);let a=document.createElement("div");a.id="achievements-views",a.classList.add("maps-progress-views"),d.appendChild(a);let s=document.createElement("div");s.id="map-progress-filter-difficulty",s.classList.add("map-progress-filter-difficulty"),a.appendChild(s);let n=document.createElement("p");n.id="maps-progress-filter-difficulty-text",n.classList.add("maps-progress-coop-toggle-text"),n.classList.add("black-outline"),n.innerHTML="Filter:",s.appendChild(n);let i=document.createElement("select");i.id="map-progress-filter-difficulty-select",i.classList.add("map-progress-filter-difficulty-select");["None","Monkey Money","Knowledge Points","Insta Monkeys","Hidden Achievements"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,i.appendChild(t)})),s.appendChild(i);let l=document.createElement("div");l.id="maps-progress-filter",l.classList.add("maps-progress-filter"),d.appendChild(l);let o=document.createElement("div");o.id="map-progress-filter-difficulty",o.classList.add("map-progress-filter-difficulty"),l.appendChild(o);let r=document.createElement("p");r.id="maps-progress-filter-difficulty-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Display:",o.appendChild(r);let c=document.createElement("select");c.id="map-progress-filter-difficulty-select",c.classList.add("map-progress-filter-difficulty-select"),c.addEventListener("change",(()=>{kt(c.value)}));["All","Locked","Unlocked"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,c.appendChild(t)})),o.appendChild(c);let p=document.createElement("div");p.id="achievements-container",p.classList.add("achievements-container"),e.appendChild(p),i.addEventListener("change",(()=>{Et(i.value)})),kt("All"),Et("None"),vt()}function vt(){let e=document.getElementById("achievements-container");e.innerHTML="";let d=R.achievementGameOrder;switch(ae){case"Locked":d=d.filter((e=>!t.achievementsClaimed.includes(p[N[e].name]||N[e].name)));break;case"Unlocked":d=d.filter((e=>t.achievementsClaimed.includes(p[N[e].name]||N[e].name)));break;case"All":d=d.sort(((e,d)=>t.achievementsClaimed.includes(p[N[e].name]||N[e].name)-t.achievementsClaimed.includes(p[N[d].name]||N[d].name)))}switch(se){case"Monkey Money":d=d.filter((e=>N[e].model.loot.includes("MonkeyMoney"))),d=d.sort(((e,t)=>Object.values(wt(N[e].model.loot)).find((e=>"MonkeyMoney"==e.type)).amount-Object.values(wt(N[t].model.loot)).find((e=>"MonkeyMoney"==e.type)).amount));break;case"Knowledge Points":d=d.filter((e=>N[e].model.loot.includes("KnowledgePoints")));break;case"Insta Monkeys":d=d.filter((e=>N[e].model.loot.includes("InstaMonkey")));break;case"Hidden Achievements":d=d.filter((e=>N[e].model.hidden))}if(0==d.length){let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="No Data Found.",t.style.width="100%",e.appendChild(t)}for(let a of d){let d=N[a],s=t.achievementsClaimed.includes(p[d.name]||d.name),n=document.createElement("div");n.classList.add("achievement-div"),e.appendChild(n);let i=document.createElement("div");i.classList.add("achievement-top-div"),n.appendChild(i);let l=document.createElement("div");l.classList.add("achievement-icon-div"),i.appendChild(l);let o=document.createElement("img");o.classList.add("achievement-icon-img"),o.src=S(d.model.achievementIcon,!s&&d.model.hidden),l.appendChild(o);let r=document.createElement("div");r.classList.add("achievement-text-div"),i.appendChild(r);let c=document.createElement("p");c.classList.add("achievement-name-text"),c.classList.add("black-outline"),c.innerHTML=s?P(`Achievement ${d.model.achievementId} Name`):d.model.hidden?"???":P(`Achievement ${d.model.achievementId} Name`),r.appendChild(c);let m=document.createElement("p");m.classList.add("achievement-desc-text");let u=s?P(`Achievement ${d.model.achievementId} Description`):d.model.hidden?"???":P(`Achievement ${d.model.achievementId} Description`);m.innerHTML=-1!=u.indexOf("{0}")?u.replace("{0}",d.model.achievementGoal.toLocaleString()):u,r.appendChild(m);let g=document.createElement("div");g.classList.add("achievement-bottom-div"),n.appendChild(g);let h=document.createElement("div");h.classList.add("achievement-rewards-div"),g.appendChild(h);for(let[e,t]of Object.entries(wt(d.model.loot))){let e=document.createElement("div");e.classList.add("achievement-reward-div"),h.appendChild(e);let d=document.createElement("img");d.classList.add("achievement-reward-img"),d.src=x(t),e.appendChild(d);let a=document.createElement("p");a.classList.add("achievement-reward-text"),a.classList.add("black-outline");let s="";switch(t.type){case"InstaMonkey":s=t.tiers.split("").join("-");break;case"Knowledge":s="+ "+t.amount.toLocaleString();break;case"Power":case"RandomInstaMonkey":s="X "+t.amount.toLocaleString();break;default:s=t.amount?t.amount.toLocaleString():""}a.innerHTML=s,e.appendChild(a)}if(s){let e=document.createElement("img");e.classList.add("achievement-completed-check"),e.src="./Assets/UI/TickGreenIcon.webp",g.appendChild(e)}}}function yt(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="extras-progress-container",t.classList.add("extras-progress-container"),e.appendChild(t);let d=[["Big Bloons","BigBloonsMode"],["Small Bloons","SmallBloonsMode"],["Big Monkey Towers","BigTowersMode"],["Small Monkey Towers","SmallTowersMode"],["Small Bosses","SmallBossesMode"]];for(let[e,a]of d){if(!W[e])continue;let d=document.createElement("div");d.classList.add("extra-progress-div"),t.appendChild(d);let s=document.createElement("img");s.classList.add("extra-progress-img"),s.src=`./Assets/UI/${a}Icon.webp`,d.appendChild(s);let n=document.createElement("p");n.classList.add("extra-progress-text"),n.classList.add("black-outline"),n.innerHTML=P(a),d.appendChild(n)}}function kt(e){ae=e,vt()}function Et(e){se=e,vt()}function Ct(){let e=document.getElementById("explore-content");e.innerHTML="";let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="Coming Soon",e.appendChild(t)}function bt(){let e=document.getElementById("export-content");e.innerHTML="";let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="Coming Soon",e.appendChild(t)}function ft(){let e=document.getElementById("settings-content");e.innerHTML="";let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="Coming Soon",e.appendChild(t);let d=document.createElement("div");d.id="settings-container",d.classList.add("settings-container"),e.appendChild(d);let a=document.createElement("div");a.id="settings-options-container",a.classList.add("settings-options-container"),d.appendChild(a);let s=document.createElement("p");s.id="where-button",s.classList.add("where-button"),s.classList.add("return-entry-button"),s.classList.add("black-outline"),s.innerHTML="Clear Local Storage",s.addEventListener("click",(()=>{localStorage.clear()}))}function wt(e){let t={},d=e.split("#"),a=0;for(let e of d){t[a]={};let d=e.split(":"),s=d[0];if(!["MonkeyMoney","Power","InstaMonkey","KnowledgePoints","RandomInstaMonkey","Trophy"].includes(s)){t[a].type="Other",t[a].value=s,a++;continue}let n=d[1].split(",");switch(s){case"MonkeyMoney":t[a].type="MonkeyMoney",t[a].amount=parseInt(n[0]);break;case"Power":t[a].type="Power",t[a].power=n[0],t[a].amount=parseInt(n[1]),null==n[1]&&(t[a].amount=1);break;case"InstaMonkey":t[a].type="InstaMonkey",t[a].tower=n[0],t[a].tiers=n[1];break;case"KnowledgePoints":t[a].type="KnowledgePoints",t[a].amount=parseInt(n[0]);break;case"RandomInstaMonkey":t[a].type="RandomInstaMonkey",t[a].tier=n[0],t[a].amount=parseInt(n[1]);break;case"Trophy":t[a].type="Trophy",t[a].trophy=n[0]}a++}return t}function Mt(e){null!=e?document.body.style.backgroundColor=`rgb(${255*e[0]},${255*e[1]},${255*e[2]})`:document.body.style.removeProperty("background-color")}function Bt(e,t,d,a,s){switch(e){case 1:return d*(a/s);case 2:return t*(s/a);case 3:return s*(t/d);case 4:return a*(d/t)}}function Tt(e,t){let d=document.createElement("div");d.classList.add("error-modal-overlay"),document.body.appendChild(d);let a=document.createElement("div");a.id="error-modal",a.classList.add("error-modal"),d.appendChild(a);let s=document.createElement("div");s.id="error-modal-header",s.classList.add("error-modal-header"),a.appendChild(s);let n=document.createElement("img");n.id="error-modal-header-img",n.classList.add("error-modal-header-img"),n.src="./Assets/UI/BadConnectionBtn.webp",s.appendChild(n);let i=document.createElement("p");i.id="error-modal-header-text",i.classList.add("error-modal-header-text"),i.classList.add("black-outline"),i.innerHTML="Error",s.appendChild(i);let l=document.createElement("div");l.classList.add("error-modal-dummy"),s.appendChild(l);let o=document.createElement("div");o.id="error-modal-content",o.classList.add("error-modal-content"),o.innerHTML=("api"==t?"Ninja Kiwi API Error: ":"")+e,a.appendChild(o);let r=document.createElement("div");if(r.id="error-modal-content2",r.classList.add("error-modal-content"),"Invalid user ID / Player Does not play this game"===e)r.innerHTML="Please try again or create a new Open Access Key.";a.appendChild(r);let c=document.createElement("img");c.id="error-modal-close",c.classList.add("error-modal-close"),c.src="./Assets/UI/CloseBtn.webp",c.addEventListener("click",(()=>{document.body.removeChild(d)})),o.appendChild(c)}