let e="",t={},a={},d={},l={},n=null,s=null,i=null,o=1,r=null,c={},p=!1,m={},u=null,h=null,g=null,L={},v=null,b=null,C=1,y=null,E="newest",f=!1,k=!1,w={};async function M(e,t){let a=null;try{f?(a=await fetch(e,{cache:"reload"}),f=!1):a=await fetch(e)}catch(e){return console.log(e),Ja("You have hit the rate limit.<br>If you are browsing the leaderboards or content browsers, please slow down!<br><br>The rate limit will clear after a short time.","api"),`You have hit the rate limit. [${e}]`}try{let e=await a.json();return 1==e.success?t(e):"Rate limit"==e.reason?(k=!0,Ja("You have hit the rate limit. Please try again later.","api")):(document.getElementById("loading").style.transform="scale(0)",Ce=!1,Ja(e.error,"api")),e}catch(e){return Ja(`Something went wrong with the request. Response Code: ${a.status} [${e}]`,"api"),`Something went wrong with the request. Response Code: ${a.status} [${e}]`}}async function T(e){f=!0,M(`https://data.ninjakiwi.com/btd6/save/${e}`,(d=>{t=d.body,a=d.model,be[0]=1,B(e)}))}async function B(e){f=!0,M(`https://data.ninjakiwi.com/btd6/users/${e}`,(t=>{d=t.body,l=t.model,c[e]={displayName:d.displayName,avatar:d.avatarURL,banner:d.bannerURL},j(),be[1]=1,Xe()}))}async function I(){null==n?M("https://data.ninjakiwi.com/btd6/races",(e=>{n=e.body,ua()})):ua()}async function H(e){return n&&n[e]&&"string"==typeof n[e].metadata?M(n[e].metadata,(t=>(console.log(`fetched ${n[e].metadata}`),n[e].metadata=t.body,n[e]))):n[e]}async function S(){return i?(s=null,M(`${i}?page=${o}`,(e=>(console.log(`fetched ${i}?page=${o}`),s=e.body,r=s.length,document.getElementById("leaderboard-footer-page-number").innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,s)))):Ja("Leaderboard Fetch Error: No leaderboard data found")}async function $(){null==u?M("https://data.ninjakiwi.com/btd6/bosses",(e=>{u=e.body,ha(Fe)})):ha(Fe)}async function D(e,t){return u&&u[e]&&"string"==typeof u[e][t?"metadataElite":"metadataStandard"]?M(u[e][t?"metadataElite":"metadataStandard"],(a=>(console.log(`fetched ${u[e][t?"metadataElite":"metadataStandard"]}`),u[e][t?"metadataElite":"metadataStandard"]=a.body,u[e]))):u[e]}async function x(){null==h?M("https://data.ninjakiwi.com/btd6/ct",(e=>{h=e.body,ga()})):ga()}async function P(e){let t=null;return await M(e,(a=>(console.log(`fetched ${e}`),t=a.body,t))),t}async function A(){if(null!=g)return console.log("no bad!"),g;await M("https://data.ninjakiwi.com/btd6/challenges/filter/daily",(e=>(g=e.body,g)))}async function O(e){return null==L[e]?await M(`https://data.ninjakiwi.com/btd6/challenges/challenge/${e}`,(t=>(console.log(`fetched ${e}`),L[e]=t.body,L[e]))):console.log(`used cache for ${e}`),L[e]}async function U(){return b?(v=null,M(`${b}${E}?page=${C}`,(e=>(console.log(`fetched ${b}?page=${C}`),v=e.body,y=v.length,document.getElementById("browser-footer-page-number").innerHTML=`Page ${C} of 4`,s)))):Ja("Content Browser Fetch Error: No data found")}async function R(e){let t=e.split("/").pop();return null==m[t]?await M(e,(a=>{console.log(`fetched ${e}`),m[t]=a.body})):console.log(`used cache for ${t}`),m[t]}async function G(e){return null==w[e]?await M(`https://data.ninjakiwi.com/btd6/maps/map/${e}`,(t=>(console.log(`fetched ${e}`),w[e]=t.body,w[e]))):console.log(`used cache for ${e}`),w[e]}function N(){null!=localStorage.getItem("BTD6OAKStorage")&&(c=JSON.parse(localStorage.getItem("BTD6OAKStorage")))}function j(){localStorage.setItem("BTD6OAKStorage",JSON.stringify(c))}function _(e,t){let a=new Date(2024,4,25),d=(t?2101:2114)-parseInt(e);return a.setDate(a.getDate()-d),(t?"adv":"rot")+e+a.toISOString().substring(0,10).replace(/-/g,"")}function q(e,t){let a=new Date(e),d=new Date(2024,4,25).getTime()-a.getTime();return(t?"adv":"rot")+((t?2101:2114)-Math.floor(d/864e5))+e.replace(/-/g,"")}const z={Clicker:"Bloons Master","Superior Clicker":"Superior Bloons Master","Ultimate Clicker":"Ultimate Bloons Master","Knowledgable Primate":"Knowledgeable Primate","Triple Threat":"Triple threat","Small Bloons":"Alchermistman and Bloonacleboy","Master of Life":"Master of life","What did it cost":"What did it cost? - Everything","2 Mega Pops":"2 MegaPops","Looking fab":"Lookin fab",GoldenTicket:"Golden Ticket","Axis of Havok":"Axis of Havoc","Co-op Popper!":"Co-op Popper",CouponCrazy:"Coupon Crazy",LimitedRun:"Limited Run",ALaCode:"A La Code",InstantGratification:"Instant Gratification","Achievement Of Achievements":"Achievement of Achievements","What is this new Bloonery":"What is this new Bloonery?","Who's the Boss":"Who's the Boss?","I'llBeBack":"I'll Be Back",SoSpiiiceyNinjaKiwi:"So Spiiicey Ninja Kiwi",DavidsVsGoliath:"Davids vs Goliath",ToolsToDarwin:"Tools to Darwin",BigSpender:"Big Spender",NotLackingCriticalInformation:"Not Lacking Critical Information",StubbornStrategy:"Stubborn Strategy","Hook Line And Sinker":"Hook, Line, and Sinker",CrashOfTheTitans:"Crash of the Titans","So Shiny":"So Shiny!","Ultimate Team Up":"Ultimate Team-up",StudentLoans:"Student Loans",StickySituation:"Sticky Situation",NoHarvest:"No Harvest",ReadyPlayerOne:"Ready Player One?",TheDailyReid:"The Daily Reid",InstaCentury:"Insta Century"},K=Object.entries(z).reduce(((e,[t,a])=>(e[a]=t,e)),{}),F={ObynOceanGuardian:"OceanObyn",MoltenObyn:"MountainObyn",JoanOfArcAdora:"JoanOfArc",CyberQuincy:"QuincyCyber",ETnEtienne:"ETn",SentaiCaptainChurchill:"SentaiChurchill",SleighCaptainChurchill:"SleighChurchill"},W={Spikeopult:"Spike-o-pult",BuccaneerLongRange:"LongRange",BuccaneerGrapeShot:"GrapeShot",BuccaneerCrowsNest:"CrowsNest",BuccaneerHotShot:"HotShot",BuccaneerCarrierFlagship:"CarrierFlagship",BuccaneerCannonShip:"CannonShip",BuccaneerMerchantman:"Merchantman",BuccaneerFavoredTrades:"FavoredTrades",BuccaneerAircraftCarrier:"AircraftCarrier",BuccaneerDestroyer:"Destroyer",BuccaneerTradeEmpire:"TradeEmpire",BuccaneerPirateLord:"PirateLord",BuccaneerMonkeyPirates:"MonkeyPirates",HeattippedDarts:"HeatTippedDart",BioncBoomerang:"BionicBoomerang",LargeCalibre:"LongCalibre",LaserBlasts:"LaserBlast",GuidedMagic:"GuildedMagic",MortarRapidReload:"RapidReload",SupplyDrop:"CashDrop",PlasmaBlasts:"PlasmaBlast",XXXLTrap:"XXXL",OversizeNails:"OversizedNails",CenteredPath:"FlightOrders",Shockwave:"ShellShock",Monkeyopolis:"Metropolis",Spectre:"Specter",TrueSunGod:"TrueSonGod",HydraRocketPods:"HydraRockets",DartMonkeyParagon:"ApexPlasmaMaster",BoomerangMonkeyParagon:"GlaiveDominus",NinjaMonkeyParagon:"AscendedShadow",EngineerMonkeyParagon:"MasterBuilder",WizardMonkeyParagon:"MagusPerfectus",MonkeyAceParagon:"GoliathDoomship",MonkeyBuccaneerParagon:"NavarchOfTheSeas",MonkeySubParagon:"NauticSiegeCore",SmartSpikes:"DirectedSpikes"};let V={"Directed Spikes":"Smart Spikes","Directed Spikes Description":"Smart Spikes Description",CircusGwendolinSkinName:"HarlegwenGwendolinSkinName",CircusGwendolinSkinDescription:"HarlegwenGwendolinSkinDescription",OctoJonesSkinName:"OctoJonesStrikerJonesSkinName",OctoJonesSkinDescription:"OctoJonesStrikerJonesSkinDescription",MoltenObynSkinName:"ObynMountainGuardianSkinName",MoltenObynSkinDescription:"ObynMountainGuardianSkinDescription",SushiBentoSkinName:"SushiBentoBenjaminSkinName",SushiBentoSkinDescription:"SushiBentoBenjaminSkinDescription",KaijuPatSkinName:"KaijuPatFustySkinName",KaijuPatSkinDescription:"KaijuPatFustySkinDescription",GalaxiliSkinName:"GalaxiliEziliSkinName",GalaxiliSkinDescription:"GalaxiliEziliSkinDescription",VoidoraSkinName:"VoidoraAdoraSkinName",VoidoraSkinDescription:"VoidoraAdoraSkinDescription",VikingSaudaSkinName:"VikingSaudaSaudaSkinName",VikingSaudaSkinDescription:"VikingSaudaSaudaSkinDescription",JiangshiSaudaSkinName:"JiangshiSaudaSaudaSkinName",JiangshiSaudaSkinDescription:"JiangshiSaudaSaudaSkinDescription",DreadPirateBrickellSkinName:"DreadPirateBrickellAdmiralBrickellSkinName",DreadPirateBrickellSkinDescription:"DreadPirateBrickellAdmiralBrickellSkinDescription",LifeguardBrickellSkinName:"LifeguardBrickellAdmiralBrickellSkinName",LifeguardBrickellSkinDescription:"LifeguardBrickellAdmiralBrickellSkinDescription",PsimbalsSkinName:"PsimbalsPsiSkinName",PsimbalsSkinDescription:"PsimbalsPsiSkinDescription",GeraldoGentlemanGadgeteerSkinName:"GentlemonkeyGadgeteerGeraldoSkinName",GeraldoGentlemanGadgeteerSkinDescription:"GentlemonkeyGadgeteerGeraldoSkinDescription","Mode Easy":"Easy","Mode Medium":"Medium","Mode Hard":"Hard","Mode Impoppable":"Impoppable","Mode Sandbox":"Sandbox"},X={Easy:"Bronze",PrimaryOnly:"Bronze01",Deflation:"Bronze02",Medium:"Silver",MilitaryOnly:"Silver01",Apopalypse:"Silver03",Reverse:"Silver02",Hard:"Gold",MagicOnly:"Gold01",DoubleMoabHealth:"Gold03",HalfCash:"Gold04",AlternateBloonsRounds:"Gold02",Impoppable:"Impoppable",Clicks:"ImpoppableRuby","CHIMPS-BLACK":"ImpoppableHematite"},Y={"Scientist Gwendolin":"ScientistGwendolin","Biker Bones":"BikerBones","Sentai Captain Churchill":"SentaiCaptainChurchill","Cyber Quincy":"Cyber Quincy","Octo Jones":"OctoJones","Sleigh Captain Churchill":"SleighCaptainChurchill","Wolfpack Quincy":"WolfpackQuincy",ScientistGwendolin:"Scientist Gwendolin",BikerBones:"Biker Bones",SentaiCaptainChurchill:"Sentai Captain Churchill",CyberQuincy:"Cyber Quincy",OctoJones:"Octo Jones",SleighCaptainChurchill:"Sleigh Captain Churchill",WolfpackQuincy:"Wolfpack Quincy"},J=["ZMYVERW","ZMYUWTV","ZMYUDTK","ZMYVPGA","ZMYVPFH","ZMYWHPC"];function Q(e,t){return"WizardMonkey"==e?`Assets/TowerIcon/${t}-Wizard.webp`:`Assets/TowerIcon/${t}-${e}.webp`}function Z(e,t){return"WizardMonkey"==e?`Assets/UI/InstaContainer/${t}-Wizard.webp`:`Assets/UI/InstaContainer/${t}-${e}.webp`}function ee(e,t){let a=Math.max(t[0],t[1],t[2]);switch(Math.max(t[0],t[1],t[2])){case parseInt(t[0]):a=`${a}00`;break;case parseInt(t[1]):a=`0${a}0`;break;case parseInt(t[2]):a=`00${a}`}return"WizardMonkey"==e?`Assets/InstaMonkeyIcon/${a}-WizardInsta.webp`:`Assets/InstaMonkeyIcon/${a}-${e}Insta.webp`}function te(e){return e=e.replace(/[^a-zA-Z0-9]/g,""),W[e]?`Assets/UpgradeIcon/${W[e]}UpgradeIcon.webp`:`Assets/UpgradeIcon/${e}UpgradeIcon.webp`}function ae(e){return"SubAdmiral"==e?"Assets/KnowledgeIcon/NavalUpgradesIcon.webp":`Assets/KnowledgeIcon/${e}Icon.webp`}function de(e,t){return 1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function le(e){return`Assets/HeroIconSquare/HeroIcon${e=F[e]||e}.webp`}function ne(e){return`Assets/HeroIconCircle/HeroIcon${e=F[e]||e}.webp`}function se(e,t){return e=F[e]||e,1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function ie(e){return"#ouch"==e?"Assets/MapIcon/MapSelectouchButton.webp":`Assets/MapIcon/MapSelect${e}Button.webp`}function oe(e){return`Assets/PowerIcon/${e}Icon.webp`}function re(e,t){return t?"Assets/AchievementIcon/HiddenIcon.webp":`Assets/AchievementIcon/${e}Icon.webp`}function ce(e){return z[e]||e}function pe(e){return`Assets/MedalIcon/${e}.webp`}function me(e){return`Assets/ModeIcon/${e}Btn.webp`}function ue(e){switch(e.type){case"MonkeyMoney":return"Assets/UI/BloonjaminsIcon.webp";case"Power":return oe(e.power);case"InstaMonkey":return ee(e.tower,e.tiers);case"KnowledgePoints":return"Assets/UI/KnowledgeIcon.webp";case"RandomInstaMonkey":return`Assets/UI/InstaRandomTier${0==e.tier?1:e.tier}.webp`;case"Trophy":return"Assets/UI/TrophyIcon.webp";default:return`Assets/UI/${e.value}Icon.webp`}}function he(e){return`Assets/ProfileAvatar/${e}.webp`}function ge(e){return""==e?"Assets/ProfileBanner/TeamsBannerDeafult.webp":`Assets/ProfileBanner/${e}.webp`}function Le(e){return J.includes(e)?`Assets/CustomMapIcon/${e}.webp`:`https://data.ninjakiwi.com/btd6/maps/map/${e}/preview`}function ve(e){return V[e]?Ee[V[e]]:Ee[e]}let be=[0,0,0,0,0],Ce=!1,ye=[],Ee={},fe={},ke={},we={},Me={rank:1,xp:null,xpGoal:null},Te=2e7,Be={rank:1,xp:null,xpGoal:2e7},Ie={},He={},Se={},$e={},De={Maps:{},Medals:{single:{},coop:{}},Borders:{single:{},coop:{}}},xe="",Pe=!1,Ae=!1,Oe="grid",Ue=!1,Re="All",Ge=0,Ne="game",je="game",_e="None",qe={TowerTotal:{},TowerTierTotals:{},TowerMissingByTier:{},TowerBorders:{}},ze=null,Ke={"Monkey Knowledge Disabled":"NoKnowledgeIcon","No Lives Lost":"NoLivesLostIcon","Selling Disabled":"SellingDisabledIcon","Powers Disabled":"PowersDisabledIcon","No Continues":"NoContinuesIcon","All Camo":"AllCamoIcon","All Regrow":"AllRegenIcon","Double Cash Disabled":"NoDoubleCashIcon","No Round 100 Reward":"NoInstaMonkeys","Custom Rounds":"CustomRoundIcon","Paragon Limit":"ParagonLimitIcon"},Fe=!1,We="grid",Ve="Default";function Xe(){fetch("./data/English.json").then((e=>e.json())).then((e=>{Ee=e,be[2]=1,Ye()})).catch((e=>console.error("Error:",e))),fetch("./data/Achievements150.json").then((e=>e.json())).then((e=>{fe=e,be[3]=1,Ye()})).catch((e=>console.error("Error:",e))),st(),Ye()}function Ye(){be.every((e=>1===e))&&(document.getElementById("front-page").style.display="none",document.body.classList.add("transition-bg"),gt(),Je(),Qe(),Ze(),et(),tt(),at(),nt(),lt(),dt(),bt(),ye.push("overview"),Lt("overview"))}function Je(){if(18e7===t.xp)return Me.rank=155,Me.xp=null,void(Me.xpGoal=null);let e=parseInt(t.xp);for(let[t,a]of Object.entries(we.Rank))if(t=parseInt(t),e<a.totalXpNeeded)return e-=parseInt(we.Rank[t-1].totalXpNeeded),xpGoal=parseInt(a.totalXpNeeded)-parseInt(we.Rank[t-1].totalXpNeeded),Me.rank=t-1,Me.xp=e,void(Me.xpGoal=xpGoal)}function Qe(){let e=parseInt(t.veteranXp);for(;e>=Te;)e-=Te,Be.rank+=1;Be.xp=e}function Ze(){for(let[e,t]of Object.entries(fe))ke[t.name]=t}function et(){Ie["Games Played"]=d.gameplay.gameCount,Ie["Games Won"]=d.gameplay.gamesWon,Ie["Highest Round (All Time)"]=d.gameplay.highestRound,Ie["Highest Round (CHIMPS)"]=d.gameplay.highestRoundCHIMPS,Ie["Highest Round (Deflation)"]=d.gameplay.highestRoundDeflation,Ie["Monkeys Placed"]=d.gameplay.monkeysPlaced,Ie["Total Pop Count"]=d.bloonsPopped.bloonsPopped,Ie["Total Co-Op Pop Count"]=d.bloonsPopped.coopBloonsPopped,Ie["Camo Bloons Popped"]=d.bloonsPopped.camosPopped,Ie["Lead Bloons Popped"]=d.bloonsPopped.leadsPopped,Ie["Purple Bloons Popped"]=d.bloonsPopped.purplesPopped,Ie["Regrow Bloons Popped"]=d.bloonsPopped.regrowsPopped,Ie["Ceramic Bloons Popped"]=d.bloonsPopped.ceramicsPopped,Ie["MOABs Popped"]=d.bloonsPopped.moabsPopped,Ie["BFBs Popped"]=d.bloonsPopped.bfbsPopped,Ie["ZOMGs Popped"]=d.bloonsPopped.zomgsPopped,Ie["DDTs Popped"]=d.bloonsPopped.ddtsPopped,Ie["BADs Popped"]=d.bloonsPopped.badsPopped,Ie["Bloons Leaked"]=d.bloonsPopped.bloonsLeaked,Ie["Cash Generated"]=d.gameplay.cashEarned,Ie["Cash Gifted"]=d.gameplay.coopCashGiven,Ie["Abilities Used"]=d.gameplay.abilitiesUsed,Ie["Powers Used"]=d.gameplay.powersUsed,Ie["Insta Monkeys Used"]=d.gameplay.instaMonkeysUsed,Ie["Daily Reward Chests Opened"]=d.gameplay.dailyRewards,Ie["Challenges Completed"]=d.gameplay.challengesCompleted,Ie.Achievements=d.gameplay.achievements,Ie["Hidden Achievements"]=0,Ie["Odysseys Completed"]=d.gameplay.totalOdysseysCompleted,Ie["Lifetime Trophies"]=d.gameplay.totalTrophiesEarned,Ie["Necro Bloons Reanimated"]=d.bloonsPopped.necroBloonsReanimated,Ie["Transforming Tonics Used"]=d.bloonsPopped.transformingTonicsUsed,Ie["Most Experienced Monkey"]=d.mostExperiencedMonkey,Ie["Most Experienced Monkey XP"]=t.towerXP[d.mostExperiencedMonkey],Ie["Most Experienced Monkey"]=ve(Ie["Most Experienced Monkey"]),Ie["Insta Monkey Collection"]=`${d.gameplay.instaMonkeyCollection}/${we.totalInstaMonkeys}`,Ie["Collection Chests Opened"]=d.gameplay.collectionChestsOpened,Ie["Golden Bloons Popped"]=d.bloonsPopped.goldenBloonsPopped,Ie["Monkey Teams Wins"]=d.gameplay.monkeyTeamsWins,Ie["Bosses Popped"]=d.bloonsPopped.bossesPopped,Ie["Damage Done To Bosses"]=d.gameplay.damageDoneToBosses,Ie["Daily Challenges Completed"]=t.totalDailyChallengesCompleted,Ie["Consecutive DCs Completed"]=t.consecutiveDailyChallengesCompleted,Ie["Race Attempts"]=t.totalRacesEntered,Ie["Challenges Played"]=t.challengesPlayed,Ie["Challenges Shared"]=t.challengesShared,Ie["Continues Used"]=t.continuesUsed;let e=0,a=0;t.achievementsClaimed.forEach((t=>{ke[ce(t)].model.hidden?e+=1:a+=1})),Ie["Hidden Achievements"]=`${e}/${we.hiddenAchievements}`,Ie.Achievements=`${a}/${we.achievements}`}function tt(){let e={};for(let[t,a]of Object.entries(X))He["Medal"+a]=d._medalsSinglePlayer[t]||0,e["MedalCoop"+a]=d._medalsMultiplayer[t]||0;He={...He,...e},He.PhayzeEliteBadge=d.bossBadgesElite.Phayze||0,He.PhayzeBadge=d.bossBadgesNormal.Phayze||0,He.DreadbloonEliteBadge=d.bossBadgesElite.Dreadbloon||0,He.DreadbloonBadge=d.bossBadgesNormal.Dreadbloon||0,He.VortexEliteBadge=d.bossBadgesElite.Vortex||0,He.VortexBadge=d.bossBadgesNormal.Vortex||0,He.LychEliteBadge=d.bossBadgesElite.Lych||0,He.LychBadge=d.bossBadgesNormal.Lych||0,He.BloonariusEliteBadge=d.bossBadgesElite.Bloonarius||0,He.BloonariusBadge=d.bossBadgesNormal.Bloonarius||0,He.MedalEventBronzeMedal=d._medalsRace.Bronze||0,He.MedalEventSilverMedal=d._medalsRace.Silver||0,He.MedalEventGoldSilverMedal=d._medalsRace.GoldSilver||0,He.MedalEventDoubleGoldMedal=d._medalsRace.DoubleGold||0,He.MedalEventGoldDiamondMedal=d._medalsRace.GoldDiamond||0,He.MedalEventRedDiamondMedal=d._medalsRace.RedDiamond||0,He.MedalEventBlackDiamondMedal=d._medalsRace.BlackDiamond||0,He.OdysseyStarIcon=d.gameplay.totalOdysseyStars||0,He.BossMedalEventBronzeMedal=d._medalsBoss.Bronze||0,He.BossMedalEventSilverMedal=d._medalsBoss.Silver||0,He.BossMedalEventDoubleSilverMedal=d._medalsBoss.DoubleSilver||0,He.BossMedalEventGoldSilverMedal=d._medalsBoss.GoldSilver||0,He.BossMedalEventDoubleGoldMedal=d._medalsBoss.DoubleGold||0,He.BossMedalEventGoldDiamondMedal=d._medalsBoss.GoldDiamond||0,He.BossMedalEventDiamondMedal=d._medalsBoss.Diamond||0,He.BossMedalEventRedDiamondMedal=d._medalsBoss.RedDiamond||0,He.BossMedalEventBlackDiamondMedal=d._medalsBoss.BlackDiamond||0,He.EliteBossMedalEventBronzeMedal=d._medalsBossElite.Bronze||0,He.EliteBossMedalEventSilverMedal=d._medalsBossElite.Silver||0,He.EliteBossMedalEventDoubleSilverMedal=d._medalsBossElite.DoubleSilver||0,He.EliteBossMedalEventGoldSilverMedal=d._medalsBossElite.GoldSilver||0,He.EliteBossMedalEventDoubleGoldMedal=d._medalsBossElite.DoubleGold||0,He.EliteBossMedalEventGoldDiamondMedal=d._medalsBossElite.GoldDiamond||0,He.EliteBossMedalEventDiamondMedal=d._medalsBossElite.Diamond||0,He.EliteBossMedalEventRedDiamondMedal=d._medalsBossElite.RedDiamond||0,He.EliteBossMedalEventBlackDiamondMedal=d._medalsBossElite.BlackDiamond||0,He.CtLocalPlayerBronzeMedal=d._medalsCTLocal.Bronze||0,He.CtLocalPlayerSilverMedal=d._medalsCTLocal.Silver||0,He.CtLocalPlayerDoubleGoldMedal=d._medalsCTLocal.DoubleGold||0,He.CtLocalPlayerDiamondMedal=d._medalsCTLocal.Diamond||0,He.CtLocalPlayerRedDiamondMedal=d._medalsCTLocal.RedDiamond||0,He.CtLocalPlayerBlackDiamondMedal=d._medalsCTLocal.BlackDiamond||0,He.CtGlobalPlayerBronzeMedal=d._medalsCTGlobal.Bronze||0,He.CtGlobalPlayerSilverMedal=d._medalsCTGlobal.Silver||0,He.CtGlobalPlayerDoubleSilverMedal=d._medalsCTGlobal.DoubleSilver||0,He.CtGlobalPlayerGoldSilverMedal=d._medalsCTGlobal.GoldSilver||0,He.CtGlobalPlayerDoubleGoldMedal=d._medalsCTGlobal.DoubleGold||0,He.CtGlobalPlayerGoldDiamondMedal=d._medalsCTGlobal.GoldDiamond||0,He.CtGlobalPlayerDiamondMedal=d._medalsCTGlobal.Diamond||0}function at(){Se["Big Bloons"]=t.unlockedBigBloons,Se["Small Bloons"]=t.unlockedSmallBloons,Se["Big Monkey Towers"]=t.seenBigTowers,Se["Small Monkey Towers"]=t.unlockedSmallTowers,Se["Small Bosses"]=t.achievementsClaimed.includes("25 to Life")}function dt(){let e=Object.keys(t.unlockedTowers).filter((e=>t.unlockedTowers[e])).length;$e.Towers=`${e}/${Object.keys(t.unlockedTowers).length} Towers Unlocked`;let a=Object.keys(t.acquiredUpgrades),l=a.filter((e=>t.acquiredUpgrades[e]));$e.Upgrades=`${l.length}/${a.length} Upgrades Unlocked`;let n=a.filter((e=>e.includes("Paragon"))),s=n.filter((e=>t.acquiredUpgrades[e]));s.length>0&&($e.Paragons=`${s.length}/${n.length} Paragon${1!=s.length?"s":""} Unlocked`);let i=Object.keys(t.unlockedHeros).filter((e=>t.unlockedHeros[e])).length;$e.Heroes=`${i}/${Object.keys(t.unlockedHeros).length} Hero${1!=i?"es":""} Unlocked`;let o=Object.keys(t.unlockedSkins).filter((e=>!Object.keys(we.heroesInOrder).includes(e))).filter((e=>t.unlockedSkins[e])).length;$e.Skins=`${o}/${Object.keys(t.unlockedSkins).filter((e=>!Object.keys(we.heroesInOrder).includes(e))).length} Hero Skin${1!=o?"s":""} Unlocked`,$e.Knowledge=`${Object.keys(t.acquiredKnowledge).filter((e=>t.acquiredKnowledge[e])).length}/${Object.keys(t.acquiredKnowledge).length} Knowledge Unlocked`;let r=Object.keys(t.mapProgress).filter((e=>t.mapProgress[e])).length;$e.MapProgress=`${r} Map${1!=r?"s":""} Played`;let c=Object.values(De.Medals.single).map((e=>e.Clicks)).filter((e=>e)).length;c>0&&($e.CHIMPS=`${c} CHIMPS Medal${1!=c?"s":""} Earned`);let p=Object.values(t.powers).map((e=>e.quantity)).reduce(((e,t)=>e+t));$e.Powers=`${p} Power${1!=p?"s":""} Accumulated`;let m=Object.values(qe.TowerTotal).reduce(((e,t)=>e+t));$e.InstaMonkeys=`${m} Insta${1!=m?"s":""} Accumulated`,$e.Achievements=`${d.achievements}/${we.achievements+we.hiddenAchievements} Achievement${1!=d.achievements?"s":""} Earned`;let u=Object.keys(Se).filter((e=>Se[e])).length;$e.Extras=`${u} Extra${1!=u?"s":""} Unlocked`}function lt(){for(let[e,a]of Object.entries(t.mapProgress)){let t={single:{},coop:{}};t.single.Easy=a.difficulty?.Easy?.single?.Standard,t.single.PrimaryOnly=a.difficulty?.Easy?.single?.PrimaryOnly,t.single.Deflation=a.difficulty?.Easy?.single?.Deflation,t.single.Medium=a.difficulty?.Medium?.single?.Standard,t.single.MilitaryOnly=a.difficulty?.Medium?.single?.MilitaryOnly,t.single.Apopalypse=a.difficulty?.Medium?.single?.Apopalypse,t.single.Reverse=a.difficulty?.Medium?.single?.Reverse,t.single.Hard=a.difficulty?.Hard?.single?.Standard,t.single.MagicOnly=a.difficulty?.Hard?.single?.MagicOnly,t.single.DoubleMoabHealth=a.difficulty?.Hard?.single?.DoubleMoabHealth,t.single.HalfCash=a.difficulty?.Hard?.single?.HalfCash,t.single.AlternateBloonsRounds=a.difficulty?.Hard?.single?.AlternateBloonsRounds,t.single.Impoppable=a.difficulty?.Hard?.single?.Impoppable,t.single.Clicks=a.difficulty?.Hard?.single?.Clicks,t.coop.Easy=a.difficulty?.Easy?.coop?.Standard,t.coop.PrimaryOnly=a.difficulty?.Easy?.coop?.PrimaryOnly,t.coop.Deflation=a.difficulty?.Easy?.coop?.Deflation,t.coop.Medium=a.difficulty?.Medium?.coop?.Standard,t.coop.MilitaryOnly=a.difficulty?.Medium?.coop?.MilitaryOnly,t.coop.Apopalypse=a.difficulty?.Medium?.coop?.Apopalypse,t.coop.Reverse=a.difficulty?.Medium?.coop?.Reverse,t.coop.Hard=a.difficulty?.Hard?.coop?.Standard,t.coop.MagicOnly=a.difficulty?.Hard?.coop?.MagicOnly,t.coop.DoubleMoabHealth=a.difficulty?.Hard?.coop?.DoubleMoabHealth,t.coop.HalfCash=a.difficulty?.Hard?.coop?.HalfCash,t.coop.AlternateBloonsRounds=a.difficulty?.Hard?.coop?.AlternateBloonsRounds,t.coop.Impoppable=a.difficulty?.Hard?.coop?.Impoppable,t.coop.Clicks=a.difficulty?.Hard?.coop?.Clicks;for(let[e,a]of Object.entries(t.single))a&&!1===a.completed&&(a.bestRound>=we.modeBestRoundFix[e]||a.completedWithoutLoadingSave)&&(a.completed=!0);for(let[e,a]of Object.entries(t.coop))a&&!1===a.completed&&(a.bestRound>=we.modeBestRoundFix[e]||a.completedWithoutLoadingSave)&&(a.completed=!0);De.Medals.single[e]={},De.Medals.coop[e]={};for(let[a,d]of Object.entries(t.single))d&&d.completed?De.Medals.single[e][a]=!0:De.Medals.single[e][a]=!1;for(let[a,d]of Object.entries(t.coop))d&&d.completed?De.Medals.coop[e][a]=!0:De.Medals.coop[e][a]=!1;De.Medals.single[e]["CHIMPS-BLACK"]=!!t.single.Clicks&&t.single.Clicks.completedWithoutLoadingSave,De.Medals.coop[e]["CHIMPS-BLACK"]=!!t.coop.Clicks&&t.coop.Clicks.completedWithoutLoadingSave;let d=["Easy","PrimaryOnly","Deflation"].every((e=>t.single[e]&&!0===t.single[e].completed)),l=d&&["Medium","MilitaryOnly","Apopalypse","Reverse"].every((e=>t.single[e]&&!0===t.single[e].completed)),n=l&&["Hard","MagicOnly","DoubleMoabHealth","HalfCash","AlternateBloonsRounds","Impoppable","Clicks"].every((e=>t.single[e]&&!0===t.single[e].completed)),s=n&&t.single.Clicks.completedWithoutLoadingSave;De.Borders.single[e]=s?"Black":n?"Gold":l?"Silver":d?"Bronze":"None",d=["Easy","PrimaryOnly","Deflation"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),l=d&&["Medium","MilitaryOnly","Apopalypse","Reverse"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),n=l&&["Hard","MagicOnly","DoubleMoabHealth","HalfCash","AlternateBloonsRounds","Impoppable","Clicks"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),s=n&&t.coop.Clicks.completedWithoutLoadingSave,De.Borders.coop[e]=s?"Black":n?"Gold":l?"Silver":d?"Bronze":"None",De.Maps[e]=t}}function nt(){let e={},a={},d={},l={};for(let[n,s]of Object.entries(t.instaTowers)){e[n]=0;let t={1:0,2:0,3:0,4:0,5:0};a[n]=a[n]||t;let i={1:[],2:[],3:[],4:[],5:[]};d[n]=d[n]||i;for(let[t,d]of Object.entries(s))e[n]+=d,we.instaTiers[5].includes(t)&&(a[n][5]+=1),we.instaTiers[4].includes(t)&&(a[n][4]+=1),we.instaTiers[3].includes(t)&&(a[n][3]+=1),we.instaTiers[2].includes(t)&&(a[n][2]+=1),we.instaTiers[1].includes(t)&&(a[n][1]+=1);if(we.collectionOrder.forEach((e=>{null==s[e]&&(we.instaTiers[5].includes(e)&&d[n][5].push(e),we.instaTiers[4].includes(e)&&d[n][4].push(e),we.instaTiers[3].includes(e)&&d[n][3].push(e),we.instaTiers[2].includes(e)&&d[n][2].push(e),we.instaTiers[1].includes(e)&&d[n][1].push(e))})),a[n][4]==we.instaTiers[4].length&&a[n][3]==we.instaTiers[3].length&&a[n][2]==we.instaTiers[2].length&&a[n][1]==we.instaTiers[1].length){if(a[n][5]==we.instaTiers[5].length){l[n]="Black";continue}l[n]="Gold"}else l[n]=""}qe.TowerTotal=e,qe.TowerTierTotals=a,qe.TowerMissingByTier=d,qe.TowerBorders=l}function st(){let e=0;function t(){e--,0===e&&(document.getElementById("loading").style.transform="scale(0)")}new MutationObserver((a=>{a.forEach((a=>{"childList"===a.type&&a.addedNodes.forEach((a=>{"IMG"===a.nodeName&&(e++,a.addEventListener("load",t))}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.getElementById("loading").style.removeProperty("transform")}function it(){document.getElementById("loading").style.transform="scale(0)"}fetch("./data/Constants.json").then((e=>e.json())).then((e=>{we=e,be[4]=1,Ye(),ht()})).catch((e=>console.error("Error:",e)));const ot=document.createElement("div");ot.id="container",document.body.appendChild(ot),document.body.classList.add("hex-bg");const rt=document.createElement("div");rt.id="header",rt.classList.add("header"),ot.appendChild(rt);const ct=document.createElement("div");ct.id="header-div",ct.classList.add("header-div"),rt.appendChild(ct);const pt=document.createElement("h1");pt.id="title",pt.classList.add("title"),pt.innerHTML="Bloons TD 6 API Explorer",ct.appendChild(pt);const mt=document.createElement("div");function ut(){const t=document.createElement("div");t.id="front-page",t.classList.add("front-page"),mt.appendChild(t);const a=document.createElement("p");a.id="front-page-text",a.classList.add("front-page-text"),a.innerHTML="Enter your Open Access Key (OAK) to get started: ",t.appendChild(a);let d=document.createElement("div");d.id="previous-oak",d.classList.add("previous-oak"),t.appendChild(d),Object.entries(c).forEach((([t,a])=>{let l=document.createElement("div");l.id="previous-oak-entry",l.classList.add("previous-oak-entry"),l.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(${a.banner})`,d.appendChild(l),l.appendChild(Ct(100,a.avatar));let n=document.createElement("p");n.id="profile-name",n.classList.add("profile-name"),n.classList.add("black-outline"),n.innerHTML=a.displayName,l.appendChild(n);let s=document.createElement("img");s.id="use-button",s.classList.add("use-button"),s.src="./Assets/UI/ContinueBtn.webp",s.addEventListener("click",(()=>{Ce||(Ce=!0,document.getElementById("loading").style.removeProperty("transform"),e=t,T(t))})),l.appendChild(s);let i=document.createElement("img");i.id="delete-button",i.classList.add("delete-button"),i.src="./Assets/UI/CloseBtn.webp",i.addEventListener("click",(()=>{delete c[t],j(),d.removeChild(l)})),l.appendChild(i)}));let l=document.createElement("input");l.id="key-entry",l.classList.add("key-entry"),l.placeholder="Enter your OAK here",t.appendChild(l);let n=document.createElement("div");n.id="start-button",n.classList.add("start-button"),n.classList.add("black-outline"),n.innerHTML="Start",n.addEventListener("click",(()=>{let t=document.getElementById("key-entry").value;t.length<5||t.length>30||!t.startsWith("oak_")?alert('Please enter a valid OAK! This will start with "oak_".'):Ce||(document.getElementById("loading").style.removeProperty("transform"),Ce=!0,e=l.value,T(e))})),t.appendChild(n);let s=document.createElement("div");s.id="info-buttons",s.classList.add("info-buttons"),t.appendChild(s);let i=document.createElement("p");i.id="where-button",i.classList.add("where-button"),i.classList.add("black-outline"),i.innerHTML="How do I get it?",s.appendChild(i);let o=document.createElement("p");o.id="faq-button",o.classList.add("where-button"),o.classList.add("faq-button"),o.classList.add("black-outline"),o.innerHTML="FAQ",s.appendChild(o);let r=document.createElement("p");r.id="privacy-button",r.classList.add("where-button"),r.classList.add("privacy-button"),r.classList.add("black-outline"),r.innerHTML="Privacy Policy",s.appendChild(r);let p=document.createElement("div");p.id="oak-instructions-div",p.classList.add("oak-instructions-div"),p.style.display="none",t.appendChild(p);let m=document.createElement("div");m.id="faq-div",m.classList.add("faq-div"),m.style.display="none",t.appendChild(m);let u=document.createElement("div");u.id="privacy-div",u.classList.add("privacy-div"),u.style.display="none",t.appendChild(u);let h=document.createElement("div");function g(e){["oak-instructions","faq","privacy"].forEach((t=>{let a=document.getElementById(t+"-div");a.style.display=t===e&&"none"===a.style.display?"block":"none"}))}h.id="version-div",h.classList.add("version-div"),t.appendChild(h),i.addEventListener("click",(()=>{g("oak-instructions")})),o.addEventListener("click",(()=>{g("faq")})),r.addEventListener("click",(()=>{g("privacy")}));let L=document.createElement("p");L.id="oak-instructions-header",L.classList.add("oak-instructions-header"),L.classList.add("black-outline"),L.innerHTML="What is an Open Access Key?",p.appendChild(L);let v=document.createElement("p");v.id="oak-instructions-text",v.classList.add("oak-instructions-text"),v.innerHTML="An Open Access Key (OAK) is a unique key that allows you to access your Bloons TD 6 data from Ninja Kiwi's Open Data API.",p.appendChild(v);let b=document.createElement("p");b.id="oak-instructions-header",b.classList.add("oak-instructions-header"),b.classList.add("black-outline"),b.innerHTML="How do I get one?",p.appendChild(b);let C=document.createElement("p");C.id="oak-instructions-text2",C.classList.add("oak-instructions-text"),C.innerHTML="Step 1: Login and Backup your progress with a Ninja Kiwi Account. You can do this by going to settings from the main menu and clicking on the Account button. NOTE: This is not available for BTD6+ on Apple Arcade and BTD6 Netflix. ",p.appendChild(C);let y=document.createElement("img");y.id="oak-instruction-img",y.classList.add("oak-instruction-img"),y.src="./Assets/UI/OAKTutorial1.webp",p.appendChild(y);let E=document.createElement("p");E.id="oak-instructions-text3",E.classList.add("oak-instructions-text"),E.innerHTML='Step 2: Select "Open Data API" at the bottom right of the account screen.',p.appendChild(E);let f=document.createElement("img");f.id="oak-instruction-img2",f.classList.add("oak-instruction-img"),f.src="./Assets/UI/OAKTutorial2.webp",p.appendChild(f);let k=document.createElement("p");k.id="oak-instructions-text4",k.classList.add("oak-instructions-text"),k.innerHTML='Step 3: Generate a key and copy that in to the above text field. It should start with "oak_". Then click "Start" to begin!',p.appendChild(k);let w=document.createElement("img");w.id="oak-instruction-img3",w.classList.add("oak-instruction-img"),w.src="./Assets/UI/OAKTutorial3.webp",p.appendChild(w);let M=document.createElement("p");M.id="faq-header",M.classList.add("oak-instructions-header"),M.classList.add("black-outline"),M.innerHTML="Frequently Asked Questions",m.appendChild(M);let B={"What can I do with this?":"You can view more detailed stats and progress than you can see in the game such as your highest round for every mode on every map you've played. You can also view your Insta Monkey collection and use this as a tracker as the data pulled is always up to date! You'll eventually be able to explore the API for leaderboards, more advanced challenge stats and more!","How long does the API take to update after I do something in the game?":"15 minutes is the most I've seen. Be sure to press the save button in settings if you want to minimize the time it takes to update!","Why is this not available for BTD6+ and Netflix?":"This is because the data is stored differently for these versions such as using iCloud for BTD6+. This is not compatible with the Open Data API."};for(let[e,t]of Object.entries(B)){let a=document.createElement("div");a.classList.add("faq-entry-div"),m.appendChild(a);let d=document.createElement("div");d.classList.add("faq-question-div"),a.appendChild(d);let l=document.createElement("p");l.classList.add("faq-question"),l.innerHTML=e,d.appendChild(l);let n=document.createElement("img");n.classList.add("arrow-hide-btn"),n.src="./Assets/UI/ArrowHideBtn.webp",d.appendChild(n);let s=document.createElement("div");s.classList.add("faq-answer-div"),s.style.display="none",a.appendChild(s);let i=document.createElement("p");i.classList.add("faq-answer"),i.innerHTML=t,s.appendChild(i),d.addEventListener("click",(()=>{"none"===s.style.display?(s.style.display="block",n.style.transform="rotate(180deg)"):(s.style.display="none",n.style.transform="rotate(0deg)")}))}let I=document.createElement("p");I.id="privacy-header",I.classList.add("oak-instructions-header"),I.classList.add("black-outline"),I.innerHTML="Privacy Policy",u.appendChild(I);let H=document.createElement("p");H.id="privacy-text",H.classList.add("oak-instructions-text"),H.innerHTML='This app does not store any data being sent to or retrieved from Ninja Kiwi\'s servers outside of your browser/device. localStorage is used to prevent users from having to re-enter their OAK every time they visit the site. If you would like to delete this stored data, you can do so by clicking the "X" on the profile you would like to delete on this page.',u.appendChild(H)}function ht(){let e=document.getElementById("version-div"),t=document.createElement("p");t.id="tool-version-text",t.classList.add("tool-version-text"),t.innerHTML=`App Version: ${we.version} / Game Content Version: v${we.projectContentVersion}`,e.appendChild(t)}function gt(){const e=document.createElement("div");e.id="header",e.classList.add("header-container"),rt.appendChild(e);let t=["Overview","Progress","Events","Explore","Extras"];t.forEach((t=>{t=t.toLowerCase();let a=document.createElement("p");a.classList.add("header-label"),a.classList.add("black-outline"),a.id=t.toLowerCase(),a.innerHTML=t,a.addEventListener("click",(()=>{Lt(t.toLowerCase())})),e.appendChild(a)})),t.forEach((e=>{e=e.toLowerCase();let t=document.createElement("div");t.id=e+"-content",t.classList.add("content-div"),t.classList.add(e),t.style.display="none",mt.appendChild(t)}));["Challenge","Map","PublicProfile","Leaderboard","Browser","Relics"].forEach((e=>{e=e.toLowerCase();let t=document.createElement("div");t.id=e+"-content",t.classList.add("sub-content-div"),t.classList.add(e),t.style.display="none",mt.appendChild(t)}))}function Lt(e){Ya(),ze&&clearInterval(ze),Va(we.BGColor);let t=document.getElementsByClassName("content-div");for(let e of t)e.style.display="none",document.getElementById(e.id.replace("-content","")).classList.remove("selected");for(let e of document.getElementsByClassName("sub-content-div"))e.style.display="none";if(document.getElementById(e+"-content").style.display="flex",document.getElementById(e).classList.add("selected"),!ye.includes(e))switch(e){case"overview":bt(),ye.push(e);break;case"progress":Et();break;case"events":pa();break;case"explore":Ia();break;case"extras":Ua();break;case"settings":Na()}}mt.id="content",mt.classList.add("content"),ot.appendChild(mt),N(),ut();let vt=0;function bt(){let e=document.createElement("div");e.id="profile-header",e.classList.add("profile-header"),e.classList.add("profile-banner"),e.style.backgroundImage=`linear-gradient(to bottom, transparent 50%, var(--profile-primary) 70%),url('${d.bannerURL}')`,document.getElementById("overview-content").appendChild(e),e.appendChild(Ct(100,d.avatarURL));let a=document.createElement("div");a.id="profile-top-bottom",a.classList.add("profile-top-bottom"),e.appendChild(a);let l=document.createElement("div");l.id="profile-top",l.classList.add("profile-top"),a.appendChild(l);let n=document.createElement("p");n.id="profile-name",n.classList.add("profile-name"),n.classList.add("black-outline"),n.innerHTML=d.displayName,l.appendChild(n);let s=document.createElement("div");s.classList.add("profile-followers"),l.appendChild(s);let i=document.createElement("p");i.classList.add("followers-label"),i.classList.add("black-outline"),i.innerHTML="Followers",s.appendChild(i);let o=document.createElement("p");o.classList.add("followers-count"),o.innerHTML=d.followers.toLocaleString(),s.appendChild(o);let r=document.createElement("div");r.id="profile-bottom",r.classList.add("profile-bottom"),a.appendChild(r),r.appendChild(yt()),t.veteranXp>0&&r.appendChild(yt(!0));let c=document.createElement("div");c.id="below-profile-header",c.classList.add("below-profile-header"),document.getElementById("overview-content").appendChild(c);let p=document.createElement("div");p.id="left-column-div",p.classList.add("left-column-div"),c.appendChild(p);let m=document.createElement("div");m.id="left-column-header",m.classList.add("left-column-header"),p.appendChild(m);let u=document.createElement("p");u.id="left-column-header-text",u.classList.add("column-header-text"),u.classList.add("black-outline"),u.innerHTML="Currency and Medals",m.appendChild(u);let h=document.createElement("div");h.id="currency-medals-div",h.classList.add("currency-medals-div"),p.appendChild(h);let g=document.createElement("div");g.id="currency-div",g.classList.add("currency-div"),h.appendChild(g);let L=document.createElement("div");L.id="currency-mm-div",L.classList.add("currency-mm-div"),g.appendChild(L);let v=document.createElement("img");v.id="currency-mm-img",v.classList.add("currency-mm-img"),v.src="../Assets/UI/BloonjaminsIcon.webp",L.appendChild(v);let b=document.createElement("p");b.id="currency-mm-text",b.classList.add("currency-mm-text"),b.classList.add("mm-outline"),b.innerHTML="$"+t.monkeyMoney.toLocaleString(),L.appendChild(b);let C=document.createElement("div");C.id="currency-knowledge-div",C.classList.add("currency-knowledge-div"),g.appendChild(C);let y=document.createElement("img");y.id="currency-knowledge-img",y.classList.add("currency-knowledge-img"),y.src="../Assets/UI/KnowledgeIcon.webp",C.appendChild(y);let E=document.createElement("p");E.id="currency-knowledge-text",E.classList.add("currency-knowledge-text"),E.classList.add("knowledge-outline"),E.innerHTML=t.knowledgePoints.toLocaleString(),C.appendChild(E);let f=document.createElement("div");f.id="currency-trophies-div",f.classList.add("currency-trophies-div"),g.appendChild(f);let k=document.createElement("img");k.id="currency-trophies-img",k.classList.add("currency-trophies-img"),k.src="../Assets/UI/TrophyIcon.webp",f.appendChild(k);let w=document.createElement("p");w.id="currency-trophies-text",w.classList.add("currency-trophies-text"),w.classList.add("black-outline"),w.innerHTML=t.trophies.toLocaleString(),f.appendChild(w);let M=document.createElement("div");M.id="medals-div",M.classList.add("medals-div"),h.appendChild(M);for(let[e,t]of Object.entries(He)){if(0===t)continue;let a=document.createElement("div");a.id="medal-div",a.classList.add("medal-div"),M.appendChild(a);let d=document.createElement("img");d.id="medal-img",d.classList.add("medal-img"),d.src=pe(e),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Xa(3,70,256,0,d.width)}px`:d.style.height=`${Xa(3,70,256,0,d.height)}px`,d.style.removeProperty("display")})),a.appendChild(d);let l=document.createElement("p");l.id="medal-text",l.classList.add("medal-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}let T=document.createElement("div");T.id="top-heroes-monkeys-div",T.classList.add("top-heroes-monkeys-div"),p.appendChild(T);let B=document.createElement("div");B.id="top-heroes-div",B.classList.add("top-heroes-div"),T.appendChild(B);let I=document.createElement("div");I.id="top-heroes-top-div",I.classList.add("top-heroes-top-div"),B.appendChild(I);let H=document.createElement("div");H.id="top-heroes-top-div",H.classList.add("top-heroes-top-ribbon-div"),I.appendChild(H);let S=document.createElement("p");S.id="top-heroes-text",S.classList.add("top-heroes-text"),S.classList.add("black-outline"),S.innerHTML="Top Heroes",H.appendChild(S);let $=document.createElement("div");$.id="maps-progress-coop-toggle",$.classList.add("maps-progress-coop-toggle"),I.appendChild($);let D=document.createElement("p");D.id="maps-progress-coop-toggle-text",D.classList.add("maps-progress-coop-toggle-text"),D.classList.add("black-outline"),D.innerHTML="Show All: ",$.appendChild(D);let x=document.createElement("input");x.classList.add("maps-progress-coop-toggle-input"),x.type="checkbox",x.addEventListener("change",(()=>{x.checked?document.getElementById("other-heroes-div").style.display="flex":document.getElementById("other-heroes-div").style.display="none"})),$.appendChild(x);let P=document.createElement("div");P.id="top-heroes-list",P.classList.add("top-heroes-list"),B.appendChild(P);let A=document.createElement("div");A.id="top-3-heroes-div",A.classList.add("top-3-heroes-div"),P.appendChild(A);let O=document.createElement("div");O.id="other-heroes-div",O.classList.add("other-heroes-div"),O.style.display="none",P.appendChild(O);let U=0;for(let[e,t]of Object.entries(d.heroesPlaced).sort(((e,t)=>t[1]-e[1]))){let a=document.createElement("div");a.id="hero-div",a.classList.add("hero-div"),U<3?A.appendChild(a):O.appendChild(a);let d=document.createElement("img");d.id="hero-img",d.classList.add("hero-img"),d.src=de(e,1),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Xa(3,150,1920,0,d.width)}px`:d.style.height=`${Xa(3,150,1920,0,d.height)}px`,d.style.removeProperty("display")})),a.appendChild(d);let l=document.createElement("p");l.id="hero-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l),U++}let R=document.createElement("div");R.id="top-towers-div",R.classList.add("top-heroes-div"),T.appendChild(R);let G=document.createElement("div");G.id="top-towers-top-div",G.classList.add("top-heroes-top-div"),R.appendChild(G);let N=document.createElement("div");N.id="top-towers-top-div",N.classList.add("top-heroes-top-ribbon-div"),G.appendChild(N);let j=document.createElement("p");j.id="top-towers-text",j.classList.add("top-heroes-text"),j.classList.add("black-outline"),j.innerHTML="Top Towers",N.appendChild(j);let _=document.createElement("div");_.id="maps-progress-coop-toggle",_.classList.add("maps-progress-coop-toggle"),G.appendChild(_);let q=document.createElement("p");q.id="maps-progress-coop-toggle-text",q.classList.add("maps-progress-coop-toggle-text"),q.classList.add("black-outline"),q.innerHTML="Show All: ",_.appendChild(q);let z=document.createElement("input");z.classList.add("maps-progress-coop-toggle-input"),z.type="checkbox",z.addEventListener("change",(()=>{z.checked?document.getElementById("other-towers-div").style.display="flex":document.getElementById("other-towers-div").style.display="none"})),_.appendChild(z);let K=document.createElement("div");K.id="top-towers-list",K.classList.add("top-heroes-list"),R.appendChild(K);let F=document.createElement("div");F.id="top-3-towers-div",F.classList.add("top-3-heroes-div"),K.appendChild(F);let W=document.createElement("div");W.id="other-towers-div",W.classList.add("other-heroes-div"),W.style.display="none",K.appendChild(W),U=0;for(let[e,t]of Object.entries(d.towersPlaced).sort(((e,t)=>t[1]-e[1]))){let a=document.createElement("div");a.id="tower-div",a.classList.add("hero-div"),U<3?F.appendChild(a):W.appendChild(a);let d=document.createElement("img");d.id="tower-img",d.classList.add("hero-img"),d.src=Z(e,"000"),a.appendChild(d);let l=document.createElement("p");l.id="tower-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l),U++}let V=document.createElement("div");V.classList.add("quick-stats-div"),p.appendChild(V);let X=document.createElement("div");X.classList.add("quick-stats-header"),V.appendChild(X);let Y=document.createElement("p");Y.classList.add("column-header-text","black-outline"),Y.innerHTML="Quick Stats",X.appendChild(Y);let J=document.createElement("div");J.classList.add("quick-stats-content"),V.appendChild(J);let Q={Towers:"../Assets/UI/MaxMonkeysIcon.webp",Heroes:"../Assets/UI/AllHeroesIcon.webp",Extras:"../Assets/UI/SmallBloonsModeIcon.webp",Achievements:"../Assets/AchievementIcon/AchievementsIcon.webp",CHIMPS:"../Assets/MedalIcon/MedalImpoppableRuby.webp",InstaMonkeys:"../Assets/UI/InstaIcon.webp",MapProgress:"../Assets/UI/StartRoundIconSmall.webp",Paragons:"../Assets/UI/ParagonPip.webp",Powers:"../Assets/UI/PowerContainer.webp",Skins:"../Assets/UI/TopHatSprite.webp",Upgrades:"../Assets/UI/UpgradeIcon.webp",Knowledge:"../Assets/UI/KnowledgeIcon.webp"};Object.entries($e).forEach((([e,t])=>{if(t.includes("0 Extras")||t.includes("0 CHIMPS"))return;if(t.match(/0\/[0-9]+ Paragons/))return;let a=document.createElement("div");a.classList.add("quick-stat"),J.appendChild(a);let d=document.createElement("img");d.classList.add("quick-stat-icon"),d.src=Q[e],a.appendChild(d);let l=document.createElement("p");l.classList.add("quick-stat-name"),l.innerHTML=t,a.appendChild(l)}));let ee=document.createElement("div");ee.id="right-column-div",ee.classList.add("right-column-div"),c.appendChild(ee);let te=document.createElement("div");te.id="right-column-header",te.classList.add("right-column-header"),ee.appendChild(te);let ae=document.createElement("p");ae.id="right-column-header-text",ae.classList.add("column-header-text"),ae.classList.add("black-outline"),ae.innerHTML="Overall Stats",te.appendChild(ae);let le=document.createElement("div");le.id="profile-stats",le.classList.add("profile-stats"),ee.appendChild(le);for(let[e,t]of Object.entries(Ie)){let a=document.createElement("div");a.id="stat",a.classList.add("stat"),le.appendChild(a);let d=document.createElement("p");d.id="stat-name",d.classList.add("stat-name"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.id="stat-value",l.classList.add("stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}}function Ct(e,t){let a=document.createElement("div");a.style.width=`${e}px`,a.style.height=`${e}px`,a.classList.add("avatar");let d=document.createElement("img");d.id="avatar-frame",d.classList.add("avatar-frame","noSelect"),d.style.width=`${e}px`,d.src="../Assets/UI/InstaTowersContainer.webp",a.appendChild(d);let l=document.createElement("img");return l.id="avatar-img",l.classList.add("avatar-img","noSelect"),l.style.width=`${e}px`,l.src=t,a.appendChild(l),a}function yt(e){let t=document.createElement("div");t.id="rank",t.classList.add("rank");let a=document.createElement("div");a.id="rank-star",a.classList.add("rank-star"),t.appendChild(a);let d=document.createElement("img");d.id="rank-img",d.classList.add("rank-img"),d.src=e?"../Assets/UI/LvlHolderVeteran.webp":"../Assets/UI/LvlHolder.webp",a.appendChild(d);let l=document.createElement("p");l.id="rank-text",l.classList.add("rank-text"),l.classList.add("black-outline"),l.innerHTML=e?Be.rank:Me.rank,a.appendChild(l);let n=document.createElement("div");n.id="rank-bar",n.classList.add("rank-bar"),t.appendChild(n);let s=document.createElement("div");s.id="rank-bar-fill",s.classList.add("rank-bar-fill"),e?(n.classList.add("rank-bar-veteran"),s.classList.add("rank-bar-fill-veteran"),s.style.width=null===Be.xp?"100%":Be.xp/Be.xpGoal*100+"%"):s.style.width=null===Me.xp?"100%":Me.xp/Me.xpGoal*100+"%",n.appendChild(s);let i=document.createElement("p");return i.id="rank-bar-text",i.classList.add("rank-bar-text"),i.innerHTML=e?null===Be.xp?"Max Level":`${Be.xp.toLocaleString()}/${Be.xpGoal.toLocaleString()}`:null===Me.xp?"Max Level":`${Me.xp.toLocaleString()}/${Me.xpGoal.toLocaleString()}`,null!=Me.xp||e||i.classList.add("rank-bar-text-max"),n.appendChild(i),t}function Et(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="progress-page",a.classList.add("progress-page"),e.appendChild(a);let d=document.createElement("div");d.id="selectors-div",d.classList.add("selectors-div"),a.appendChild(d);["Towers","Heroes","Knowledge","MapProgress","Powers","InstaMonkeys","Achievements","Extras"].forEach((e=>{if($e[e].includes("0 Extras"))return;let a=document.createElement("div");a.id=e.toLowerCase()+"-div",a.classList.add("selector-div"),a.addEventListener("click",(()=>{ft(e)})),d.appendChild(a);let l=document.createElement("img");l.id=e.toLowerCase()+"-img",l.classList.add("selector-img"),l.src="Heroes"==e?`../Assets/HeroIconCircle/HeroIcon${t.primaryHero}.webp`:"../Assets/UI/"+e.replace(" ","")+"Btn.webp",a.appendChild(l);let n=document.createElement("p");n.id=e.toLowerCase()+"-text",n.classList.add("selector-text"),n.classList.add("black-outline"),n.innerHTML=$e[e],a.appendChild(n);let s=document.createElement("img");s.id=e.toLowerCase()+"-go-img",s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",a.appendChild(s)}))}function ft(e){switch(Ya(),ze&&clearInterval(ze),e){case"Towers":kt();break;case"Heroes":St();break;case"Knowledge":Va(we.ParagonBGColor),At();break;case"MapProgress":Oe="grid",Ue=!1,Re="All",Ge=0,Ut();break;case"Powers":Vt();break;case"InstaMonkeys":Xt();break;case"Achievements":sa();break;case"Extras":oa()}}function kt(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="tower-progress-container",a.classList.add("tower-progress-container"),e.appendChild(a);let d=document.createElement("div");d.id="tower-progress-div",d.classList.add("tower-progress-div"),a.appendChild(d);let l=document.createElement("div");l.id="tower-selector-header-top",l.classList.add("tower-selector-header-top"),d.appendChild(l);let n=document.createElement("p");n.id="tower-selector-header-text",n.classList.add("tower-selector-header-text"),n.classList.add("black-outline"),n.innerHTML=`Towers - ${Object.keys(t.unlockedTowers).filter((e=>t.unlockedTowers[e])).length}/${Object.keys(t.unlockedTowers).length}`,l.appendChild(n);let s=document.createElement("p");s.id="tower-selector-header-text",s.classList.add("tower-selector-header-text"),s.classList.add("black-outline"),s.innerHTML=`Upgrades - ${Object.keys(t.acquiredUpgrades).filter((e=>t.acquiredUpgrades[e])).length}/${Object.keys(t.acquiredUpgrades).length}`,l.appendChild(s);let i=document.createElement("div");i.id="tower-selector-header",i.classList.add("tower-selector-header"),d.appendChild(i);for(let[e,a]of Object.entries(we.towersInOrder)){let d=document.createElement("div");d.id=e+"-selector",d.classList.add(`tower-selector-${a.toLowerCase()}`),t.unlockedTowers[e]||d.classList.add("hero-selector-div-disabled"),d.addEventListener("click",(()=>{t.unlockedTowers[e]&&wt(e)})),i.appendChild(d);let l=document.createElement("img");l.id=e+"-selector-img",l.classList.add("tower-selector-img"),l.src=Z(e,"000"),d.appendChild(l);let n=document.createElement("div");n.id=e+"-selector-highlight",n.classList.add("tower-selector-highlight"),d.appendChild(n)}let o=document.createElement("div");o.id="tower-progress-content",o.classList.add("tower-progress-content"),a.appendChild(o),a.append(wt("DartMonkey"))}function wt(e){let a=document.getElementById("tower-progress-content");a.innerHTML="";let d=0;for(let a of Object.values(we.towerPaths[e]))for(let e of Object.keys(a))t.acquiredUpgrades[e]&&(d+=1);d=15===d;let l=!!we.paragonsAvailable.includes(e)&&t.acquiredUpgrades[`${e} Paragon`],n=document.createElement("div");n.id="tower-progress-top",n.classList.add("tower-progress-top"),l&&n.classList.add("tower-progress-top-paragon"),a.appendChild(n);let s=document.createElement("div");s.id="tower-progress-content-top",s.classList.add("tower-progress-content-top"),n.appendChild(s);let i=document.createElement("div");i.id="tower-progress-info-container",i.classList.add("tower-progress-info-container"),s.appendChild(i);let o=document.createElement("p");o.id="tower-progress-content-text",o.classList.add("tower-progress-content-text"),o.classList.add(l?"knowledge-outline":"black-outline"),o.innerHTML=ve(e),i.appendChild(o);let r=document.createElement("p");r.id="tower-progress-content-xp",r.classList.add("tower-progress-content-xp"),r.classList.add("mm-outline"),r.innerHTML=`XP: ${t.towerXP[e].toLocaleString()}`,i.appendChild(r);let c=document.createElement("p");c.id="tower-progress-content-desc",c.classList.add("tower-progress-content-desc"+(l?"-paragon":"")),c.innerHTML=ve(`${e} Description`),s.appendChild(c);let p=document.createElement("div");p.id="tower-name-and-portrait",p.classList.add("tower-name-and-portrait"),a.appendChild(p);let m=document.createElement("p");m.id="tower-portrait-name",m.classList.add("tower-portrait-name"),m.classList.add("black-outline"),m.innerHTML=ve(e),p.appendChild(m);let u=document.createElement("div");u.id="tower-progress-portrait",u.classList.add("tower-progress-portrait"),u.classList.add(`tower-progress-portrait-${we.towersInOrder[e].toLowerCase()}`),p.appendChild(u);let h=document.createElement("img");h.id="tower-progress-portrait-img",h.classList.add("tower-progress-portrait-img"),h.src=Q(e,"000"),u.appendChild(h);let g=document.createElement("div");g.id="upgrade-tooltip",g.classList.add("upgrade-tooltip"),g.innerHTML=ve(`${e} Description`),a.appendChild(g);let L=document.createElement("div");L.id="tower-progress-main-div",L.classList.add("tower-progress-main-div"),a.appendChild(L),L.appendChild(Mt(e,d,l));let v=document.createElement("div");v.id="tower-progress-bottom",v.classList.add("tower-progress-bottom"),a.appendChild(v);for(let e of document.getElementsByClassName("tower-selector-highlight"))e.style.display="none";return document.getElementById(`${e}-selector-highlight`).style.display="block",l?Va(we.ParagonBGColor):Va(),a}function Mt(e,a,d){let l=document.createElement("div");l.id="upgrade-container",l.classList.add("upgrade-container");let n=document.createElement("div");n.id="upgrade-rows",n.classList.add("upgrade-rows"),l.appendChild(n);let s=document.createElement("div");s.id="upgrade-row-1",s.classList.add("upgrade-row"),n.appendChild(s);let i=document.createElement("div");i.id="upgrade-row-2",i.classList.add("upgrade-row"),n.appendChild(i);let o=document.createElement("div");o.id="upgrade-row-3",o.classList.add("upgrade-row"),n.appendChild(o);let r=0,c=!1;for(let[a,l]of Object.entries(we.towerPaths[e].path1)){let l=t.acquiredUpgrades[a]?"unlocked":"locked";s.appendChild(Tt(e,a,l,1,r,d,c)),"locked"==l&&(c=!0),r++}r=0,c=!1;for(let[a,l]of Object.entries(we.towerPaths[e].path2)){let l=t.acquiredUpgrades[a]?"unlocked":"locked";i.appendChild(Tt(e,a,l,2,r,d,c)),"locked"==l&&(c=!0),r++}r=0,c=!1;for(let[a,l]of Object.entries(we.towerPaths[e].path3)){let l=t.acquiredUpgrades[a]?"unlocked":"locked";o.appendChild(Tt(e,a,l,3,r,d,c)),"locked"==l&&(c=!0),r++}if(we.paragonsAvailable.includes(e)&&a){let a=document.createElement("div");a.id="upgrade-container-paragon",a.classList.add("upgrade-container-paragon"),l.appendChild(a),a.appendChild(Bt(e,`${e} Paragon`,t.acquiredUpgrades[`${e} Paragon`]?"unlocked":"locked"))}return l}function Tt(e,a,d,l,n,s,i){let o=document.createElement("div");o.id=`${e}-${a}-div`,o.classList.add("upgrade-div");let r="";switch(l){case 1:r=`${n+1}00`;break;case 2:r=`0${n+1}0`;break;case 3:r=`00${n+1}`}let c=document.createElement("div");c.id=`${e}-${a}-glow`,o.appendChild(c);let p=document.createElement("div");p.id=`${e}-${a}-bg-img`,p.classList.add("upgrade-bg-img");let m=t.towerXP[e]>=we.towerPaths[e][`path${l}`][a];4==n?t.acquiredUpgrades[a]?p.classList.add("upgrade-t5"):p.classList.add("upgrade-t5-locked"):p.classList.add(`upgrade-${s?"paragon":"unlocked"==d?d:m?"green":"red"}`),o.appendChild(p);let u=document.createElement("img");u.id=`${e}-${a}-img`,u.classList.add("upgrade-img"),u.src=te(a),t.acquiredUpgrades[a]||4!=n||(u.style.visibility="hidden"),o.appendChild(u);let h=document.createElement("p");return h.id=`${e}-${a}-text`,h.classList.add("upgrade-text"),h.innerHTML=ve(a),o.appendChild(h),o.addEventListener("click",(()=>{It(e,a,r),document.getElementById("upgrade-tooltip").innerHTML=ve(`${a} Description`),Array.from(document.getElementsByClassName("upgrade-glow")).forEach((e=>{e.classList.remove("upgrade-glow")})),document.getElementsByClassName("upgrade-glow-paragon").length>0&&document.getElementsByClassName("upgrade-glow-paragon")[0].classList.remove("upgrade-glow-paragon"),c.classList.add("upgrade-glow")})),i&&(p.classList.add("upgrade-after-locked"),u.classList.add("upgrade-after-locked")),o}function Bt(e,a,d){let l=document.createElement("div");l.id=`${e}-paragon-div`,l.classList.add("upgrade-div");let n=document.createElement("div");n.id=`${e}-${a}-bg-img`,n.classList.add("upgrade-bg-img"),n.classList.add("upgrade-paragon-special"+(t.acquiredUpgrades[a]?"":"-locked")),l.appendChild(n);let s=document.createElement("div");s.id="paragon-glow",l.appendChild(s);let i=document.createElement("img");i.id=`${e}-paragon-img`,i.classList.add("upgrade-img"),i.src=te(`${e} Paragon`),t.acquiredUpgrades[a]||(i.style.visibility="hidden"),l.appendChild(i);let o=document.createElement("p");return o.id=`${e}-${a}-text`,o.classList.add("upgrade-text"),o.innerHTML=ve(a),l.appendChild(o),l.addEventListener("click",(()=>{Ht(e,a,"Paragon"),document.getElementById("upgrade-tooltip").innerHTML=ve(`${a} Description`),Array.from(document.getElementsByClassName("upgrade-glow")).forEach((e=>{e.classList.remove("upgrade-glow")})),s.classList.add("upgrade-glow-paragon")})),l}function It(e,a,d){let l=document.getElementById("tower-progress-portrait"),n=document.getElementById("tower-portrait-name"),s=document.getElementById("tower-progress-portrait-img");if(n.innerHTML=ve(a),d.includes("5")&&!t.acquiredUpgrades[a])return l.classList.add("tower-progress-portrait-t5-locked"),void(s.src="");l.classList.contains("tower-progress-portrait-t5-locked")&&l.classList.remove("tower-progress-portrait-t5-locked"),l.classList.contains("tower-progress-portrait-paragon")&&l.classList.remove("tower-progress-portrait-paragon"),l.classList.contains("tower-progress-portrait-paragon-locked")&&l.classList.remove("tower-progress-portrait-paragon-locked"),l.classList.add(`tower-progress-portrait-${we.towersInOrder[e].toLowerCase()}`);for(let e of document.getElementsByClassName("upgrade-div"))e.classList.remove("selected");null!=document.getElementById(`${e}-paragon-div`)&&document.getElementById(`${e}-paragon-div`).classList.remove("selected-paragon"),s.src=Q(e,d)}function Ht(e,a,d){let l=document.getElementById("tower-progress-portrait"),n=document.getElementById("tower-portrait-name"),s=document.getElementById("tower-progress-portrait-img");if(n.innerHTML=ve(a),d.includes("Paragon")&&!t.acquiredUpgrades[a])return l.classList.add("tower-progress-portrait-paragon-locked"),void(s.src="");l.classList.contains(`tower-progress-portrait-${we.towersInOrder[e].toLowerCase()}`)&&l.classList.remove(`tower-progress-portrait-${we.towersInOrder[e].toLowerCase()}`),l.classList.add("tower-progress-portrait-paragon");for(let e of document.getElementsByClassName("upgrade-div"))e.classList.remove("selected");s.src=Q(e,d)}function St(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="tower-progress-container",a.classList.add("tower-progress-container"),e.appendChild(a);let d=document.createElement("div");d.id="hero-progress-div",d.classList.add("hero-progress-div"),a.appendChild(d);let l=document.createElement("div");l.id="hero-selector-header-top",l.classList.add("hero-selector-header-top"),d.appendChild(l);let n=document.createElement("p");n.id="hero-selector-header-text",n.classList.add("hero-selector-header-text"),n.classList.add("black-outline"),n.innerHTML=`Heroes - ${Object.keys(t.unlockedHeros).filter((e=>t.unlockedHeros[e])).length}/${Object.keys(t.unlockedHeros).length}`,l.appendChild(n);let s=document.createElement("p");s.id="hero-selector-header-text",s.classList.add("hero-selector-header-text"),s.classList.add("black-outline"),s.innerHTML=`Skins - ${Object.keys(t.unlockedSkins).filter((e=>t.unlockedSkins[e])).length}/${Object.keys(t.unlockedSkins).length}`,l.appendChild(s);let i=document.createElement("div");i.id="hero-selector-header",i.classList.add("hero-selector-header"),d.appendChild(i);for(let[e,a]of Object.entries(we.heroesInOrder)){let d=document.createElement("div");d.id=e+"-selector",d.classList.add("hero-selector-div"),t.unlockedHeros[e]||d.classList.add("hero-selector-div-disabled"),d.addEventListener("click",(()=>{t.unlockedHeros[e]&&$t(e,a)})),i.appendChild(d);let l=document.createElement("img");l.id=e+"-selector-img",l.classList.add("hero-selector-img"),l.src=le(e),d.appendChild(l);let n=document.createElement("div");n.id=e+"-selector-highlight",n.classList.add("hero-selector-highlight"),d.appendChild(n)}let o=document.createElement("div");o.id="hero-progress-content",o.classList.add("hero-progress-content"),a.appendChild(o),$t(t.primaryHero,we.heroesInOrder[t.primaryHero])}function $t(e,a){xe=e;let d=document.getElementById("hero-progress-content");d.innerHTML="";let l=document.createElement("div");l.id="hero-progress-container",l.classList.add("hero-progress-container"),d.appendChild(l);let n=document.createElement("div");n.id="hero-progress-top",n.classList.add("hero-progress-top"),l.appendChild(n);let s=document.createElement("div");s.id="hero-progress-header",s.classList.add("hero-progress-header"),n.appendChild(s);let i=document.createElement("img");i.id="hero-progress-trail-fx",i.classList.add("hero-progress-trail-fx"),i.src="./Assets/UI/TrailFx.webp",s.appendChild(i);let o=document.createElement("p");o.id="hero-progress-header-text",o.classList.add("hero-progress-header-text"),o.style.backgroundImage=`url('../Assets/UI/${a}TxtTextureMain.webp')`,o.innerHTML=ve(e),s.appendChild(o);let r=document.createElement("p");r.id="hero-progress-header-subtitle",r.classList.add("hero-progress-header-subtitle"),r.classList.add("subtitle-outline"),r.innerHTML=ve(`${e} Short Description`),s.appendChild(r);let c=document.createElement("div");c.id="hero-progress-middle",c.classList.add("hero-progress-middle"),l.appendChild(c);let p=document.createElement("div");p.id="hero-portrait-level-select-btns",p.classList.add("hero-portrait-level-select-btns"),c.appendChild(p),Pt(e);let m=document.createElement("div");m.id="hero-portrait-div",m.classList.add("hero-portrait-div"),c.appendChild(m);let u=document.createElement("img");u.id="hero-portrait-img",u.classList.add("hero-portrait-img"),u.src=de(e,1),m.appendChild(u);let h=document.createElement("div");h.id="hero-portrait-bar",h.classList.add("hero-portrait-bar"),m.appendChild(h);let g=document.createElement("div");g.id="hero-portrait-glow",g.classList.add("hero-portrait-glow"),g.style.background=`radial-gradient(circle, rgb(${255*we.HeroBGColors[e][0]},${255*we.HeroBGColors[e][1]},${255*we.HeroBGColors[e][2]}) 0%, transparent 70%)`,m.appendChild(g);let L=document.createElement("div");L.id="hero-skins-div",L.classList.add("hero-skins-div"),c.appendChild(L),we.heroSkins[e].forEach((a=>{if((0==t.unlockedSkins[Y[a]||a]||null==t.unlockedSkins[Y[a]||a])&&a!=e)return;let d=document.createElement("img");d.id=`${e}-${a}-skin`,d.classList.add("hero-skin"),d.src=ne(a),d.addEventListener("click",(()=>{let t=we.HeroBGColors[a]?we.HeroBGColors[a]:we.HeroBGColors[e];Va(t),Dt(a,e==a),document.getElementById("hero-portrait-glow").style.background=`radial-gradient(circle, rgb(${255*t[0]},${255*t[1]},${255*t[2]}) 0%, transparent 70%)`})),L.appendChild(d)}));let v=document.createElement("div");v.id="hero-progress-bottom",v.classList.add("hero-progress-bottom"),l.appendChild(v);let b=document.createElement("p");b.id="hero-progress-desc",b.classList.add("hero-progress-desc"),b.innerHTML=ve(`${e} Description`),v.appendChild(b);let C=document.createElement("div");C.id="hero-level-descs",C.classList.add("hero-level-descs"),v.appendChild(C);for(let t=1;t<21;t++){let a=document.createElement("div");a.id=`hero-level-desc-div-${t}`,a.classList.add("hero-level-desc-div"),C.appendChild(a);let d=document.createElement("div");d.id=`hero-level-desc-icon-div-${t}`,d.classList.add("hero-level-desc-icon-div"),20==t?d.classList.add("hero-level-desc-image-purple"):we.heroLevelIcons[e].includes(t)?d.classList.add("hero-level-desc-image-gold"):d.classList.add("hero-level-desc-image"),a.appendChild(d);let l=document.createElement("p");l.id=`hero-level-desc-text-${t}`,l.classList.add("hero-level-desc-text"),l.classList.add("black-outline"),l.innerHTML=t,d.appendChild(l);let n=document.createElement("p");n.id=`hero-level-desc-${t}`,n.classList.add("hero-level-desc"),n.innerHTML=ve(`${e} Level ${t} Description`),a.appendChild(n)}for(let e of document.getElementsByClassName("hero-selector-highlight"))e.style.display="none";return document.getElementById(`${e}-selector-highlight`).style.display="block",Va(we.HeroBGColors[e]),d}function Dt(e,t){xe=e,document.getElementById("hero-progress-header-subtitle").innerHTML=ve(t?`${e} Short Description`:`${e}SkinName`),document.getElementById("hero-progress-desc").innerHTML=ve(t?`${e} Description`:`${e}SkinDescription`),xt(1),document.body.style.display="none",document.body.offsetHeight,document.body.style.removeProperty("display")}function xt(e){document.getElementById("hero-portrait-img").src=se(xe,e),Pt(xe);for(let e of document.getElementsByClassName("hero-level-select-btn"))e.classList.remove("selected-level-btn");document.getElementById(`${e}-level-select-btn`).classList.add("selected-level-btn")}function Pt(e){let a=document.getElementById("hero-portrait-level-select-btns");a.innerHTML="",we.HeroPortraitLevels[e].forEach((e=>{if("20SunGod"==e&&!t.acquiredUpgrades["True Sun God"])return;if(("20SunGodVengeful"==e||"20SunGodVengful"==e)&&!t.achievementsClaimed.includes("Strangely Adorable"))return;let d=document.createElement("div");d.id=`${e}-level-select-div`,d.classList.add("hero-level-select-div"),a.appendChild(d);let l=document.createElement("div");if(l.id=`${e}-level-select-btn`,l.classList.add("hero-level-select-btn"),d.appendChild(l),"20SunGod"==e||"20SunGodVengeful"==e||"20SunGodVengful"==e){let t=document.createElement("img");t.id=`${e}-level-select-img`,t.classList.add("hero-level-select-img"),t.src="20SunGod"==e?"./Assets/UI/BuffIconTrueSunGod5xx.webp":"./Assets/UI/BuffIconTrueSunGod555.webp",d.appendChild(t)}else{let t=document.createElement("p");t.id=`${e}-level-select-text`,t.classList.add("hero-level-select-text"),t.classList.add("black-outline"),t.innerHTML=e,d.appendChild(t)}d.addEventListener("click",(()=>{xt(e)}))})),document.getElementById("1-level-select-btn").classList.add("selected-level-btn")}function At(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="knowledge-progress-container",a.classList.add("knowledge-progress-container"),e.appendChild(a);let d=document.createElement("div");d.id="recommended-knowledge-container-div",d.classList.add("knowledge-progress-container-div"),a.appendChild(d);let l=document.createElement("p");l.id="left-column-header-text",l.classList.add("column-header-text"),l.classList.add("black-outline"),l.innerHTML="Recommended Knowledge Points",d.appendChild(l);let n=document.createElement("div");n.id="recommended-knowledge-div",n.classList.add("knowledge-progress-div"),d.appendChild(n);let s=document.createElement("div");s.classList.add("knowledge-progress-container-div"),a.appendChild(s);let i=document.createElement("p");i.id="right-column-header-text",i.classList.add("column-header-text"),i.classList.add("black-outline"),i.innerHTML="Unlocked Knowledge Points",s.appendChild(i);let o=document.createElement("div");o.id="knowledge-progress-unlocked-div",o.classList.add("knowledge-progress-div"),s.appendChild(o);let r=document.createElement("div");r.classList.add("knowledge-progress-container-div"),a.appendChild(r);let c=document.createElement("p");c.id="right-column-header-text",c.classList.add("column-header-text"),c.classList.add("black-outline"),c.innerHTML="Locked Knowledge Points",r.appendChild(c);let p=document.createElement("div");p.id="knowledge-progress-locked-div",p.classList.add("knowledge-progress-div"),r.appendChild(p);for(let[e,a]of Object.entries(t.acquiredKnowledge)){let t=document.createElement("div");t.id=`${e}-icon-div`,t.classList.add("knowledge-icon-div"),a?o.appendChild(t):we.RecommendedKnowledge.includes(e)?n.appendChild(t):p.appendChild(t);let d=document.createElement("div");d.id=`${e}-glow`,t.appendChild(d);let l=document.createElement("img");l.id=`${e}-icon`,l.classList.add("knowledge-icon"),l.src=ae(e),t.appendChild(l),t.addEventListener("click",(()=>{Ot(e),Array.from(document.getElementsByClassName("knowledge-glow")).forEach((e=>{e.classList.remove("knowledge-glow")})),d.classList.add("knowledge-glow")}))}""==n.innerHTML&&(l.style.display="none"),""==p.innerHTML&&(c.style.display="none"),""==o.innerHTML&&(i.style.display="none");let m=document.createElement("div");m.id="tooltip-container-help-me",m.classList.add("tooltip-container-help-me"),a.appendChild(m);let u=document.createElement("div");u.id="knowledge-progress-floating-tooltip",u.classList.add("knowledge-progress-floating-tooltip"),m.appendChild(u);let h=document.createElement("p");h.id="knowledge-name-text",h.classList.add("knowledge-name-text"),h.classList.add("black-outline"),u.appendChild(h);let g=document.createElement("p");g.id="knowledge-desc-text",g.classList.add("knowledge-desc-text"),u.appendChild(g)}function Ot(e){document.getElementById("knowledge-progress-floating-tooltip").style.display="block",document.getElementById("knowledge-name-text").innerHTML=ve(e),document.getElementById("knowledge-desc-text").innerHTML=ve(`${e}Description`)}function Ut(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="maps-progress-header-bar",t.classList.add("maps-progress-header-bar"),e.appendChild(t);let a=document.createElement("div");a.id="maps-progress-views",a.classList.add("maps-progress-views"),t.appendChild(a);let d=document.createElement("p");d.id="maps-progress-views-text",d.classList.add("maps-progress-coop-toggle-text"),d.classList.add("black-outline"),d.innerHTML="Display Type:",a.appendChild(d);let l=document.createElement("div");l.id="maps-progress-grid",l.classList.add("maps-progress-view"),l.classList.add("black-outline"),l.classList.add("maps-progress-view-selected"),l.innerHTML="Grid",l.addEventListener("click",(()=>{Rt("grid")})),a.appendChild(l);let n=document.createElement("div");n.id="maps-progress-list",n.classList.add("maps-progress-view"),n.classList.add("maps-progress-view-list"),n.classList.add("black-outline"),n.innerHTML="List",n.addEventListener("click",(()=>{Rt("list")})),a.appendChild(n);let s=document.createElement("div");s.id="maps-progress-game",s.classList.add("maps-progress-view"),s.classList.add("black-outline"),s.innerHTML="Game",s.addEventListener("click",(()=>{Rt("game")})),a.appendChild(s);let i=document.createElement("div");i.id="maps-progress-filter",i.classList.add("maps-progress-filter"),t.appendChild(i);let o=document.createElement("div");o.id="map-progress-filter-difficulty",o.classList.add("map-progress-filter-difficulty"),i.appendChild(o);let r=document.createElement("p");r.id="maps-progress-filter-difficulty-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Filter Difficulty:",o.appendChild(r);let c=document.createElement("select");c.id="map-progress-filter-difficulty-select",c.classList.add("map-progress-filter-difficulty-select"),c.addEventListener("change",(()=>{Nt(c.value)}));["All","Beginner","Intermediate","Advanced","Expert"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,c.appendChild(t)})),o.appendChild(c);let p=document.createElement("div");p.id="maps-progress-coop-toggle",p.classList.add("maps-progress-coop-toggle"),i.appendChild(p);let m=document.createElement("p");m.id="maps-progress-coop-toggle-text",m.classList.add("maps-progress-coop-toggle-text"),m.classList.add("black-outline"),m.innerHTML="Co-op: ",p.appendChild(m);let u=document.createElement("input");u.id="maps-progress-coop-toggle-input",u.classList.add("maps-progress-coop-toggle-input"),u.type="checkbox",u.addEventListener("change",(()=>{Gt(u.checked)})),p.appendChild(u);let h=document.createElement("div");h.id="maps-progress-container",h.classList.add("maps-progress-container"),e.appendChild(h);let g=document.createElement("div");g.id="map-progress-container",g.classList.add("map-progress-container"),g.style.display="none",e.appendChild(g),Rt("grid")}function Rt(e){switch(Oe=e,e){case"grid":document.getElementById("maps-progress-grid").classList.add("stats-tab-yellow"),document.getElementById("maps-progress-list").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-game").classList.remove("stats-tab-yellow"),Kt();break;case"list":document.getElementById("maps-progress-grid").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-list").classList.add("stats-tab-yellow"),document.getElementById("maps-progress-game").classList.remove("stats-tab-yellow"),Ft();break;case"game":document.getElementById("maps-progress-grid").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-list").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-game").classList.add("stats-tab-yellow"),Wt()}}function Gt(e){switch(Ue=e,document.getElementById("maps-progress-coop-toggle-input").checked=e,Oe){case"grid":Kt();break;case"list":Ft();break;case"game":Wt()}}function Nt(e){switch(Re=e,Oe){case"grid":Kt();break;case"list":Ft();break;case"game":Wt()}}function jt(e){document.getElementById("maps-progress-container").style.display="none",document.getElementById("maps-progress-header-bar").style.display="none",document.getElementById("map-progress-container").style.display="flex",qt(e)}function _t(){document.getElementById("map-progress-container").style.display="none",document.getElementById("maps-progress-header-bar").style.display="flex",document.getElementById("maps-progress-container").style.display="block"}function qt(e){let a=document.getElementById("map-progress-container");a.innerHTML="";let d=document.createElement("div");d.id="map-progress-header-bar",d.classList.add("single-map-progress-header-bar"),a.appendChild(d);let l=document.createElement("div");l.id="map-next-and-prev",l.classList.add("map-next-and-prev"),d.appendChild(l);let n=document.createElement("div");n.id="map-progress-prev-btn",n.classList.add("maps-progress-view"),n.classList.add("black-outline"),n.innerHTML="Previous",n.addEventListener("click",(()=>{let a=Object.keys(we.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));0==a.indexOf(e)?jt(a[a.length-1]):jt(a[a.indexOf(e)-1])})),l.appendChild(n);let s=document.createElement("div");s.id="map-progress-next-btn",s.classList.add("maps-progress-view"),s.classList.add("black-outline"),s.innerHTML="Next",s.addEventListener("click",(()=>{let a=Object.keys(we.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));a.indexOf(e)==a.length-1?jt(a[0]):jt(a[a.indexOf(e)+1])})),l.appendChild(s);let i=document.createElement("img");i.classList.add("modal-close"),i.src="./Assets/UI/CloseBtn.webp",i.addEventListener("click",(()=>{_t()})),d.appendChild(i);let o=document.createElement("div");o.id="map-below-header-bar",o.classList.add("map-below-header-bar"),a.appendChild(o);let r=document.createElement("div");r.id="map-left-column",r.classList.add("map-left-column"),o.appendChild(r);let c=document.createElement("div");c.id="map-progress-div",c.classList.add("map-progress-div"),r.appendChild(c);let p=document.createElement("div");p.id="map-name-top",p.classList.add("map-name-top"),c.appendChild(p);let m=document.createElement("img");m.id="map-difficulty-icon",m.classList.add("map-difficulty-icon"),m.src=`./Assets/DifficultyIcon/Map${we.mapsInOrder[e]}Btn.webp`,p.appendChild(m);let u=document.createElement("div");u.id="map-name-and-medals",u.classList.add("map-name-and-medals"),p.appendChild(u);let h=document.createElement("p");h.id="map-name",h.classList.add("map-name-large"),h.classList.add("black-outline"),h.innerHTML=ve(e),u.appendChild(h);let g=document.createElement("div");g.id="map-progress-single",g.classList.add("map-progress-subtext"),g.innerHTML=`${Object.values(De.Medals.single[e]).filter((e=>1==e)).length}/15 Single Player Medals`,u.appendChild(g);let L=document.createElement("div");L.id="map-progress-coop",L.classList.add("map-progress-subtext"),L.innerHTML=`${Object.values(De.Medals.coop[e]).filter((e=>1==e)).length}/15 Coop Medals`,u.appendChild(L);let v=document.createElement("img");v.id="map-icon",v.classList.add("map-icon"),v.src=ie(e),c.appendChild(v);let b=document.createElement("div");switch(b.id="map-progress-single-medals",b.classList.add("map-progress-medals"),r.appendChild(b),De.Borders.single[e]){case"None":b.classList.add("none-border");break;case"Bronze":b.classList.add("bronze-border");break;case"Silver":b.classList.add("silver-border");break;case"Gold":b.classList.add("gold-border");break;case"Black":b.classList.add("black-border")}for(let[t,a]of Object.entries(De.Medals.single[e])){if(null==a)continue;let d=document.createElement("div");d.id=`${t}-div`,d.classList.add("medal-div"),b.appendChild(d);let l=document.createElement("img");l.id=`${t}-img`,l.classList.add("medal-img"),l.src=pe(a?`Medal${X[t]}`:"MedalEmpty"),"Black"==De.Borders.single[e]&&l.classList.add("medal-glow"),l.style.display="none",l.addEventListener("load",(()=>{l.width<l.height?l.style.width=`${Xa(3,70,256,0,l.width)}px`:l.style.height=`${Xa(3,70,256,0,l.height)}px`,l.style.removeProperty("display")})),d.appendChild(l)}let C=document.createElement("div");C.id="map-progress-coop-medals",C.classList.add("map-progress-medals"),r.appendChild(C);for(let[t,a]of Object.entries(De.Medals.coop[e])){if(null==a)continue;let d=document.createElement("div");d.id=`${t}-div`,d.classList.add("medal-div"),C.appendChild(d);let l=document.createElement("img");l.id=`${t}-img`,l.classList.add("medal-img"),l.src=pe(a?`Medal${X[t]}`:"MedalCoopEmpty"),l.style.display="none","Black"==De.Borders.coop[e]&&l.classList.add("medal-glow"),l.addEventListener("load",(()=>{l.width<l.height?l.style.width=`${Xa(3,70,256,0,l.width)}px`:l.style.height=`${Xa(3,70,256,0,l.height)}px`,l.style.removeProperty("display")})),d.appendChild(l)}switch(De.Borders.coop[e]){case"None":C.classList.add("coop-border");break;case"Bronze":C.classList.add("bronze-border");break;case"Silver":C.classList.add("silver-border");break;case"Gold":C.classList.add("gold-border");break;case"Black":C.classList.add("black-border")}let y=document.createElement("div");y.id="map-right-column",y.classList.add("map-right-column"),o.appendChild(y);let E=document.createElement("div");E.id="right-column-header",E.classList.add("right-column-header"),y.appendChild(E);let f=document.createElement("p");f.id="right-column-header-text",f.classList.add("column-header-text"),f.classList.add("black-outline"),f.innerHTML="Mode Stats",E.appendChild(f);let k=document.createElement("div");k.id="maps-progress-coop-toggle",k.classList.add("maps-progress-coop-toggle"),E.appendChild(k);let w=document.createElement("p");w.id="maps-progress-coop-toggle-text",w.classList.add("maps-progress-coop-toggle-text"),w.classList.add("black-outline"),w.innerHTML="Co-op: ",k.appendChild(w);let M=document.createElement("input");M.id="maps-progress-coop-toggle-input",M.classList.add("maps-progress-coop-toggle-input"),M.type="checkbox",M.addEventListener("change",(()=>{Gt(M.checked),zt(e,Ue)})),M.checked=Ue,k.appendChild(M);let T=document.createElement("div");T.id="map-stats-container",T.classList.add("map-stats-container"),y.appendChild(T),zt(e,Ue)}function zt(e,t){let a=document.getElementById("map-stats-container");a.innerHTML="";for(let[d,l]of Object.entries(t?De.Maps[e].coop:De.Maps[e].single)){if(null==l)continue;let e=document.createElement("div");e.id=`${d}-div`,e.classList.add("map-stats-div"),a.appendChild(e);let t=document.createElement("img");t.id=`${d}-icon`,t.classList.add("map-stats-icon"),t.src=me(d),e.appendChild(t);let n=document.createElement("div");n.id=`${d}-text-div`,n.classList.add("map-stats-text-div"),e.appendChild(n);let s=document.createElement("p");s.id=`${d}-text`,s.classList.add("map-stats-text-mode"),s.classList.add("black-outline"),s.innerHTML=ve(`Mode ${d}`),n.appendChild(s);let i=document.createElement("p");i.id=`${d}-text`,i.classList.add("map-stats-text"),i.innerHTML=`Times Completed: ${l.timesCompleted}`,n.appendChild(i);let o=document.createElement("p");o.id=`${d}-best-round`,o.classList.add("map-stats-text"),o.innerHTML=`Best Round: ${l.bestRound}`,n.appendChild(o)}if(""==a.innerHTML){let e=document.createElement("p");e.id="no-data-found",e.classList.add("no-data-found"),e.classList.add("black-outline"),e.innerHTML="No Data Found.",a.appendChild(e)}}function Kt(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="maps-grid-container",t.classList.add("maps-grid-container"),e.appendChild(t);for(let[e,d]of Object.entries(we.mapsInOrder)){if(!a.parameters.mapProgress.default.allowed.includes(e))continue;if(null==De.Borders[Ue?"coop":"single"][e])continue;if("All"!=Re&&d!=Re)continue;let l=document.createElement("div");switch(l.id=`${e}-div`,l.classList.add("map-div"),De.Borders[Ue?"coop":"single"][e]){case"None":Ue?l.classList.add("coop-border"):l.classList.add("none-border");break;case"Bronze":l.classList.add("bronze-border");break;case"Silver":l.classList.add("silver-border");break;case"Gold":l.classList.add("gold-border");break;case"Black":l.classList.add("black-border")}t.appendChild(l);let n=document.createElement("img");n.id=`${e}-img`,n.classList.add("map-img"),n.src=ie(e),l.appendChild(n);let s=document.createElement("p");s.id=`${e}-name`,s.classList.add("map-name"),s.classList.add("black-outline"),s.innerHTML=ve(e),l.appendChild(s);let i=document.createElement("div");i.id=`${e}-progress`,i.classList.add("map-progress"),l.appendChild(i),l.addEventListener("click",(()=>{jt(e)}))}}function Ft(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="maps-list-container",t.classList.add("maps-list-container"),e.appendChild(t);let d=!1;for(let[e,l]of Object.entries(we.mapsInOrder)){if(!a.parameters.mapProgress.default.allowed.includes(e))continue;if(null==De.Borders[Ue?"coop":"single"][e])continue;if("All"!=Re&&l!=Re)continue;if(Object.entries(Ue?De.Maps[e].coop:De.Maps[e].single).every((([e,t])=>null==t)))continue;let n=document.createElement("div");n.id=`${e}-container`,n.classList.add("map-container"),n.style.backgroundColor=d?"var(--profile-secondary)":"var(--profile-tertiary)",d=!d,t.appendChild(n);let s=document.createElement("div");switch(s.id=`${e}-div`,s.classList.add("map-div"),De.Borders[Ue?"coop":"single"][e]){case"None":Ue?s.classList.add("coop-border"):s.classList.add("none-border");break;case"Bronze":s.classList.add("bronze-border");break;case"Silver":s.classList.add("silver-border");break;case"Gold":s.classList.add("gold-border");break;case"Black":s.classList.add("black-border")}n.appendChild(s);let i=document.createElement("img");i.id=`${e}-img`,i.classList.add("map-img"),i.src=ie(e),s.appendChild(i);let o=document.createElement("p");o.id=`${e}-name`,o.classList.add("map-name"),o.classList.add("black-outline"),o.innerHTML=ve(e),s.appendChild(o);let r=document.createElement("div");r.id=`${e}-sections`,r.classList.add("map-sections"),n.appendChild(r);let c=document.createElement("div");c.id=`${e}-section`,c.classList.add("map-section"),r.appendChild(c);let p=document.createElement("p");p.id=`${e}-label-medals`,p.classList.add("map-label-medals"),p.classList.add("black-outline"),c.appendChild(p);let m=document.createElement("p");m.id=`${e}-label-best-round`,m.classList.add("map-label-rounds"),m.classList.add("black-outline"),m.innerHTML="Best Round:",c.appendChild(m);let u=document.createElement("p");u.id=`${e}-label-times-completed`,u.classList.add("map-label-completed"),u.classList.add("black-outline"),u.innerHTML="Times Completed:",c.appendChild(u);for(let[t,a]of Object.entries(Ue?De.Maps[e].coop:De.Maps[e].single)){if(null==a)continue;let d=document.createElement("div");d.id=`${e}-${t}-column`,d.classList.add("map-section-column"),r.appendChild(d);let l=document.createElement("div");l.id=`${e}-${t}-medal`,l.classList.add("map-section-medal"),d.appendChild(l);let n=document.createElement("img");n.id=`${e}-${t}-medal-img`,n.classList.add("map-section-medal-img"),n.src=pe("Clicks"==t&&a.completedWithoutLoadingSave?`Medal${Ue?"Coop":""}${X["CHIMPS-BLACK"]}`:`Medal${Ue?"Coop":""}${X[t]}`),n.style.display="none",!a.completed&&a.bestRound<we.modeBestRoundFix[t]&&!a.completedWithoutLoadingSave&&(n.style.filter="brightness(0.5)"),n.addEventListener("load",(()=>{n.width<n.height?n.style.width=`${Xa(3,70,256,0,n.width)}px`:n.style.height=`${Xa(3,70,256,0,n.height)}px`,n.style.removeProperty("display")})),l.appendChild(n);let s=document.createElement("p");s.id=`${e}-${t}-best-round`,s.classList.add("map-section-text"),s.classList.add("black-outline"),s.innerHTML=a.bestRound,d.appendChild(s);let i=document.createElement("p");i.id=`${e}-${t}-times-completed`,i.classList.add("map-section-text"),i.classList.add("black-outline"),i.innerHTML=a.timesCompleted,d.appendChild(i)}s.addEventListener("click",(()=>{jt(e)}))}}function Wt(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let a=document.createElement("div");a.id="maps-game-container",a.classList.add("maps-game-container"),e.appendChild(a);let d=Object.keys(we.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));"All"!=Re&&(d=d.filter((e=>we.mapsInOrder[e]==Re)));let l=Math.ceil(d.length/6)-1;Ge>l&&(Ge=0),Ge<0&&(Ge=l);let n=d.slice(6*Ge,6*Ge+6),s=document.createElement("div");s.id="map-prev-arrow",s.classList.add("map-arrow"),a.appendChild(s);let i=document.createElement("img");i.id="map-prev-arrow-img",i.classList.add("map-arrow-img"),i.src="./Assets/UI/PrevArrow.webp",s.appendChild(i);let o=document.createElement("div");o.id="maps-game-grid",o.classList.add("maps-game-grid"),a.appendChild(o);for(let e of n){let t=document.createElement("div");switch(t.id=`${e}-div`,t.classList.add("map-div-ingame"),De.Borders[Ue?"coop":"single"][e]){case"None":Ue?t.classList.add("coop-border"):t.classList.add("none-border");break;case"Bronze":t.classList.add("bronze-border");break;case"Silver":t.classList.add("silver-border");break;case"Gold":t.classList.add("gold-border");break;case"Black":t.classList.add("black-border")}o.appendChild(t);let a=document.createElement("img");a.id=`${e}-img`,a.classList.add("map-img-ingame"),a.src=ie(e),t.appendChild(a);let d=document.createElement("p");d.id=`${e}-name`,d.classList.add("map-name"),d.classList.add("black-outline"),d.innerHTML=ve(e),t.appendChild(d);for(let[a,d]of Ue?Object.entries(De.Medals.coop[e]):Object.entries(De.Medals.single[e])){if(null==d)continue;let e=document.createElement("div");e.id=`${a}-div`,["Easy","Medium","Hard","Impoppable"].includes(a)?e.classList.add("medal-div-large"):e.classList.add("medal-div-small"),e.classList.add(`medal-div-${a.toLowerCase()}`),t.appendChild(e);let l=document.createElement("img");l.id=`${a}-img`,l.classList.add("medal-img"),l.src=pe(d?`Medal${X[a]}`:"MedalEmpty"),d||l.classList.add("medal-div-unobtained"),l.style.display="none",l.addEventListener("load",(()=>{l.width<l.height?l.style.width=`${Xa(3,70,256,0,l.width)}px`:l.style.height=`${Xa(3,70,256,0,l.height)}px`,l.style.removeProperty("display")})),e.appendChild(l)}t.addEventListener("click",(()=>{jt(e)}))}let r=document.createElement("div");r.id="map-next-arrow",r.classList.add("map-arrow"),a.appendChild(r);let c=document.createElement("img");c.id="map-next-arrow-img",c.classList.add("map-arrow-img"),c.src="./Assets/UI/NextArrow.webp",r.appendChild(c),s.addEventListener("click",(()=>{Ge--,Wt()})),r.addEventListener("click",(()=>{Ge++,Wt()}));let p=document.createElement("div");p.id="map-page-dots",p.classList.add("map-page-dots"),e.appendChild(p);for(let e=0;e<=l;e++){let t=document.createElement("div");t.id=`map-page-dot-${e}`,t.classList.add("map-page-dot"),e==Ge&&t.classList.add("map-page-dot-active"),p.appendChild(t),t.addEventListener("click",(()=>{Ge=e,Wt()}))}}function Vt(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="powers-progress-container",a.classList.add("powers-progress-container"),e.appendChild(a);for(let[e,d]of Object.entries(t.powers)){let t=document.createElement("div");t.id=`${e}-div`,t.classList.add("power-div"),a.appendChild(t);let l=document.createElement("img");l.id=`${e}-img`,l.classList.add("power-img"),l.src=oe(e),t.appendChild(l);let n=document.createElement("p");n.id=`${e}-name`,n.classList.add("power-name"),n.classList.add("black-outline"),n.innerHTML=ve(e),t.appendChild(n);let s=document.createElement("div");s.id=`${e}-progress`,s.classList.add("power-progress"),t.appendChild(s);let i=document.createElement("p");i.id=`${e}-progress-text`,i.classList.add("power-progress-text"),i.classList.add("black-outline"),i.innerHTML=`${d.quantity}`,s.appendChild(i)}}function Xt(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkeys-header-bar",t.classList.add("insta-monkeys-header-bar"),e.appendChild(t);let a=document.createElement("div");a.id="insta-monkeys-views",a.classList.add("maps-progress-views"),t.appendChild(a);let d=document.createElement("p");d.id="maps-progress-views-text",d.classList.add("maps-progress-coop-toggle-text"),d.classList.add("black-outline"),d.innerHTML="Display Type:",a.appendChild(d);let l=document.createElement("div");l.id="insta-monkeys-game-view",l.classList.add("maps-progress-view"),l.classList.add("black-outline"),l.innerHTML="Game",l.addEventListener("click",(()=>{Yt("game")})),a.appendChild(l);let n=document.createElement("div");n.id="insta-monkeys-list-view",n.classList.add("maps-progress-view"),n.classList.add("black-outline"),n.innerHTML="List",n.addEventListener("click",(()=>{Yt("list")})),a.appendChild(n);let s=document.createElement("div");s.id="insta-monkeys-extras",s.classList.add("maps-progress-views"),t.appendChild(s);let i=document.createElement("div");i.id="insta-monkeys-obtain-view",i.classList.add("maps-progress-view"),i.classList.add("black-outline"),i.innerHTML="Coming Soon",i.addEventListener("click",(()=>{Yt("obtain")})),s.appendChild(i);let o=document.createElement("div");o.id="insta-monkeys-rotations-view",o.classList.add("maps-progress-view"),o.classList.add("black-outline"),o.innerHTML="Coming Soon",o.addEventListener("click",(()=>{Yt("rotations")})),s.appendChild(o);let r=document.createElement("div");r.id="insta-monkeys-progress-container",r.classList.add("insta-monkeys-progress-container"),e.appendChild(r);let c=document.createElement("div");c.id="insta-monkey-progress-container",c.classList.add("insta-monkey-progress-container"),c.style.display="none",e.appendChild(c),Yt("game")}function Yt(e){switch(Ne=e,document.getElementById("insta-monkeys-progress-container").style.removeProperty("display"),document.getElementById("insta-monkey-progress-container").style.display="none",e){case"game":document.getElementById("insta-monkeys-game-view").classList.add("stats-tab-yellow"),document.getElementById("insta-monkeys-list-view").classList.remove("stats-tab-yellow"),Jt();break;case"list":document.getElementById("insta-monkeys-game-view").classList.remove("stats-tab-yellow"),document.getElementById("insta-monkeys-list-view").classList.add("stats-tab-yellow"),la()}}function Jt(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkey-game-container",t.classList.add("insta-monkey-game-container"),e.appendChild(t);let a=document.createElement("div");a.id="towers-container",a.classList.add("towers-container"),t.appendChild(a),Object.keys(we.towersInOrder).forEach((e=>{let t=document.createElement("div");t.id=`${e}-container`,t.classList.add("tower-container"),t.style.backgroundImage=`url(./Assets/UI/InstaTowersContainer${qe.TowerBorders[e]}.webp)`,t.addEventListener("click",(()=>{Qt(e)})),a.appendChild(t);let d=document.createElement("img");d.id=`${e}-img`,d.classList.add("tower-img"),d.src=Z(e,"000"),t.appendChild(d);let l=document.createElement("p");l.id=`${e}-name`,l.classList.add("tower-name"),l.classList.add("black-outline"),l.innerHTML=ve(e),t.appendChild(l);let n=document.createElement("p");n.id=`${e}-total-div`,n.classList.add("insta-progress"),t.appendChild(n);let s=document.createElement("p");s.id=`${e}-total`,s.classList.add("power-progress-text"),s.classList.add("black-outline"),s.innerHTML=qe.TowerTotal[e],n.appendChild(s)}))}function Qt(e){document.getElementById("insta-monkeys-progress-container").style.display="none",document.getElementById("insta-monkey-progress-container").style.display="flex",Zt(e)}function Zt(e){let t=document.getElementById("insta-monkey-progress-container");t.innerHTML="";let a=document.createElement("div");t.appendChild(a);let d=document.createElement("div");d.id=`${e}-top-bar`,d.classList.add("insta-monkey-top-bar"),a.appendChild(d);let l=document.createElement("div");l.id="map-prev-arrow",l.classList.add("insta-arrow"),l.addEventListener("click",(()=>{aa(e)})),d.appendChild(l);let n=document.createElement("img");n.id="map-prev-arrow-img",n.classList.add("map-arrow-img"),n.src="./Assets/UI/PrevArrow.webp",l.appendChild(n);let s=document.createElement("div");switch(s.id=`${e}-header-div`,s.classList.add("insta-monkey-header-div"),qe.TowerBorders[e]){case"Gold":s.classList.add("insta-topbar-gold");break;case"Black":s.classList.add("insta-topbar-black")}d.appendChild(s);let i=document.createElement("div");i.id="map-next-arrow",i.classList.add("insta-arrow"),i.addEventListener("click",(()=>{da(e)})),d.appendChild(i);let o=document.createElement("img");o.id="map-next-arrow-img",o.classList.add("map-arrow-img"),o.src="./Assets/UI/NextArrow.webp",i.appendChild(o);let r=document.createElement("div");r.id="maps-progress-coop-toggle",r.classList.add("maps-progress-coop-toggle"),s.appendChild(r);let c=document.createElement("p");c.id="maps-progress-coop-toggle-text",c.classList.add("maps-progress-coop-toggle-text"),c.classList.add("black-outline"),c.innerHTML="Missing: ",r.appendChild(c);let p=document.createElement("input");p.id="insta-progress-missing-toggle-input",p.classList.add("insta-progress-missing-toggle-input"),p.classList.add("MkOffRed"),p.type="checkbox",p.addEventListener("change",(()=>{ta()})),p.checked=Ue,r.appendChild(p);let m=document.createElement("p");m.id=`${e}-name`,m.classList.add("insta-monkey-name"),m.classList.add("black-outline"),m.innerHTML=ve(e),s.appendChild(m);let u=document.createElement("div");u.id=`${e}-progress`,u.classList.add("insta-monkey-progress"),s.appendChild(u);let h=document.createElement("p");h.id=`${e}-progress-text`,h.classList.add("insta-monkey-progress-text"),h.classList.add("black-outline"),h.innerHTML=`${Object.values(qe.TowerTierTotals[e]).reduce(((e,t)=>e+t),0)}/64`,u.appendChild(h);let g=document.createElement("div");g.id=`${e}-main-container`,g.classList.add("insta-monkey-main-container"),a.appendChild(g),ea(e)}function ea(e){let a=document.getElementById(`${e}-main-container`);a.innerHTML="";let d=document.createElement("div");d.id=`${e}-icons-container`,d.classList.add("insta-monkey-icons-container"),a.appendChild(d),we.collectionOrder.forEach((a=>{let l=document.createElement("div");if(l.id=`${e}-${a}-container`,l.classList.add("insta-monkey-tier-container"),t.instaTowers[e][a]||(l.style.display="none",l.classList.add("insta-monkey-unobtained")),d.appendChild(l),t.instaTowers[e][a]>1){let d=document.createElement("p");d.id=`${e}-total-div`,d.classList.add("insta-progress"),d.classList.add("insta-tier-scale"),l.appendChild(d);let n=document.createElement("p");n.id=`${e}-total`,n.classList.add("power-progress-text"),n.classList.add("black-outline"),n.innerHTML=t.instaTowers[e][a],d.appendChild(n)}let n=document.createElement("img");n.id=`${e}-${a}-img`,n.classList.add("insta-monkey-tier-img"),n.src=t.instaTowers[e][a]?ee(e,a):"./Assets/UI/InstaUncollected.webp",l.appendChild(n);let s=document.createElement("p");s.id=`${e}-${a}-text`,s.classList.add("insta-monkey-tier-text"),s.classList.add("black-outline"),s.innerHTML=`${a[0]}-${a[1]}-${a[2]}`,l.appendChild(s)}))}function ta(){for(let e of document.getElementsByClassName("insta-monkey-unobtained"))e.style.display=document.getElementById("insta-progress-missing-toggle-input").checked?"block":"none"}function aa(e){let t=Object.keys(we.towersInOrder),a=t.indexOf(e);0==a?a=t.length-1:a--,Qt(t[a])}function da(e){let t=Object.keys(we.towersInOrder),a=t.indexOf(e);a==t.length-1?a=0:a++,Qt(t[a])}function la(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkeys-list-container",t.classList.add("insta-monkeys-list-container"),e.appendChild(t);let a=document.createElement("div");a.id="insta-monkeys-list",a.classList.add("insta-monkeys-list"),t.appendChild(a),Object.keys(we.towersInOrder).forEach((e=>{if(null==qe.TowerTierTotals[e])return;let t=document.createElement("div");t.id=`${e}-div`,t.classList.add("insta-monkey-div"),a.appendChild(t);let d=document.createElement("div");d.id=`${e}-container`,d.classList.add("tower-container"),d.style.backgroundImage=`url(./Assets/UI/InstaTowersContainer${qe.TowerBorders[e]}.webp)`,d.addEventListener("click",(()=>{Qt(e)})),t.appendChild(d);let l=document.createElement("img");l.id=`${e}-img`,l.classList.add("tower-img"),l.src=Z(e,"000"),d.appendChild(l);let n=document.createElement("p");n.id=`${e}-name`,n.classList.add("tower-name"),n.classList.add("black-outline"),n.innerHTML=ve(e),d.appendChild(n);let s=document.createElement("div");s.id=`${e}-top-bottom`,s.classList.add("insta-monkey-top-bottom"),t.appendChild(s);let i=document.createElement("div");i.id=`${e}-progress`,i.classList.add("insta-monkey-progress-list"),s.appendChild(i);let o=document.createElement("div");o.classList.add("insta-monkey-total"),i.appendChild(o);let r=document.createElement("p");r.id=`${e}-total-label-text`,r.classList.add("insta-monkey-progress-label-text"),r.classList.add("black-outline"),r.innerHTML="Total Instas:",o.appendChild(r);let c=document.createElement("p");c.id=`${e}-total-text`,c.classList.add("insta-monkey-total-text"),c.classList.add("black-outline"),c.innerHTML=qe.TowerTotal[e],o.appendChild(c);let p=document.createElement("div");p.id=`${e}-tier-progress`,p.classList.add("insta-monkey-tier-progress"),i.appendChild(p);let m=document.createElement("p");m.id=`${e}-progress-label-text`,m.classList.add("insta-monkey-progress-label-text"),m.classList.add("black-outline"),m.innerHTML="Unique Instas:",p.appendChild(m);let u=document.createElement("p");u.id=`${e}-progress-text`,u.classList.add("insta-monkey-progress-text"),u.classList.add("black-outline"),u.innerHTML=`${Object.values(qe.TowerTierTotals[e]).reduce(((e,t)=>e+t),0)}/64`,p.appendChild(u);let h=document.createElement("div");h.id=`${e}-tiers-container`,h.classList.add("insta-monkey-tiers-container"),s.appendChild(h);let g=document.createElement("p");g.id=`${e}-tiers-label`,g.classList.add("insta-monkey-tiers-label"),g.classList.add("black-outline"),g.innerHTML="Unique By Tier:",h.appendChild(g);for(let[t,a]of Object.entries(qe.TowerTierTotals[e])){let e=document.createElement("div");e.classList.add("insta-monkey-tier-div"),h.appendChild(e);let d=document.createElement("p");d.classList.add("insta-monkey-tier-text-list"),d.classList.add(`insta-tier-text-${t}`),"5"==t?d.classList.add("t5-insta-outline"):d.classList.add("black-outline"),e.style.backgroundImage=`url(./Assets/UI/InstaTier${t}Container.webp)`,d.innerHTML=`${a}/${we.instaTiers[t].length}`,e.appendChild(d)}}))}function na(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("p");t.id="insta-monkeys-guide-title-text",t.classList.add("insta-monkeys-guide-title-text"),t.classList.add("black-outline"),t.innerHTML="Where To Get More Insta Monkeys",e.appendChild(t);let a=document.createElement("p");a.id="insta-monkeys-guide-title-desc",a.classList.add("insta-monkeys-guide-title-desc"),a.classList.add("black-outline"),a.innerHTML="Select a button to read more about that method.",e.appendChild(a)}function sa(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="achievements-progress-container",t.classList.add("achievements-progress-container"),e.appendChild(t);let a=document.createElement("div");a.id="achievements-header-bar",a.classList.add("achievements-header-bar"),t.appendChild(a);let d=document.createElement("div");d.id="achievements-views",d.classList.add("maps-progress-views"),a.appendChild(d);let l=document.createElement("div");l.id="map-progress-filter-difficulty",l.classList.add("map-progress-filter-difficulty"),d.appendChild(l);let n=document.createElement("p");n.id="maps-progress-filter-difficulty-text",n.classList.add("maps-progress-coop-toggle-text"),n.classList.add("black-outline"),n.innerHTML="Filter:",l.appendChild(n);let s=document.createElement("select");s.id="map-progress-filter-difficulty-select",s.classList.add("map-progress-filter-difficulty-select");["None","Monkey Money","Knowledge Points","Insta Monkeys","Hidden Achievements"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,s.appendChild(t)})),l.appendChild(s);let i=document.createElement("div");i.id="maps-progress-filter",i.classList.add("maps-progress-filter"),a.appendChild(i);let o=document.createElement("div");o.id="map-progress-filter-difficulty",o.classList.add("map-progress-filter-difficulty"),i.appendChild(o);let r=document.createElement("p");r.id="maps-progress-filter-difficulty-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Display:",o.appendChild(r);let c=document.createElement("select");c.id="map-progress-filter-difficulty-select",c.classList.add("map-progress-filter-difficulty-select"),c.addEventListener("change",(()=>{ra(c.value)}));["All","Locked","Unlocked"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,c.appendChild(t)})),o.appendChild(c);let p=document.createElement("div");p.id="achievements-container",p.classList.add("achievements-container"),e.appendChild(p),s.addEventListener("change",(()=>{ca(s.value)})),ra("All"),ca("None"),ia()}function ia(){let e=document.getElementById("achievements-container");e.innerHTML="";let a=we.achievementGameOrder;switch(je){case"Locked":a=a.filter((e=>!t.achievementsClaimed.includes(K[fe[e].name]||fe[e].name)));break;case"Unlocked":a=a.filter((e=>t.achievementsClaimed.includes(K[fe[e].name]||fe[e].name)));break;case"All":a=a.sort(((e,a)=>t.achievementsClaimed.includes(K[fe[e].name]||fe[e].name)-t.achievementsClaimed.includes(K[fe[a].name]||fe[a].name)))}switch(_e){case"Monkey Money":a=a.filter((e=>fe[e].model.loot.includes("MonkeyMoney"))),a=a.sort(((e,t)=>Object.values(ja(fe[e].model.loot)).find((e=>"MonkeyMoney"==e.type)).amount-Object.values(ja(fe[t].model.loot)).find((e=>"MonkeyMoney"==e.type)).amount));break;case"Knowledge Points":a=a.filter((e=>fe[e].model.loot.includes("KnowledgePoints")));break;case"Insta Monkeys":a=a.filter((e=>fe[e].model.loot.includes("InstaMonkey")));break;case"Hidden Achievements":a=a.filter((e=>fe[e].model.hidden))}if(0==a.length){let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="No Data Found.",t.style.width="100%",e.appendChild(t)}let d=document.createDocumentFragment();for(let e of a){let a=fe[e],l=t.achievementsClaimed.includes(K[a.name]||a.name),n=document.createElement("div");n.classList.add("achievement-div"),d.appendChild(n);let s=document.createElement("div");s.classList.add("achievement-top-div"),n.appendChild(s);let i=document.createElement("div");i.classList.add("achievement-icon-div"),s.appendChild(i);let o=document.createElement("img");o.classList.add("achievement-icon-img"),o.src=re(a.model.achievementIcon,!l&&a.model.hidden),i.appendChild(o);let r=document.createElement("div");r.classList.add("achievement-text-div"),s.appendChild(r);let c=document.createElement("p");c.classList.add("achievement-name-text"),c.classList.add("black-outline"),c.innerHTML=l?ve(`Achievement ${a.model.achievementId} Name`):a.model.hidden?"???":ve(`Achievement ${a.model.achievementId} Name`),r.appendChild(c);let p=document.createElement("p");p.classList.add("achievement-desc-text");let m=l?ve(`Achievement ${a.model.achievementId} Description`):a.model.hidden?"???":ve(`Achievement ${a.model.achievementId} Description`);p.innerHTML=-1!=m.indexOf("{0}")?m.replace("{0}",a.model.achievementGoal.toLocaleString()):m,r.appendChild(p);let u=document.createElement("div");u.classList.add("achievement-bottom-div"),n.appendChild(u);let h=document.createElement("div");h.classList.add("achievement-rewards-div"),u.appendChild(h);for(let[e,t]of Object.entries(ja(a.model.loot))){let e=document.createElement("div");e.classList.add("achievement-reward-div"),h.appendChild(e);let a=document.createElement("img");a.classList.add("achievement-reward-img"),a.src=ue(t),e.appendChild(a);let d=document.createElement("p");d.classList.add("achievement-reward-text"),d.classList.add("black-outline");let l="";switch(t.type){case"InstaMonkey":l=t.tiers.split("").join("-");break;case"Knowledge":l="+ "+t.amount.toLocaleString();break;case"Power":case"RandomInstaMonkey":l="X "+t.amount.toLocaleString();break;default:l=t.amount?t.amount.toLocaleString():""}d.innerHTML=l,e.appendChild(d)}if(l){let e=document.createElement("img");e.classList.add("achievement-completed-check"),e.src="./Assets/UI/TickGreenIcon.webp",u.appendChild(e)}}e.appendChild(d)}function oa(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="extras-progress-container",t.classList.add("extras-progress-container"),e.appendChild(t);let a=[["Big Bloons","BigBloonsMode"],["Small Bloons","SmallBloonsMode"],["Big Monkey Towers","BigTowersMode"],["Small Monkey Towers","SmallTowersMode"],["Small Bosses","SmallBossesMode"]];for(let[e,d]of a){if(!Se[e])continue;let a=document.createElement("div");a.classList.add("extra-progress-div"),t.appendChild(a);let l=document.createElement("img");l.classList.add("extra-progress-img"),l.src=`./Assets/UI/${d}Icon.webp`,a.appendChild(l);let n=document.createElement("p");n.classList.add("extra-progress-text"),n.classList.add("black-outline"),n.innerHTML=ve(d),a.appendChild(n)}}function ra(e){je=e,ia()}function ca(e){_e=e,ia()}function pa(){let e=document.getElementById("events-content");e.innerHTML="";let t=document.createElement("div");t.id="events-page",t.classList.add("progress-page"),e.appendChild(t);let a=document.createElement("div");a.id="selectors-div-events",a.classList.add("selectors-div"),t.appendChild(a);Object.entries({Races:{img:"EventRaceBtn",text:"Races",bgimg:"EventBannerSmallRaces"},Bosses:{img:"BossesBtn",text:"Bosses",bgimg:"EventBannerSmallNoBoss"},Odyssey:{img:"OdysseyEventBtn",text:"Odyssey (Coming Soon)",bgimg:"EventBannerSmallOdyssey"},ContestedTerritory:{img:"ContestedTerritoryEventBtn",text:"Contested Territory",bgimg:"EventBannerSmallCT"},DailyChallenges:{img:"DailyChallengeBtn",text:"Daily Challenges",bgcolor:"radial-gradient(circle, transparent 50%, rgba(0,0,0,1) 100%),linear-gradient(45deg, rgb(70,148,213), rgb(70,148,213))"},AdvancedDailyChallenges:{img:"DailyChallengeBtn",text:"Advanced Daily Challenges",bgcolor:"radial-gradient(circle, transparent 50%, rgba(0,0,0,1) 100%),linear-gradient(45deg, rgb(234,99,52), rgb(234,99,52))"},CoopDailyChallenges:{img:"DailyChallengeBtn",text:"Coop Challenges",bgcolor:"radial-gradient(circle, transparent 50%, rgba(0,0,0,1) 100%),linear-gradient(45deg, rgb(255,150,0), rgb(255,150,0))"}}).forEach((([e,t])=>{let d=document.createElement("div");d.id=e.toLowerCase()+"-div",d.classList.add("events-selector-div"),t.bgcolor?d.style.background=t.bgcolor:d.style.backgroundImage=`url(../Assets/EventBanner/${t.bgimg}.webp)`,d.addEventListener("click",(()=>{ma(e)})),a.appendChild(d);let l=document.createElement("img");l.id=e.toLowerCase()+"-img",l.classList.add("selector-img"),l.src=`../Assets/UI/${t.img}.webp`,d.appendChild(l);let n=document.createElement("p");n.id=e.toLowerCase()+"-text",n.classList.add("event-selector-text"),n.classList.add("black-outline"),n.innerHTML=t.text,d.appendChild(n);let s=document.createElement("img");s.id=e.toLowerCase()+"-go-img",s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",d.appendChild(s)}))}function ma(e){switch(Ya(),ze&&clearInterval(ze),e){case"Races":st(),I();break;case"Bosses":st(),$();break;case"Odyssey":break;case"ContestedTerritory":x();break;case"DailyChallenges":st(),La("DailyChallenges");break;case"AdvancedDailyChallenges":st(),La("AdvancedDailyChallenges");break;case"CoopDailyChallenges":st(),La("CoopDailyChallenges")}}function ua(){let e=document.getElementById("events-content");e.innerHTML="",Object.values(n).forEach(((t,a)=>{let d=document.createElement("div");d.classList.add("race-div"),e.appendChild(d);let l=document.createElement("div");l.classList.add("race-map-div","silver-border"),d.appendChild(l);let s=document.createElement("img");s.classList.add("race-map-img"),s.src="./Assets/MapIcon/MapLoadingImage.webp",l.appendChild(s);let i=document.createElement("div");i.classList.add("race-challenge-icons"),l.appendChild(i);let o=document.createElement("p");o.classList.add("race-map-rounds","black-outline"),l.appendChild(o);let r=document.createElement("div");r.classList.add("race-info-div"),d.appendChild(r);let c=document.createElement("div");c.classList.add("race-info-top-div"),r.appendChild(c);let p=document.createElement("div");p.classList.add("race-info-middle-div"),r.appendChild(p);let m=document.createElement("div");m.classList.add("race-info-bottom-div"),r.appendChild(m);let u=document.createElement("p");u.classList.add("race-info-name","black-outline"),u.innerHTML=t.name,c.appendChild(u);let h=document.createElement("p");h.id="race-time-left",h.classList.add("race-time-left","black-outline"),h.innerHTML="Finished",c.appendChild(h),new Date<new Date(t.start)?h.innerHTML="Coming Soon!":new Date(t.end)>new Date&&(Fa(new Date(t.end),h.id),ze=setInterval((()=>Fa(new Date(t.end),h.id)),1e3));let g=document.createElement("p");g.classList.add("race-info-dates","black-outline"),g.innerHTML=`${new Date(t.start).toLocaleDateString()} - ${new Date(t.end).toLocaleDateString()}`,p.appendChild(g);let L=document.createElement("p");L.classList.add("race-info-total-scores","black-outline"),L.innerHTML=`Total Scores: ${0==t.totalScores?"No Data":t.totalScores.toLocaleString()}`,p.appendChild(L);let v=document.createElement("div");v.classList.add("race-info-rules","start-button","black-outline"),v.innerHTML="Details",v.addEventListener("click",(()=>{st(),ba("events",t.metadata,"Race")})),m.appendChild(v);let b=document.createElement("div");b.classList.add("race-info-leaderboard","where-button","black-outline"),b.innerHTML="Leaderboard",b.addEventListener("click",(()=>{Ea("events",t,"Race")})),m.appendChild(b),new IntersectionObserver(((e,d)=>{e.forEach((async e=>{if(e.isIntersecting&&(await H(a),"string"!=typeof n[a].metadata)){console.log(t.metadata),d.unobserve(e.target),s.src=Object.keys(we.mapsInOrder).includes(t.metadata.map)?ie(t.metadata.map):t.metadata.mapURL;let a=Ca(t.metadata),l=ya(t.metadata);for(let e of Object.values(a)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,i.appendChild(t)}for(let e of l){if(console.log(e),"No Round 100 Reward"==e)continue;if("Paragon Limit"==e)continue;let t=document.createElement("img");t.classList.add("challenge-rule-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${Ke[e]}.webp`,i.appendChild(t)}o.innerHTML=`Rounds ${t.metadata.startRound}/${t.metadata.endRound}`}}))})).observe(l)}))}function ha(e){let t=document.getElementById("events-content");t.innerHTML="";let a=document.createElement("div");a.classList.add("switch-banner"),a.style.backgroundImage=`url(../Assets/UI/${Fe?"":"Elite"}Ribbon.webp)`,t.appendChild(a);let d=document.createElement("div");d.classList.add("switch-boss-div"),a.appendChild(d);let l=["Bloonarius","Lych","Vortex","Dreadbloon","Phayze"];for(let e of l){let t=document.createElement("img");t.classList.add("switch-boss-img"),t.src=`./Assets/BossIcon/${e}Portrait${Fe?"":"Elite"}.webp`,d.appendChild(t)}let n=document.createElement("p");n.classList.add("switch-text","black-outline"),n.innerHTML=`Switch to ${Fe?"Standard":"Elite"}  Bosses`,a.appendChild(n),a.addEventListener("click",(()=>{Fe=!Fe,ze&&clearInterval(ze),ha(Fe)})),Object.values(u).forEach(((a,d)=>{let l=a.bossType.toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase())),n=a.name.replace(/\D/g,""),s=`${e?"Elite":""} ${l} ${n}`,i={name:l,elite:e,eventNumber:n,scoringType:a.scoringType},o=document.createElement("div");o.classList.add("race-div"),o.style.backgroundImage=`url(../Assets/EventBanner/EventBannerSmall${l}.webp)`,t.appendChild(o);let r=document.createElement("div");r.classList.add("race-map-div","boss-border"),o.appendChild(r);let c=document.createElement("img");c.classList.add("race-map-img"),c.src="./Assets/MapIcon/MapLoadingImage.webp",r.appendChild(c);let p=document.createElement("img");p.classList.add("boss-map-boss-icon"),p.src=`./Assets/BossIcon/${l}Portrait${e?"Elite":""}.webp`,r.appendChild(p);let m=document.createElement("div");m.classList.add("race-challenge-icons"),r.appendChild(m);let h=document.createElement("p");h.classList.add("race-map-rounds"),r.appendChild(h);let g=document.createElement("div");g.classList.add("race-info-div","boss-info-div"),o.appendChild(g);let L=document.createElement("div");L.classList.add("race-info-top-div"),g.appendChild(L);let v=document.createElement("div");v.classList.add("race-info-middle-div"),g.appendChild(v);let b=document.createElement("div");b.classList.add("race-info-bottom-div",e?"btn-rotate-boss-elite":"btn-rotate-boss"),g.appendChild(b);let C=document.createElement("p");C.classList.add("race-info-name","black-outline"),C.innerHTML=s,L.appendChild(C);let y=document.createElement("p");y.id="boss-time-left",y.classList.add("race-time-left","black-outline"),y.innerHTML="Finished",L.appendChild(y),new Date<new Date(a.start)?y.innerHTML="Coming Soon!":new Date(a.end)>new Date&&(Fa(new Date(a.end),y.id),ze=setInterval((()=>Fa(new Date(a.end),y.id)),1e3));let E=document.createElement("p");E.classList.add("race-info-dates","black-outline"),E.innerHTML=`${new Date(a.start).toLocaleDateString()} - ${new Date(a.end).toLocaleDateString()}`,v.appendChild(E);let f=document.createElement("p");f.classList.add("race-info-total-scores","black-outline"),f.innerHTML=`Total Scores: ${0==(e?a.totalScores_elite:a.totalScores_standard)?"No Data":(e?a.totalScores_elite:a.totalScores_standard).toLocaleString()}`,v.appendChild(f);let k=document.createElement("div");k.classList.add("race-info-rules","start-button","black-outline"),k.innerHTML="Details",k.addEventListener("click",(()=>{st(),ba("events",e?a.metadataElite:a.metadataStandard,"Boss",i)})),b.appendChild(k);let w=document.createElement("div");w.classList.add("race-info-leaderboard","start-button","black-outline"),w.innerHTML="Leaderboard",w.addEventListener("click",(()=>{Ea("events",a,e?"BossElite":"Boss")})),b.appendChild(w),new IntersectionObserver(((t,l)=>{t.forEach((async t=>{if(t.isIntersecting&&(await D(d,e),"string"!=typeof u[d][e?"metadataElite":"metadataStandard"])){let d=document.createElement("img");switch(d.classList.add("challenge-modifier-icon-event"),a.scoringType){case"LeastCash":d.src="./Assets/ChallengeRulesIcon/LeastCashIcon.webp",m.appendChild(d);break;case"LeastTiers":d.src="./Assets/ChallengeRulesIcon/LeastTiersIcon.webp",m.appendChild(d)}console.log(e?a.metadataElite:a.metadataStandard),l.unobserve(t.target);let n=Ca(e?a.metadataElite:a.metadataStandard),s=ya(e?a.metadataElite:a.metadataStandard);for(let e of Object.values(n)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,m.appendChild(t)}for(let e of s){if(console.log(e),"No Round 100 Reward"==e)continue;let t=document.createElement("img");t.classList.add("challenge-rule-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${Ke[e]}.webp`,m.appendChild(t)}c.src=Object.keys(we.mapsInOrder).includes(e?a.metadataElite.map:a.metadataStandard.map)?ie(e?a.metadataElite.map:a.metadataStandard.map):e?a.metadataElite.mapURL:a.metadataStandard.mapURL}}))})).observe(r)}))}function ga(){let e=document.getElementById("events-content");e.innerHTML="",Object.values(h).forEach(((t,a)=>{let d=document.createElement("div");d.classList.add("race-div","ct-div"),d.style.backgroundImage="url(../Assets/ProfileBanner/TeamsBanner8.webp)",e.appendChild(d);let l=document.createElement("div");l.classList.add("ct-info-div"),d.appendChild(l);let n=document.createElement("div");n.classList.add("ct-info-top-div"),l.appendChild(n);let s=document.createElement("div");s.classList.add("ct-info-bottom-div"),l.appendChild(s);let i=document.createElement("p");i.classList.add("race-info-name","black-outline"),i.innerHTML="Contested Territory",n.appendChild(i);let o=document.createElement("p");o.id="race-time-left",o.classList.add("race-time-left","black-outline"),o.innerHTML="Finished",n.appendChild(o),new Date<new Date(t.start)?o.innerHTML="Coming Soon!":new Date(t.end)>new Date&&(Fa(new Date(t.end),o.id),ze=setInterval((()=>Fa(new Date(t.end),o.id)),1e3));let r=document.createElement("div");r.classList.add("ct-info-left-div"),s.appendChild(r);let c=document.createElement("p");c.classList.add("race-info-dates","ct-info-dates","black-outline"),c.innerHTML=`${new Date(t.start).toLocaleDateString()} - ${new Date(t.end).toLocaleDateString()}`,r.appendChild(c);let p=document.createElement("div");p.classList.add("race-info-rules","start-button","currency-trophies-div","black-outline"),p.innerHTML="Relic Reveal",p.addEventListener("click",(()=>{console.log(t),st(),Ba("events",t.tiles,`${new Date(t.start).toLocaleDateString()} - ${new Date(t.end).toLocaleDateString()}`)})),r.appendChild(p);let m=document.createElement("div");m.classList.add("ct-leaderboards-div"),s.appendChild(m);let u=document.createElement("p");u.classList.add("ct-leaderboards-header","black-outline"),u.innerHTML="Leaderboards",m.appendChild(u);let h=document.createElement("div");h.classList.add("ct-leaderboards-btns"),m.appendChild(h);let g=document.createElement("div");g.classList.add("race-info-leaderboard","ct-info-leaderboard","start-button","blue-btn","black-outline"),g.innerHTML="Players",g.addEventListener("click",(()=>{Ea("events",t,"CTPlayer")})),h.appendChild(g);let L=document.createElement("div");L.classList.add("race-info-leaderboard","ct-info-leaderboard","start-button","blue-btn","black-outline"),L.innerHTML="Teams",L.addEventListener("click",(()=>{Ea("events",t,"CTTeam")})),h.appendChild(L);let v=document.createElement("div");v.classList.add("race-info-middle-div","ct-info-middle-div"),m.appendChild(v);let b=document.createElement("p");b.classList.add("race-info-total-scores","black-outline"),b.innerHTML=`Total Scores: ${0==t.totalScores_player?"No Data":t.totalScores_player.toLocaleString()}`,v.appendChild(b);let C=document.createElement("p");C.classList.add("race-info-total-scores","black-outline"),C.innerHTML=`Total Scores: ${0==t.totalScores_team?"No Data":t.totalScores_team.toLocaleString()}`,v.appendChild(C)}))}async function La(e){let t=document.getElementById("events-content");t.innerHTML="",await A();let a=Object.values(g).filter((t=>{switch(e){case"DailyChallenges":return t.name.startsWith("Standard");case"AdvancedDailyChallenges":return t.name.startsWith("Advanced");case"CoopDailyChallenges":return t.name.startsWith("coop")}})),d=new Date;"CoopDailyChallenges"==e&&(a=a.filter((e=>new Date(e.createdAt)<d)),a=a.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))));let l=0;if(Object.values(a).forEach(((a,d)=>{let n=a.name.match(/^(Standard|Advanced|coop)(?: (\d+))?: (.*)$/),s="",i="",o="";n&&(s=n[1]||null,i=n[2]||null,o=n[3]||null,null!=i&&i>l&&(l=i));let r=document.createElement("div");r.classList.add("race-div","event-challenge-div"),t.appendChild(r);let c=document.createElement("div");c.classList.add("race-map-div","silver-border"),r.appendChild(c);let p=document.createElement("img");p.classList.add("race-map-img"),p.src="./Assets/MapIcon/MapLoadingImage.webp",c.appendChild(p);let m=document.createElement("div");m.classList.add("race-challenge-icons"),c.appendChild(m);let u=document.createElement("p");u.classList.add("race-map-rounds","black-outline"),c.appendChild(u);let h=document.createElement("div");h.classList.add("race-info-div"),r.appendChild(h);let g=document.createElement("div");g.classList.add("challenge-info-top-div"),h.appendChild(g);let L=document.createElement("div");L.classList.add("challenge-info-left-right"),h.appendChild(L);let v=document.createElement("div");v.classList.add("challenge-info-middle-div"),L.appendChild(v);let b=document.createElement("div");b.classList.add("challenge-info-bottom-div"),L.appendChild(b);let C=document.createElement("p");C.classList.add("challenge-info-name","black-outline"),C.innerHTML="CoopDailyChallenges"==e?a.name.replace("coop - ",""):o,g.appendChild(C);let y=document.createElement("p");y.classList.add("challenge-date","black-outline"),y.innerHTML=`${new Date(a.createdAt).toLocaleDateString()}`,v.appendChild(y);let E=document.createElement("p");E.classList.add("challenge-date","black-outline"),E.innerHTML="CoopDailyChallenges"==e?"Coop":`${s} ${i}`,v.appendChild(E);let f=document.createElement("div");f.classList.add("challenge-info-rules","start-button","black-outline"),f.innerHTML="Details",f.addEventListener("click",(async()=>{st(),ba("events",await O(a.id),e)})),v.appendChild(f);let k=["Attempts","Wins","Fails","Unique Players","Victorious Players"],w=document.createElement("div");w.classList.add("challenge-stats-div"),b.appendChild(w);for(let e of k){let t=document.createElement("div");t.classList.add("challenge-stat"),w.appendChild(t);let d=document.createElement("p");d.classList.add("challenge-stat-key"),d.innerHTML=e,t.appendChild(d);let l=document.createElement("p");l.id=`${a.id}-${e}`,l.classList.add("challenge-stat-value"),l.innerHTML="Loading...",t.appendChild(l)}new IntersectionObserver(((t,d)=>{t.forEach((async t=>{if(t.isIntersecting){let l=await O(a.id);if(d.unobserve(t.target),null!=l){let t=Ca(l),d=ya(l);for(let e of Object.values(t)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,m.appendChild(t)}for(let t of d){if(console.log(t),"No Round 100 Reward"==t&&"AdvancedDailyChallenges"!=e)continue;if("Paragon Limit"==t)continue;let a=document.createElement("img");a.classList.add("challenge-rule-icon-event"),a.src=`./Assets/ChallengeRulesIcon/${Ke[t]}.webp`,m.appendChild(a)}p.src=Object.keys(we.mapsInOrder).includes(l.map)?ie(l.map):l.mapURL,u.innerHTML=`Rounds ${l.startRound}/${l.endRound}`,k={Attempts:l.plays+l.restarts,Wins:l.winsUnique,Fails:l.lossesUnique+l.restarts,"Unique Players":l.playsUnique,"Victorious Players":l.winsUnique};for(let[e,t]of Object.entries(k))document.getElementById(`${a.id}-${e}`).innerHTML=t.toLocaleString()}}}))})).observe(c)})),"DailyChallenges"==e||"AdvancedDailyChallenges"==e){let a=document.createElement("div");a.classList.add("race-div","event-select-challenge-div"),t.appendChild(a);let d=document.createElement("p");d.classList.add("challenge-select-info-name","black-outline"),d.innerHTML=`Older ${"DailyChallenges"==e?"Standard":"Advanced"} Challenges (Unstable)`,a.appendChild(d);let n=document.createElement("p");n.classList.add("challenge-info-desc"),n.innerHTML=`Select a challenge by entering a date or ID below. IDs can be no less than 1000, and the date cannot be earlier than ${"DailyChallenges"==e?new Date(Date.UTC(2021,4,7)).toISOString().split("T")[0]:new Date(Date.UTC(2021,4,20)).toISOString().split("T")[0]} for ${"DailyChallenges"==e?"Standard":"Advanced"} challenges.`,a.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-selectors"),a.appendChild(s);let i=document.createElement("div");i.classList.add("challenge-selector-date"),s.appendChild(i);let o=document.createElement("p");o.classList.add("challenge-selector-date-text","black-outline"),o.innerHTML="Date",i.appendChild(o);let r=document.createElement("input");r.classList.add("challenge-selector-date-input"),r.type="date",r.value=new Date(Date.now()).toISOString().split("T")[0],r.addEventListener("change",(()=>{new Date(r.value)>new Date&&(r.value=(new Date).toISOString().split("T")[0]),new Date(r.value)<new Date("DailyChallenges"==e?"2021-05-07":"2021-05-20")&&(r.value="DailyChallenges"==e?"2021-05-07":"2021-05-20")})),i.appendChild(r);let c=document.createElement("img");c.classList.add("challenge-selector-date-img"),c.src="../Assets/UI/ContinueBtn.webp",c.addEventListener("click",(async()=>{console.log(r.value),console.log(q(r.value),e),st(),ba("events",await O(q(r.value,"AdvancedDailyChallenges"==e)),e)})),i.appendChild(c);let p=document.createElement("p");p.classList.add("challenge-selector-or","black-outline"),p.innerHTML="OR",s.appendChild(p);let m=document.createElement("div");m.classList.add("challenge-selector-id"),s.appendChild(m);let u=document.createElement("p");u.classList.add("challenge-selector-id-text","black-outline"),u.innerHTML="Challenge ID",m.appendChild(u);let h=document.createElement("input");h.classList.add("challenge-selector-id-input"),h.type="number",h.min=1e3,h.max=l,h.value=l,h.addEventListener("change",(()=>{h.value<1e3&&(h.value=1e3),h.value>l&&(h.value=l)})),m.appendChild(h);let g=document.createElement("img");g.classList.add("challenge-selector-id-img"),g.src="../Assets/UI/ContinueBtn.webp",g.addEventListener("click",(async()=>{console.log(h.value),st(),ba("events",await O(_(h.value,"AdvancedDailyChallenges"==e)),e)})),m.appendChild(g)}}function va(e,t){let a={};return console.log(t),null==t&&("-1"!=e.leastCashUsed?a.scoringType="Least Cash":"-1"!=e.leastTiersUsed?a.scoringType="Least Tiers":a.scoringType=null,a["Random Seed"]=e.seed),a["Date Created"]=new Date(e.createdAt).toLocaleDateString(),a.ID=e.id,a.Creator=e.creator,a["Game Version"]=e.gameVersion,a.Stats={Plays:e.plays,Wins:e.wins,Losses:e.losses,Restarts:e.restarts,"Unique Plays":e.playsUnique,"Unique Wins":e.winsUnique,"Unique Losses":e.lossesUnique},a.Upvotes=e.upvotes,a["Player Completion Rate"]=0==e.playsUnique?"0%":e.winsUnique-e.playsUnique==0?"100%":`${(e.winsUnique/e.playsUnique*100).toFixed(2)}%`,a["Player Win Rate"]=0==e.playsUnique?"0%":`${(e.wins/(e.plays+e.restarts)*100).toFixed(2)}%`,a.statsValid=!1,"n/a"!=e.id&&(a.statsValid=!0),console.log(a),a}async function ba(e,t,a,d){if(null==t)return;document.getElementById("challenge-content").style.display="flex",document.getElementById("challenge-content").innerHTML="",document.getElementById(`${e}-content`).style.display="none",Ya(),console.log(d);let l=va(t);if("Boss"==a&&"GameTime"!=d.scoringType)switch(d.scoringType){case"LeastCash":l.scoringType="Least Cash";break;case"LeastTiers":l.scoringType="Least Tiers"}let n=document.createElement("div");n.classList.add("challenge-model"),document.getElementById("challenge-content").appendChild(n);let s=document.createElement("div");s.classList.add("challenge-model-header"),n.appendChild(s);let i=document.createElement("div");i.classList.add("challenge-model-header-icons"),s.appendChild(i);let o=document.createElement("img");o.classList.add("challenge-model-header-difficulty"),i.appendChild(o);let r=document.createElement("div");r.classList.add("challenge-model-header-texts"),s.appendChild(r);let c=document.createElement("p");c.classList.add("challenge-model-header-name","black-outline"),c.innerHTML=t.name,r.appendChild(c);let p=document.createElement("p");p.classList.add("challenge-model-header-mode-diff","black-outline"),p.innerHTML=`${t.difficulty} - ${ve("Mode "+t.mode)} ${null==l.scoringType?"":` - ${l.scoringType}`}`,r.appendChild(p);let m=document.createElement("div");m.classList.add("challenge-header-right-container"),s.appendChild(m);let u=document.createElement("div");u.classList.add("challenge-header-right-top"),m.appendChild(u);let h=document.createElement("img");h.classList.add("modal-close"),h.src="./Assets/UI/CloseBtn.webp",h.addEventListener("click",(()=>{ka(e)})),u.appendChild(h);let g=document.createElement("div");g.classList.add("challenge-header-right-bottom"),m.appendChild(g);let L=document.createElement("div");L.classList.add("challenge-model-top"),n.appendChild(L);let v=document.createElement("img");v.classList.add("challenge-model-map-icon","boss-border"),v.src=Object.keys(we.mapsInOrder).includes(t.map)?ie(t.map):t.mapURL,L.appendChild(v);let b=document.createElement("div");b.classList.add("challenge-model-settings"),L.appendChild(b);let C=document.createElement("div");C.classList.add("challenge-model-settings-left"),b.appendChild(C);let y=document.createElement("div");y.classList.add("challenge-model-settings-right"),b.appendChild(y);console.log(t),Object.entries({"Starting Cash":{icon:"CoinIcon",key:"startingCash"},"Start Round":{icon:"StartRoundIconSmall",key:"startRound"},"Starting Lives":{icon:"LivesIcon",key:"lives"},"End Round":{icon:"EndRoundIconSmall",key:"endRound"},"Max Lives":{icon:"LivesIcon",key:"maxLives"},"Max Monkeys":{icon:"MaxMonkeysIcon",key:"maxTowers"}}).forEach((([e,a],d)=>{let l=document.createElement("div");l.classList.add("challenge-setting"),d%2?y.appendChild(l):C.appendChild(l);let n=document.createElement("img");n.classList.add("challenge-setting-icon"),n.src=`./Assets/UI/${a.icon}.webp`,l.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-setting-texts"),l.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-setting-text","black-outline"),i.innerHTML=e+":",s.appendChild(i);let o=document.createElement("p");o.classList.add("challenge-setting-value","black-outline"),o.innerHTML=t[a.key],s.appendChild(o),"maxTowers"!=a.key||0!=t[a.key]&&9999!=t[a.key]||(o.innerHTML="Unlimited"),"maxLives"!=a.key&&"lives"!=a.key&&"startingCash"!=a.key&&"startRound"!=a.key&&"endRound"!=a.key||0!=t[a.key]||(o.innerHTML="Default")}));let E=document.createElement("div");E.classList.add("challenge-setting"),b.appendChild(E);let f=document.createElement("img");f.classList.add("challenge-setting-icon"),E.appendChild(f);let k=document.createElement("div");k.classList.add("challenge-setting-texts"),E.appendChild(k);let w=document.createElement("p");switch(w.classList.add("challenge-setting-text","black-outline"),k.appendChild(w),a){case"Race":o.src="./Assets/UI/EventRaceBtn.webp",w.innerHTML="Race Event",f.src="./Assets/UI/RaceIcon.webp",s.style.backgroundColor="#FFC300";break;case"Boss":o.src=`./Assets/BossIcon/${d.name}EventIcon.webp`,w.innerHTML=(d.elite?"Elite ":"")+"Boss Event",f.src=`./Assets/BossIcon/${d.name}Portrait${d.elite?"Elite":""}.webp`,c.innerHTML=`${d.elite?"Elite ":""}${d.name} ${d.eventNumber}`,s.style.background=d.elite?"linear-gradient(180deg, #401DB4, #A144E2)":"linear-gradient(180deg, #1882A5, #07A4CB)";break;case"Odyssey":o.src="./Assets/UI/OdysseyEventBtn.webp";break;case"ContestedTerritory":o.src="./Assets/UI/ContestedTerritoryEventBtn.webp";break;case"DailyChallenges":w.innerHTML="Daily Challenge",f.src="./Assets/UI/ChallengesIcon.webp",o.src="./Assets/UI/DailyChallengeBtn.webp",s.style.backgroundColor="rgb(70,148,213)";break;case"AdvancedDailyChallenges":w.innerHTML="Advanced Daily",f.src="./Assets/UI/ChallengesIcon.webp",o.src="./Assets/UI/DailyChallengeBtn.webp",s.style.backgroundColor="rgb(234,99,52)";break;case"CoopDailyChallenges":w.innerHTML="Coop Challenge",f.src="./Assets/UI/ChallengesIcon.webp",o.src="./Assets/UI/DailyChallengeBtn.webp",s.style.backgroundColor="rgb(255,150,0)";break;case"Custom":w.innerHTML="Custom Challenge",f.src="./Assets/UI/CustomChallenge.webp",o.src="./Assets/UI/CreateChallengeIcon.webp";let e=document.createElement("p");e.classList.add("challenge-id","black-outline"),e.innerHTML=t.id,e.addEventListener("click",(a=>{a.preventDefault(),a.stopPropagation(),Pa(t.id,e)})),g.appendChild(e);let a=document.createElement("img");a.classList.add("browser-copy-img"),a.src="../Assets/UI/CopyClipboardBtn.webp",a.addEventListener("click",(a=>{a.preventDefault(),a.stopPropagation(),Pa(t.id,e)})),g.appendChild(a);let l=document.createElement("img");l.classList.add("browser-go-img"),l.src="../Assets/UI/GoBtnSmall.webp",l.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),window.open(`btd6://Challenge/${t.id}`,"_blank")})),g.appendChild(l)}if(null!=l.scoringType){let e="Boss"==a;console.log(e);let d=document.createElement("div");d.classList.add("challenge-setting"),b.appendChild(d);let n=document.createElement("img");n.classList.add("challenge-setting-icon"),d.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-setting-texts"),d.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-setting-text","black-outline"),s.appendChild(i);let o=document.createElement("p");switch(o.classList.add("challenge-setting-value","black-outline"),o.innerHTML="ERROR",e||s.appendChild(o),l.scoringType){case"Least Cash":i.innerHTML=e?"Least Cash":"Least Cash:",n.src="./Assets/UI/LeastCashIconSmall.webp",o.innerHTML=t.leastCashUsed;break;case"Least Tiers":i.innerHTML=e?"Least Tiers":"Least Tiers:",n.src="./Assets/UI/LeastTiersIconSmall.webp",o.innerHTML=t.leastTiersUsed}}let M={},T={},B=!1;if(Object.entries(t._towers).forEach((([e,t])=>{0!=t.max&&("ChosenPrimaryHero"===t.tower&&0!=t.max&&(B=!0),t.isHero?M[t.tower]=t:T[t.tower]=t)})),console.log(M),console.log(T),console.log(B),B){let e=document.createElement("div");e.classList.add("challenge-tower-selector"),n.appendChild(e)}let I=document.createElement("div");if(I.classList.add("challenge-tower-selector"),n.appendChild(I),B){let e=document.createElement("div");e.classList.add("tower-selector-hero"),I.appendChild(e);let t=document.createElement("img");t.classList.add("hero-selector-img"),t.src="./Assets/UI/AllHeroesIcon.webp",e.appendChild(t)}else for(let[e,t]of Object.entries(we.heroesInOrder)){if(!M[e])continue;let t=document.createElement("div");t.id=e+"-selector",t.classList.add("tower-selector-hero");let a=document.createElement("img");a.id=e+"-selector-img",a.classList.add("hero-selector-img"),a.src=Z(e,"000"),t.appendChild(a),I.appendChild(t)}for(let[e,t]of Object.entries(we.towersInOrder)){if(!T[e])continue;let a=document.createElement("div");a.id=e+"-selector",a.classList.add(`tower-selector-${t.toLowerCase()}`),I.appendChild(a);let d=document.createElement("img");if(d.id=e+"-selector-img",d.classList.add("tower-selector-img"),d.src=Z(e,"000"),a.appendChild(d),0!=T[e].path1NumBlockedTiers||0!=T[e].path2NumBlockedTiers||0!=T[e].path3NumBlockedTiers){let t=document.createElement("p");t.classList.add("tower-selector-tiers","black-outline"),t.innerHTML=`${-1==T[e].path1NumBlockedTiers?"0":5-T[e].path1NumBlockedTiers}-${-1==T[e].path2NumBlockedTiers?"0":5-T[e].path2NumBlockedTiers}-${-1==T[e].path3NumBlockedTiers?"0":5-T[e].path3NumBlockedTiers}`,a.appendChild(t)}else if(T[e].hasOwnProperty("restrictParagon")&&T[e].restrictParagon){let e=document.createElement("p");e.classList.add("tower-selector-tiers","black-outline"),e.innerHTML="5-5-5",a.appendChild(e)}}let H=document.createElement("div");H.classList.add("challenge-model-columns"),n.appendChild(H);let S=document.createElement("div");S.classList.add("challenge-model-left"),H.appendChild(S);let $=document.createElement("div");$.classList.add("challenge-model-right"),H.appendChild($);let D=Ca(t),x=document.createElement("div");x.classList.add("challenge-modifiers-div"),S.appendChild(x);let P=document.createElement("p");P.classList.add("challenge-modifiers-header"),P.classList.add("black-outline"),P.innerHTML="Modifiers",x.appendChild(P),Object.entries(D).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("challenge-modifier"),x.appendChild(a);let d=document.createElement("img");d.classList.add("challenge-modifier-icon"),d.src=`./Assets/ChallengeRulesIcon/${t.icon}.webp`,a.appendChild(d);let l=document.createElement("div");l.classList.add("challenge-modifier-texts"),a.appendChild(l);let n=document.createElement("p");n.classList.add("challenge-modifier-text"),n.classList.add("black-outline"),n.innerHTML=`${e}:`,l.appendChild(n);let s=document.createElement("p");s.classList.add("challenge-modifier-value"),s.classList.add("black-outline"),s.innerHTML=isNaN(t.value)?t.value:`${(100*t.value).toFixed(0)}%`,l.appendChild(s)}));let A=ya(t),O=document.createElement("p");O.classList.add("challenge-rules-header"),O.classList.add("black-outline"),O.innerHTML="Rules",$.appendChild(O);let U=document.createElement("div");if(U.classList.add("challenge-rules-div"),$.appendChild(U),A.forEach((e=>{if("No Round 100 Reward"==e&&"AdvancedDailyChallenges"!=a)return;if("Paragon Limit"==e&&0==t.maxParagons&&"Boss"!=a)return;let d=document.createElement("div");d.classList.add("challenge-rule"),U.appendChild(d);let l=document.createElement("img");l.classList.add("challenge-modifier-icon"),l.src=`./Assets/ChallengeRulesIcon/${Ke[e]}.webp`,d.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-rule-text-div"),d.appendChild(n);let s=document.createElement("p");if(s.classList.add("challenge-rule-text"),s.classList.add("black-outline"),s.innerHTML=e,n.appendChild(s),"Paragon Limit"==e){let e=document.createElement("p");e.classList.add("challenge-rule-value"),e.classList.add("black-outline"),e.innerHTML=t.maxParagons,n.appendChild(e)}})),l.statsValid){let e=document.createElement("div");e.classList.add("challenge-model-stats-div"),e.style.display="none",n.appendChild(e);let t=document.createElement("p");t.classList.add("challenge-stats-header","black-outline"),t.innerHTML="Challenge Stats",e.appendChild(t);let a=document.createElement("div");a.classList.add("challenge-stats-left-right"),e.appendChild(a);let d=document.createElement("div");d.classList.add("challenge-stats-left"),a.appendChild(d);let s=document.createElement("div");if(s.classList.add("challenge-usv-div"),d.appendChild(s),0!=l.Upvotes){let e=document.createElement("div");e.classList.add("challenge-upvote-div"),s.appendChild(e);let t=document.createElement("img");t.classList.add("challenge-upvote-icon"),t.src="./Assets/UI/ChallengeThumbsUpIcon.webp",e.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-upvote-value"),a.innerHTML=l.Upvotes,e.appendChild(a)}let i=document.createElement("div");i.classList.add("challenge-trophy-div"),s.appendChild(i);let o=document.createElement("img");o.classList.add("challenge-trophy-icon"),o.src="./Assets/UI/ChallengeTrophyIcon.webp",i.appendChild(o);let r=document.createElement("p");r.classList.add("challenge-trophy-value"),r.innerHTML=l["Player Completion Rate"],i.appendChild(r);let c=document.createElement("div");c.classList.add("challenge-skull-div"),s.appendChild(c);let p=document.createElement("img");p.classList.add("challenge-skull-icon"),p.src="./Assets/UI/DeathRateIcon.webp",c.appendChild(p);let m=document.createElement("p");if(m.classList.add("challenge-skull-value"),m.innerHTML=l["Player Win Rate"],c.appendChild(m),"n/a"!=l.Creator&&null!=l.Creator){let e=document.createElement("div");e.classList.add("challenge-creator"),d.appendChild(e);let t=document.createElement("div");t.classList.add("avatar"),e.appendChild(t);let a=50,n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${a}px`,n.src="../Assets/UI/InstaTowersContainer.webp",t.appendChild(n);let s=document.createElement("img");s.classList.add("avatar-img","noSelect"),s.style.width=`${a}px`,s.src=he("ProfileAvatar01"),t.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-creator-name","black-outline"),i.innerHTML="Loading...",e.appendChild(i),await R(l.Creator).then((t=>{i.innerHTML=t.displayName,s.src=he(t.avatar),e.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${ge(t.banner)})`}))}["Date Created","Game Version","Random Seed"].forEach((e=>{if("Game Version"==e&&0==l[e])return;let t=document.createElement("div");t.classList.add("challenge-stat"),d.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-stat-label"),a.innerHTML=`${e}: ${l[e]}`,t.appendChild(a)}));let h=document.createElement("div");h.classList.add("challenge-stats-right"),a.appendChild(h),Object.entries(l.Stats).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("challenge-stat"),h.appendChild(a);let d=document.createElement("p");d.classList.add("challenge-stat-label"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.classList.add("challenge-model-stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}));let g=document.createElement("img");g.classList.add("challenge-stats-btn"),g.src="./Assets/UI/InfoBtn.webp",g.addEventListener("click",(()=>{e.style.display="none"==e.style.display?"flex":"none"})),u.appendChild(g)}}function Ca(e){let t={};return 1!=e._bloonModifiers.speedMultiplier&&(t["Bloon Speed"]={value:e._bloonModifiers.speedMultiplier,icon:e._bloonModifiers.speedMultiplier>1?"FasterBloonsIcon":"SlowerBloonsIcon"}),1!=e._bloonModifiers.moabSpeedMultiplier&&(t["MOAB Speed"]={value:e._bloonModifiers.moabSpeedMultiplier,icon:e._bloonModifiers.moabSpeedMultiplier>1?"FasterMoabIcon":"SlowerMoabIcon"}),e._bloonModifiers.hasOwnProperty("regrowRateMultiplier")&&1!=e._bloonModifiers.regrowRateMultiplier&&(t["Regrow Rate"]={value:e._bloonModifiers.regrowRateMultiplier,icon:e._bloonModifiers.regrowRateMultiplier>1?"RegrowRateIncreaseIcon":"RegrowRateDecreaseIcon"}),e.hasOwnProperty("abilityCooldownReductionMultiplier")&&1!=e.abilityCooldownReductionMultiplier&&(t["Ability Cooldown Rate"]={value:e.abilityCooldownReductionMultiplier,icon:e.abilityCooldownReductionMultiplier>1?"AbilityCooldownReductionIncreaseIcon":"AbilityCooldownReductionDecreaseIcon"}),1!=e.removeableCostMultiplier&&-1!=e.removeableCostMultiplier&&(t["Removeable Cost"]={value:0==e.removeableCostMultiplier?"Free":12==e.removeableCostMultiplier?"Disabled":e.removeableCostMultiplier,icon:e.removeableCostMultiplier>1?"RemovableCostIncreaseIcon":"RemovableCostDecreaseIcon"}),1!=e._bloonModifiers.healthMultipliers.bloons&&(t["Ceramic Health"]={value:e._bloonModifiers.healthMultipliers.bloons,icon:e._bloonModifiers.healthMultipliers.bloons>1?"CeramicIncreaseHPIcon.webp":"CeramicDecreaseHPIcon"}),1!=e._bloonModifiers.healthMultipliers.moabs&&(t["MOAB Health"]={value:e._bloonModifiers.healthMultipliers.moabs,icon:e._bloonModifiers.healthMultipliers.moabs>1?"MoabBoostIcon":"MOABDecreaseHPIcon"}),e._bloonModifiers.healthMultipliers.hasOwnProperty("boss")&&1!=e._bloonModifiers.healthMultipliers.boss&&(t["Boss Health"]={value:e._bloonModifiers.healthMultipliers.boss,icon:e._bloonModifiers.healthMultipliers.boss>1?"BossBoostIcon":"BossDecreaseHPIcon"}),e._bloonModifiers.hasOwnProperty("bossSpeedMultiplier")&&1!=e._bloonModifiers.bossSpeedMultiplier&&(t["Boss Speed"]={value:e._bloonModifiers.bossSpeedMultiplier,icon:e._bloonModifiers.bossSpeedMultiplier>1?"FasterBossIcon":"SlowerBossIcon"}),t}function ya(e){let t=[];return e.disableMK&&t.push("Monkey Knowledge Disabled"),1==e.lives&&t.push("No Lives Lost"),e.disableSelling&&t.push("Selling Disabled"),e.disablePowers&&t.push("Powers Disabled"),e.noContinues&&t.push("No Continues"),e._bloonModifiers.allCamo&&t.push("All Camo"),e._bloonModifiers.allRegen&&t.push("All Regrow"),e.disableDoubleCash&&t.push("Double Cash Disabled"),t.push("No Round 100 Reward"),(e.roundSets.includes("default")&&e.roundSets.length>1||1==e.roundSets.length&&"default"!=e.roundSets[0])&&t.push("Custom Rounds"),10!=e.maxParagons&&t.push("Paragon Limit"),t}function Ea(e,t,a){switch(a){case"Boss":i!=t.leaderboard_standard_players_1&&(o=1),i=t.leaderboard_standard_players_1;break;case"BossElite":i!=t.leaderboard_elite_players_1&&(o=1),i=t.leaderboard_elite_players_1;break;case"CTPlayer":i!=t.leaderboard_player&&(o=1),i=t.leaderboard_player;break;case"CTTeam":i!=t.leaderboard_team&&(o=1),i=t.leaderboard_team;break;default:i!=t.leaderboard&&(o=1),i=t.leaderboard}let d=document.getElementById("leaderboard-content");d.style.display="flex",d.innerHTML="",document.getElementById(`${e}-content`).style.display="none";let l=document.createElement("div");l.classList.add("leaderboard-div"),d.appendChild(l);let n=document.createElement("div");n.classList.add("leaderboard-top"),l.appendChild(n);let s=document.createElement("div");s.classList.add("leaderboard-header"),n.appendChild(s);let c=document.createElement("div");c.classList.add("leaderboard-header-left"),s.appendChild(c);let m=document.createElement("img");m.classList.add("modal-close"),m.src="./Assets/UI/CloseBtn.webp",m.addEventListener("click",(()=>{d.style.display="none",document.getElementById(`${e}-content`).style.display="flex"})),c.appendChild(m);let u=document.createElement("div");u.classList.add(`leaderboard-header-middle-${a.toLowerCase()}`),s.appendChild(u);let h=document.createElement("div");switch(h.classList.add(`leaderboard-header-${a.toLowerCase()}`,"black-outline"),u.appendChild(h),a){case"Race":h.innerHTML="Race Leaderboard";break;case"Boss":h.innerHTML="Boss Leaderboard";break;case"BossElite":h.innerHTML="Elite Boss Leaderboard";break;case"CTPlayer":h.innerHTML="Contested Territory <br> Player Leaderboard";break;case"CTTeam":h.innerHTML="Contested Territory <br> Team Leaderboard"}let g=document.createElement("div");g.classList.add("leaderboard-header-right"),s.appendChild(g);let L=document.createElement("div");L.classList.add("leaderboard-column-labels"),n.appendChild(L);let v=document.createElement("div");v.id="leaderboard-entries",v.classList.add("leaderboard-entries"),l.appendChild(v);let b=document.createElement("div");b.classList.add("leaderboard-footer"),l.appendChild(b);let C=document.createElement("div");C.classList.add("leaderboard-footer-left"),b.appendChild(C);let y=document.createElement("img");y.classList.add("leaderboard-footer-refresh"),y.src="./Assets/UI/RefreshBtn.webp",y.addEventListener("click",(()=>{p||(fa(t),y.style.filter="grayscale(1) brightness(0.5)",setTimeout((()=>{y.style.filter="none",p=!1}),1e4),p=!0)})),C.appendChild(y);let E=document.createElement("div");E.classList.add("leaderboard-footer-middle"),b.appendChild(E);let f=document.createElement("img");f.classList.add("leaderboard-footer-page-left","black-outline"),f.src="./Assets/UI/NextArrowSmallYellow.webp",E.appendChild(f);let k=document.createElement("div");k.id="leaderboard-footer-page-number",k.classList.add("leaderboard-footer-page-number","black-outline"),k.innerHTML="Loading...",E.appendChild(k);let w=document.createElement("img");w.classList.add("leaderboard-footer-page-right","black-outline"),w.src="./Assets/UI/NextArrowSmallYellow.webp",f.addEventListener("click",(()=>{o--,k.innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,v.innerHTML="",_a(v),fa(t)})),w.addEventListener("click",(()=>{o++,k.innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,v.innerHTML="",_a(v),fa(t)})),E.appendChild(w);let M=document.createElement("div");M.classList.add("leaderboard-footer-right"),b.appendChild(M);let T=document.createElement("input");T.classList.add("leaderboard-footer-page-input"),T.type="number",T.min="1",T.max=1e3/r,T.value=`${o}`,T.addEventListener("change",(()=>{T.value<1&&(T.value=1),T.value>1e3/r&&(T.value=1e3/r)})),M.appendChild(T);let B=document.createElement("img");B.classList.add("leaderboard-go-img"),B.src="../Assets/UI/ContinueBtn.webp",B.addEventListener("click",(()=>{o=T.value,k.innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,v.innerHTML="",_a(v),fa(t)})),M.appendChild(B),_a(v),fa(t,a)}async function fa(e,t){await S(),console.log(s);let a=document.getElementById("leaderboard-entries");if(a.innerHTML="",null!=s)s.forEach(((d,l)=>{let n={};d.hasOwnProperty("scoreParts")&&d.scoreParts.forEach(((e,t)=>{n[e.name]=e}));let s=document.createElement("div");s.classList.add("leaderboard-entry"),"CTTeam"!=t&&s.addEventListener("click",(()=>{Ma("leaderboard",d)})),a.appendChild(s);let i=document.createElement("div");i.classList.add("leaderboard-entry-div"),s.appendChild(i);let c=document.createElement("p");c.classList.add("leaderboard-entry-rank"),c.classList.add("black-outline"),c.innerHTML=l+(o-1)*r+1,i.appendChild(c);let p=document.createElement("div");p.classList.add("leaderboard-entry-player"),i.appendChild(p);let m=null,u=null,h=null;"CTTeam"==t?(m=document.createElement("div"),m.classList.add("leaderboard-entry-icon-ct"),p.appendChild(m),u=document.createElement("img"),u.classList.add("leaderboard-entry-frame"),u.src="./Assets/UI/TeamFrame1.webp",m.appendChild(u),h=document.createElement("img"),h.classList.add("leaderboard-entry-emblem"),h.src="./Assets/UI/TeamIcon1.webp",m.appendChild(h)):(m=document.createElement("img"),m.classList.add("leaderboard-entry-icon"),m.src="./Assets/ProfileAvatar/ProfileAvatar01.webp",p.appendChild(m));let g=document.createElement("p");g.classList.add("leaderboard-entry-name","leaderboard-outline"),g.innerHTML=d.displayName,p.appendChild(g);let L=document.createElement("div");L.classList.add("leaderboard-entry-time-submit-div"),i.appendChild(L);let v=document.createElement("div");v.classList.add("leaderboard-entry-score"),i.appendChild(v);let b=document.createElement("img");b.classList.add("leaderboard-entry-score-icon"),b.src="./Assets/UI/StopWatch.webp",v.appendChild(b);let C=document.createElement("p");if(C.classList.add("leaderboard-entry-main-score","leaderboard-outline"),v.appendChild(C),console.log(e),e.hasOwnProperty("leaderboard")&&e.leaderboard.includes("races")){let t=new Date(e.start+n["Time after event start"].score),a=document.createElement("p");a.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),a.innerHTML=t.toLocaleString(),L.appendChild(a);let l=document.createElement("p");l.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),l.innerHTML=Wa(new Date,t),L.appendChild(l),C.innerHTML=za(d.score)}if(e.hasOwnProperty("bossType"))switch(e.scoringType){case"GameTime":let t=new Date(e.start+n["Time after event start"].score),a=document.createElement("p");a.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),a.innerHTML=t.toLocaleString(),L.appendChild(a);let l=document.createElement("p");l.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),l.innerHTML=Wa(new Date,t),L.appendChild(l),C.innerHTML=za(d.score);break;case"LeastCash":C.innerHTML=d.score.toLocaleString(),b.src="./Assets/UI/LeastCashIconSmall.webp",b.classList.add("leaderboard-entry-score-icon-large");let s=document.createElement("div");s.classList.add("leaderboard-entry-game-time"),i.appendChild(s);let o=document.createElement("img");o.classList.add("leaderboard-entry-score-icon"),o.src="./Assets/UI/StopWatch.webp",s.appendChild(o);let r=document.createElement("p");r.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),r.innerHTML=za(n["Game Time"].score),s.appendChild(r);break;case"LeastTiers":C.innerHTML=d.score.toLocaleString(),b.src="./Assets/UI/LeastTiersIconSmall.webp",b.classList.add("leaderboard-entry-score-icon-large");let c=document.createElement("div");c.classList.add("leaderboard-entry-game-time"),i.appendChild(c);let p=document.createElement("img");p.classList.add("leaderboard-entry-score-icon"),p.src="./Assets/UI/StopWatch.webp",c.appendChild(p);let m=document.createElement("p");m.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),m.innerHTML=za(n["Game Time"].score),c.appendChild(m),v.classList.add("leaderboard-entry-score-tiers")}e.hasOwnProperty("tiles")&&(b.src="./Assets/UI/CtPointsIconSmall.webp",b.classList.add("leaderboard-entry-score-icon-large"),C.innerHTML=d.score.toLocaleString(),p.classList.add("leaderboard-entry-team")),new IntersectionObserver(((e,t)=>{e.forEach((async e=>{if(e.isIntersecting){let a=await R(d.profile);null!=a&&(console.log(a),a.hasOwnProperty("owner")?(u.src=a.frameURL,h.src=a.iconURL,i.style.backgroundImage=`url(${parseInt(a.banner.replace(/\D/g,""))<=we.profileBanners?ge(a.banner):a.bannerURL})`,t.unobserve(e.target)):(m.src=parseInt(a.avatar.replace(/\D/g,""))<=we.profileAvatars?he(a.avatar):a.avatarURL,i.style.backgroundImage=`url(${parseInt(a.banner.replace(/\D/g,""))<=we.profileBanners?ge(a.banner):a.bannerURL})`,t.unobserve(e.target)))}}))})).observe(m)}));else{let e=document.createElement("p");e.classList.add("no-data-found"),e.classList.add("black-outline"),e.style.width="250px",e.innerHTML="No Data Found",a.appendChild(e)}}function ka(e){document.getElementById("challenge-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}function wa(e){document.getElementById("map-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}async function Ma(e,t){if(null==(t=await R(t.profile)))return;Ya(),document.getElementById(`${e}-content`).style.display="none";let a=document.getElementById("publicprofile-content");a.style.display="flex",a.innerHTML="";let d=document.createElement("div");d.classList.add("publicprofile-div"),a.appendChild(d);let l=document.createElement("img");l.classList.add("error-modal-close"),l.src="./Assets/UI/CloseBtn.webp",l.addEventListener("click",(()=>{Ta(e)})),d.appendChild(l);let n=document.createElement("div");n.id="profile-header",n.classList.add("profile-header"),n.classList.add("profile-banner"),n.style.backgroundImage=`linear-gradient(to bottom, transparent 50%, var(--profile-primary) 70%),url('${t.bannerURL}')`,d.appendChild(n),n.appendChild(Ct(100,t.avatarURL));let s=document.createElement("div");s.id="profile-top-bottom",s.classList.add("profile-top-bottom"),n.appendChild(s);let i=document.createElement("div");i.id="profile-top",i.classList.add("profile-top-public"),s.appendChild(i);let o=document.createElement("p");o.id="profile-name",o.classList.add("profile-name"),o.classList.add("black-outline"),o.innerHTML=t.displayName,i.appendChild(o);let r=document.createElement("div");r.id="rank-star",r.classList.add("rank-star-public"),i.appendChild(r);let c=document.createElement("img");c.id="rank-img",c.classList.add("rank-img"),c.src="../Assets/UI/LvlHolder.webp",r.appendChild(c);let p=document.createElement("p");p.id="rank-text",p.classList.add("rank-text"),p.classList.add("black-outline"),p.innerHTML=t.rank,r.appendChild(p);let m=document.createElement("div");m.id="rank-star",m.classList.add("rank-star-public"),i.appendChild(m);let u=document.createElement("img");u.id="rank-img",u.classList.add("rank-img"),u.src="../Assets/UI/LvlHolderVeteran.webp",m.appendChild(u);let h=document.createElement("p");h.id="rank-text",h.classList.add("rank-text"),h.classList.add("black-outline"),h.innerHTML=t.veteranRank,m.appendChild(h);let g=document.createElement("div");g.classList.add("profile-followers"),i.appendChild(g);let L=document.createElement("p");L.classList.add("followers-label"),L.classList.add("black-outline"),L.innerHTML="Followers",g.appendChild(L);let v=document.createElement("p");v.classList.add("followers-count"),v.innerHTML=t.followers.toLocaleString(),g.appendChild(v);let b=document.createElement("div");b.id="below-profile-header",b.classList.add("below-profile-header"),d.appendChild(b);let C=document.createElement("div");C.id="left-column-div",C.classList.add("left-column-div"),b.appendChild(C);let y=document.createElement("div");y.id="left-column-header",y.classList.add("left-column-header"),C.appendChild(y);let E=document.createElement("p");E.id="left-column-header-text",E.classList.add("column-header-text"),E.classList.add("black-outline"),E.innerHTML="Medals",y.appendChild(E);let f={},k={};for(let[e,a]of Object.entries(X))f["Medal"+a]=t._medalsSinglePlayer[e]||0,k["MedalCoop"+a]=t._medalsMultiplayer[e]||0;f={...f,...k},f.PhayzeEliteBadge=t.bossBadgesElite.Phayze||0,f.PhayzeBadge=t.bossBadgesNormal.Phayze||0,f.DreadbloonEliteBadge=t.bossBadgesElite.Dreadbloon||0,f.DreadbloonBadge=t.bossBadgesNormal.Dreadbloon||0,f.VortexEliteBadge=t.bossBadgesElite.Vortex||0,f.VortexBadge=t.bossBadgesNormal.Vortex||0,f.LychEliteBadge=t.bossBadgesElite.Lych||0,f.LychBadge=t.bossBadgesNormal.Lych||0,f.BloonariusEliteBadge=t.bossBadgesElite.Bloonarius||0,f.BloonariusBadge=t.bossBadgesNormal.Bloonarius||0,f.MedalEventBronzeMedal=t._medalsRace.Bronze||0,f.MedalEventSilverMedal=t._medalsRace.Silver||0,f.MedalEventGoldSilverMedal=t._medalsRace.GoldSilver||0,f.MedalEventDoubleGoldMedal=t._medalsRace.DoubleGold||0,f.MedalEventGoldDiamondMedal=t._medalsRace.GoldDiamond||0,f.MedalEventRedDiamondMedal=t._medalsRace.RedDiamond||0,f.MedalEventBlackDiamondMedal=t._medalsRace.BlackDiamond||0,f.OdysseyStarIcon=t.gameplay.totalOdysseyStars||0,f.BossMedalEventBronzeMedal=t._medalsBoss.Bronze||0,f.BossMedalEventSilverMedal=t._medalsBoss.Silver||0,f.BossMedalEventDoubleSilverMedal=t._medalsBoss.DoubleSilver||0,f.BossMedalEventGoldSilverMedal=t._medalsBoss.GoldSilver||0,f.BossMedalEventDoubleGoldMedal=t._medalsBoss.DoubleGold||0,f.BossMedalEventGoldDiamondMedal=t._medalsBoss.GoldDiamond||0,f.BossMedalEventDiamondMedal=t._medalsBoss.Diamond||0,f.BossMedalEventRedDiamondMedal=t._medalsBoss.RedDiamond||0,f.BossMedalEventBlackDiamondMedal=t._medalsBoss.BlackDiamond||0,f.EliteBossMedalEventBronzeMedal=t._medalsBossElite.Bronze||0,f.EliteBossMedalEventSilverMedal=t._medalsBossElite.Silver||0,f.EliteBossMedalEventDoubleSilverMedal=t._medalsBossElite.DoubleSilver||0,f.EliteBossMedalEventGoldSilverMedal=t._medalsBossElite.GoldSilver||0,f.EliteBossMedalEventDoubleGoldMedal=t._medalsBossElite.DoubleGold||0,f.EliteBossMedalEventGoldDiamondMedal=t._medalsBossElite.GoldDiamond||0,f.EliteBossMedalEventDiamondMedal=t._medalsBossElite.Diamond||0,f.EliteBossMedalEventRedDiamondMedal=t._medalsBossElite.RedDiamond||0,f.EliteBossMedalEventBlackDiamondMedal=t._medalsBossElite.BlackDiamond||0,f.CtLocalPlayerBronzeMedal=t._medalsCTLocal.Bronze||0,f.CtLocalPlayerSilverMedal=t._medalsCTLocal.Silver||0,f.CtLocalPlayerDoubleGoldMedal=t._medalsCTLocal.DoubleGold||0,f.CtLocalPlayerDiamondMedal=t._medalsCTLocal.Diamond||0,f.CtLocalPlayerRedDiamondMedal=t._medalsCTLocal.RedDiamond||0,f.CtLocalPlayerBlackDiamondMedal=t._medalsCTLocal.BlackDiamond||0,f.CtGlobalPlayerBronzeMedal=t._medalsCTGlobal.Bronze||0,f.CtGlobalPlayerSilverMedal=t._medalsCTGlobal.Silver||0,f.CtGlobalPlayerDoubleSilverMedal=t._medalsCTGlobal.DoubleSilver||0,f.CtGlobalPlayerGoldSilverMedal=t._medalsCTGlobal.GoldSilver||0,f.CtGlobalPlayerDoubleGoldMedal=t._medalsCTGlobal.DoubleGold||0,f.CtGlobalPlayerGoldDiamondMedal=t._medalsCTGlobal.GoldDiamond||0,f.CtGlobalPlayerDiamondMedal=t._medalsCTGlobal.Diamond||0;let w=document.createElement("div");w.id="currency-medals-div",w.classList.add("currency-medals-div"),C.appendChild(w);let M=document.createElement("div");M.id="medals-div",M.classList.add("medals-div"),w.appendChild(M);for(let[e,t]of Object.entries(f)){if(0===t)continue;let a=document.createElement("div");a.id="medal-div",a.classList.add("medal-div"),M.appendChild(a);let d=document.createElement("img");d.id="medal-img",d.classList.add("medal-img"),d.src=pe(e),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Xa(3,70,256,0,d.width)}px`:d.style.height=`${Xa(3,70,256,0,d.height)}px`,d.style.removeProperty("display")})),a.appendChild(d);let l=document.createElement("p");l.id="medal-text",l.classList.add("medal-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}let T=document.createElement("div");T.id="top-heroes-monkeys-div",T.classList.add("top-heroes-monkeys-div"),C.appendChild(T);let B=document.createElement("div");B.id="top-heroes-div",B.classList.add("top-heroes-div"),T.appendChild(B);let I=document.createElement("div");I.id="top-heroes-top-div",I.classList.add("top-heroes-top-div"),B.appendChild(I);let H=document.createElement("div");H.id="top-heroes-top-div",H.classList.add("top-heroes-top-ribbon-div"),I.appendChild(H);let S=document.createElement("p");S.id="top-heroes-text",S.classList.add("top-heroes-text"),S.classList.add("black-outline"),S.innerHTML="Top Heroes",H.appendChild(S);let $=document.createElement("div");$.id="maps-progress-coop-toggle",$.classList.add("maps-progress-coop-toggle"),I.appendChild($);let D=document.createElement("p");D.id="maps-progress-coop-toggle-text",D.classList.add("maps-progress-coop-toggle-text"),D.classList.add("black-outline"),D.innerHTML="Show All: ",$.appendChild(D);let x=document.createElement("input");x.classList.add("maps-progress-coop-toggle-input"),x.type="checkbox",x.addEventListener("change",(()=>{x.checked?document.getElementById("other-heroes-div-public").style.display="flex":document.getElementById("other-heroes-div-public").style.display="none"})),$.appendChild(x);let P=document.createElement("div");P.id="top-heroes-list",P.classList.add("top-heroes-list"),B.appendChild(P);let A=document.createElement("div");A.id="top-3-heroes-div",A.classList.add("top-3-heroes-div"),P.appendChild(A);let O=document.createElement("div");O.id="other-heroes-div-public",O.classList.add("other-heroes-div"),O.style.display="none",P.appendChild(O);let U=0;for(let[e,a]of Object.entries(t.heroesPlaced).sort(((e,t)=>t[1]-e[1]))){let t=document.createElement("div");t.id="hero-div",t.classList.add("hero-div"),U<3?A.appendChild(t):O.appendChild(t);let d=document.createElement("img");d.id="hero-img",d.classList.add("hero-img"),d.src=de(e,1),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Xa(3,150,1920,0,d.width)}px`:d.style.height=`${Xa(3,150,1920,0,d.height)}px`,d.style.removeProperty("display")})),t.appendChild(d);let l=document.createElement("p");l.id="hero-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),U++}let G=document.createElement("div");G.id="top-towers-div",G.classList.add("top-heroes-div"),T.appendChild(G);let N=document.createElement("div");N.id="top-towers-top-div",N.classList.add("top-heroes-top-div"),G.appendChild(N);let j=document.createElement("div");j.id="top-towers-top-div",j.classList.add("top-heroes-top-ribbon-div"),N.appendChild(j);let _=document.createElement("p");_.id="top-towers-text",_.classList.add("top-heroes-text"),_.classList.add("black-outline"),_.innerHTML="Top Towers",j.appendChild(_);let q=document.createElement("div");q.id="maps-progress-coop-toggle",q.classList.add("maps-progress-coop-toggle"),N.appendChild(q);let z=document.createElement("p");z.id="maps-progress-coop-toggle-text",z.classList.add("maps-progress-coop-toggle-text"),z.classList.add("black-outline"),z.innerHTML="Show All: ",q.appendChild(z);let K=document.createElement("input");K.classList.add("maps-progress-coop-toggle-input"),K.type="checkbox",K.addEventListener("change",(()=>{K.checked?document.getElementById("other-towers-div-public").style.display="flex":document.getElementById("other-towers-div-public").style.display="none"})),q.appendChild(K);let F=document.createElement("div");F.id="top-towers-list",F.classList.add("top-heroes-list"),G.appendChild(F);let W=document.createElement("div");W.id="top-3-towers-div",W.classList.add("top-3-heroes-div"),F.appendChild(W);let V=document.createElement("div");V.id="other-towers-div-public",V.classList.add("other-heroes-div"),V.style.display="none",F.appendChild(V),U=0;for(let[e,a]of Object.entries(t.towersPlaced).sort(((e,t)=>t[1]-e[1]))){let t=document.createElement("div");t.id="tower-div",t.classList.add("hero-div"),U<3?W.appendChild(t):V.appendChild(t);let d=document.createElement("img");d.id="tower-img",d.classList.add("hero-img"),d.src=Z(e,"000"),t.appendChild(d);let l=document.createElement("p");l.id="tower-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),U++}let Y=document.createElement("div");Y.id="right-column-div",Y.classList.add("right-column-div"),b.appendChild(Y);let J=document.createElement("div");J.id="right-column-header",J.classList.add("right-column-header"),Y.appendChild(J);let Q=document.createElement("p");Q.id="right-column-header-text",Q.classList.add("column-header-text"),Q.classList.add("black-outline"),Q.innerHTML="Overall Stats",J.appendChild(Q);let ee={};ee["Games Played"]=t.gameplay.gameCount,ee["Games Won"]=t.gameplay.gamesWon,ee["Highest Round (All Time)"]=t.gameplay.highestRound,ee["Highest Round (CHIMPS)"]=t.gameplay.highestRoundCHIMPS,ee["Highest Round (Deflation)"]=t.gameplay.highestRoundDeflation,ee["Monkeys Placed"]=t.gameplay.monkeysPlaced,ee["Total Pop Count"]=t.bloonsPopped.bloonsPopped,ee["Total Co-Op Pop Count"]=t.bloonsPopped.coopBloonsPopped,ee["Camo Bloons Popped"]=t.bloonsPopped.camosPopped,ee["Lead Bloons Popped"]=t.bloonsPopped.leadsPopped,ee["Purple Bloons Popped"]=t.bloonsPopped.purplesPopped,ee["Regrow Bloons Popped"]=t.bloonsPopped.regrowsPopped,ee["Ceramic Bloons Popped"]=t.bloonsPopped.ceramicsPopped,ee["MOABs Popped"]=t.bloonsPopped.moabsPopped,ee["BFBs Popped"]=t.bloonsPopped.bfbsPopped,ee["ZOMGs Popped"]=t.bloonsPopped.zomgsPopped,ee["DDTs Popped"]=t.bloonsPopped.ddtsPopped,ee["BADs Popped"]=t.bloonsPopped.badsPopped,ee["Bloons Leaked"]=t.bloonsPopped.bloonsLeaked,ee["Cash Generated"]=t.gameplay.cashEarned,ee["Cash Gifted"]=t.gameplay.coopCashGiven,ee["Abilities Used"]=t.gameplay.abilitiesUsed,ee["Powers Used"]=t.gameplay.powersUsed,ee["Insta Monkeys Used"]=t.gameplay.instaMonkeysUsed,ee["Daily Reward Chests Opened"]=t.gameplay.dailyRewards,ee["Challenges Completed"]=t.gameplay.challengesCompleted,ee.Achievements=`${t.achievements}/150`,ee["Odysseys Completed"]=t.gameplay.totalOdysseysCompleted,ee["Lifetime Trophies"]=t.gameplay.totalTrophiesEarned,ee["Necro Bloons Reanimated"]=t.bloonsPopped.necroBloonsReanimated,ee["Transforming Tonics Used"]=t.bloonsPopped.transformingTonicsUsed,ee["Most Experienced Monkey"]=ve(t.mostExperiencedMonkey),ee["Insta Monkey Collection"]=`${t.gameplay.instaMonkeyCollection}/${we.totalInstaMonkeys}`,ee["Collection Chests Opened"]=t.gameplay.collectionChestsOpened,ee["Golden Bloons Popped"]=t.bloonsPopped.goldenBloonsPopped,ee["Monkey Teams Wins"]=t.gameplay.monkeyTeamsWins,ee["Bosses Popped"]=t.bloonsPopped.bossesPopped,ee["Damage Done To Bosses"]=t.gameplay.damageDoneToBosses;let te=document.createElement("div");te.id="profile-stats",te.classList.add("profile-stats"),Y.appendChild(te);for(let[e,t]of Object.entries(ee)){let a=document.createElement("div");a.id="stat",a.classList.add("stat"),te.appendChild(a);let d=document.createElement("p");d.id="stat-name",d.classList.add("stat-name"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.id="stat-value",l.classList.add("stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}}function Ta(e){document.getElementById("publicprofile-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}async function Ba(e,t,a){console.log(t);let d=await P(t);if(console.log(d),null==d)return;document.getElementById(`${e}-content`).style.display="none";let l=document.getElementById("relics-content");l.style.display="flex",l.innerHTML="";let n=document.createElement("div");n.classList.add("relic-container"),l.appendChild(n),Ya();let s=document.createElement("div");s.classList.add("relic-header"),n.appendChild(s);let i=document.createElement("div");i.classList.add("relic-header-views"),s.appendChild(i);let o=document.createElement("div");o.classList.add("maps-progress-view","black-outline","stats-tab-yellow"),o.innerHTML="List",i.appendChild(o);let r=document.createElement("div");r.classList.add("maps-progress-view","black-outline"),r.innerHTML="Tile",i.appendChild(r),o.addEventListener("click",(()=>{o.classList.add("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),document.querySelectorAll(".relic-text-div").forEach((e=>{e.classList.contains("relic-tile-view")&&e.classList.remove("relic-tile-view")}))})),r.addEventListener("click",(()=>{r.classList.add("stats-tab-yellow"),o.classList.remove("stats-tab-yellow"),document.querySelectorAll(".relic-text-div").forEach((e=>{e.classList.contains("relic-tile-view")||e.classList.add("relic-tile-view")}))}));let c=document.createElement("p");c.classList.add("relic-header-title","black-outline"),c.innerHTML=`Contested Territory<br>${a}`,s.appendChild(c);let p=document.createElement("div");p.classList.add("relic-header-right"),s.appendChild(p);let m=document.createElement("img");m.classList.add("modal-close"),m.src="./Assets/UI/CloseBtn.webp",m.addEventListener("click",(()=>{l.style.display="none",document.getElementById(`${e}-content`).style.display="flex"})),p.appendChild(m);let u=d.tiles.filter((e=>e.type.includes("Relic")));console.log(u),u.sort(((e,t)=>e.id.localeCompare(t.id))),console.log(u);let h=document.createElement("div");h.classList.add("relics-div"),n.appendChild(h),u.forEach((e=>{let t=e.type.split(" ")[2];console.log(t);let a=document.createElement("div");switch(a.classList.add("relic-div"),h.appendChild(a),e.id.charAt(0)){case"A":a.style.backgroundColor="#9C55E4";break;case"B":a.style.backgroundColor="#E978AA";break;case"C":a.style.backgroundColor="#00DD6B";break;case"D":a.style.backgroundColor="#04A6F3";break;case"E":a.style.backgroundColor="#F7D302";break;case"F":a.style.backgroundColor="#F4413F";break;case"M":a.style.backgroundColor="#B9E546"}let d=document.createElement("p");d.classList.add("relic-id"),d.innerHTML=e.id,a.appendChild(d);let l=document.createElement("img");l.classList.add("relic-icon"),l.src=`./Assets/RelicIcon/${t}.webp`,a.appendChild(l);let n=document.createElement("div");n.classList.add("relic-text-div"),a.appendChild(n);let s=document.createElement("p");s.classList.add("relic-name"),s.classList.add("black-outline"),s.innerHTML=ve(`Relic${t}`),n.appendChild(s);let i=document.createElement("p");i.classList.add("relic-description"),i.innerHTML=ve(`Relic${t}Description`),n.appendChild(i)}))}function Ia(){let e=document.getElementById("explore-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("progress-page"),e.appendChild(t);let a=document.createElement("div");a.classList.add("selectors-div"),t.appendChild(a);["Challenge Browser","Map Browser"].forEach((t=>{let d=document.createElement("div");d.id=t.toLowerCase()+"-div",d.classList.add("selector-div","blueprint-bg"),d.addEventListener("click",(()=>{e.style.display="none",document.getElementById("browser-content").style.display="flex",Ha(t)})),a.appendChild(d);let l=document.createElement("img");switch(l.id=t.toLowerCase()+"-img",l.classList.add("selector-img"),d.appendChild(l),t){case"Challenge Browser":l.src="../Assets/UI/PatchNotesMonkeyIcon.webp";break;case"Map Browser":l.src="../Assets/UI/MapEditorBtn.webp"}let n=document.createElement("p");n.id=t.toLowerCase()+"-text",n.classList.add("selector-text","black-outline"),n.innerHTML=t,d.appendChild(n);let s=document.createElement("img");s.id=t.toLowerCase()+"-go-img",s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",d.appendChild(s)}))}function Ha(e){switch(Ya(),We="Grid",e){case"Challenge Browser":b="https://data.ninjakiwi.com/btd6/challenges/filter/";break;case"Map Browser":b="https://data.ninjakiwi.com/btd6/maps/filter/"}Sa(e)}function Sa(e){let t=document.getElementById("browser-content");t.innerHTML="";let a=document.createElement("div");a.classList.add("browser-div"),t.appendChild(a);let d=document.createElement("div");d.classList.add("maps-progress-header-bar","browser-header-bar"),a.appendChild(d);let l=document.createElement("div");l.classList.add("map-progress-header-top"),d.appendChild(l);let n=document.createElement("p");n.classList.add("browser-header-title","black-outline"),n.innerHTML=e,l.appendChild(n);let s=document.createElement("p");s.classList.add("browser-header-desc"),s.innerHTML="Only 100 entries (4 pages) are available on the API. You can enter a specific ID at the bottom right",l.appendChild(s);let i=document.createElement("div");i.classList.add("map-progress-header-bottom"),d.appendChild(i);let o=document.createElement("div");o.id="maps-progress-views",o.classList.add("maps-progress-views"),i.appendChild(o);let r=document.createElement("p");r.id="maps-progress-views-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Display Type:",o.appendChild(r);let c=document.createElement("div");c.id="maps-progress-filter",c.classList.add("maps-progress-filter"),d.appendChild(c);let m=document.createElement("div");m.id="map-progress-filter-difficulty",m.classList.add("map-progress-filter-difficulty"),c.appendChild(m);let u=document.createElement("p");u.id="maps-progress-filter-difficulty-text",u.classList.add("maps-progress-coop-toggle-text"),u.classList.add("black-outline"),u.innerHTML="Category Type:",m.appendChild(u);let h=document.createElement("select");h.id="map-progress-filter-difficulty-select",h.classList.add("map-progress-filter-difficulty-select"),h.addEventListener("change",(()=>{$a(e,h.value)})),m.appendChild(h);let g=document.createElement("div");g.id="browser-entries",a.appendChild(g);let L=document.createElement("div");L.classList.add("browser-footer"),a.appendChild(L);let v=document.createElement("div");v.classList.add("leaderboard-footer-left","browser-footer-left"),L.appendChild(v);let b=document.createElement("img");b.classList.add("leaderboard-footer-refresh"),b.src="./Assets/UI/RefreshBtn.webp",b.addEventListener("click",(()=>{p||(f=!0,Da(e),b.style.filter="grayscale(1) brightness(0.5)",setTimeout((()=>{b.style.filter="none",p=!1}),1e4),p=!0)})),v.appendChild(b);let y=document.createElement("div");y.classList.add("leaderboard-footer-middle","browser-footer-middle"),L.appendChild(y);let E=document.createElement("img");E.classList.add("leaderboard-footer-page-left","black-outline"),E.src="./Assets/UI/NextArrowSmallYellow.webp",y.appendChild(E);let k=document.createElement("div");k.id="browser-footer-page-number",k.classList.add("leaderboard-footer-page-number","black-outline"),k.innerHTML="Loading...",y.appendChild(k);let w=document.createElement("img");w.classList.add("leaderboard-footer-page-right","black-outline"),w.src="./Assets/UI/NextArrowSmallYellow.webp",E.addEventListener("click",(()=>{C<=1||(C--,k.innerHTML=`Page ${C} of 4`,g.innerHTML="",_a(g),Da(e))})),w.addEventListener("click",(()=>{C>=4||(C++,k.innerHTML=`Page ${C} of 4`,g.innerHTML="",_a(g),Da(e))})),y.appendChild(w);let M=document.createElement("div");M.classList.add("leaderboard-footer-right","browser-footer-right"),L.appendChild(M);let T=document.createElement("p");T.classList.add("leaderboard-footer-goto","black-outline"),T.innerHTML="ID:",M.appendChild(T);let B=document.createElement("input");B.classList.add("leaderboard-footer-page-input","browser-footer-input"),B.type="text",B.value="Map Browser"==e?"ZMYXDVU":"ZMGVLCF",M.appendChild(B);let I=document.createElement("img");switch(I.classList.add("leaderboard-go-img"),I.src="../Assets/UI/ContinueBtn.webp",I.addEventListener("click",(async()=>{st(),"Map Browser"==e?Oa("browser",await G(B.value)):ba("browser",await O(B.value),"Custom")})),M.appendChild(I),e){case"Challenge Browser":let t=document.createElement("div");t.id="maps-progress-grid",t.classList.add("maps-progress-view"),t.classList.add("black-outline"),t.classList.add("maps-progress-view-selected"),t.innerHTML="Grid",t.addEventListener("click",(()=>{We="Grid",Da(e)})),o.appendChild(t);let a=document.createElement("div");a.id="maps-progress-game",a.classList.add("maps-progress-view"),a.classList.add("black-outline"),a.innerHTML="List",a.addEventListener("click",(()=>{We="List",Da(e)})),o.appendChild(a),["Featured","Newest"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,h.appendChild(t)})),$a(e,"Featured");break;case"Map Browser":let d=document.createElement("div");d.id="maps-progress-game",d.classList.add("maps-progress-view","black-outline"),d.innerHTML="Grid",d.addEventListener("click",(()=>{We="Grid",Da(e)})),o.appendChild(d);let l=document.createElement("div");l.id="maps-progress-gallery",l.classList.add("maps-progress-view","black-outline"),l.innerHTML="Gallery",l.addEventListener("click",(()=>{We="Gallery",Da(e)})),o.appendChild(l),["Most Liked","Trending","Newest"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,h.appendChild(t)})),$a(e,"Most Liked")}g.classList.add("challenge-card-entries"),_a(g)}function $a(e,t){switch(t){case"Newest":E="newest";break;case"Featured":case"Trending":E="trending";break;case"Most Liked":E="mostLiked"}C=1,Da(e)}async function Da(e){await U(),console.log(v);let t=document.getElementById("browser-entries");if(t.innerHTML="",null!=v)switch(e){case"Challenge Browser":xa(t);break;case"Map Browser":Aa(t)}else{let e=document.createElement("p");e.classList.add("no-data-found"),e.classList.add("black-outline"),e.style.width="250px",e.innerHTML="No Data Found",t.appendChild(e)}}function xa(e){v.forEach((async(t,a)=>{let d=document.createElement("div");switch(d.addEventListener("click",(async()=>{st(),ba("browser",await O(t.id),"Custom")})),e.appendChild(d),We){case"Grid":d.classList.add("challenge-entry");let e=document.createElement("div");e.classList.add("challenge-top"),d.appendChild(e);let a=document.createElement("p");a.classList.add("challenge-name","black-outline"),a.innerHTML=t.name,t.name.length>30&&(a.style.fontSize="18px"),e.appendChild(a);let l=document.createElement("div");l.classList.add("challenge-middle"),d.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-left"),l.appendChild(n);let s=document.createElement("div");s.classList.add("race-map-div","silver-border"),n.appendChild(s);let i=document.createElement("img");i.classList.add("race-map-img"),i.src="./Assets/MapIcon/MapLoadingImage.webp",s.appendChild(i);let o=document.createElement("div");o.classList.add("race-challenge-icons"),s.appendChild(o);let r=document.createElement("p");r.classList.add("race-map-rounds","black-outline"),s.appendChild(r);let c=document.createElement("div");c.classList.add("browser-usv-div"),l.appendChild(c);let p=document.createElement("div");p.classList.add("challenge-upvote-div"),c.appendChild(p);let m=document.createElement("img");m.classList.add("browser-upvote-icon"),m.src="./Assets/UI/ChallengeThumbsUpIcon.webp",p.appendChild(m);let u=document.createElement("p");u.classList.add("browser-upvote-value"),u.innerHTML=0,p.appendChild(u);let h=document.createElement("div");h.classList.add("challenge-trophy-div"),c.appendChild(h);let g=document.createElement("img");g.classList.add("browser-trophy-icon"),g.src="./Assets/UI/ChallengeTrophyIcon.webp",h.appendChild(g);let L=document.createElement("p");L.classList.add("browser-trophy-value"),L.innerHTML=0,h.appendChild(L);let v=document.createElement("div");v.classList.add("challenge-skull-div"),c.appendChild(v);let b=document.createElement("img");b.classList.add("browser-skull-icon"),b.src="./Assets/UI/DeathRateIcon.webp",v.appendChild(b);let C=document.createElement("p");C.classList.add("browser-skull-value"),C.innerHTML=0,v.appendChild(C);let y=document.createElement("div");y.classList.add("challenge-bottom"),d.appendChild(y);let E=document.createElement("div");E.classList.add("challenge-creator"),y.appendChild(E);let f=document.createElement("div");f.classList.add("avatar"),E.appendChild(f);let k=50,w=document.createElement("img");w.classList.add("avatar-frame","noSelect"),w.style.width=`${k}px`,w.src="../Assets/UI/InstaTowersContainer.webp",f.appendChild(w);let M=document.createElement("img");M.classList.add("avatar-img","noSelect"),M.style.width=`${k}px`,M.src=he("ProfileAvatar01"),f.appendChild(M);let T=document.createElement("p");T.classList.add("browser-creator-name","black-outline"),T.innerHTML="Loading...",E.appendChild(T);let B=document.createElement("div");B.classList.add("challenge-id-and-play"),y.appendChild(B);let I=document.createElement("p");I.classList.add("browser-id","black-outline"),I.innerHTML=t.id,I.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,I)})),B.appendChild(I);let H=document.createElement("img");H.classList.add("browser-copy-img"),H.src="../Assets/UI/CopyClipboardBtn.webp",H.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,I)})),B.appendChild(H);let S=document.createElement("img");S.classList.add("browser-go-img"),S.src="../Assets/UI/GoBtnSmall.webp",S.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),window.open(`btd6://Challenge/${t.id}`,"_blank")})),B.appendChild(S),new IntersectionObserver(((e,a)=>{e.forEach((async e=>{if(e.isIntersecting){a.unobserve(e.target);let d=await O(t.id);if(null==d)return;console.log(d),i.src=d.mapURL;let l=Ca(d),n=ya(d);for(let e of Object.values(l)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,o.appendChild(t)}for(let e of n){if("No Round 100 Reward"==e)continue;if("Paragon Limit"==e)continue;let t=document.createElement("img");t.classList.add("challenge-rule-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${Ke[e]}.webp`,o.appendChild(t)}r.innerHTML=`Rounds ${0==d.startRound?we.startRound[d.difficulty]:d.startRound}/${0==d.endRound?we.endRound[d.difficulty]:d.endRound}`,u.innerHTML=d.upvotes.toLocaleString(),L.innerHTML=0==d.playsUnique||d.winsUnique-d.playsUnique==0?"0%":`${(d.winsUnique/d.playsUnique*100).toFixed(2)}%`,C.innerHTML=0==d.playsUnique?"0%":`${(d.wins/(d.plays+d.restarts)*100).toFixed(2)}%`;let s=await R(d.creator);if(null==s)return;T.innerHTML=s.displayName,s.displayName.length>13&&(T.style.fontSize="17px"),M.src=he(s.avatar),y.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${ge(s.banner)})`}}))})).observe(d);break;case"List":d.classList.add("browser-list-entry");let $=document.createElement("img");$.classList.add("browser-list-map-img"),$.src="./Assets/MapIcon/MapLoadingImage.webp",d.appendChild($);let D=document.createElement("div");D.classList.add("browser-top-bottom"),d.appendChild(D);let x=document.createElement("div");x.classList.add("browser-list-entry-top"),D.appendChild(x);let P=document.createElement("div");P.classList.add("browser-list-entry-bottom"),D.appendChild(P);let A=document.createElement("p");A.classList.add("challenge-name","browser-list-name","black-outline"),A.innerHTML=t.name,t.name.length>30&&(A.style.fontSize="18px"),x.appendChild(A);let U=document.createElement("div");U.classList.add("challenge-creator","browser-challenge-creator"),x.appendChild(U);let G=document.createElement("div");G.classList.add("avatar"),U.appendChild(G);let N=45,j=document.createElement("img");j.classList.add("avatar-frame","noSelect"),j.style.width=`${N}px`,j.src="../Assets/UI/InstaTowersContainer.webp",G.appendChild(j);let _=document.createElement("img");_.classList.add("avatar-img","noSelect"),_.style.width=`${N}px`,_.src=he("ProfileAvatar01"),G.appendChild(_);let q=document.createElement("p");q.classList.add("browser-creator-name","black-outline"),q.innerHTML="Loading...",U.appendChild(q);let z=document.createElement("div");z.classList.add("browser-usv-list-div"),P.appendChild(z);let K=document.createElement("div");K.classList.add("challenge-upvote-div"),z.appendChild(K);let F=document.createElement("img");F.classList.add("browser-upvote-icon"),F.src="./Assets/UI/ChallengeThumbsUpIcon.webp",K.appendChild(F);let W=document.createElement("p");W.classList.add("browser-upvote-value"),W.innerHTML=0,K.appendChild(W);let V=document.createElement("div");V.classList.add("challenge-trophy-div"),z.appendChild(V);let X=document.createElement("img");X.classList.add("browser-trophy-icon"),X.src="./Assets/UI/ChallengeTrophyIcon.webp",V.appendChild(X);let Y=document.createElement("p");Y.classList.add("browser-trophy-value"),Y.innerHTML=0,V.appendChild(Y);let J=document.createElement("div");J.classList.add("challenge-skull-div"),z.appendChild(J);let Q=document.createElement("img");Q.classList.add("browser-skull-icon"),Q.src="./Assets/UI/DeathRateIcon.webp",J.appendChild(Q);let Z=document.createElement("p");Z.classList.add("browser-skull-value"),Z.innerHTML=0,J.appendChild(Z);let ee=document.createElement("div");ee.classList.add("challenge-id-and-play"),P.appendChild(ee);let te=document.createElement("p");te.classList.add("browser-id","black-outline"),te.innerHTML=t.id,te.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,te)})),ee.appendChild(te);let ae=document.createElement("img");ae.classList.add("browser-copy-img"),ae.src="../Assets/UI/CopyClipboardBtn.webp",ae.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,te)})),ee.appendChild(ae);let de=document.createElement("img");de.classList.add("browser-go-img"),de.src="../Assets/UI/GoBtnSmall.webp",de.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),window.open(`btd6://Challenge/${t.id}`,"_blank")})),ee.appendChild(de);let le=new IntersectionObserver(((e,a)=>{e.forEach((async e=>{if(e.isIntersecting){a.unobserve(e.target);let d=await O(t.id);if(null==d)return;console.log(d),$.src=d.mapURL,W.innerHTML=d.upvotes.toLocaleString(),Y.innerHTML=0==d.playsUnique||d.winsUnique-d.playsUnique==0?"0%":`${(d.winsUnique/d.playsUnique*100).toFixed(2)}%`,Z.innerHTML=0==d.playsUnique?"0%":`${(d.wins/(d.plays+d.restarts)*100).toFixed(2)}%`;let l=await R(d.creator);if(null==l)return;q.innerHTML=l.displayName,l.displayName.length>13&&(q.style.fontSize="17px"),_.src=he(l.avatar),U.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(${ge(l.banner)})`}}))}));le.observe(d)}}))}function Pa(e,t){navigator.clipboard.writeText(e).then((function(){console.log("Copying to clipboard was successful!"),t.innerHTML="Copied!",setTimeout((()=>{t.innerHTML=e}),2e3)}),(function(e){console.log("Could not copy text: ",e)}))}function Aa(e){v.forEach(((t,a)=>{let d=document.createElement("div");switch(d.addEventListener("click",(async()=>{st(),Oa("browser",await G(t.id))})),e.appendChild(d),console.log(We),We){case"Grid":d.classList.add("challenge-entry","map-browser-bg");let e=document.createElement("div");e.classList.add("challenge-top"),d.appendChild(e);let a=document.createElement("p");a.classList.add("challenge-name","black-outline"),a.innerHTML=t.name,t.name.length>30&&(a.style.fontSize="18px"),t.name.length>35&&(a.style.fontSize="17px"),e.appendChild(a);let l=document.createElement("div");l.classList.add("challenge-middle"),d.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-left"),l.appendChild(n);let s=document.createElement("div");s.classList.add("race-map-div","silver-border"),n.appendChild(s);let i=document.createElement("img");i.classList.add("race-map-img"),i.src=Le(t.id),i.onerror=function(){this.onerror=null,this.src="./Assets/MapIcon/MapLoadingImage.webp"},s.appendChild(i);let o=document.createElement("div");o.classList.add("browser-usv-div"),l.appendChild(o);let r=document.createElement("div");r.classList.add("challenge-upvote-div"),o.appendChild(r);let c=document.createElement("img");c.classList.add("browser-upvote-icon"),c.src="./Assets/UI/ChallengeThumbsUpIcon.webp",r.appendChild(c);let p=document.createElement("p");p.classList.add("browser-upvote-value"),p.innerHTML=0,r.appendChild(p);let m=document.createElement("div");m.classList.add("challenge-trophy-div"),o.appendChild(m);let u=document.createElement("img");u.classList.add("browser-trophy-icon"),u.src="./Assets/UI/ChallengeTrophyIcon.webp",m.appendChild(u);let h=document.createElement("p");h.classList.add("browser-trophy-value"),h.innerHTML=0,m.appendChild(h);let g=document.createElement("div");g.classList.add("challenge-skull-div"),o.appendChild(g);let L=document.createElement("img");L.classList.add("browser-skull-icon"),L.src="./Assets/UI/DeathRateIcon.webp",g.appendChild(L);let v=document.createElement("p");v.classList.add("browser-skull-value"),v.innerHTML=0,g.appendChild(v);let b=document.createElement("div");b.classList.add("challenge-bottom"),d.appendChild(b);let C=document.createElement("div");C.classList.add("challenge-creator"),b.appendChild(C);let y=document.createElement("div");y.classList.add("avatar"),C.appendChild(y);let E=50,f=document.createElement("img");f.classList.add("avatar-frame","noSelect"),f.style.width=`${E}px`,f.src="../Assets/UI/InstaTowersContainer.webp",y.appendChild(f);let k=document.createElement("img");k.classList.add("avatar-img","noSelect"),k.style.width=`${E}px`,k.src=he("ProfileAvatar01"),y.appendChild(k);let w=document.createElement("p");w.classList.add("browser-creator-name","black-outline"),w.innerHTML="Loading...",C.appendChild(w);let M=document.createElement("div");M.classList.add("challenge-id-and-play"),b.appendChild(M);let T=document.createElement("p");T.classList.add("browser-id","black-outline"),T.innerHTML=t.id,T.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,T)})),M.appendChild(T);let B=document.createElement("img");B.classList.add("browser-copy-img"),B.src="../Assets/UI/CopyClipboardBtn.webp",B.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,T)})),M.appendChild(B);let I=document.createElement("img");I.classList.add("browser-go-img"),I.src="../Assets/UI/GoBtnSmall.webp",I.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),window.open(`btd6://Challenge/${t.id}`,"_blank")})),M.appendChild(I),new IntersectionObserver(((e,a)=>{e.forEach((async e=>{if(e.isIntersecting){a.unobserve(e.target);let d=await G(t.id);if(null==d)return;console.log(d),p.innerHTML=d.upvotes.toLocaleString(),h.innerHTML=0==d.playsUnique||d.winsUnique-d.playsUnique==0?"0%":`${(d.winsUnique/d.playsUnique*100).toFixed(2)}%`,v.innerHTML=0==d.playsUnique?"0%":`${(d.wins/(d.plays+d.restarts)*100).toFixed(2)}%`;let l=await R(d.creator);if(null==l)return;w.innerHTML=l.displayName,l.displayName.length>13&&(w.style.fontSize="17px"),k.src=he(l.avatar),b.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${ge(l.banner)})`}}))})).observe(d);break;case"Gallery":let H=document.createElement("div");H.classList.add("race-map-div","silver-border"),d.appendChild(H);let S=document.createElement("p");S.classList.add("browser-id","gallery-id","black-outline"),S.innerHTML=t.id,S.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,S)})),H.appendChild(S);let $=document.createElement("img");$.classList.add("race-map-img"),$.src=Le(t.id),$.onerror=function(){this.onerror=null,this.src="./Assets/MapIcon/MapLoadingImage.webp"},H.appendChild($)}new IntersectionObserver(((e,t)=>{e.forEach((async e=>{e.isIntersecting&&t.unobserve(e.target)}))})).observe(d)}))}async function Oa(e,t){if(null==t)return;Ya();let a=document.getElementById("map-content");a.style.display="flex",a.innerHTML="",document.getElementById(`${e}-content`).style.display="none";let d=va(t),l=document.createElement("div");l.classList.add("challenge-model"),a.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-model-header"),l.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-model-header-icons"),n.appendChild(s);let i=document.createElement("img");i.classList.add("challenge-model-header-difficulty"),i.src="./Assets/UI/EditMapIcon.webp",s.appendChild(i);let o=document.createElement("div");o.classList.add("challenge-model-header-texts"),n.appendChild(o);let r=document.createElement("p");r.classList.add("challenge-model-header-name","black-outline"),r.innerHTML=t.name,o.appendChild(r);let c=document.createElement("div");c.classList.add("challenge-header-right-container"),n.appendChild(c);let p=document.createElement("div");p.classList.add("challenge-header-right-top"),c.appendChild(p);let m=document.createElement("img");m.classList.add("modal-close"),m.src="./Assets/UI/CloseBtn.webp",m.addEventListener("click",(()=>{wa(e)})),p.appendChild(m);let u=document.createElement("div");u.classList.add("challenge-header-right-bottom"),c.appendChild(u);let h=document.createElement("p");h.classList.add("challenge-id","black-outline"),h.innerHTML=t.id,h.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,h)})),u.appendChild(h);let g=document.createElement("img");g.classList.add("browser-copy-img"),g.src="../Assets/UI/CopyClipboardBtn.webp",g.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),Pa(t.id,h)})),u.appendChild(g);let L=document.createElement("img");L.classList.add("browser-go-img"),L.src="../Assets/UI/GoBtnSmall.webp",L.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),window.open(`btd6://Challenge/${t.id}`,"_blank")})),u.appendChild(L);let v=document.createElement("div");v.classList.add("map-model-top","map-model-bg"),l.appendChild(v);let b=document.createElement("img");if(b.classList.add("map-model-img","boss-border"),b.src=Object.keys(we.mapsInOrder).includes(t.map)?ie(t.map):t.mapURL,v.appendChild(b),d.statsValid){let e=document.createElement("div");e.classList.add("map-model-stats-div"),v.appendChild(e);let t=document.createElement("p");t.classList.add("challenge-stats-header","black-outline"),t.innerHTML="Challenge Stats",e.appendChild(t);let a=document.createElement("div");a.classList.add("challenge-stats-left-right"),e.appendChild(a);let l=document.createElement("div");l.classList.add("challenge-stats-left"),a.appendChild(l);let n=document.createElement("div");if(n.classList.add("challenge-usv-div"),l.appendChild(n),0!=d.Upvotes){let e=document.createElement("div");e.classList.add("challenge-upvote-div"),n.appendChild(e);let t=document.createElement("img");t.classList.add("challenge-upvote-icon"),t.src="./Assets/UI/ChallengeThumbsUpIcon.webp",e.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-upvote-value"),a.innerHTML=d.Upvotes,e.appendChild(a)}let s=document.createElement("div");s.classList.add("challenge-trophy-div"),n.appendChild(s);let i=document.createElement("img");i.classList.add("challenge-trophy-icon"),i.src="./Assets/UI/ChallengeTrophyIcon.webp",s.appendChild(i);let o=document.createElement("p");o.classList.add("challenge-trophy-value"),o.innerHTML=d["Player Completion Rate"],s.appendChild(o);let r=document.createElement("div");r.classList.add("challenge-skull-div"),n.appendChild(r);let c=document.createElement("img");c.classList.add("challenge-skull-icon"),c.src="./Assets/UI/DeathRateIcon.webp",r.appendChild(c);let p=document.createElement("p");if(p.classList.add("challenge-skull-value"),p.innerHTML=d["Player Win Rate"],r.appendChild(p),"n/a"!=d.Creator&&null!=d.Creator){let e=document.createElement("div");e.classList.add("challenge-creator"),l.appendChild(e);let t=document.createElement("div");t.classList.add("avatar"),e.appendChild(t);let a=50,n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${a}px`,n.src="../Assets/UI/InstaTowersContainer.webp",t.appendChild(n);let s=document.createElement("img");s.classList.add("avatar-img","noSelect"),s.style.width=`${a}px`,s.src=he("ProfileAvatar01"),t.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-creator-name","black-outline"),i.innerHTML="Loading...",e.appendChild(i),await R(d.Creator).then((t=>{i.innerHTML=t.displayName,s.src=he(t.avatar),e.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${ge(t.banner)})`}))}["Date Created","Game Version"].forEach((e=>{if("Game Version"==e&&0==d[e])return;let t=document.createElement("div");t.classList.add("challenge-stat"),l.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-stat-label"),a.innerHTML=`${e}: ${d[e]}`,t.appendChild(a)}));let m=document.createElement("div");m.classList.add("challenge-stats-right"),a.appendChild(m),Object.entries(d.Stats).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("challenge-stat"),m.appendChild(a);let d=document.createElement("p");d.classList.add("challenge-stat-label"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.classList.add("challenge-model-stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}))}}function Ua(){let e=document.getElementById("extras-content");e.innerHTML="";let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="Coming Soon",e.appendChild(t);let a=document.createElement("div");a.classList.add("progress-page");let d=document.createElement("div");d.classList.add("selectors-div"),a.appendChild(d);["Custom Round Sets","Monkey Money Helper","Export Data","Send Feedback","Settings"].forEach((e=>{let t=document.createElement("div");t.id=e.toLowerCase()+"-div",t.classList.add("selector-div","blueprint-bg"),d.appendChild(t);let a=document.createElement("img");if(a.id=e.toLowerCase()+"-img",a.classList.add("selector-img"),t.appendChild(a),"Custom Round Sets"===e)a.src="../Assets/ChallengeRulesIcon/CustomRoundIcon.webp";else a.src="../Assets/UI/WoodenRoundButton.webp";let l=document.createElement("p");l.id=e.toLowerCase()+"-text",l.classList.add("selector-text","black-outline"),l.innerHTML=e,t.appendChild(l);let n=document.createElement("img");n.id=e.toLowerCase()+"-go-img",n.classList.add("selector-go-img"),n.src="../Assets/UI/ContinueBtn.webp",t.appendChild(n)}))}function Ra(e){if(Ya(),We="Grid","Custom Round Sets"===e)Ga()}function Ga(){let e=document.getElementById("roundsets-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("roundsets-container"),e.appendChild(t),view}function Na(){let e=document.getElementById("settings-content");e.innerHTML="";let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="Coming Soon",e.appendChild(t);let a=document.createElement("div");a.id="settings-container",a.classList.add("settings-container"),e.appendChild(a);let d=document.createElement("div");d.id="settings-options-container",d.classList.add("settings-options-container"),a.appendChild(d);let l=document.createElement("p");l.id="where-button",l.classList.add("where-button"),l.classList.add("return-entry-button"),l.classList.add("black-outline"),l.innerHTML="Clear Local Storage",l.addEventListener("click",(()=>{localStorage.clear()}))}function ja(e){let t={},a=e.split("#"),d=0;for(let e of a){t[d]={};let a=e.split(":"),l=a[0];if(!["MonkeyMoney","Power","InstaMonkey","KnowledgePoints","RandomInstaMonkey","Trophy"].includes(l)){t[d].type="Other",t[d].value=l,d++;continue}let n=a[1].split(",");switch(l){case"MonkeyMoney":t[d].type="MonkeyMoney",t[d].amount=parseInt(n[0]);break;case"Power":t[d].type="Power",t[d].power=n[0],t[d].amount=parseInt(n[1]),null==n[1]&&(t[d].amount=1);break;case"InstaMonkey":t[d].type="InstaMonkey",t[d].tower=n[0],t[d].tiers=n[1];break;case"KnowledgePoints":t[d].type="KnowledgePoints",t[d].amount=parseInt(n[0]);break;case"RandomInstaMonkey":t[d].type="RandomInstaMonkey",t[d].tier=n[0],t[d].amount=parseInt(n[1]);break;case"Trophy":t[d].type="Trophy",t[d].trophy=n[0]}d++}return t}function _a(e){let t=document.getElementsByClassName("loading-icon")[0].cloneNode(!0);t.classList.add("loading-icon-leaderboard"),t.style.height="unset",e.appendChild(t)}function qa(e){return[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)].map((e=>e<10?"0"+e:e)).join(":")}function za(e){let t=Math.floor(e/1e3),a=e%1e3,d=Math.floor(t/3600);t%=3600;let l=Math.floor(t/60),n=t%60;l=l.toString().padStart(2,"0"),n=n.toString().padStart(2,"0"),a=a.toString().padStart(3,"0");let s=`${l}:${n}.${a}`;return d>0&&(d=d.toString().padStart(2,"0"),s=`${d}:${s}`),s}function Ka(e){return(e-new Date)/1e3}function Fa(e,t){const a=Ka(e),d=document.getElementById(t);if(a>172800){const e=Math.ceil(a/86400);d.textContent=`${e} days`}else d.textContent=qa(a)}function Wa(e,t){const a=[{name:"year",ms:31536e6},{name:"month",ms:2592e6},{name:"day",ms:864e5},{name:"hour",ms:36e5},{name:"minute",ms:6e4},{name:"second",ms:1e3}],d=e-t;for(const e of a){if(d<e.ms)continue;let t=Math.round(d/e.ms);return`${t} ${e.name}${t>1?"s":""} ago`}}function Va(e){null!=e?document.body.style.backgroundColor=`rgb(${255*e[0]},${255*e[1]},${255*e[2]})`:document.body.style.removeProperty("background-color")}function Xa(e,t,a,d,l){switch(e){case 1:return a*(d/l);case 2:return t*(l/d);case 3:return l*(t/a);case 4:return d*(a/t)}}function Ya(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function Ja(e,t){if(k)return;let a=document.createElement("div");a.classList.add("error-modal-overlay"),document.body.appendChild(a);let d=document.createElement("div");d.id="error-modal",d.classList.add("error-modal"),a.appendChild(d);let l=document.createElement("div");l.id="error-modal-header",l.classList.add("error-modal-header"),d.appendChild(l);let n=document.createElement("img");n.id="error-modal-header-img",n.classList.add("error-modal-header-img"),n.src="./Assets/UI/BadConnectionBtn.webp",l.appendChild(n);let s=document.createElement("p");s.id="error-modal-header-text",s.classList.add("error-modal-header-text"),s.classList.add("black-outline"),s.innerHTML="Error",l.appendChild(s);let i=document.createElement("div");i.classList.add("error-modal-dummy"),l.appendChild(i);let o=document.createElement("div");o.id="error-modal-content",o.classList.add("error-modal-content"),o.innerHTML=""+e,d.appendChild(o);let r=document.createElement("div");if(r.id="error-modal-content2",r.classList.add("error-modal-content"),"Invalid user ID / Player Does not play this game"===e)r.innerHTML="Please try again or create a new Open Access Key.";d.appendChild(r);let c=document.createElement("div");c.classList.add("error-modal-ok-button-div"),d.appendChild(c);let p=document.createElement("div");p.classList.add("start-button","modal-ok-button","black-outline"),p.innerHTML="OK",p.addEventListener("click",(()=>{k=!1,document.body.removeChild(a)})),c.appendChild(p);let m=document.createElement("img");m.classList.add("error-modal-close"),m.src="./Assets/UI/CloseBtn.webp",m.addEventListener("click",(()=>{k=!1,document.body.removeChild(a)})),o.appendChild(m),k=!0}