let e="",t={},a={},d={},l={},n=null,s=null,i=null,o=1,r=null,c={},p=!1,m={},u=null,h=null,g=null,L={},b=null,v=null,y=1,C=null,E="newest",w=!1,f=!1,k={};async function M(e,t){let a=null;try{w?(a=await fetch(e,{cache:"reload"}),w=!1):a=await fetch(e)}catch(e){return console.log(e),vd("You have hit the rate limit.<br>If you are browsing the leaderboards or content browsers, please slow down!<br><br>The rate limit will clear after a short time.","api"),`You have hit the rate limit. [${e}]`}try{let e=await a.json();return 1==e.success?t(e):"Rate limit"==e.reason?(f=!0,vd("You have hit the rate limit. Please try again later.","api")):(document.getElementById("loading").style.transform="scale(0)",Ce=!1,vd(e.error,"api")),e}catch(e){return vd(`Something went wrong with the request. Response Code: ${a.status} [${e}]`,"api"),`Something went wrong with the request. Response Code: ${a.status} [${e}]`}}async function T(e){w=!0;let d=!0;if(await M(`https://data.ninjakiwi.com/btd6/save/${e}`,(l=>{t=l.body,a=l.model,ye[0]=1,d=!1,B(e)})),console.log("recahed here when expired"),d){let t=document.getElementsByClassName("error-modal-overlay");for(element of t)element.parentNode.removeChild(element);delete c[e],j(),Et(),vd("Your Open Access Key has expired. Please make a new one and try again.","expire",!0)}}async function B(e){w=!0,M(`https://data.ninjakiwi.com/btd6/users/${e}`,(t=>{d=t.body,l=t.model,c[e]={displayName:d.displayName,avatar:ge(d),banner:Le(d)},j(),ye[1]=1,dt()}))}async function I(){null==n?M("https://data.ninjakiwi.com/btd6/races",(e=>{n=e.body,fa()})):fa()}async function H(e){return n&&n[e]&&"string"==typeof n[e].metadata?M(n[e].metadata,(t=>(console.log(`fetched ${n[e].metadata}`),n[e].metadata=t.body,n[e]))):n[e]}async function S(){return i?(s=null,M(`${i}?page=${o}`,(e=>(console.log(`fetched ${i}?page=${o}`),s=e.body,r=s.length,document.getElementById("leaderboard-footer-page-number").innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,s)))):vd("Leaderboard Fetch Error: No leaderboard data found")}async function x(){null==u?M("https://data.ninjakiwi.com/btd6/bosses",(e=>{u=e.body,ka(Ve)})):ka(Ve)}async function $(e,t){return u&&u[e]&&"string"==typeof u[e][t?"metadataElite":"metadataStandard"]?M(u[e][t?"metadataElite":"metadataStandard"],(a=>(console.log(`fetched ${u[e][t?"metadataElite":"metadataStandard"]}`),u[e][t?"metadataElite":"metadataStandard"]=a.body,u[e]))):u[e]}async function A(){null==h?M("https://data.ninjakiwi.com/btd6/ct",(e=>{h=e.body,Ma()})):Ma()}async function P(e){let t=null;return await M(e,(a=>(console.log(`fetched ${e}`),t=a.body,t))),t}async function D(){if(null!=g)return console.log("no bad!"),g;await M("https://data.ninjakiwi.com/btd6/challenges/filter/daily",(e=>(g=e.body,g)))}async function R(e){return null==L[e]?await M(`https://data.ninjakiwi.com/btd6/challenges/challenge/${e}`,(t=>(console.log(`fetched ${e}`),L[e]=t.body,L[e]))):console.log(`used cache for ${e}`),L[e]}async function O(){return v?(b=null,M(`${v}${E}?page=${y}`,(e=>(console.log(`fetched ${v}?page=${y}`),b=e.body,C=b.length,document.getElementById("browser-footer-page-number").innerHTML=`Page ${y} of 4`,s)))):vd("Content Browser Fetch Error: No data found")}async function U(e){let t=e.split("/").pop();return null==m[t]?await M(e,(a=>{console.log(`fetched ${e}`),m[t]=a.body})):console.log(`used cache for ${t}`),m[t]}async function G(e){return null==k[e]?await M(`https://data.ninjakiwi.com/btd6/maps/map/${e}`,(t=>(console.log(`fetched ${e}`),k[e]=t.body,k[e]))):console.log(`used cache for ${e}`),k[e]}function N(){null!=localStorage.getItem("BTD6OAKStorage")&&(c=JSON.parse(localStorage.getItem("BTD6OAKStorage")))}function j(){localStorage.setItem("BTD6OAKStorage",JSON.stringify(c))}function _(e,t){let a=new Date(2024,4,25),d=(t?2101:2114)-parseInt(e);return a.setDate(a.getDate()-d),(t?"adv":"rot")+e+a.toISOString().substring(0,10).replace(/-/g,"")}function F(e,t){let a=new Date(e),d=new Date(2024,4,25).getTime()-a.getTime();return(t?"adv":"rot")+((t?2101:2114)-Math.floor(d/864e5))+e.replace(/-/g,"")}const q={Clicker:"Bloons Master","Superior Clicker":"Superior Bloons Master","Ultimate Clicker":"Ultimate Bloons Master","Knowledgable Primate":"Knowledgeable Primate","Triple Threat":"Triple threat","Small Bloons":"Alchermistman and Bloonacleboy","Master of Life":"Master of life","What did it cost":"What did it cost? - Everything","2 Mega Pops":"2 MegaPops","Looking fab":"Lookin fab",GoldenTicket:"Golden Ticket","Axis of Havok":"Axis of Havoc","Co-op Popper!":"Co-op Popper",CouponCrazy:"Coupon Crazy",LimitedRun:"Limited Run",ALaCode:"A La Code",InstantGratification:"Instant Gratification","Achievement Of Achievements":"Achievement of Achievements","What is this new Bloonery":"What is this new Bloonery?","Who's the Boss":"Who's the Boss?","I'llBeBack":"I'll Be Back",SoSpiiiceyNinjaKiwi:"So Spiiicey Ninja Kiwi",DavidsVsGoliath:"Davids vs Goliath",ToolsToDarwin:"Tools to Darwin",BigSpender:"Big Spender",NotLackingCriticalInformation:"Not Lacking Critical Information",StubbornStrategy:"Stubborn Strategy","Hook Line And Sinker":"Hook, Line, and Sinker",CrashOfTheTitans:"Crash of the Titans","So Shiny":"So Shiny!","Ultimate Team Up":"Ultimate Team-up",StudentLoans:"Student Loans",StickySituation:"Sticky Situation",NoHarvest:"No Harvest",ReadyPlayerOne:"Ready Player One?",TheDailyReid:"The Daily Reid",InstaCentury:"Insta Century"},z=Object.entries(q).reduce(((e,[t,a])=>(e[a]=t,e)),{}),K={ObynOceanGuardian:"OceanObyn",MoltenObyn:"MountainObyn",JoanOfArcAdora:"JoanOfArc",CyberQuincy:"QuincyCyber",ETnEtienne:"ETn",SentaiCaptainChurchill:"SentaiChurchill",SleighCaptainChurchill:"SleighChurchill"},W={Spikeopult:"Spike-o-pult",BuccaneerLongRange:"LongRange",BuccaneerGrapeShot:"GrapeShot",BuccaneerCrowsNest:"CrowsNest",BuccaneerHotShot:"HotShot",BuccaneerCarrierFlagship:"CarrierFlagship",BuccaneerCannonShip:"CannonShip",BuccaneerMerchantman:"Merchantman",BuccaneerFavoredTrades:"FavoredTrades",BuccaneerAircraftCarrier:"AircraftCarrier",BuccaneerDestroyer:"Destroyer",BuccaneerTradeEmpire:"TradeEmpire",BuccaneerPirateLord:"PirateLord",BuccaneerMonkeyPirates:"MonkeyPirates",HeattippedDarts:"HeatTippedDart",BioncBoomerang:"BionicBoomerang",LargeCalibre:"LongCalibre",LaserBlasts:"LaserBlast",GuidedMagic:"GuildedMagic",MortarRapidReload:"RapidReload",SupplyDrop:"CashDrop",PlasmaBlasts:"PlasmaBlast",XXXLTrap:"XXXL",OversizeNails:"OversizedNails",CenteredPath:"FlightOrders",Shockwave:"ShellShock",Monkeyopolis:"Metropolis",Spectre:"Specter",TrueSunGod:"TrueSonGod",HydraRocketPods:"HydraRockets",DartMonkeyParagon:"ApexPlasmaMaster",BoomerangMonkeyParagon:"GlaiveDominus",NinjaMonkeyParagon:"AscendedShadow",EngineerMonkeyParagon:"MasterBuilder",WizardMonkeyParagon:"MagusPerfectus",MonkeyAceParagon:"GoliathDoomship",MonkeyBuccaneerParagon:"NavarchOfTheSeas",MonkeySubParagon:"NauticSiegeCore",SmartSpikes:"DirectedSpikes"};let V={"Directed Spikes":"Smart Spikes","Directed Spikes Description":"Smart Spikes Description",CircusGwendolinSkinName:"HarlegwenGwendolinSkinName",CircusGwendolinSkinDescription:"HarlegwenGwendolinSkinDescription",OctoJonesSkinName:"OctoJonesStrikerJonesSkinName",OctoJonesSkinDescription:"OctoJonesStrikerJonesSkinDescription",MoltenObynSkinName:"ObynMountainGuardianSkinName",MoltenObynSkinDescription:"ObynMountainGuardianSkinDescription",SushiBentoSkinName:"SushiBentoBenjaminSkinName",SushiBentoSkinDescription:"SushiBentoBenjaminSkinDescription",KaijuPatSkinName:"KaijuPatFustySkinName",KaijuPatSkinDescription:"KaijuPatFustySkinDescription",GalaxiliSkinName:"GalaxiliEziliSkinName",GalaxiliSkinDescription:"GalaxiliEziliSkinDescription",VoidoraSkinName:"VoidoraAdoraSkinName",VoidoraSkinDescription:"VoidoraAdoraSkinDescription",VikingSaudaSkinName:"VikingSaudaSaudaSkinName",VikingSaudaSkinDescription:"VikingSaudaSaudaSkinDescription",JiangshiSaudaSkinName:"JiangshiSaudaSaudaSkinName",JiangshiSaudaSkinDescription:"JiangshiSaudaSaudaSkinDescription",DreadPirateBrickellSkinName:"DreadPirateBrickellAdmiralBrickellSkinName",DreadPirateBrickellSkinDescription:"DreadPirateBrickellAdmiralBrickellSkinDescription",LifeguardBrickellSkinName:"LifeguardBrickellAdmiralBrickellSkinName",LifeguardBrickellSkinDescription:"LifeguardBrickellAdmiralBrickellSkinDescription",PsimbalsSkinName:"PsimbalsPsiSkinName",PsimbalsSkinDescription:"PsimbalsPsiSkinDescription",GeraldoGentlemanGadgeteerSkinName:"GentlemonkeyGadgeteerGeraldoSkinName",GeraldoGentlemanGadgeteerSkinDescription:"GentlemonkeyGadgeteerGeraldoSkinDescription","Mode Easy":"Easy","Mode Medium":"Medium","Mode Hard":"Hard","Mode Impoppable":"Impoppable","Mode Sandbox":"Sandbox"},Y={Easy:"Bronze",PrimaryOnly:"Bronze01",Deflation:"Bronze02",Medium:"Silver",MilitaryOnly:"Silver01",Apopalypse:"Silver03",Reverse:"Silver02",Hard:"Gold",MagicOnly:"Gold01",DoubleMoabHealth:"Gold03",HalfCash:"Gold04",AlternateBloonsRounds:"Gold02",Impoppable:"Impoppable",Clicks:"ImpoppableRuby","CHIMPS-BLACK":"ImpoppableHematite"},Z={"Scientist Gwendolin":"ScientistGwendolin","Biker Bones":"BikerBones","Sentai Captain Churchill":"SentaiCaptainChurchill","Cyber Quincy":"Cyber Quincy","Octo Jones":"OctoJones","Sleigh Captain Churchill":"SleighCaptainChurchill","Wolfpack Quincy":"WolfpackQuincy",ScientistGwendolin:"Scientist Gwendolin",BikerBones:"Biker Bones",SentaiCaptainChurchill:"Sentai Captain Churchill",CyberQuincy:"Cyber Quincy",OctoJones:"Octo Jones",SleighCaptainChurchill:"Sleigh Captain Churchill",WolfpackQuincy:"Wolfpack Quincy"},X=["ZMYVERW","ZMYUWTV","ZMYUDTK","ZMYVPGA","ZMYVPFH","ZMYWHPC"];function J(e,t){return"WizardMonkey"==e?`Assets/TowerIcon/${t}-Wizard.webp`:`Assets/TowerIcon/${t}-${e}.webp`}function Q(e,t){return"WizardMonkey"==e?`Assets/UI/InstaContainer/${t}-Wizard.webp`:`Assets/UI/InstaContainer/${t}-${e}.webp`}function ee(e,t){let a=Math.max(t[0],t[1],t[2]);switch(Math.max(t[0],t[1],t[2])){case parseInt(t[0]):a=`${a}00`;break;case parseInt(t[1]):a=`0${a}0`;break;case parseInt(t[2]):a=`00${a}`}return"WizardMonkey"==e?`Assets/InstaMonkeyIcon/${a}-WizardInsta.webp`:`Assets/InstaMonkeyIcon/${a}-${e}Insta.webp`}function te(e){return e=e.replace(/[^a-zA-Z0-9]/g,""),W[e]?`Assets/UpgradeIcon/${W[e]}UpgradeIcon.webp`:`Assets/UpgradeIcon/${e}UpgradeIcon.webp`}function ae(e){return"SubAdmiral"==e?"Assets/KnowledgeIcon/NavalUpgradesIcon.webp":`Assets/KnowledgeIcon/${e}Icon.webp`}function de(e,t){return 1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function le(e){return`Assets/HeroIconSquare/HeroIcon${e=K[e]||e}.webp`}function ne(e){return`Assets/HeroIconCircle/HeroIcon${e=K[e]||e}.webp`}function se(e,t){return e=K[e]||e,1==t?`Assets/Portrait/${e}Portrait.webp`:`Assets/Portrait/${e}PortraitLvl${t}.webp`}function ie(e){return"#ouch"==e?"Assets/MapIcon/MapSelectouchButton.webp":`Assets/MapIcon/MapSelect${e}Button.webp`}function oe(e){return`Assets/PowerIcon/${e}Icon.webp`}function re(e,t){return t?"Assets/AchievementIcon/HiddenIcon.webp":`Assets/AchievementIcon/${e}Icon.webp`}function ce(e){return q[e]||e}function pe(e){return`Assets/MedalIcon/${e}.webp`}function me(e){return`Assets/ModeIcon/${e}Btn.webp`}function ue(e){switch(e.type){case"MonkeyMoney":return"Assets/UI/BloonjaminsIcon.webp";case"Power":return oe(e.power);case"InstaMonkey":return ee(e.tower,e.tiers);case"KnowledgePoints":return"Assets/UI/KnowledgeIcon.webp";case"RandomInstaMonkey":return`Assets/UI/InstaRandomTier${0==e.tier?1:e.tier}.webp`;case"Trophy":return"Assets/UI/TrophyIcon.webp";default:return`Assets/UI/${e.value}Icon.webp`}}function he(e){return`Assets/ProfileAvatar/${e}.webp`}function ge(e){let t=parseInt(e.avatar.replace(/\D/g,""));return""==e.avatar||isNaN(t)?"Assets/ProfileAvatar/ProfileAvatar01.webp":t<=Me.profileAvatars?`Assets/ProfileAvatar/${e.avatar}.webp`:e.avatarURL}function Le(e){let t=parseInt(e.banner.replace(/\D/g,""));return""==e.banner||isNaN(t)?"Assets/ProfileBanner/TeamsBannerDeafult.webp":t<=Me.profileBanners?`Assets/ProfileBanner/${e.banner}.webp`:e.bannerURL}function be(e){return X.includes(e)?`Assets/CustomMapIcon/${e}.webp`:`https://data.ninjakiwi.com/btd6/maps/map/${e}/preview`}function ve(e){return V[e]?we[V[e]]:we[e]}let ye=[0,0,0,0,0],Ce=!1,Ee=[],we={},fe={},ke={},Me={},Te={rank:1,xp:null,xpGoal:null},Be=2e7,Ie={rank:1,xp:null,xpGoal:2e7},He={},Se={},xe={},$e={},Ae={Maps:{},Medals:{single:{},coop:{}},Borders:{single:{},coop:{}}},Pe="",De=!1,Re=!1,Oe="grid",Ue=!1,Ge="All",Ne=0,je="game",_e=!1,Fe="game",qe="None",ze={TowerTotal:{},TowerTierTotals:{},TowerMissingByTier:{},TowerBorders:{}},Ke=null,We={"Monkey Knowledge Disabled":"NoKnowledgeIcon","No Lives Lost":"NoLivesLostIcon","Selling Disabled":"SellingDisabledIcon","Powers Disabled":"PowersDisabledIcon","No Continues":"NoContinuesIcon","All Camo":"AllCamoIcon","All Regrow":"AllRegenIcon","Double Cash Disabled":"NoDoubleCashIcon","No Round 100 Reward":"NoInstaMonkeys","Custom Rounds":"CustomRoundIcon","Paragon Limit":"ParagonLimitIcon"},Ve=!1,Ye="grid",Ze="Simple",Xe=null,Je=0,Qe=0,et=!1,tt=null,at=[];function dt(){fetch("./data/English.json").then((e=>e.json())).then((e=>{we=e,ye[2]=1,lt()})).catch((e=>{console.error("Error:",e),vd(e,"js")})),fetch("./data/Achievements150.json").then((e=>e.json())).then((e=>{fe=e,ye[3]=1,lt()})).catch((e=>{console.error("Error:",e),vd(e,"js")})),ht(),lt()}function lt(){ye.every((e=>1===e))&&(document.getElementById("front-page").style.display="none",document.body.classList.add("transition-bg"),ft(),nt(),st(),it(),ot(),rt(),ct(),ut(),mt(),pt(),It(),Ee.push("overview"),kt("overview"))}function nt(){if(18e7===t.xp)return Te.rank=155,Te.xp=null,void(Te.xpGoal=null);let e=parseInt(t.xp);for(let[t,a]of Object.entries(Me.Rank))if(t=parseInt(t),e<a.totalXpNeeded)return e-=parseInt(Me.Rank[t-1].totalXpNeeded),xpGoal=parseInt(a.totalXpNeeded)-parseInt(Me.Rank[t-1].totalXpNeeded),Te.rank=t-1,Te.xp=e,void(Te.xpGoal=xpGoal)}function st(){let e=parseInt(t.veteranXp);for(;e>=Be;)e-=Be,Ie.rank+=1;Ie.xp=e}function it(){for(let[e,t]of Object.entries(fe))ke[t.name]=t}function ot(){He["Games Played"]=t.gamesPlayed,He["Games Won"]=d.gameplay.gamesWon,He["Highest Round (All Time)"]=d.gameplay.highestRound,He["Highest Round (CHIMPS)"]=d.gameplay.highestRoundCHIMPS,He["Highest Round (Deflation)"]=d.gameplay.highestRoundDeflation,He["Monkeys Placed"]=d.gameplay.monkeysPlaced,He["Total Pop Count"]=d.bloonsPopped.bloonsPopped,He["Total Co-Op Pop Count"]=d.bloonsPopped.coopBloonsPopped,He["Camo Bloons Popped"]=d.bloonsPopped.camosPopped,He["Lead Bloons Popped"]=d.bloonsPopped.leadsPopped,He["Purple Bloons Popped"]=d.bloonsPopped.purplesPopped,He["Regrow Bloons Popped"]=d.bloonsPopped.regrowsPopped,He["Ceramic Bloons Popped"]=d.bloonsPopped.ceramicsPopped,He["MOABs Popped"]=d.bloonsPopped.moabsPopped,He["BFBs Popped"]=d.bloonsPopped.bfbsPopped,He["ZOMGs Popped"]=d.bloonsPopped.zomgsPopped,He["DDTs Popped"]=d.bloonsPopped.ddtsPopped,He["BADs Popped"]=d.bloonsPopped.badsPopped,He["Bloons Leaked"]=d.bloonsPopped.bloonsLeaked,He["Cash Generated"]=d.gameplay.cashEarned,He["Cash Gifted"]=d.gameplay.coopCashGiven,He["Abilities Used"]=d.gameplay.abilitiesUsed,He["Powers Used"]=d.gameplay.powersUsed,He["Insta Monkeys Used"]=d.gameplay.instaMonkeysUsed,He["Daily Reward Chests Opened"]=d.gameplay.dailyRewards,He["Challenges Completed"]=d.gameplay.challengesCompleted,He.Achievements=d.gameplay.achievements,He["Hidden Achievements"]=0,He["Odysseys Completed"]=d.gameplay.totalOdysseysCompleted,He["Lifetime Trophies"]=d.gameplay.totalTrophiesEarned,He["Necro Bloons Reanimated"]=d.bloonsPopped.necroBloonsReanimated,He["Transforming Tonics Used"]=d.bloonsPopped.transformingTonicsUsed,He["Most Experienced Monkey"]=d.mostExperiencedMonkey,He["Most Experienced Monkey XP"]=t.towerXP[d.mostExperiencedMonkey],He["Most Experienced Monkey"]=ve(He["Most Experienced Monkey"]),He["Insta Monkey Collection"]=`${d.gameplay.instaMonkeyCollection}/${Me.totalInstaMonkeys}`,He["Collection Chests Opened"]=d.gameplay.collectionChestsOpened,He["Golden Bloons Popped"]=d.bloonsPopped.goldenBloonsPopped,He["Monkey Teams Wins"]=d.gameplay.monkeyTeamsWins,He["Bosses Popped"]=d.bloonsPopped.bossesPopped,He["Damage Done To Bosses"]=d.gameplay.damageDoneToBosses,He["Daily Challenges Completed"]=t.totalDailyChallengesCompleted,He["Consecutive DCs Completed"]=t.consecutiveDailyChallengesCompleted,He["Race Attempts"]=t.totalRacesEntered,He["Challenges Played"]=t.challengesPlayed,He["Challenges Shared"]=t.challengesShared,He["Continues Used"]=t.continuesUsed;let e=0,a=0;t.achievementsClaimed.forEach((t=>{let d=ke[ce(t)];d&&(d.model.hidden?e+=1:a+=1)})),He["Hidden Achievements"]=`${e}/${Me.hiddenAchievements}`,He.Achievements=`${a}/${Me.achievements}`}function rt(){let e={};for(let[t,a]of Object.entries(Y))Se["Medal"+a]=d._medalsSinglePlayer[t]||0,e["MedalCoop"+a]=d._medalsMultiplayer[t]||0;Se={...Se,...e},Se.PhayzeEliteBadge=d.bossBadgesElite.Phayze||0,Se.PhayzeBadge=d.bossBadgesNormal.Phayze||0,Se.DreadbloonEliteBadge=d.bossBadgesElite.Dreadbloon||0,Se.DreadbloonBadge=d.bossBadgesNormal.Dreadbloon||0,Se.VortexEliteBadge=d.bossBadgesElite.Vortex||0,Se.VortexBadge=d.bossBadgesNormal.Vortex||0,Se.LychEliteBadge=d.bossBadgesElite.Lych||0,Se.LychBadge=d.bossBadgesNormal.Lych||0,Se.BloonariusEliteBadge=d.bossBadgesElite.Bloonarius||0,Se.BloonariusBadge=d.bossBadgesNormal.Bloonarius||0,Se.MedalEventBronzeMedal=d._medalsRace.Bronze||0,Se.MedalEventSilverMedal=d._medalsRace.Silver||0,Se.MedalEventGoldSilverMedal=d._medalsRace.GoldSilver||0,Se.MedalEventDoubleGoldMedal=d._medalsRace.DoubleGold||0,Se.MedalEventGoldDiamondMedal=d._medalsRace.GoldDiamond||0,Se.MedalEventRedDiamondMedal=d._medalsRace.RedDiamond||0,Se.MedalEventBlackDiamondMedal=d._medalsRace.BlackDiamond||0,Se.OdysseyStarIcon=d.gameplay.totalOdysseyStars||0,Se.BossMedalEventBronzeMedal=d._medalsBoss.Bronze||0,Se.BossMedalEventSilverMedal=d._medalsBoss.Silver||0,Se.BossMedalEventDoubleSilverMedal=d._medalsBoss.DoubleSilver||0,Se.BossMedalEventGoldSilverMedal=d._medalsBoss.GoldSilver||0,Se.BossMedalEventDoubleGoldMedal=d._medalsBoss.DoubleGold||0,Se.BossMedalEventGoldDiamondMedal=d._medalsBoss.GoldDiamond||0,Se.BossMedalEventDiamondMedal=d._medalsBoss.Diamond||0,Se.BossMedalEventRedDiamondMedal=d._medalsBoss.RedDiamond||0,Se.BossMedalEventBlackDiamondMedal=d._medalsBoss.BlackDiamond||0,Se.EliteBossMedalEventBronzeMedal=d._medalsBossElite.Bronze||0,Se.EliteBossMedalEventSilverMedal=d._medalsBossElite.Silver||0,Se.EliteBossMedalEventDoubleSilverMedal=d._medalsBossElite.DoubleSilver||0,Se.EliteBossMedalEventGoldSilverMedal=d._medalsBossElite.GoldSilver||0,Se.EliteBossMedalEventDoubleGoldMedal=d._medalsBossElite.DoubleGold||0,Se.EliteBossMedalEventGoldDiamondMedal=d._medalsBossElite.GoldDiamond||0,Se.EliteBossMedalEventDiamondMedal=d._medalsBossElite.Diamond||0,Se.EliteBossMedalEventRedDiamondMedal=d._medalsBossElite.RedDiamond||0,Se.EliteBossMedalEventBlackDiamondMedal=d._medalsBossElite.BlackDiamond||0,Se.CtLocalPlayerBronzeMedal=d._medalsCTLocal.Bronze||0,Se.CtLocalPlayerSilverMedal=d._medalsCTLocal.Silver||0,Se.CtLocalPlayerDoubleGoldMedal=d._medalsCTLocal.DoubleGold||0,Se.CtLocalPlayerDiamondMedal=d._medalsCTLocal.Diamond||0,Se.CtLocalPlayerRedDiamondMedal=d._medalsCTLocal.RedDiamond||0,Se.CtLocalPlayerBlackDiamondMedal=d._medalsCTLocal.BlackDiamond||0,Se.CtGlobalPlayerBronzeMedal=d._medalsCTGlobal.Bronze||0,Se.CtGlobalPlayerSilverMedal=d._medalsCTGlobal.Silver||0,Se.CtGlobalPlayerDoubleSilverMedal=d._medalsCTGlobal.DoubleSilver||0,Se.CtGlobalPlayerGoldSilverMedal=d._medalsCTGlobal.GoldSilver||0,Se.CtGlobalPlayerDoubleGoldMedal=d._medalsCTGlobal.DoubleGold||0,Se.CtGlobalPlayerGoldDiamondMedal=d._medalsCTGlobal.GoldDiamond||0,Se.CtGlobalPlayerDiamondMedal=d._medalsCTGlobal.Diamond||0}function ct(){t.unlockedBigBloons&&(xe["Big Bloons"]=t.bigBloonsActive),t.unlockedSmallBloons&&(xe["Small Bloons"]=t.smallBloonsActive),t.seenBigTowers&&(xe["Big Monkey Towers"]=t.bigTowersActive),t.unlockedSmallTowers&&(xe["Small Monkey Towers"]=t.smallTowersActive),t.unlockedSmallBosses&&(xe["Small Bosses"]=t.smallBossesActive)}function pt(){let e=Object.keys(t.unlockedTowers).filter((e=>t.unlockedTowers[e])).length;$e.Towers=`${e}/${Object.keys(t.unlockedTowers).length} Towers Unlocked`;let a=Object.keys(t.acquiredUpgrades),l=a.filter((e=>t.acquiredUpgrades[e])),n=a.filter((e=>e.includes("Paragon")&&"Sentry Paragon"!=e)),s=n.filter((e=>t.acquiredUpgrades[e]));$e.Upgrades=`${l.length-s.length}/${a.length-n.length} Upgrades Unlocked`,s.length>0&&($e.Paragons=`${s.length}/${n.length} Paragon${1!=s.length?"s":""} Unlocked`);let i=Object.keys(t.unlockedHeros).filter((e=>t.unlockedHeros[e])).length;$e.Heroes=`${i}/${Object.keys(t.unlockedHeros).length} Hero${1!=i?"es":""} Unlocked`;let o=Object.keys(t.unlockedSkins).filter((e=>!Object.keys(Me.heroesInOrder).includes(e))).filter((e=>t.unlockedSkins[e])).length;$e.Skins=`${o}/${Object.keys(t.unlockedSkins).filter((e=>!Object.keys(Me.heroesInOrder).includes(e))).length} Hero Skin${1!=o?"s":""} Unlocked`,$e.Knowledge=`${Object.keys(t.acquiredKnowledge).filter((e=>t.acquiredKnowledge[e])).length}/${Object.keys(t.acquiredKnowledge).length} Knowledge Unlocked`;let r=Object.keys(t.mapProgress).filter((e=>t.mapProgress[e])).length;$e.MapProgress=`${r} Map${1!=r?"s":""} Played`;let c=Object.values(Ae.Medals.single).map((e=>e.Clicks)).filter((e=>e)).length;c>0&&($e.CHIMPS=`${c} CHIMPS Medal${1!=c?"s":""} Earned`);let p=Object.values(t.powers).map((e=>"object"==typeof e&&e.quantity?e.quantity:0)).reduce(((e,t)=>e+t));$e.Powers=`${p} Power${1!=p?"s":""} Accumulated`;let m=Object.values(ze.TowerTotal).reduce(((e,t)=>e+t));$e.InstaMonkeys=`${m} Insta${1!=m?"s":""} Accumulated`,$e.Achievements=`${d.achievements}/${Me.achievements+Me.hiddenAchievements} Achievement${1!=d.achievements?"s":""} Earned`;let u=Object.keys(xe).length;$e.Extras=`${u} Extra${1!=u?"s":""} Unlocked`}function mt(){for(let[e,a]of Object.entries(t.mapProgress)){let t={single:{},coop:{}};t.single.Easy=a.difficulty?.Easy?.single?.Standard,t.single.PrimaryOnly=a.difficulty?.Easy?.single?.PrimaryOnly,t.single.Deflation=a.difficulty?.Easy?.single?.Deflation,t.single.Medium=a.difficulty?.Medium?.single?.Standard,t.single.MilitaryOnly=a.difficulty?.Medium?.single?.MilitaryOnly,t.single.Apopalypse=a.difficulty?.Medium?.single?.Apopalypse,t.single.Reverse=a.difficulty?.Medium?.single?.Reverse,t.single.Hard=a.difficulty?.Hard?.single?.Standard,t.single.MagicOnly=a.difficulty?.Hard?.single?.MagicOnly,t.single.DoubleMoabHealth=a.difficulty?.Hard?.single?.DoubleMoabHealth,t.single.HalfCash=a.difficulty?.Hard?.single?.HalfCash,t.single.AlternateBloonsRounds=a.difficulty?.Hard?.single?.AlternateBloonsRounds,t.single.Impoppable=a.difficulty?.Hard?.single?.Impoppable,t.single.Clicks=a.difficulty?.Hard?.single?.Clicks,t.coop.Easy=a.difficulty?.Easy?.coop?.Standard,t.coop.PrimaryOnly=a.difficulty?.Easy?.coop?.PrimaryOnly,t.coop.Deflation=a.difficulty?.Easy?.coop?.Deflation,t.coop.Medium=a.difficulty?.Medium?.coop?.Standard,t.coop.MilitaryOnly=a.difficulty?.Medium?.coop?.MilitaryOnly,t.coop.Apopalypse=a.difficulty?.Medium?.coop?.Apopalypse,t.coop.Reverse=a.difficulty?.Medium?.coop?.Reverse,t.coop.Hard=a.difficulty?.Hard?.coop?.Standard,t.coop.MagicOnly=a.difficulty?.Hard?.coop?.MagicOnly,t.coop.DoubleMoabHealth=a.difficulty?.Hard?.coop?.DoubleMoabHealth,t.coop.HalfCash=a.difficulty?.Hard?.coop?.HalfCash,t.coop.AlternateBloonsRounds=a.difficulty?.Hard?.coop?.AlternateBloonsRounds,t.coop.Impoppable=a.difficulty?.Hard?.coop?.Impoppable,t.coop.Clicks=a.difficulty?.Hard?.coop?.Clicks;for(let[e,a]of Object.entries(t.single))a&&!1===a.completed&&(a.bestRound>=Me.endRound[e]||a.completedWithoutLoadingSave)&&(a.completed=!0);for(let[e,a]of Object.entries(t.single))a&&!0===a.completed&&a.bestRound<Me.endRound[e]&&0==a.timesCompleted&&(a.completed=!1);for(let[e,a]of Object.entries(t.coop))a&&!1===a.completed&&(a.bestRound>=Me.endRound[e]||a.completedWithoutLoadingSave)&&(a.completed=!0);for(let[e,a]of Object.entries(t.coop))a&&!0===a.completed&&a.bestRound<Me.endRound[e]&&0==a.timesCompleted&&(a.completed=!1);Ae.Medals.single[e]={},Ae.Medals.coop[e]={};for(let[a,d]of Object.entries(t.single))d&&d.completed?Ae.Medals.single[e][a]=!0:Ae.Medals.single[e][a]=!1;for(let[a,d]of Object.entries(t.coop))d&&d.completed?Ae.Medals.coop[e][a]=!0:Ae.Medals.coop[e][a]=!1;console.log(t.coop.Clicks),Ae.Medals.single[e]["CHIMPS-BLACK"]=!(!t.single.Clicks||!t.single.Clicks.completed)&&t.single.Clicks.completedWithoutLoadingSave,Ae.Medals.coop[e]["CHIMPS-BLACK"]=!(!t.coop.Clicks||!t.coop.Clicks.completed)&&t.coop.Clicks.completedWithoutLoadingSave;let d=["Easy","PrimaryOnly","Deflation"].every((e=>t.single[e]&&!0===t.single[e].completed)),l=d&&["Medium","MilitaryOnly","Apopalypse","Reverse"].every((e=>t.single[e]&&!0===t.single[e].completed)),n=l&&["Hard","MagicOnly","DoubleMoabHealth","HalfCash","AlternateBloonsRounds","Impoppable","Clicks"].every((e=>t.single[e]&&!0===t.single[e].completed)),s=n&&t.single.Clicks.completedWithoutLoadingSave;Ae.Borders.single[e]=s?"Black":n?"Gold":l?"Silver":d?"Bronze":"None",d=["Easy","PrimaryOnly","Deflation"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),l=d&&["Medium","MilitaryOnly","Apopalypse","Reverse"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),n=l&&["Hard","MagicOnly","DoubleMoabHealth","HalfCash","AlternateBloonsRounds","Impoppable","Clicks"].every((e=>t.coop[e]&&!0===t.coop[e].completed)),s=n&&t.coop.Clicks.completedWithoutLoadingSave,Ae.Borders.coop[e]=s?"Black":n?"Gold":l?"Silver":d?"Bronze":"None",Ae.Maps[e]=t}}function ut(){let e={},a={},d={},l={};for(let[n,s]of Object.entries(t.instaTowers)){e[n]=0;let t={1:0,2:0,3:0,4:0,5:0};a[n]=a[n]||t;let i={1:[],2:[],3:[],4:[],5:[]};d[n]=d[n]||i;for(let[t,d]of Object.entries(s))e[n]+=d,Me.instaTiers[5].includes(t)&&(a[n][5]+=1),Me.instaTiers[4].includes(t)&&(a[n][4]+=1),Me.instaTiers[3].includes(t)&&(a[n][3]+=1),Me.instaTiers[2].includes(t)&&(a[n][2]+=1),Me.instaTiers[1].includes(t)&&(a[n][1]+=1);if(Me.collectionOrder.forEach((e=>{null==s[e]&&(Me.instaTiers[5].includes(e)&&d[n][5].push(e),Me.instaTiers[4].includes(e)&&d[n][4].push(e),Me.instaTiers[3].includes(e)&&d[n][3].push(e),Me.instaTiers[2].includes(e)&&d[n][2].push(e),Me.instaTiers[1].includes(e)&&d[n][1].push(e))})),a[n][4]==Me.instaTiers[4].length&&a[n][3]==Me.instaTiers[3].length&&a[n][2]==Me.instaTiers[2].length&&a[n][1]==Me.instaTiers[1].length){if(a[n][5]==Me.instaTiers[5].length){l[n]="Black";continue}l[n]="Gold"}else l[n]=""}ze.TowerTotal=e,ze.TowerTierTotals=a,ze.TowerMissingByTier=d,ze.TowerBorders=l}function ht(){let e=0;function t(){e--,0===e&&(document.getElementById("loading").style.transform="scale(0)")}new MutationObserver((a=>{a.forEach((a=>{"childList"===a.type&&a.addedNodes.forEach((a=>{"IMG"===a.nodeName&&(e++,a.addEventListener("load",t))}))}))})).observe(document.body,{childList:!0,subtree:!0}),document.getElementById("loading").style.removeProperty("transform")}function gt(){document.getElementById("loading").style.transform="scale(0)"}fetch("./data/Constants.json").then((e=>e.json())).then((e=>{Me=e,ye[4]=1,lt(),wt()})).catch((e=>{console.error("Error:",e),vd(e,"js")}));const Lt=document.createElement("div");Lt.id="container",document.body.appendChild(Lt),document.body.classList.add("hex-bg");const bt=document.createElement("div");bt.id="header",bt.classList.add("header"),Lt.appendChild(bt);const vt=document.createElement("div");vt.id="header-div",vt.classList.add("header-div"),bt.appendChild(vt);const yt=document.createElement("h1");yt.id="title",yt.classList.add("title"),yt.innerHTML="Bloons TD 6 API Explorer",vt.appendChild(yt);const Ct=document.createElement("div");function Et(){null!=document.getElementById("front-page")&&document.getElementById("front-page").remove();const t=document.createElement("div");t.id="front-page",t.classList.add("front-page"),Ct.appendChild(t);let a=document.createElement("p");a.classList.add("disclaimer-text"),a.innerHTML="This site is not affiliated with Ninja Kiwi. All game assets belong to Ninja Kiwi.",t.appendChild(a);let d=document.createElement("p");d.id="front-page-text",d.classList.add("front-page-text"),d.innerHTML="Enter your Open Access Key (OAK) to get started: ",t.appendChild(d);let l=document.createElement("div");l.id="previous-oak",l.classList.add("previous-oak"),t.appendChild(l),Object.entries(c).forEach((([t,a])=>{let d=document.createElement("div");d.id="previous-oak-entry",d.classList.add("previous-oak-entry"),d.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(${a.banner})`,l.appendChild(d),d.appendChild(Ht(100,a.avatar));let n=document.createElement("p");n.id="profile-name",n.classList.add("profile-name"),n.classList.add("black-outline"),n.innerHTML=a.displayName,d.appendChild(n);let s=document.createElement("img");s.id="use-button",s.classList.add("use-button"),s.src="./Assets/UI/ContinueBtn.webp",s.addEventListener("click",(()=>{Ce||(Ce=!0,document.getElementById("loading").style.removeProperty("transform"),e=t,T(t))})),d.appendChild(s);let i=document.createElement("img");i.id="delete-button",i.classList.add("delete-button"),i.src="./Assets/UI/CloseBtn.webp",i.addEventListener("click",(()=>{delete c[t],j(),l.removeChild(d)})),d.appendChild(i)}));let n=document.createElement("div");n.classList.add("oak-entry-div"),t.appendChild(n);let s=document.createElement("input");s.classList.add("key-entry"),s.placeholder="Enter your OAK here",n.appendChild(s);let i=document.createElement("div");i.classList.add("start-button"),i.classList.add("black-outline"),i.innerHTML="Start",i.addEventListener("click",(()=>{let t=s.value;t.length<5||t.length>30||!t.startsWith("oak_")?vd('Please enter a valid OAK! This will start with "oak_".'):Ce||(document.getElementById("loading").style.removeProperty("transform"),Ce=!0,e=s.value,T(e))})),n.appendChild(i);let o=document.createElement("div");o.classList.add("get-oak-div"),t.appendChild(o);let r=document.createElement("p");r.classList.add("where-text"),r.innerHTML="Don't have one? Read here:",o.appendChild(r);let p=document.createElement("p");p.classList.add("where-button","black-outline"),p.innerHTML="View OAK Guide",o.appendChild(p);let m=document.createElement("div");m.id="oak-instructions-div",m.classList.add("oak-instructions-div"),m.style.display="none",t.appendChild(m);let u=document.createElement("p");u.classList.add("site-info-header","black-outline"),u.innerHTML="Site Information",t.appendChild(u);let h=document.createElement("div");h.classList.add("info-buttons"),t.appendChild(h);let g=document.createElement("p");g.classList.add("where-button","black-outline"),g.innerHTML="Watch Trailer",h.appendChild(g);let L=document.createElement("p");L.classList.add("where-button","black-outline"),L.innerHTML="FAQ",h.appendChild(L);let b=document.createElement("p");b.classList.add("where-button","black-outline"),b.innerHTML="Known Issues",h.appendChild(b);let v=document.createElement("p");v.classList.add("where-button","black-outline"),v.innerHTML="Changelog",h.appendChild(v);let y=document.createElement("p");y.classList.add("where-button","black-outline"),y.innerHTML="Privacy Policy",h.appendChild(y);let C=document.createElement("p");C.classList.add("where-button","black-outline"),C.innerHTML="Send Feedback",h.appendChild(C);let E=document.createElement("div");E.id="faq-div",E.classList.add("faq-div"),E.style.display="none",t.appendChild(E);let w=document.createElement("div");w.id="privacy-div",w.classList.add("privacy-div"),w.style.display="none",t.appendChild(w);let f=document.createElement("div");f.id="known-issues-div",f.classList.add("known-issues-div"),f.style.display="none",t.appendChild(f);let k=document.createElement("div");k.id="changelog-div",k.classList.add("changelog-div"),k.style.display="none",t.appendChild(k);let M=document.createElement("div");M.id="trailer-div",M.classList.add("trailer-div"),M.style.display="none",t.appendChild(M);let B=document.createElement("div");B.id="feedback-div",B.classList.add("feedback-div"),B.style.display="none",t.appendChild(B);let I=document.createElement("div");function H(e){["oak-instructions","faq","privacy","known-issues","changelog","trailer","feedback"].forEach((t=>{let a=document.getElementById(t+"-div"),d=document.getElementById(t+"-button");t===e&&"none"==a.style.display?(d.classList.add("square-btn-yellow"),a.style.display="block",activeTab=e):(d.classList.remove("square-btn-yellow"),a.style.display="none")}))}I.id="version-div",I.classList.add("version-div"),t.appendChild(I),p.id="oak-instructions-button",p.addEventListener("click",(()=>{H("oak-instructions")})),L.id="faq-button",L.addEventListener("click",(()=>{H("faq")})),y.id="privacy-button",y.addEventListener("click",(()=>{H("privacy")})),b.id="known-issues-button",b.addEventListener("click",(()=>{H("known-issues")})),v.id="changelog-button",v.addEventListener("click",(()=>{H("changelog")})),g.id="trailer-button",g.addEventListener("click",(()=>{H("trailer")})),C.id="feedback-button",C.addEventListener("click",(()=>{H("feedback")}));let S=document.createElement("p");S.id="oak-instructions-header",S.classList.add("oak-instructions-header"),S.classList.add("black-outline"),S.innerHTML="What is an Open Access Key?",m.appendChild(S);let x=document.createElement("p");x.id="oak-instructions-text",x.classList.add("oak-instructions-text"),x.innerHTML="An Open Access Key (OAK) is a unique key that allows you to access your Bloons TD 6 data from Ninja Kiwi's Open Data API.",m.appendChild(x);let $=document.createElement("p");$.id="oak-instructions-header",$.classList.add("oak-instructions-header"),$.classList.add("black-outline"),$.innerHTML="How do I get one?",m.appendChild($);let A=document.createElement("p");A.id="oak-instructions-text2",A.classList.add("oak-instructions-text"),A.innerHTML="Step 1: Login and Backup your progress with a Ninja Kiwi Account. You can do this by going to settings from the main menu and clicking on the Account button. NOTE: This site is not available for BTD6+ on Apple Arcade and BTD6 Netflix. ",m.appendChild(A);let P=document.createElement("img");P.id="oak-instruction-img",P.classList.add("oak-instruction-img"),P.src="./Assets/UI/OAKTutorial1.webp",m.appendChild(P);let D=document.createElement("p");D.id="oak-instructions-text3",D.classList.add("oak-instructions-text"),D.innerHTML='Step 2: Select "Open Data API" at the bottom right of the account screen.',m.appendChild(D);let R=document.createElement("img");R.id="oak-instruction-img2",R.classList.add("oak-instruction-img"),R.src="./Assets/UI/OAKTutorial2.webp",m.appendChild(R);let O=document.createElement("p");O.id="oak-instructions-text4",O.classList.add("oak-instructions-text"),O.innerHTML='Step 3: Generate a key and copy that in to the above text field. It should start with "oak_". Then click "Start" to begin!',m.appendChild(O);let U=document.createElement("img");U.id="oak-instruction-img3",U.classList.add("oak-instruction-img"),U.src="./Assets/UI/OAKTutorial3.webp",m.appendChild(U);let G=document.createElement("p");G.classList.add("oak-instructions-text"),G.innerHTML='You can read more about the Open Data API here: <a href="https://support.ninjakiwi.com/hc/en-us/articles/13438499873937-Open-Data-API" target="_blank", style="color:white";>Open Data API Article</a>',m.appendChild(G);let N=document.createElement("p");N.id="faq-header",N.classList.add("oak-instructions-header"),N.classList.add("black-outline"),N.innerHTML="Frequently Asked Questions",E.appendChild(N);let _={"What can I do with this?":"A lot. Some key things are tracking your progress automatically, viewing events and leaderboards, browsing user generated content, and as a bonus feature: viewing round information. You can also view more detailed stats and progress than you can see in the game such as your highest round for every mode on every map you've played. Those who are working on their Insta Monkey collection can use this as a tracker as the data pulled is always up to date!","How long does the API take to update after I do something in the game?":"15 minutes is the most I've seen. Be sure to press the save button in settings if you want to minimize the time it takes to update! It should not take more than 24 hours to update in any circumstance (browser caching, etc).","Why is this not available for BTD6+ and Netflix?":"This is because the data is stored differently for these versions such as using iCloud for BTD6+. This is not compatible with the Open Data API."};for(let[e,t]of Object.entries(_)){let a=document.createElement("div");a.classList.add("faq-entry-div"),E.appendChild(a);let d=document.createElement("div");d.classList.add("faq-question-div"),a.appendChild(d);let l=document.createElement("p");l.classList.add("faq-question"),l.innerHTML=e,d.appendChild(l);let n=document.createElement("img");n.classList.add("arrow-hide-btn"),n.src="./Assets/UI/ArrowHideBtn.webp",d.appendChild(n);let s=document.createElement("div");s.classList.add("faq-answer-div"),s.style.display="none",a.appendChild(s);let i=document.createElement("p");i.classList.add("faq-answer"),i.innerHTML=t,s.appendChild(i),d.addEventListener("click",(()=>{"none"===s.style.display?(s.style.display="block",n.style.transform="rotate(180deg)"):(s.style.display="none",n.style.transform="rotate(0deg)")}))}let F=document.createElement("p");F.id="privacy-header",F.classList.add("oak-instructions-header","black-outline"),F.innerHTML="Privacy Policy",w.appendChild(F);let q=document.createElement("p");q.id="privacy-text",q.classList.add("oak-instructions-text"),q.innerHTML='This app does not store any data being sent to or retrieved from Ninja Kiwi\'s Open Data API outside of your browser/device. The localStorage browser feature is used to prevent users from having to re-enter their OAK every time they visit the site. If you would like to delete this stored data, you can do so by clicking the "X" on the profile you would like to delete on this homepage.',w.appendChild(q);let z=document.createElement("p");z.classList.add("oak-instructions-header","black-outline"),z.innerHTML="Known Issues",f.appendChild(z);let K=document.createElement("p");K.id="known-issues-text",K.classList.add("oak-instructions-text"),K.innerHTML="- Rosalia is missing from the Heroes Placed sections on profiles.<br>- Tinkerton is missing from the maps section.",f.appendChild(K);let W=document.createElement("video");W.id="trailer-video",W.preload="none",W.classList.add("trailer-video"),W.src="./Assets/Trailer/Trailer.mp4",W.controls=!0,M.appendChild(W);let V=document.createElement("p");V.classList.add("oak-instructions-header","black-outline"),V.innerHTML="Changelog",k.appendChild(V);let Y=document.createElement("p");Y.classList.add("oak-instructions-text"),Y.innerHTML="v1.0.0: Initial Release<br>- The Odyssey tab is still being worked on and will be added in the near future.<br>- An Insta Monkeys Rotation helper will also be added soon.",k.appendChild(Y);let Z=document.createElement("p");Z.classList.add("oak-instructions-header","black-outline"),Z.innerHTML="Send Feedback",B.appendChild(Z);let X=document.createElement("p");X.classList.add("oak-instructions-text"),X.innerHTML='If you have any feedback, suggestions of things to add or change, and most importantly bug reports, please fill out this anonymous form: <a href="https://forms.gle/Tg1PuRNj2ftojMde6" target="_blank" style="color: white;">Feedback Form</a>',B.appendChild(X)}function wt(){let e=document.getElementById("version-div"),t=document.createElement("p");t.id="tool-version-text",t.classList.add("tool-version-text"),t.innerHTML=`App Version: ${Me.version} / Game Content Version: v${Me.projectContentVersion}`,e.appendChild(t)}function ft(){const e=document.createElement("div");e.id="header",e.classList.add("header-container"),bt.appendChild(e);let t=["Overview","Progress","Events","Explore","Extras"];t.forEach((t=>{t=t.toLowerCase();let a=document.createElement("p");a.classList.add("header-label"),a.classList.add("black-outline"),a.id=t.toLowerCase(),a.innerHTML=t,a.addEventListener("click",(()=>{kt(t.toLowerCase())})),e.appendChild(a)})),t.forEach((e=>{e=e.toLowerCase();let t=document.createElement("div");t.id=e+"-content",t.classList.add("content-div"),t.classList.add(e),t.style.display="none",Ct.appendChild(t)}));["Challenge","Map","PublicProfile","Leaderboard","Browser","Relics","Roundset"].forEach((e=>{e=e.toLowerCase();let t=document.createElement("div");t.id=e+"-content",t.classList.add("sub-content-div"),t.classList.add(e),t.style.display="none",Ct.appendChild(t)}))}function kt(e){bd(),Ke&&clearInterval(Ke),gd(Me.BGColor);let t=document.getElementsByClassName("content-div");for(let e of t)e.style.display="none",document.getElementById(e.id.replace("-content","")).classList.remove("selected");for(let e of document.getElementsByClassName("sub-content-div"))e.style.display="none";if(document.getElementById(e+"-content").style.display="flex",document.getElementById(e).classList.add("selected"),!Ee.includes(e))switch(e){case"overview":It(),Ee.push(e);break;case"progress":xt();break;case"events":Ea();break;case"explore":Ga();break;case"extras":Va()}}Ct.id="content",Ct.classList.add("content"),Lt.appendChild(Ct),N(),Et();let Mt,Tt,Bt=0;function It(){let e=document.createElement("div");e.id="profile-header",e.classList.add("profile-header"),e.classList.add("profile-banner"),e.style.backgroundImage=`linear-gradient(to bottom, transparent 50%, var(--profile-primary) 70%),url('${Le(d)}')`,document.getElementById("overview-content").appendChild(e),e.appendChild(Ht(100,d.avatarURL));let a=document.createElement("div");a.id="profile-top-bottom",a.classList.add("profile-top-bottom"),e.appendChild(a);let l=document.createElement("div");l.id="profile-top",l.classList.add("profile-top"),a.appendChild(l);let n=document.createElement("p");if(n.id="profile-name",n.classList.add("profile-name"),n.classList.add("black-outline"),n.innerHTML=d.displayName,l.appendChild(n),d.followers>0){let e=document.createElement("div");e.classList.add("profile-followers"),l.appendChild(e);let t=document.createElement("p");t.classList.add("followers-label"),t.classList.add("black-outline"),t.innerHTML="Followers",e.appendChild(t);let a=document.createElement("p");a.classList.add("followers-count"),a.innerHTML=d.followers.toLocaleString(),e.appendChild(a)}let s=document.createElement("div");s.id="profile-bottom",s.classList.add("profile-bottom"),a.appendChild(s),s.appendChild(St()),t.veteranXp>0&&s.appendChild(St(!0));let i=document.createElement("div");i.id="below-profile-header",i.classList.add("below-profile-header"),document.getElementById("overview-content").appendChild(i);let o=document.createElement("div");o.id="left-column-div",o.classList.add("left-column-div"),i.appendChild(o);let r=document.createElement("div");r.classList.add("quick-stats-div"),o.appendChild(r);let c=document.createElement("div");c.classList.add("quick-stats-header"),r.appendChild(c);let p=document.createElement("p");p.classList.add("column-header-text","black-outline"),p.innerHTML="Quick Stats",c.appendChild(p);let m=document.createElement("div");m.classList.add("quick-stats-content"),r.appendChild(m);let u={Towers:"../Assets/UI/MaxMonkeysIcon.webp",Heroes:"../Assets/UI/AllHeroesIcon.webp",Extras:"../Assets/UI/SmallBloonsModeIcon.webp",Achievements:"../Assets/AchievementIcon/AchievementsIcon.webp",CHIMPS:"../Assets/MedalIcon/MedalImpoppableRuby.webp",InstaMonkeys:"../Assets/UI/InstaIcon.webp",MapProgress:"../Assets/UI/StartRoundIconSmall.webp",Paragons:"../Assets/UI/ParagonPip.webp",Powers:"../Assets/UI/PowerContainer.webp",Skins:"../Assets/UI/TopHatSprite.webp",Upgrades:"../Assets/UI/UpgradeIcon.webp",Knowledge:"../Assets/UI/KnowledgeIcon.webp"};Object.entries($e).forEach((([e,t])=>{if(t.includes("0 Extras")||t.includes("0 CHIMPS"))return;if(t.match(/0\/[0-9]+ Paragons/))return;let a=document.createElement("div");a.classList.add("quick-stat"),m.appendChild(a);let d=document.createElement("img");d.classList.add("quick-stat-icon"),d.src=u[e],a.appendChild(d);let l=document.createElement("p");l.classList.add("quick-stat-name"),l.innerHTML=t,a.appendChild(l)}));let h=document.createElement("div");h.id="currency-medals-div",h.classList.add("currency-medals-div"),o.appendChild(h);let g=document.createElement("div");g.id="left-column-header",g.classList.add("left-column-header"),h.appendChild(g);let L=document.createElement("p");L.id="left-column-header-text",L.classList.add("column-header-text"),L.classList.add("black-outline"),L.innerHTML="Currency and Medals",g.appendChild(L);let b=document.createElement("div");b.id="currency-div",b.classList.add("currency-div"),h.appendChild(b);let v=document.createElement("div");v.id="currency-mm-div",v.classList.add("currency-mm-div"),b.appendChild(v);let y=document.createElement("img");y.id="currency-mm-img",y.classList.add("currency-mm-img"),y.src="../Assets/UI/BloonjaminsIcon.webp",v.appendChild(y);let C=document.createElement("p");C.id="currency-mm-text",C.classList.add("currency-mm-text"),C.classList.add("mm-outline"),C.innerHTML="$"+t.monkeyMoney.toLocaleString(),v.appendChild(C);let E=document.createElement("div");E.id="currency-knowledge-div",E.classList.add("currency-knowledge-div"),b.appendChild(E);let w=document.createElement("img");w.id="currency-knowledge-img",w.classList.add("currency-knowledge-img"),w.src="../Assets/UI/KnowledgeIcon.webp",E.appendChild(w);let f=document.createElement("p");f.id="currency-knowledge-text",f.classList.add("currency-knowledge-text"),f.classList.add("knowledge-outline"),f.innerHTML=t.knowledgePoints.toLocaleString(),E.appendChild(f);let k=document.createElement("div");k.id="currency-trophies-div",k.classList.add("currency-trophies-div"),b.appendChild(k);let M=document.createElement("img");M.id="currency-trophies-img",M.classList.add("currency-trophies-img"),M.src="../Assets/UI/TrophyIcon.webp",k.appendChild(M);let T=document.createElement("p");T.id="currency-trophies-text",T.classList.add("currency-trophies-text"),T.classList.add("black-outline"),T.innerHTML=t.trophies.toLocaleString(),k.appendChild(T);let B=document.createElement("div");B.id="medals-div",B.classList.add("medals-div"),h.appendChild(B);for(let[e,t]of Object.entries(Se)){if(0===t)continue;let a=document.createElement("div");a.id="medal-div",a.classList.add("medal-div"),B.appendChild(a);let d=document.createElement("img");d.id="medal-img",d.classList.add("medal-img"),d.src=pe(e),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Ld(3,70,256,0,d.width)}px`:d.style.height=`${Ld(3,70,256,0,d.height)}px`,d.style.removeProperty("display")})),a.appendChild(d);let l=document.createElement("p");l.id="medal-text",l.classList.add("medal-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}let I=document.createElement("div");I.id="top-heroes-monkeys-div",I.classList.add("top-heroes-monkeys-div"),o.appendChild(I);let H=document.createElement("div");H.id="top-heroes-div",H.classList.add("top-heroes-div"),I.appendChild(H);let S=document.createElement("div");S.id="top-heroes-top-div",S.classList.add("top-heroes-top-div"),H.appendChild(S);let x=document.createElement("div");x.id="top-heroes-top-div",x.classList.add("top-heroes-top-ribbon-div"),S.appendChild(x);let $=document.createElement("p");$.id="top-heroes-text",$.classList.add("top-heroes-text"),$.classList.add("black-outline"),$.innerHTML="Top Heroes",x.appendChild($);let A=document.createElement("div");A.id="maps-progress-coop-toggle",A.classList.add("maps-progress-coop-toggle"),S.appendChild(A);let P=document.createElement("p");P.id="maps-progress-coop-toggle-text",P.classList.add("maps-progress-coop-toggle-text"),P.classList.add("black-outline"),P.innerHTML="Show All: ",A.appendChild(P);let D=document.createElement("input");D.classList.add("maps-progress-coop-toggle-input"),D.type="checkbox",D.addEventListener("change",(()=>{D.checked?document.getElementById("other-heroes-div").style.display="flex":document.getElementById("other-heroes-div").style.display="none"})),A.appendChild(D);let R=document.createElement("div");R.id="top-heroes-list",R.classList.add("top-heroes-list"),H.appendChild(R);let O=document.createElement("div");O.id="top-3-heroes-div",O.classList.add("top-3-heroes-div"),R.appendChild(O);let U=document.createElement("div");U.id="other-heroes-div",U.classList.add("other-heroes-div"),U.style.display="none",R.appendChild(U);let G=0,N=Object.keys(Me.heroesInOrder);for(let[e,t]of Object.entries(d.heroesPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===t)continue;if(!N.includes(e))continue;let a=document.createElement("div");a.id="hero-div",a.classList.add("hero-div"),G<3?O.appendChild(a):U.appendChild(a);let d=document.createElement("img");d.id="hero-img",d.classList.add("hero-img"),d.src=de(e,1),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Ld(3,150,1920,0,d.width)}px`:d.style.height=`${Ld(3,150,1920,0,d.height)}px`,d.style.removeProperty("display")})),a.appendChild(d);let l=document.createElement("p");l.id="hero-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l),G++}let j=document.createElement("div");j.id="top-towers-div",j.classList.add("top-heroes-div"),I.appendChild(j);let _=document.createElement("div");_.id="top-towers-top-div",_.classList.add("top-heroes-top-div"),j.appendChild(_);let F=document.createElement("div");F.id="top-towers-top-div",F.classList.add("top-heroes-top-ribbon-div"),_.appendChild(F);let q=document.createElement("p");q.id="top-towers-text",q.classList.add("top-heroes-text"),q.classList.add("black-outline"),q.innerHTML="Top Towers",F.appendChild(q);let z=document.createElement("div");z.id="maps-progress-coop-toggle",z.classList.add("maps-progress-coop-toggle"),_.appendChild(z);let K=document.createElement("p");K.id="maps-progress-coop-toggle-text",K.classList.add("maps-progress-coop-toggle-text"),K.classList.add("black-outline"),K.innerHTML="Show All: ",z.appendChild(K);let W=document.createElement("input");W.classList.add("maps-progress-coop-toggle-input"),W.type="checkbox",W.addEventListener("change",(()=>{W.checked?document.getElementById("other-towers-div").style.display="flex":document.getElementById("other-towers-div").style.display="none"})),z.appendChild(W);let V=document.createElement("div");V.id="top-towers-list",V.classList.add("top-heroes-list"),j.appendChild(V);let Y=document.createElement("div");Y.id="top-3-towers-div",Y.classList.add("top-3-heroes-div"),V.appendChild(Y);let Z=document.createElement("div");Z.id="other-towers-div",Z.classList.add("other-heroes-div"),Z.style.display="none",V.appendChild(Z),G=0;let X=Object.keys(Me.towersInOrder);for(let[e,t]of Object.entries(d.towersPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===t)continue;if(!X.includes(e))continue;let a=document.createElement("div");a.id="tower-div",a.classList.add("hero-div"),G<3?Y.appendChild(a):Z.appendChild(a);let d=document.createElement("img");d.id="tower-img",d.classList.add("hero-img"),d.src=Q(e,"000"),a.appendChild(d);let l=document.createElement("p");l.id="tower-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l),G++}let J=document.createElement("div");J.id="right-column-div",J.classList.add("right-column-div"),i.appendChild(J);let ee=document.createElement("div");ee.id="profile-stats",ee.classList.add("profile-stats"),J.appendChild(ee);let te=document.createElement("div");te.classList.add("overview-right-column-header"),ee.appendChild(te);let ae=document.createElement("p");ae.classList.add("column-header-text"),ae.classList.add("black-outline"),ae.innerHTML="Overall Stats",te.appendChild(ae);for(let[e,t]of Object.entries(He)){let a=document.createElement("div");a.id="stat",a.classList.add("stat"),ee.appendChild(a);let d=document.createElement("p");d.id="stat-name",d.classList.add("stat-name"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.id="stat-value",l.classList.add("stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}parseInt(t.latestGameVersion.split(".")[0])>Me.projectContentVersion&&vd(`The content of this site (v${Me.projectContentVersion}.0) is out of date with the current version (v${t.latestGameVersion.split(".")[0]}.0). New content might be missing, but everything else should remain functional.`,"api",!0)}function Ht(e,t){let a=document.createElement("div");a.style.width=`${e}px`,a.style.height=`${e}px`,a.classList.add("avatar");let d=document.createElement("img");d.id="avatar-frame",d.classList.add("avatar-frame","noSelect"),d.style.width=`${e}px`,d.src="../Assets/UI/InstaTowersContainer.webp",a.appendChild(d);let l=document.createElement("img");return l.id="avatar-img",l.classList.add("avatar-img","noSelect"),l.style.width=`${e}px`,l.src=t,a.appendChild(l),a}function St(e){let t=document.createElement("div");t.id="rank",t.classList.add("rank");let a=document.createElement("div");a.id="rank-star",a.classList.add("rank-star"),t.appendChild(a);let d=document.createElement("img");d.id="rank-img",d.classList.add("rank-img"),d.src=e?"../Assets/UI/LvlHolderVeteran.webp":"../Assets/UI/LvlHolder.webp",a.appendChild(d);let l=document.createElement("p");l.id="rank-text",l.classList.add("rank-text"),l.classList.add("black-outline"),l.innerHTML=e?Ie.rank:Te.rank,a.appendChild(l);let n=document.createElement("div");n.id="rank-bar",n.classList.add("rank-bar"),t.appendChild(n);let s=document.createElement("div");s.id="rank-bar-fill",s.classList.add("rank-bar-fill"),e?(n.classList.add("rank-bar-veteran"),s.classList.add("rank-bar-fill-veteran"),s.style.width=null===Ie.xp?"100%":Ie.xp/Ie.xpGoal*100+"%"):s.style.width=null===Te.xp?"100%":Te.xp/Te.xpGoal*100+"%",n.appendChild(s);let i=document.createElement("p");return i.id="rank-bar-text",i.classList.add("rank-bar-text"),i.innerHTML=e?null===Ie.xp?"Max Level":`${Ie.xp.toLocaleString()}/${Ie.xpGoal.toLocaleString()}`:null===Te.xp?"Max Level":`${Te.xp.toLocaleString()}/${Te.xpGoal.toLocaleString()}`,null!=Te.xp||e||i.classList.add("rank-bar-text-max"),n.appendChild(i),t}function xt(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="progress-page",a.classList.add("progress-page"),e.appendChild(a);let d=document.createElement("div");d.id="selectors-div",d.classList.add("selectors-div"),a.appendChild(d);["Towers","Heroes","Knowledge","MapProgress","Powers","InstaMonkeys","Achievements","Extras"].forEach((e=>{if($e[e].includes("0 Extras"))return;let a=document.createElement("div");a.id=e.toLowerCase()+"-div",a.classList.add("selector-div"),a.addEventListener("click",(()=>{$t(e)})),d.appendChild(a);let l=document.createElement("img");l.id=e.toLowerCase()+"-img",l.classList.add("selector-img"),l.src="Heroes"==e?`../Assets/HeroIconCircle/HeroIcon${t.primaryHero}.webp`:"../Assets/UI/"+e.replace(" ","")+"Btn.webp",a.appendChild(l);let n=document.createElement("p");n.id=e.toLowerCase()+"-text",n.classList.add("selector-text"),n.classList.add("black-outline"),n.innerHTML=$e[e],a.appendChild(n);let s=document.createElement("img");s.id=e.toLowerCase()+"-go-img",s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",a.appendChild(s)}))}function $t(e){switch(bd(),Ke&&clearInterval(Ke),e){case"Towers":At();break;case"Heroes":Nt();break;case"Knowledge":gd(Me.ParagonBGColor),zt();break;case"MapProgress":Oe="grid",Ue=!1,Ge="All",Ne=0,Wt();break;case"Powers":la();break;case"InstaMonkeys":na();break;case"Achievements":La();break;case"Extras":va()}}function At(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="tower-progress-container",a.classList.add("tower-progress-container"),e.appendChild(a);let d=document.createElement("div");d.id="tower-progress-div",d.classList.add("tower-progress-div"),a.appendChild(d);let l=document.createElement("div");l.id="tower-selector-header-top",l.classList.add("tower-selector-header-top"),d.appendChild(l);let n=document.createElement("p");n.id="tower-selector-header-text",n.classList.add("tower-selector-header-text"),n.classList.add("black-outline"),n.innerHTML=`Towers - ${Object.keys(t.unlockedTowers).filter((e=>t.unlockedTowers[e])).length}/${Object.keys(t.unlockedTowers).length}`,l.appendChild(n);let s=document.createElement("p");s.id="tower-selector-header-text",s.classList.add("tower-selector-header-text"),s.classList.add("black-outline"),s.innerHTML=`Upgrades - ${Object.keys(t.acquiredUpgrades).filter((e=>t.acquiredUpgrades[e])).length}/${Object.keys(t.acquiredUpgrades).length}`,l.appendChild(s);let i=document.createElement("div");i.id="tower-selector-header",i.classList.add("tower-selector-header"),d.appendChild(i);for(let[e,a]of Object.entries(Me.towersInOrder)){let d=document.createElement("div");d.id=e+"-selector",d.classList.add(`tower-selector-${a.toLowerCase()}`),t.unlockedTowers[e]||d.classList.add("hero-selector-div-disabled"),d.addEventListener("click",(()=>{t.unlockedTowers[e]&&Pt(e)})),i.appendChild(d);let l=document.createElement("img");l.id=e+"-selector-img",l.classList.add("tower-selector-img"),l.src=Q(e,"000"),d.appendChild(l);let n=document.createElement("div");n.id=e+"-selector-highlight",n.classList.add("tower-selector-highlight"),d.appendChild(n)}let o=document.createElement("div");o.id="tower-progress-content",o.classList.add("tower-progress-content"),a.appendChild(o),a.append(Pt("DartMonkey"))}function Pt(e){let a=document.getElementById("tower-progress-content");a.innerHTML="";let d=0;for(let a of Object.values(Me.towerPaths[e]))for(let e of Object.keys(a))t.acquiredUpgrades[e]&&(d+=1);d=15===d;let l=!!Me.paragonsAvailable.includes(e)&&t.acquiredUpgrades[`${e} Paragon`],n=document.createElement("div");n.id="tower-progress-top",n.classList.add("tower-progress-top"),l&&n.classList.add("tower-progress-top-paragon"),a.appendChild(n);let s=document.createElement("div");s.id="tower-progress-content-top",s.classList.add("tower-progress-content-top"),n.appendChild(s);let i=document.createElement("div");i.id="tower-progress-info-container",i.classList.add("tower-progress-info-container"),s.appendChild(i);let o=document.createElement("p");o.id="tower-progress-content-text",o.classList.add("tower-progress-content-text"),o.classList.add(l?"knowledge-outline":"black-outline"),o.innerHTML=ve(e),i.appendChild(o);let r=document.createElement("p");r.id="tower-progress-content-xp",r.classList.add("tower-progress-content-xp"),r.classList.add("mm-outline"),r.innerHTML=`XP: ${t.towerXP[e].toLocaleString()}`,i.appendChild(r);let c=document.createElement("p");c.id="tower-progress-content-desc",c.classList.add("tower-progress-content-desc"+(l?"-paragon":"")),c.innerHTML=ve(`${e} Description`),s.appendChild(c);let p=document.createElement("div");p.id="tower-name-and-portrait",p.classList.add("tower-name-and-portrait"),a.appendChild(p);let m=document.createElement("p");m.id="tower-portrait-name",m.classList.add("tower-portrait-name"),m.classList.add("black-outline"),m.innerHTML=ve(e),p.appendChild(m);let u=document.createElement("div");u.id="tower-progress-portrait",u.classList.add("tower-progress-portrait"),u.classList.add(`tower-progress-portrait-${Me.towersInOrder[e].toLowerCase()}`),p.appendChild(u);let h=document.createElement("img");h.id="tower-progress-portrait-img",h.classList.add("tower-progress-portrait-img"),h.src=J(e,"000"),u.appendChild(h);let g=document.createElement("div");g.id="upgrade-tooltip",g.classList.add("upgrade-tooltip"),g.innerHTML=ve(`${e} Description`),a.appendChild(g);let L=document.createElement("div");L.id="tower-progress-main-div",L.classList.add("tower-progress-main-div"),a.appendChild(L),L.appendChild(Dt(e,d,l));let b=document.createElement("div");b.id="tower-progress-bottom",b.classList.add("tower-progress-bottom"),a.appendChild(b);for(let e of document.getElementsByClassName("tower-selector-highlight"))e.style.display="none";return document.getElementById(`${e}-selector-highlight`).style.display="block",l?gd(Me.ParagonBGColor):gd(),a}function Dt(e,a,d){let l=document.createElement("div");l.id="upgrade-container",l.classList.add("upgrade-container");let n=document.createElement("div");n.id="upgrade-rows",n.classList.add("upgrade-rows"),l.appendChild(n);let s=document.createElement("div");s.id="upgrade-row-1",s.classList.add("upgrade-row"),n.appendChild(s);let i=document.createElement("div");i.id="upgrade-row-2",i.classList.add("upgrade-row"),n.appendChild(i);let o=document.createElement("div");o.id="upgrade-row-3",o.classList.add("upgrade-row"),n.appendChild(o);let r=0,c=!1;for(let[a,l]of Object.entries(Me.towerPaths[e].path1)){let l=t.acquiredUpgrades[a]?"unlocked":"locked";s.appendChild(Rt(e,a,l,1,r,d,c)),"locked"==l&&(c=!0),r++}r=0,c=!1;for(let[a,l]of Object.entries(Me.towerPaths[e].path2)){let l=t.acquiredUpgrades[a]?"unlocked":"locked";i.appendChild(Rt(e,a,l,2,r,d,c)),"locked"==l&&(c=!0),r++}r=0,c=!1;for(let[a,l]of Object.entries(Me.towerPaths[e].path3)){let l=t.acquiredUpgrades[a]?"unlocked":"locked";o.appendChild(Rt(e,a,l,3,r,d,c)),"locked"==l&&(c=!0),r++}if(Me.paragonsAvailable.includes(e)&&a){let a=document.createElement("div");a.id="upgrade-container-paragon",a.classList.add("upgrade-container-paragon"),l.appendChild(a),a.appendChild(Ot(e,`${e} Paragon`,t.acquiredUpgrades[`${e} Paragon`]?"unlocked":"locked"))}return l}function Rt(e,a,d,l,n,s,i){let o=document.createElement("div");o.id=`${e}-${a}-div`,o.classList.add("upgrade-div");let r="";switch(l){case 1:r=`${n+1}00`;break;case 2:r=`0${n+1}0`;break;case 3:r=`00${n+1}`}let c=document.createElement("div");c.id=`${e}-${a}-glow`,o.appendChild(c);let p=document.createElement("div");p.id=`${e}-${a}-bg-img`,p.classList.add("upgrade-bg-img");let m=t.towerXP[e]>=Me.towerPaths[e][`path${l}`][a];4==n?t.acquiredUpgrades[a]?p.classList.add("upgrade-t5"):p.classList.add("upgrade-t5-locked"):p.classList.add(`upgrade-${s?"paragon":"unlocked"==d?d:m?"green":"red"}`),o.appendChild(p);let u=document.createElement("img");u.id=`${e}-${a}-img`,u.classList.add("upgrade-img"),u.src=te(a),t.acquiredUpgrades[a]||4!=n||(u.style.visibility="hidden"),o.appendChild(u);let h=document.createElement("p");return h.id=`${e}-${a}-text`,h.classList.add("upgrade-text"),h.innerHTML=ve(a),o.appendChild(h),o.addEventListener("click",(()=>{Ut(e,a,r),document.getElementById("upgrade-tooltip").innerHTML=ve(`${a} Description`),Array.from(document.getElementsByClassName("upgrade-glow")).forEach((e=>{e.classList.remove("upgrade-glow")})),document.getElementsByClassName("upgrade-glow-paragon").length>0&&document.getElementsByClassName("upgrade-glow-paragon")[0].classList.remove("upgrade-glow-paragon"),c.classList.add("upgrade-glow")})),i&&(p.classList.add("upgrade-after-locked"),u.classList.add("upgrade-after-locked")),o}function Ot(e,a,d){let l=document.createElement("div");l.id=`${e}-paragon-div`,l.classList.add("upgrade-div");let n=document.createElement("div");n.id=`${e}-${a}-bg-img`,n.classList.add("upgrade-bg-img"),n.classList.add("upgrade-paragon-special"+(t.acquiredUpgrades[a]?"":"-locked")),l.appendChild(n);let s=document.createElement("div");s.id="paragon-glow",l.appendChild(s);let i=document.createElement("img");i.id=`${e}-paragon-img`,i.classList.add("upgrade-img"),i.src=te(`${e} Paragon`),t.acquiredUpgrades[a]||(i.style.visibility="hidden"),l.appendChild(i);let o=document.createElement("p");return o.id=`${e}-${a}-text`,o.classList.add("upgrade-text"),o.innerHTML=ve(a),l.appendChild(o),l.addEventListener("click",(()=>{Gt(e,a,"Paragon"),document.getElementById("upgrade-tooltip").innerHTML=ve(`${a} Description`),Array.from(document.getElementsByClassName("upgrade-glow")).forEach((e=>{e.classList.remove("upgrade-glow")})),s.classList.add("upgrade-glow-paragon")})),l}function Ut(e,a,d){let l=document.getElementById("tower-progress-portrait"),n=document.getElementById("tower-portrait-name"),s=document.getElementById("tower-progress-portrait-img");if(n.innerHTML=ve(a),d.includes("5")&&!t.acquiredUpgrades[a])return l.classList.add("tower-progress-portrait-t5-locked"),void(s.src="");l.classList.contains("tower-progress-portrait-t5-locked")&&l.classList.remove("tower-progress-portrait-t5-locked"),l.classList.contains("tower-progress-portrait-paragon")&&l.classList.remove("tower-progress-portrait-paragon"),l.classList.contains("tower-progress-portrait-paragon-locked")&&l.classList.remove("tower-progress-portrait-paragon-locked"),l.classList.add(`tower-progress-portrait-${Me.towersInOrder[e].toLowerCase()}`);for(let e of document.getElementsByClassName("upgrade-div"))e.classList.remove("selected");null!=document.getElementById(`${e}-paragon-div`)&&document.getElementById(`${e}-paragon-div`).classList.remove("selected-paragon"),s.src=J(e,d)}function Gt(e,a,d){let l=document.getElementById("tower-progress-portrait"),n=document.getElementById("tower-portrait-name"),s=document.getElementById("tower-progress-portrait-img");if(n.innerHTML=ve(a),d.includes("Paragon")&&!t.acquiredUpgrades[a])return l.classList.add("tower-progress-portrait-paragon-locked"),void(s.src="");l.classList.contains(`tower-progress-portrait-${Me.towersInOrder[e].toLowerCase()}`)&&l.classList.remove(`tower-progress-portrait-${Me.towersInOrder[e].toLowerCase()}`),l.classList.add("tower-progress-portrait-paragon");for(let e of document.getElementsByClassName("upgrade-div"))e.classList.remove("selected");s.src=J(e,d)}function Nt(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="tower-progress-container",a.classList.add("tower-progress-container"),e.appendChild(a);let d=document.createElement("div");d.id="hero-progress-div",d.classList.add("hero-progress-div"),a.appendChild(d);let l=document.createElement("div");l.id="hero-selector-header-top",l.classList.add("hero-selector-header-top"),d.appendChild(l);let n=document.createElement("p");n.id="hero-selector-header-text",n.classList.add("hero-selector-header-text"),n.classList.add("black-outline"),n.innerHTML=`Heroes - ${Object.keys(t.unlockedHeros).filter((e=>t.unlockedHeros[e])).length}/${Object.keys(t.unlockedHeros).length}`,l.appendChild(n);let s=document.createElement("p");s.id="hero-selector-header-text",s.classList.add("hero-selector-header-text"),s.classList.add("black-outline"),s.innerHTML=`Skins - ${Object.keys(t.unlockedSkins).filter((e=>t.unlockedSkins[e])).length}/${Object.keys(t.unlockedSkins).length}`,l.appendChild(s);let i=document.createElement("div");i.id="hero-selector-header",i.classList.add("hero-selector-header"),d.appendChild(i);for(let[e,a]of Object.entries(Me.heroesInOrder)){let d=document.createElement("div");d.id=e+"-selector",d.classList.add("hero-selector-div"),t.unlockedHeros[e]||d.classList.add("hero-selector-div-disabled"),d.addEventListener("click",(()=>{t.unlockedHeros[e]&&jt(e,a)})),i.appendChild(d);let l=document.createElement("img");l.id=e+"-selector-img",l.classList.add("hero-selector-img"),l.src=le(e),d.appendChild(l);let n=document.createElement("div");n.id=e+"-selector-highlight",n.classList.add("hero-selector-highlight"),d.appendChild(n)}let o=document.createElement("div");o.id="hero-progress-content",o.classList.add("hero-progress-content"),a.appendChild(o),jt(t.primaryHero,Me.heroesInOrder[t.primaryHero])}function jt(e,a){Pe=e;let d=document.getElementById("hero-progress-content");d.innerHTML="";let l=document.createElement("div");l.id="hero-progress-container",l.classList.add("hero-progress-container"),d.appendChild(l);let n=document.createElement("div");n.id="hero-progress-top",n.classList.add("hero-progress-top"),l.appendChild(n);let s=document.createElement("div");s.id="hero-progress-header",s.classList.add("hero-progress-header"),n.appendChild(s);let i=document.createElement("img");i.id="hero-progress-trail-fx",i.classList.add("hero-progress-trail-fx"),i.src="./Assets/UI/TrailFx.webp",s.appendChild(i);let o=document.createElement("p");o.id="hero-progress-header-text",o.classList.add("hero-progress-header-text"),o.style.backgroundImage=`url('../Assets/UI/${a}TxtTextureMain.webp')`,o.innerHTML=ve(e),s.appendChild(o);let r=document.createElement("p");r.id="hero-progress-header-subtitle",r.classList.add("hero-progress-header-subtitle"),r.classList.add("subtitle-outline"),r.innerHTML=ve(`${e} Short Description`),s.appendChild(r);let c=document.createElement("div");c.id="hero-progress-middle",c.classList.add("hero-progress-middle"),l.appendChild(c);let p=document.createElement("div");p.id="hero-portrait-level-select-btns",p.classList.add("hero-portrait-level-select-btns"),c.appendChild(p),qt(e);let m=document.createElement("div");m.id="hero-portrait-div",m.classList.add("hero-portrait-div"),c.appendChild(m);let u=document.createElement("img");u.id="hero-portrait-img",u.classList.add("hero-portrait-img"),u.src=de(e,1),m.appendChild(u);let h=document.createElement("div");h.id="hero-portrait-bar",h.classList.add("hero-portrait-bar"),m.appendChild(h);let g=document.createElement("div");g.id="hero-portrait-glow",g.classList.add("hero-portrait-glow"),g.style.background=`radial-gradient(circle, rgb(${255*Me.HeroBGColors[e][0]},${255*Me.HeroBGColors[e][1]},${255*Me.HeroBGColors[e][2]}) 0%, transparent 70%)`,m.appendChild(g);let L=document.createElement("div");L.id="hero-skins-div",L.classList.add("hero-skins-div"),c.appendChild(L),Me.heroSkins[e].forEach((a=>{if((0==t.unlockedSkins[Z[a]||a]||null==t.unlockedSkins[Z[a]||a])&&a!=e)return;let d=document.createElement("img");d.id=`${e}-${a}-skin`,d.classList.add("hero-skin"),d.src=ne(a),d.addEventListener("click",(()=>{let t=Me.HeroBGColors[a]?Me.HeroBGColors[a]:Me.HeroBGColors[e];gd(t),_t(a,e==a),document.getElementById("hero-portrait-glow").style.background=`radial-gradient(circle, rgb(${255*t[0]},${255*t[1]},${255*t[2]}) 0%, transparent 70%)`})),L.appendChild(d)}));let b=document.createElement("div");b.id="hero-progress-bottom",b.classList.add("hero-progress-bottom"),l.appendChild(b);let v=document.createElement("p");v.id="hero-progress-desc",v.classList.add("hero-progress-desc"),v.innerHTML=ve(`${e} Description`),b.appendChild(v);let y=document.createElement("div");y.id="hero-level-descs",y.classList.add("hero-level-descs"),b.appendChild(y);for(let t=1;t<21;t++){let a=document.createElement("div");a.id=`hero-level-desc-div-${t}`,a.classList.add("hero-level-desc-div"),y.appendChild(a);let d=document.createElement("div");d.id=`hero-level-desc-icon-div-${t}`,d.classList.add("hero-level-desc-icon-div"),20==t?d.classList.add("hero-level-desc-image-purple"):Me.heroLevelIcons[e].includes(t)?d.classList.add("hero-level-desc-image-gold"):d.classList.add("hero-level-desc-image"),a.appendChild(d);let l=document.createElement("p");l.id=`hero-level-desc-text-${t}`,l.classList.add("hero-level-desc-text"),l.classList.add("black-outline"),l.innerHTML=t,d.appendChild(l);let n=document.createElement("p");n.id=`hero-level-desc-${t}`,n.classList.add("hero-level-desc"),n.innerHTML=ve(`${e} Level ${t} Description`),a.appendChild(n)}for(let e of document.getElementsByClassName("hero-selector-highlight"))e.style.display="none";return document.getElementById(`${e}-selector-highlight`).style.display="block",gd(Me.HeroBGColors[e]),d}function _t(e,t){Pe=e,document.getElementById("hero-progress-header-subtitle").innerHTML=ve(t?`${e} Short Description`:`${e}SkinName`),document.getElementById("hero-progress-desc").innerHTML=ve(t?`${e} Description`:`${e}SkinDescription`),Ft(1),document.body.style.display="none",document.body.offsetHeight,document.body.style.removeProperty("display")}function Ft(e){document.getElementById("hero-portrait-img").src=se(Pe,e),qt(Pe);for(let e of document.getElementsByClassName("hero-level-select-btn"))e.classList.remove("selected-level-btn");document.getElementById(`${e}-level-select-btn`).classList.add("selected-level-btn")}function qt(e){let a=document.getElementById("hero-portrait-level-select-btns");a.innerHTML="",Me.HeroPortraitLevels[e].forEach((e=>{if("20SunGod"==e&&!t.acquiredUpgrades["True Sun God"])return;if(("20SunGodVengeful"==e||"20SunGodVengful"==e)&&!t.achievementsClaimed.includes("Strangely Adorable"))return;let d=document.createElement("div");d.id=`${e}-level-select-div`,d.classList.add("hero-level-select-div"),a.appendChild(d);let l=document.createElement("div");if(l.id=`${e}-level-select-btn`,l.classList.add("hero-level-select-btn"),d.appendChild(l),"20SunGod"==e||"20SunGodVengeful"==e||"20SunGodVengful"==e){let t=document.createElement("img");t.id=`${e}-level-select-img`,t.classList.add("hero-level-select-img"),t.src="20SunGod"==e?"./Assets/UI/BuffIconTrueSunGod5xx.webp":"./Assets/UI/BuffIconTrueSunGod555.webp",d.appendChild(t)}else{let t=document.createElement("p");t.id=`${e}-level-select-text`,t.classList.add("hero-level-select-text"),t.classList.add("black-outline"),t.innerHTML=e,d.appendChild(t)}d.addEventListener("click",(()=>{Ft(e)}))})),document.getElementById("1-level-select-btn").classList.add("selected-level-btn")}function zt(){let e=document.getElementById("progress-content");e.innerHTML="";let a=[0,0,0];for(let[e,d]of Object.entries(t.acquiredKnowledge))d?a[0]+=1:Me.RecommendedKnowledge.includes(e)?a[1]+=1:a[2]+=1;let d=document.createElement("div");d.id="knowledge-progress-container",d.classList.add("knowledge-progress-container"),e.appendChild(d);let l=document.createElement("div");l.classList.add("knowledge-progress-container-div"),d.appendChild(l);let n=document.createElement("p");n.id="right-column-header-text",n.classList.add("column-header-text"),n.classList.add("black-outline"),n.innerHTML=`${a[0]} Unlocked Knowledge Points`,l.appendChild(n);let s=document.createElement("div");s.id="knowledge-progress-unlocked-div",s.classList.add("knowledge-progress-div"),l.appendChild(s);let i=document.createElement("div");i.classList.add("knowledge-progress-container-div"),d.appendChild(i);let o=document.createElement("p");o.id="right-column-header-text",o.classList.add("column-header-text"),o.classList.add("black-outline"),o.innerHTML=`${a[2]+a[1]} Locked Knowledge Points`,i.appendChild(o);let r=document.createElement("div");r.id="knowledge-progress-locked-div",r.classList.add("knowledge-progress-div"),i.appendChild(r);for(let[e,a]of Object.entries(t.acquiredKnowledge)){if(!ve(e))continue;let t=document.createElement("div");t.id=`${e}-icon-div`,t.classList.add("knowledge-icon-div"),a?s.appendChild(t):r.appendChild(t);let d=document.createElement("div");d.id=`${e}-glow`,t.appendChild(d);let l=document.createElement("img");l.id=`${e}-icon`,l.classList.add("knowledge-icon"),l.src=ae(e),t.appendChild(l),t.addEventListener("click",(()=>{Kt(e),Array.from(document.getElementsByClassName("knowledge-glow")).forEach((e=>{e.classList.remove("knowledge-glow")})),d.classList.add("knowledge-glow")}))}""==r.innerHTML&&(o.style.display="none"),""==s.innerHTML&&(n.style.display="none");let c=document.createElement("div");c.id="tooltip-container-help-me",c.classList.add("tooltip-container-help-me"),d.appendChild(c);let p=document.createElement("div");p.id="knowledge-progress-floating-tooltip",p.classList.add("knowledge-progress-floating-tooltip"),c.appendChild(p);let m=document.createElement("p");m.id="knowledge-name-text",m.classList.add("knowledge-name-text"),m.classList.add("black-outline"),p.appendChild(m);let u=document.createElement("p");u.id="knowledge-desc-text",u.classList.add("knowledge-desc-text"),p.appendChild(u)}function Kt(e){document.getElementById("knowledge-progress-floating-tooltip").style.display="block",document.getElementById("knowledge-name-text").innerHTML=ve(e),document.getElementById("knowledge-desc-text").innerHTML=ve(`${e}Description`)}function Wt(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="maps-progress-header-bar",t.classList.add("maps-progress-header-bar"),e.appendChild(t);let a=document.createElement("div");a.id="maps-progress-views",a.classList.add("maps-progress-views"),t.appendChild(a);let d=document.createElement("p");d.id="maps-progress-views-text",d.classList.add("maps-progress-coop-toggle-text"),d.classList.add("black-outline"),d.innerHTML="Display Type:",a.appendChild(d);let l=document.createElement("div");l.id="maps-progress-game",l.classList.add("maps-progress-view"),l.classList.add("black-outline"),l.innerHTML="Game",l.addEventListener("click",(()=>{Vt("game")})),a.appendChild(l);let n=document.createElement("div");n.id="maps-progress-grid",n.classList.add("maps-progress-view"),n.classList.add("black-outline"),n.classList.add("maps-progress-view-selected"),n.innerHTML="Grid",n.addEventListener("click",(()=>{Vt("grid")})),a.appendChild(n);let s=document.createElement("div");s.id="maps-progress-list",s.classList.add("maps-progress-view"),s.classList.add("maps-progress-view-list"),s.classList.add("black-outline"),s.innerHTML="List",s.addEventListener("click",(()=>{Vt("list")})),a.appendChild(s);let i=document.createElement("div");i.id="maps-progress-filter",i.classList.add("maps-progress-filter"),t.appendChild(i);let o=document.createElement("div");o.id="map-progress-filter-difficulty",o.classList.add("map-progress-filter-difficulty"),i.appendChild(o);let r=document.createElement("p");r.id="maps-progress-filter-difficulty-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Filter Difficulty:",o.appendChild(r);let c=document.createElement("select");c.id="map-progress-filter-difficulty-select",c.classList.add("map-progress-filter-difficulty-select"),c.addEventListener("change",(()=>{Zt(c.value)}));["All","Beginner","Intermediate","Advanced","Expert"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,c.appendChild(t)})),o.appendChild(c);let p=document.createElement("div");p.id="maps-progress-coop-toggle",p.classList.add("maps-progress-coop-toggle"),i.appendChild(p);let m=document.createElement("p");m.id="maps-progress-coop-toggle-text",m.classList.add("maps-progress-coop-toggle-text"),m.classList.add("black-outline"),m.innerHTML="Co-op: ",p.appendChild(m);let u=document.createElement("input");u.id="maps-progress-coop-toggle-input",u.classList.add("maps-progress-coop-toggle-input"),u.type="checkbox",u.addEventListener("change",(()=>{Yt(u.checked)})),p.appendChild(u);let h=document.createElement("div");h.id="maps-progress-container",h.classList.add("maps-progress-container"),e.appendChild(h);let g=document.createElement("div");g.id="map-progress-container",g.classList.add("map-progress-container"),g.style.display="none",e.appendChild(g),Vt("game")}function Vt(e){switch(Oe=e,e){case"grid":document.getElementById("maps-progress-grid").classList.add("stats-tab-yellow"),document.getElementById("maps-progress-list").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-game").classList.remove("stats-tab-yellow"),ta();break;case"list":document.getElementById("maps-progress-grid").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-list").classList.add("stats-tab-yellow"),document.getElementById("maps-progress-game").classList.remove("stats-tab-yellow"),aa();break;case"game":document.getElementById("maps-progress-grid").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-list").classList.remove("stats-tab-yellow"),document.getElementById("maps-progress-game").classList.add("stats-tab-yellow"),da()}}function Yt(e){switch(Ue=e,document.getElementById("maps-progress-coop-toggle-input").checked=e,Oe){case"grid":ta();break;case"list":aa();break;case"game":da()}}function Zt(e){switch(Ge=e,Oe){case"grid":ta();break;case"list":aa();break;case"game":da()}}function Xt(e){document.getElementById("maps-progress-container").style.display="none",document.getElementById("maps-progress-header-bar").style.display="none",document.getElementById("map-progress-container").style.display="flex",Qt(e)}function Jt(){document.getElementById("map-progress-container").style.display="none",document.getElementById("maps-progress-header-bar").style.display="flex",document.getElementById("maps-progress-container").style.display="block"}function Qt(e){let a=document.getElementById("map-progress-container");a.innerHTML="";let d=document.createElement("div");d.id="map-progress-header-bar",d.classList.add("single-map-progress-header-bar"),a.appendChild(d);let l=document.createElement("div");l.id="map-next-and-prev",l.classList.add("map-next-and-prev"),d.appendChild(l);let n=document.createElement("div");n.id="map-progress-prev-btn",n.classList.add("maps-progress-view"),n.classList.add("black-outline"),n.innerHTML="Previous",n.addEventListener("click",(()=>{let a=Object.keys(Me.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));0==a.indexOf(e)?Xt(a[a.length-1]):Xt(a[a.indexOf(e)-1])})),l.appendChild(n);let s=document.createElement("div");s.id="map-progress-next-btn",s.classList.add("maps-progress-view"),s.classList.add("black-outline"),s.innerHTML="Next",s.addEventListener("click",(()=>{let a=Object.keys(Me.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));a.indexOf(e)==a.length-1?Xt(a[0]):Xt(a[a.indexOf(e)+1])})),l.appendChild(s);let i=document.createElement("img");i.classList.add("modal-close"),i.src="./Assets/UI/CloseBtn.webp",i.addEventListener("click",(()=>{Jt()})),d.appendChild(i);let o=document.createElement("div");o.id="map-below-header-bar",o.classList.add("map-below-header-bar"),a.appendChild(o);let r=document.createElement("div");r.id="map-left-column",r.classList.add("map-left-column"),o.appendChild(r);let c=document.createElement("div");c.id="map-progress-div",c.classList.add("map-progress-div"),r.appendChild(c);let p=document.createElement("div");p.id="map-name-top",p.classList.add("map-name-top"),c.appendChild(p);let m=document.createElement("img");m.id="map-difficulty-icon",m.classList.add("map-difficulty-icon"),m.src=`./Assets/DifficultyIcon/Map${Me.mapsInOrder[e]}Btn.webp`,p.appendChild(m);let u=document.createElement("div");u.id="map-name-and-medals",u.classList.add("map-name-and-medals"),p.appendChild(u);let h=document.createElement("p");h.id="map-name",h.classList.add("map-name-large"),h.classList.add("black-outline"),h.innerHTML=ve(e),u.appendChild(h);let g=document.createElement("div");g.id="map-progress-single",g.classList.add("map-progress-subtext"),g.innerHTML=`${Object.values(Ae.Medals.single[e]).filter((e=>1==e)).length}/15 Single Player Medals`,u.appendChild(g);let L=document.createElement("div");L.id="map-progress-coop",L.classList.add("map-progress-subtext"),L.innerHTML=`${Object.values(Ae.Medals.coop[e]).filter((e=>1==e)).length}/15 Coop Medals`,u.appendChild(L);let b=document.createElement("img");b.id="map-icon",b.classList.add("map-icon"),b.src=ie(e),c.appendChild(b);let v=document.createElement("div");switch(v.id="map-progress-single-medals",v.classList.add("map-progress-medals"),r.appendChild(v),Ae.Borders.single[e]){case"None":v.classList.add("none-border");break;case"Bronze":v.classList.add("bronze-border");break;case"Silver":v.classList.add("silver-border");break;case"Gold":v.classList.add("gold-border");break;case"Black":v.classList.add("black-border")}for(let[t,a]of Object.entries(Ae.Medals.single[e])){if(null==a)continue;let d=document.createElement("div");d.id=`${t}-div`,d.classList.add("medal-div"),v.appendChild(d);let l=document.createElement("img");l.id=`${t}-img`,l.classList.add("medal-img"),l.src=pe(a?`Medal${Y[t]}`:"MedalEmpty"),"Black"==Ae.Borders.single[e]&&l.classList.add("medal-glow"),l.style.display="none",l.addEventListener("load",(()=>{l.width<l.height?l.style.width=`${Ld(3,70,256,0,l.width)}px`:l.style.height=`${Ld(3,70,256,0,l.height)}px`,l.style.removeProperty("display")})),d.appendChild(l)}let y=document.createElement("div");y.id="map-progress-coop-medals",y.classList.add("map-progress-medals"),r.appendChild(y);for(let[t,a]of Object.entries(Ae.Medals.coop[e])){if(null==a)continue;let d=document.createElement("div");d.id=`${t}-div`,d.classList.add("medal-div"),y.appendChild(d);let l=document.createElement("img");l.id=`${t}-img`,l.classList.add("medal-img"),l.src=pe(a?`Medal${Y[t]}`:"MedalCoopEmpty"),l.style.display="none","Black"==Ae.Borders.coop[e]&&l.classList.add("medal-glow"),l.addEventListener("load",(()=>{l.width<l.height?l.style.width=`${Ld(3,70,256,0,l.width)}px`:l.style.height=`${Ld(3,70,256,0,l.height)}px`,l.style.removeProperty("display")})),d.appendChild(l)}switch(Ae.Borders.coop[e]){case"None":y.classList.add("coop-border");break;case"Bronze":y.classList.add("bronze-border");break;case"Silver":y.classList.add("silver-border");break;case"Gold":y.classList.add("gold-border");break;case"Black":y.classList.add("black-border")}let C=document.createElement("div");C.id="map-right-column",C.classList.add("map-right-column"),o.appendChild(C);let E=document.createElement("div");E.id="right-column-header",E.classList.add("right-column-header"),C.appendChild(E);let w=document.createElement("p");w.id="right-column-header-text",w.classList.add("column-header-text"),w.classList.add("black-outline"),w.innerHTML="Mode Stats",E.appendChild(w);let f=document.createElement("div");f.id="maps-progress-coop-toggle",f.classList.add("maps-progress-coop-toggle"),E.appendChild(f);let k=document.createElement("p");k.id="maps-progress-coop-toggle-text",k.classList.add("maps-progress-coop-toggle-text"),k.classList.add("black-outline"),k.innerHTML="Co-op: ",f.appendChild(k);let M=document.createElement("input");M.id="maps-progress-coop-toggle-input",M.classList.add("maps-progress-coop-toggle-input"),M.type="checkbox",M.addEventListener("change",(()=>{Yt(M.checked),ea(e,Ue)})),M.checked=Ue,f.appendChild(M);let T=document.createElement("div");T.id="map-stats-container",T.classList.add("map-stats-container"),C.appendChild(T),ea(e,Ue)}function ea(e,t){let a=document.getElementById("map-stats-container");a.innerHTML="";for(let[d,l]of Object.entries(t?Ae.Maps[e].coop:Ae.Maps[e].single)){if(null==l)continue;let e=document.createElement("div");e.id=`${d}-div`,e.classList.add("map-stats-div"),a.appendChild(e);let t=document.createElement("img");t.id=`${d}-icon`,t.classList.add("map-stats-icon"),t.src=me(d),e.appendChild(t);let n=document.createElement("div");n.id=`${d}-text-div`,n.classList.add("map-stats-text-div"),e.appendChild(n);let s=document.createElement("p");s.id=`${d}-text`,s.classList.add("map-stats-text-mode"),s.classList.add("black-outline"),s.innerHTML=ve(`Mode ${d}`),n.appendChild(s);let i=document.createElement("p");i.id=`${d}-text`,i.classList.add("map-stats-text"),i.innerHTML=`Times Completed: ${l.timesCompleted}`,n.appendChild(i);let o=document.createElement("p");o.id=`${d}-best-round`,o.classList.add("map-stats-text"),o.innerHTML=`Best Round: ${l.bestRound}`,n.appendChild(o)}if(""==a.innerHTML){let e=document.createElement("p");e.id="no-data-found",e.classList.add("no-data-found"),e.classList.add("black-outline"),e.innerHTML="No Data Found.",a.appendChild(e)}}function ta(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="maps-grid-container",t.classList.add("maps-grid-container"),e.appendChild(t);for(let[e,d]of Object.entries(Me.mapsInOrder)){if(!a.parameters.mapProgress.default.allowed.includes(e))continue;if(null==Ae.Borders[Ue?"coop":"single"][e])continue;if("All"!=Ge&&d!=Ge)continue;let l=document.createElement("div");switch(l.id=`${e}-div`,l.classList.add("map-div"),Ae.Borders[Ue?"coop":"single"][e]){case"None":Ue?l.classList.add("coop-border"):l.classList.add("none-border");break;case"Bronze":l.classList.add("bronze-border");break;case"Silver":l.classList.add("silver-border");break;case"Gold":l.classList.add("gold-border");break;case"Black":l.classList.add("black-border")}t.appendChild(l);let n=document.createElement("img");n.id=`${e}-img`,n.classList.add("map-img"),n.src=ie(e),l.appendChild(n);let s=document.createElement("p");s.id=`${e}-name`,s.classList.add("map-name"),s.classList.add("black-outline"),s.innerHTML=ve(e),l.appendChild(s);let i=document.createElement("div");i.id=`${e}-progress`,i.classList.add("map-progress"),l.appendChild(i),l.addEventListener("click",(()=>{Xt(e)}))}}function aa(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="maps-list-container",t.classList.add("maps-list-container"),e.appendChild(t);let d=document.createDocumentFragment(),l=!1;for(let[e,t]of Object.entries(Me.mapsInOrder)){if(!a.parameters.mapProgress.default.allowed.includes(e))continue;if(null==Ae.Borders[Ue?"coop":"single"][e])continue;if("All"!=Ge&&t!=Ge)continue;if(Object.entries(Ue?Ae.Maps[e].coop:Ae.Maps[e].single).every((([e,t])=>null==t)))continue;let n=document.createElement("div");n.id=`${e}-container`,n.classList.add("map-container"),n.style.backgroundColor=l?"var(--profile-secondary)":"var(--profile-tertiary)",l=!l,d.appendChild(n);let s=document.createElement("div");switch(s.id=`${e}-div`,s.classList.add("map-div"),Ae.Borders[Ue?"coop":"single"][e]){case"None":Ue?s.classList.add("coop-border"):s.classList.add("none-border");break;case"Bronze":s.classList.add("bronze-border");break;case"Silver":s.classList.add("silver-border");break;case"Gold":s.classList.add("gold-border");break;case"Black":s.classList.add("black-border")}n.appendChild(s);let i=document.createElement("img");i.id=`${e}-img`,i.classList.add("map-img"),i.src=ie(e),s.appendChild(i);let o=document.createElement("p");o.id=`${e}-name`,o.classList.add("map-name"),o.classList.add("black-outline"),o.innerHTML=ve(e),s.appendChild(o);let r=document.createElement("div");r.id=`${e}-sections`,r.classList.add("map-sections"),n.appendChild(r);let c=document.createElement("div");c.id=`${e}-section`,c.classList.add("map-section"),r.appendChild(c);let p=document.createElement("p");p.id=`${e}-label-medals`,p.classList.add("map-label-medals"),p.classList.add("black-outline"),c.appendChild(p);let m=document.createElement("p");m.id=`${e}-label-best-round`,m.classList.add("map-label-rounds"),m.classList.add("black-outline"),m.innerHTML="Best Round:",c.appendChild(m);let u=document.createElement("p");u.id=`${e}-label-times-completed`,u.classList.add("map-label-completed"),u.classList.add("black-outline"),u.innerHTML="Times Completed:",c.appendChild(u);for(let[t,a]of Object.entries(Ue?Ae.Maps[e].coop:Ae.Maps[e].single)){if(null==a)continue;let d=document.createElement("div");d.id=`${e}-${t}-column`,d.classList.add("map-section-column"),r.appendChild(d);let l=document.createElement("div");l.id=`${e}-${t}-medal`,l.classList.add("map-section-medal"),d.appendChild(l);let n=document.createElement("img");n.id=`${e}-${t}-medal-img`,n.classList.add("map-section-medal-img"),n.src=pe("Clicks"==t&&a.completedWithoutLoadingSave?`Medal${Ue?"Coop":""}${Y["CHIMPS-BLACK"]}`:`Medal${Ue?"Coop":""}${Y[t]}`),n.style.display="none",!a.completed&&a.bestRound<Me.endRound[t]&&!a.completedWithoutLoadingSave&&(n.style.filter="brightness(0.5)"),n.addEventListener("load",(()=>{n.width<n.height?n.style.width=`${Ld(3,70,256,0,n.width)}px`:n.style.height=`${Ld(3,70,256,0,n.height)}px`,n.style.removeProperty("display")})),l.appendChild(n);let s=document.createElement("p");s.id=`${e}-${t}-best-round`,s.classList.add("map-section-text"),s.classList.add("black-outline"),s.innerHTML=a.bestRound,d.appendChild(s);let i=document.createElement("p");i.id=`${e}-${t}-times-completed`,i.classList.add("map-section-text"),i.classList.add("black-outline"),i.innerHTML=a.timesCompleted,d.appendChild(i)}s.addEventListener("click",(()=>{Xt(e)}))}t.appendChild(d)}function da(){let e=document.getElementById("maps-progress-container");e.innerHTML="";let a=document.createElement("div");a.id="maps-game-container",a.classList.add("maps-game-container"),e.appendChild(a);let d=Object.keys(Me.mapsInOrder).filter((e=>Object.keys(t.mapProgress).includes(e)));"All"!=Ge&&(d=d.filter((e=>Me.mapsInOrder[e]==Ge)));let l=Math.ceil(d.length/6)-1;Ne>l&&(Ne=0),Ne<0&&(Ne=l);let n=d.slice(6*Ne,6*Ne+6),s=document.createElement("div");s.id="map-prev-arrow",s.classList.add("map-arrow"),a.appendChild(s);let i=document.createElement("img");i.id="map-prev-arrow-img",i.classList.add("map-arrow-img"),i.src="./Assets/UI/PrevArrow.webp",s.appendChild(i);let o=document.createElement("div");o.id="maps-game-grid",o.classList.add("maps-game-grid"),a.appendChild(o);for(let e of n){let t=document.createElement("div");switch(t.id=`${e}-div`,t.classList.add("map-div-ingame"),Ae.Borders[Ue?"coop":"single"][e]){case"None":Ue?t.classList.add("coop-border"):t.classList.add("none-border");break;case"Bronze":t.classList.add("bronze-border");break;case"Silver":t.classList.add("silver-border");break;case"Gold":t.classList.add("gold-border");break;case"Black":t.classList.add("black-border")}o.appendChild(t);let a=document.createElement("img");a.id=`${e}-img`,a.classList.add("map-img-ingame"),a.src=ie(e),t.appendChild(a);let d=document.createElement("p");d.id=`${e}-name`,d.classList.add("map-name"),d.classList.add("black-outline"),d.innerHTML=ve(e),t.appendChild(d);for(let[a,d]of Ue?Object.entries(Ae.Medals.coop[e]):Object.entries(Ae.Medals.single[e])){if(null==d)continue;let e=document.createElement("div");e.id=`${a}-div`,["Easy","Medium","Hard","Impoppable"].includes(a)?e.classList.add("medal-div-large"):e.classList.add("medal-div-small"),e.classList.add(`medal-div-${a.toLowerCase()}`),t.appendChild(e);let l=document.createElement("img");l.id=`${a}-img`,l.classList.add("medal-img"),l.src=pe(d?`Medal${Y[a]}`:"MedalEmpty"),d||l.classList.add("medal-div-unobtained"),l.style.display="none",l.addEventListener("load",(()=>{l.width<l.height?l.style.width=`${Ld(3,70,256,0,l.width)}px`:l.style.height=`${Ld(3,70,256,0,l.height)}px`,l.style.removeProperty("display")})),e.appendChild(l)}t.addEventListener("click",(()=>{Xt(e)}))}let r=document.createElement("div");r.id="map-next-arrow",r.classList.add("map-arrow"),a.appendChild(r);let c=document.createElement("img");c.id="map-next-arrow-img",c.classList.add("map-arrow-img"),c.src="./Assets/UI/NextArrow.webp",r.appendChild(c),s.addEventListener("click",(()=>{Ne--,da()})),r.addEventListener("click",(()=>{Ne++,da()}));let p=document.createElement("div");p.id="map-page-dots",p.classList.add("map-page-dots"),e.appendChild(p);for(let e=0;e<=l;e++){let t=document.createElement("div");t.id=`map-page-dot-${e}`,t.classList.add("map-page-dot"),e==Ne&&t.classList.add("map-page-dot-active"),p.appendChild(t),t.addEventListener("click",(()=>{Ne=e,da()}))}}function la(){let e=document.getElementById("progress-content");e.innerHTML="";let a=document.createElement("div");a.id="powers-progress-container",a.classList.add("powers-progress-container"),e.appendChild(a);for(let[e,d]of Object.entries(t.powers)){let t=document.createElement("div");t.id=`${e}-div`,t.classList.add("power-div"),a.appendChild(t);let l=document.createElement("img");l.id=`${e}-img`,l.classList.add("power-img"),l.src=oe(e),t.appendChild(l);let n=document.createElement("p");n.id=`${e}-name`,n.classList.add("power-name"),n.classList.add("black-outline"),n.innerHTML=ve(e),t.appendChild(n);let s=document.createElement("div");s.id=`${e}-progress`,s.classList.add("power-progress"),t.appendChild(s);let i=document.createElement("p");i.id=`${e}-progress-text`,i.classList.add("power-progress-text"),i.classList.add("black-outline"),i.innerHTML=`${d.quantity||0}`,s.appendChild(i)}}function na(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkeys-header-bar",t.classList.add("insta-monkeys-header-bar"),e.appendChild(t);let a=document.createElement("div");a.id="insta-monkeys-views",a.classList.add("maps-progress-views"),t.appendChild(a);let d=document.createElement("p");d.id="maps-progress-views-text",d.classList.add("maps-progress-coop-toggle-text"),d.classList.add("black-outline"),d.innerHTML="Display Type:",a.appendChild(d);let l=document.createElement("div");l.id="insta-monkeys-game-view",l.classList.add("maps-progress-view"),l.classList.add("black-outline"),l.innerHTML="Game",l.addEventListener("click",(()=>{sa("game")})),a.appendChild(l);let n=document.createElement("div");n.id="insta-monkeys-list-view",n.classList.add("maps-progress-view"),n.classList.add("black-outline"),n.innerHTML="List",n.addEventListener("click",(()=>{sa("list")})),a.appendChild(n);let s=document.createElement("div");s.id="insta-monkeys-extras",s.classList.add("maps-progress-views"),t.appendChild(s);let i=document.createElement("div");i.id="insta-monkeys-obtain-view",i.classList.add("maps-progress-view"),i.classList.add("black-outline"),i.innerHTML="Coming Soon",i.addEventListener("click",(()=>{sa("obtain")})),s.appendChild(i);let o=document.createElement("div");o.id="insta-monkeys-rotations-view",o.classList.add("maps-progress-view"),o.classList.add("black-outline"),o.innerHTML="Coming Soon",o.addEventListener("click",(()=>{sa("rotations")})),s.appendChild(o);let r=document.createElement("div");r.id="insta-monkeys-progress-container",r.classList.add("insta-monkeys-progress-container"),e.appendChild(r);let c=document.createElement("div");c.id="insta-monkey-progress-container",c.classList.add("insta-monkey-progress-container"),c.style.display="none",e.appendChild(c),sa("game")}function sa(e){switch(je=e,document.getElementById("insta-monkeys-progress-container").style.removeProperty("display"),document.getElementById("insta-monkey-progress-container").style.display="none",e){case"game":document.getElementById("insta-monkeys-game-view").classList.add("stats-tab-yellow"),document.getElementById("insta-monkeys-list-view").classList.remove("stats-tab-yellow"),ia();break;case"list":document.getElementById("insta-monkeys-game-view").classList.remove("stats-tab-yellow"),document.getElementById("insta-monkeys-list-view").classList.add("stats-tab-yellow"),ha()}}function ia(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkey-game-container",t.classList.add("insta-monkey-game-container"),e.appendChild(t);let a=document.createElement("div");a.id="towers-container",a.classList.add("towers-container"),t.appendChild(a);let d=[],l=[];Object.keys(Me.towersInOrder).forEach((e=>{void 0!==ze.TowerTotal[e]?d.push(e):l.push(e)})),d.concat(l).forEach((e=>{let t=document.createElement("div");t.id=`${e}-container`,t.classList.add("tower-container"),t.style.backgroundImage=`url(./Assets/UI/InstaTowersContainer${ze.TowerBorders[e]||""}.webp)`,t.addEventListener("click",(()=>{oa(e)})),a.appendChild(t);let d=document.createElement("img");d.id=`${e}-img`,d.classList.add("tower-img"),d.src=Q(e,"000"),t.appendChild(d);let l=document.createElement("p");if(l.id=`${e}-name`,l.classList.add("tower-name"),l.classList.add("black-outline"),l.innerHTML=ve(e),t.appendChild(l),null!=ze.TowerTotal[e]){let a=document.createElement("p");a.id=`${e}-total-div`,a.classList.add("insta-progress"),t.appendChild(a);let d=document.createElement("p");d.id=`${e}-total`,d.classList.add("power-progress-text"),d.classList.add("black-outline"),d.innerHTML=ze.TowerTotal[e]||0,a.appendChild(d)}else t.classList.add("insta-tower-container-none")}))}function oa(e){document.getElementById("insta-monkeys-progress-container").style.display="none",document.getElementById("insta-monkey-progress-container").style.display="flex",ra(e)}function ra(e){let t=document.getElementById("insta-monkey-progress-container");t.innerHTML="";let a=document.createElement("div");t.appendChild(a);let d=document.createElement("div");d.id=`${e}-top-bar`,d.classList.add("insta-monkey-top-bar"),a.appendChild(d);let l=document.createElement("div");l.id="map-prev-arrow",l.classList.add("insta-arrow"),l.addEventListener("click",(()=>{ma(e)})),d.appendChild(l);let n=document.createElement("img");n.id="map-prev-arrow-img",n.classList.add("map-arrow-img"),n.src="./Assets/UI/PrevArrow.webp",l.appendChild(n);let s=document.createElement("div");switch(s.id=`${e}-header-div`,s.classList.add("insta-monkey-header-div"),ze.TowerBorders[e]){case"Gold":s.classList.add("insta-topbar-gold");break;case"Black":s.classList.add("insta-topbar-black")}d.appendChild(s);let i=document.createElement("div");i.id="map-next-arrow",i.classList.add("insta-arrow"),i.addEventListener("click",(()=>{ua(e)})),d.appendChild(i);let o=document.createElement("img");o.id="map-next-arrow-img",o.classList.add("map-arrow-img"),o.src="./Assets/UI/NextArrow.webp",i.appendChild(o);let r=document.createElement("div");r.id="maps-progress-coop-toggle",r.classList.add("maps-progress-coop-toggle"),s.appendChild(r);let c=document.createElement("p");c.id="maps-progress-coop-toggle-text",c.classList.add("maps-progress-coop-toggle-text"),c.classList.add("black-outline"),c.innerHTML="Missing: ",r.appendChild(c);let p=document.createElement("input");p.id="insta-progress-missing-toggle-input",p.classList.add("insta-progress-missing-toggle-input"),p.classList.add("MkOffRed"),p.type="checkbox",p.addEventListener("change",(()=>{pa()})),p.checked=_e,r.appendChild(p);let m=document.createElement("p");m.id=`${e}-name`,m.classList.add("insta-monkey-name"),m.classList.add("black-outline"),m.innerHTML=ve(e),s.appendChild(m);let u=document.createElement("div");u.id=`${e}-progress`,u.classList.add("insta-monkey-progress"),s.appendChild(u);let h=document.createElement("p");h.id=`${e}-progress-text`,h.classList.add("insta-monkey-progress-text"),h.classList.add("black-outline"),h.innerHTML=`${ze.TowerTierTotals[e]?Object.values(ze.TowerTierTotals[e]).reduce(((e,t)=>e+t),0):0}/64`,u.appendChild(h);let g=document.createElement("div");g.id=`${e}-main-container`,g.classList.add("insta-monkey-main-container"),a.appendChild(g),ca(e),pa()}function ca(e){let a=document.getElementById(`${e}-main-container`);a.innerHTML="";let d=document.createElement("div");d.id=`${e}-icons-container`,d.classList.add("insta-monkey-icons-container"),a.appendChild(d),Me.collectionOrder.forEach((a=>{let l=document.createElement("div");if(l.id=`${e}-${a}-container`,l.classList.add("insta-monkey-tier-container"),t.instaTowers.hasOwnProperty(e)&&t.instaTowers[e][a]||(l.style.display="none",l.classList.add("insta-monkey-unobtained")),d.appendChild(l),t.instaTowers.hasOwnProperty(e)&&t.instaTowers[e][a]>1){let d=document.createElement("p");d.id=`${e}-total-div`,d.classList.add("insta-progress"),d.classList.add("insta-tier-scale"),l.appendChild(d);let n=document.createElement("p");n.id=`${e}-total`,n.classList.add("power-progress-text"),n.classList.add("black-outline"),n.innerHTML=t.instaTowers[e][a],d.appendChild(n)}let n=document.createElement("img");n.id=`${e}-${a}-img`,n.classList.add("insta-monkey-tier-img"),n.src=t.instaTowers.hasOwnProperty(e)&&t.instaTowers[e][a]?ee(e,a):"./Assets/UI/InstaUncollected.webp",l.appendChild(n);let s=document.createElement("p");s.id=`${e}-${a}-text`,s.classList.add("insta-monkey-tier-text"),s.classList.add("black-outline"),s.innerHTML=`${a[0]}-${a[1]}-${a[2]}`,l.appendChild(s)}))}function pa(){_e=document.getElementById("insta-progress-missing-toggle-input").checked;for(let e of document.getElementsByClassName("insta-monkey-unobtained"))e.style.display=_e?"block":"none"}function ma(e){let t=Object.keys(Me.towersInOrder),a=t.indexOf(e);0==a?a=t.length-1:a--,oa(t[a])}function ua(e){let t=Object.keys(Me.towersInOrder),a=t.indexOf(e);a==t.length-1?a=0:a++,oa(t[a])}function ha(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("div");t.id="insta-monkeys-list-container",t.classList.add("insta-monkeys-list-container"),e.appendChild(t);let a=document.createElement("div");a.id="insta-monkeys-list",a.classList.add("insta-monkeys-list"),t.appendChild(a),Object.keys(Me.towersInOrder).forEach((e=>{if(null==ze.TowerTierTotals[e])return;let t=document.createElement("div");switch(t.id=`${e}-div`,t.classList.add("insta-monkey-div"),a.appendChild(t),ze.TowerBorders[e]){case"Gold":t.classList.add("insta-list-gold");break;case"Black":t.classList.add("insta-list-black")}let d=document.createElement("div");d.id=`${e}-container`,d.classList.add("tower-container"),d.style.backgroundImage=`url(./Assets/UI/InstaTowersContainer${ze.TowerBorders[e]||""}.webp)`,d.addEventListener("click",(()=>{oa(e)})),t.appendChild(d);let l=document.createElement("img");l.id=`${e}-img`,l.classList.add("tower-img"),l.src=Q(e,"000"),d.appendChild(l);let n=document.createElement("p");n.id=`${e}-name`,n.classList.add("tower-name"),n.classList.add("black-outline"),n.innerHTML=ve(e),d.appendChild(n);let s=document.createElement("div");s.id=`${e}-top-bottom`,s.classList.add("insta-monkey-top-bottom"),t.appendChild(s);let i=document.createElement("div");i.id=`${e}-progress`,i.classList.add("insta-monkey-progress-list"),s.appendChild(i);let o=document.createElement("div");o.classList.add("insta-monkey-total"),i.appendChild(o);let r=document.createElement("p");r.id=`${e}-total-label-text`,r.classList.add("insta-monkey-progress-label-text"),r.classList.add("black-outline"),r.innerHTML="Total Instas:",o.appendChild(r);let c=document.createElement("p");c.id=`${e}-total-text`,c.classList.add("insta-monkey-total-text"),c.classList.add("black-outline"),c.innerHTML=ze.TowerTotal[e],o.appendChild(c);let p=document.createElement("div");p.id=`${e}-tier-progress`,p.classList.add("insta-monkey-tier-progress"),i.appendChild(p);let m=document.createElement("p");m.id=`${e}-progress-label-text`,m.classList.add("insta-monkey-progress-label-text"),m.classList.add("black-outline"),m.innerHTML="Unique Instas:",p.appendChild(m);let u=document.createElement("p");u.id=`${e}-progress-text`,u.classList.add("insta-monkey-progress-text"),u.classList.add("black-outline"),u.innerHTML=`${Object.values(ze.TowerTierTotals[e]).reduce(((e,t)=>e+t),0)}/64`,p.appendChild(u);let h=document.createElement("div");h.id=`${e}-tiers-container`,h.classList.add("insta-monkey-tiers-container"),s.appendChild(h);let g=document.createElement("p");g.id=`${e}-tiers-label`,g.classList.add("insta-monkey-tiers-label"),g.classList.add("black-outline"),g.innerHTML="Unique By Tier:",h.appendChild(g);for(let[t,a]of Object.entries(ze.TowerTierTotals[e])){let e=document.createElement("div");e.classList.add("insta-monkey-tier-div"),h.appendChild(e);let d=document.createElement("p");d.classList.add("insta-monkey-tier-text-list"),d.classList.add(`insta-tier-text-${t}`),"5"==t?d.classList.add("t5-insta-outline"):d.classList.add("black-outline"),e.style.backgroundImage=`url(./Assets/UI/InstaTier${t}Container.webp)`,d.innerHTML=`${a}/${Me.instaTiers[t].length}`,e.appendChild(d)}}))}function ga(){let e=document.getElementById("insta-monkeys-progress-container");e.innerHTML="";let t=document.createElement("p");t.id="insta-monkeys-guide-title-text",t.classList.add("insta-monkeys-guide-title-text"),t.classList.add("black-outline"),t.innerHTML="Where To Get More Insta Monkeys",e.appendChild(t);let a=document.createElement("p");a.id="insta-monkeys-guide-title-desc",a.classList.add("insta-monkeys-guide-title-desc"),a.classList.add("black-outline"),a.innerHTML="Select a button to read more about that method.",e.appendChild(a)}function La(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="achievements-progress-container",t.classList.add("achievements-progress-container"),e.appendChild(t);let a=document.createElement("div");a.id="achievements-header-bar",a.classList.add("achievements-header-bar"),t.appendChild(a);let d=document.createElement("div");d.id="achievements-views",d.classList.add("maps-progress-views"),a.appendChild(d);let l=document.createElement("div");l.id="map-progress-filter-difficulty",l.classList.add("map-progress-filter-difficulty"),d.appendChild(l);let n=document.createElement("p");n.id="maps-progress-filter-difficulty-text",n.classList.add("maps-progress-coop-toggle-text"),n.classList.add("black-outline"),n.innerHTML="Filter:",l.appendChild(n);let s=document.createElement("select");s.id="map-progress-filter-difficulty-select",s.classList.add("map-progress-filter-difficulty-select");["None","Monkey Money","Knowledge Points","Insta Monkeys","Hidden Achievements"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,s.appendChild(t)})),l.appendChild(s);let i=document.createElement("div");i.id="maps-progress-filter",i.classList.add("maps-progress-filter"),a.appendChild(i);let o=document.createElement("div");o.id="map-progress-filter-difficulty",o.classList.add("map-progress-filter-difficulty"),i.appendChild(o);let r=document.createElement("p");r.id="maps-progress-filter-difficulty-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Display:",o.appendChild(r);let c=document.createElement("select");c.id="map-progress-filter-difficulty-select",c.classList.add("map-progress-filter-difficulty-select"),c.addEventListener("change",(()=>{ya(c.value)}));["All","Locked","Unlocked"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,c.appendChild(t)})),o.appendChild(c);let p=document.createElement("div");p.id="achievements-container",p.classList.add("achievements-container"),e.appendChild(p),s.addEventListener("change",(()=>{Ca(s.value)})),ya("All"),Ca("None"),ba()}function ba(){let e=document.getElementById("achievements-container");e.innerHTML="";let a=Me.achievementGameOrder;switch(Fe){case"Locked":a=a.filter((e=>!t.achievementsClaimed.includes(z[fe[e].name]||fe[e].name)));break;case"Unlocked":a=a.filter((e=>t.achievementsClaimed.includes(z[fe[e].name]||fe[e].name)));break;case"All":a=a.sort(((e,a)=>t.achievementsClaimed.includes(z[fe[e].name]||fe[e].name)-t.achievementsClaimed.includes(z[fe[a].name]||fe[a].name)))}switch(qe){case"Monkey Money":a=a.filter((e=>fe[e].model.loot.includes("MonkeyMoney"))),a=a.sort(((e,t)=>Object.values(id(fe[e].model.loot)).find((e=>"MonkeyMoney"==e.type)).amount-Object.values(id(fe[t].model.loot)).find((e=>"MonkeyMoney"==e.type)).amount));break;case"Knowledge Points":a=a.filter((e=>fe[e].model.loot.includes("KnowledgePoints")));break;case"Insta Monkeys":a=a.filter((e=>fe[e].model.loot.includes("InstaMonkey")));break;case"Hidden Achievements":a=a.filter((e=>fe[e].model.hidden))}if(0==a.length){let t=document.createElement("p");t.id="no-data-found",t.classList.add("no-data-found"),t.classList.add("black-outline"),t.innerHTML="No Data Found.",t.style.width="100%",e.appendChild(t)}let d=document.createDocumentFragment();for(let e of a){let a=fe[e],l=t.achievementsClaimed.includes(z[a.name]||a.name),n=document.createElement("div");n.classList.add("achievement-div"),d.appendChild(n);let s=document.createElement("div");s.classList.add("achievement-top-div"),n.appendChild(s);let i=document.createElement("div");i.classList.add("achievement-icon-div"),s.appendChild(i);let o=document.createElement("img");o.classList.add("achievement-icon-img"),o.src=re(a.model.achievementIcon,!l&&a.model.hidden),i.appendChild(o);let r=document.createElement("div");r.classList.add("achievement-text-div"),s.appendChild(r);let c=document.createElement("p");c.classList.add("achievement-name-text"),c.classList.add("black-outline"),c.innerHTML=l?ve(`Achievement ${a.model.achievementId} Name`):a.model.hidden?"???":ve(`Achievement ${a.model.achievementId} Name`),r.appendChild(c);let p=document.createElement("p");p.classList.add("achievement-desc-text");let m=l?ve(`Achievement ${a.model.achievementId} Description`):a.model.hidden?"???":ve(`Achievement ${a.model.achievementId} Description`);p.innerHTML=-1!=m.indexOf("{0}")?m.replace("{0}",a.model.achievementGoal.toLocaleString()):m,r.appendChild(p);let u=document.createElement("div");u.classList.add("achievement-bottom-div"),n.appendChild(u);let h=document.createElement("div");h.classList.add("achievement-rewards-div"),u.appendChild(h);for(let[e,t]of Object.entries(id(a.model.loot))){let e=document.createElement("div");e.classList.add("achievement-reward-div"),h.appendChild(e);let a=document.createElement("img");a.classList.add("achievement-reward-img"),a.src=ue(t),e.appendChild(a);let d=document.createElement("p");d.classList.add("achievement-reward-text"),d.classList.add("black-outline");let l="";switch(t.type){case"InstaMonkey":l=t.tiers.split("").join("-");break;case"Knowledge":l="+ "+t.amount.toLocaleString();break;case"Power":case"RandomInstaMonkey":l="X "+t.amount.toLocaleString();break;default:l=t.amount?t.amount.toLocaleString():""}d.innerHTML=l,e.appendChild(d)}if(l){let e=document.createElement("img");e.classList.add("achievement-completed-check"),e.src="./Assets/UI/TickGreenIcon.webp",u.appendChild(e)}}e.appendChild(d)}function va(){let e=document.getElementById("progress-content");e.innerHTML="";let t=document.createElement("div");t.id="extras-progress-container",t.classList.add("extras-progress-container"),e.appendChild(t);let a=[["Big Bloons","BigBloonsMode"],["Small Bloons","SmallBloonsMode"],["Big Monkey Towers","BigTowersMode"],["Small Monkey Towers","SmallTowersMode"],["Small Bosses","SmallBossesMode"]];for(let[e,d]of a){let a=document.createElement("div");a.classList.add("extra-progress-div"),t.appendChild(a);let l=document.createElement("img");l.classList.add("extra-progress-img"),l.src=`./Assets/UI/${d}Icon.webp`,a.appendChild(l);let n=document.createElement("p");if(n.classList.add("extra-progress-text"),n.classList.add("black-outline"),n.innerHTML=ve(d),a.appendChild(n),xe[e]){let e=document.createElement("img");e.classList.add("extra-progress-tick"),e.src="./Assets/UI/TickGreenIcon.webp",a.appendChild(e)}}}function ya(e){Fe=e,ba()}function Ca(e){qe=e,ba()}function Ea(){let e=document.getElementById("events-content");e.innerHTML="";let t=document.createElement("div");t.id="events-page",t.classList.add("progress-page"),e.appendChild(t);let a=document.createElement("div");a.id="selectors-div-events",a.classList.add("selectors-div"),t.appendChild(a);Object.entries({Races:{img:"EventRaceBtn",text:"Races",bgimg:"EventBannerSmallRaces"},Bosses:{img:"BossesBtn",text:"Bosses",bgimg:"EventBannerSmallNoBoss"},Odyssey:{img:"OdysseyEventBtn",text:"Odyssey (Coming Soon)",bgimg:"EventBannerSmallOdyssey"},ContestedTerritory:{img:"ContestedTerritoryEventBtn",text:"Contested Territory",bgimg:"EventBannerSmallCT"},DailyChallenges:{img:"DailyChallengeBtn",text:"Daily Challenges",bgcolor:"radial-gradient(circle, transparent 50%, rgba(0,0,0,1) 100%),linear-gradient(45deg, rgb(70,148,213), rgb(70,148,213))"},AdvancedDailyChallenges:{img:"DailyChallengeBtn",text:"Advanced Daily Challenges",bgcolor:"radial-gradient(circle, transparent 50%, rgba(0,0,0,1) 100%),linear-gradient(45deg, rgb(234,99,52), rgb(234,99,52))"},CoopDailyChallenges:{img:"DailyChallengeBtn",text:"Coop Challenges",bgcolor:"radial-gradient(circle, transparent 50%, rgba(0,0,0,1) 100%),linear-gradient(45deg, rgb(255,150,0), rgb(255,150,0))"}}).forEach((([e,t])=>{let d=document.createElement("div");d.id=e.toLowerCase()+"-div",d.classList.add("events-selector-div"),t.bgcolor?d.style.background=t.bgcolor:d.style.backgroundImage=`url(../Assets/EventBanner/${t.bgimg}.webp)`,d.addEventListener("click",(()=>{wa(e)})),a.appendChild(d);let l=document.createElement("img");l.id=e.toLowerCase()+"-img",l.classList.add("selector-img"),l.src=`../Assets/UI/${t.img}.webp`,d.appendChild(l);let n=document.createElement("p");n.id=e.toLowerCase()+"-text",n.classList.add("event-selector-text"),n.classList.add("black-outline"),n.innerHTML=t.text,d.appendChild(n);let s=document.createElement("img");s.id=e.toLowerCase()+"-go-img",s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",d.appendChild(s)}))}function wa(e){switch(bd(),Ke&&clearInterval(Ke),e){case"Races":ht(),I();break;case"Bosses":ht(),x();break;case"Odyssey":break;case"ContestedTerritory":ht(),A();break;case"DailyChallenges":ht(),Ta("DailyChallenges");break;case"AdvancedDailyChallenges":ht(),Ta("AdvancedDailyChallenges");break;case"CoopDailyChallenges":ht(),Ta("CoopDailyChallenges")}}function fa(){let e=document.getElementById("events-content");e.innerHTML="",Object.values(n).forEach(((t,a)=>{let d=document.createElement("div");d.classList.add("race-div"),e.appendChild(d);let l=document.createElement("div");l.classList.add("race-map-div","silver-border"),d.appendChild(l);let s=document.createElement("img");s.classList.add("race-map-img"),s.src="./Assets/MapIcon/MapLoadingImage.webp",l.appendChild(s);let i=document.createElement("div");i.classList.add("race-challenge-icons"),l.appendChild(i);let o=document.createElement("p");o.classList.add("race-map-rounds","black-outline"),l.appendChild(o);let r=document.createElement("div");r.classList.add("race-info-div"),d.appendChild(r);let c=document.createElement("div");c.classList.add("race-info-top-div"),r.appendChild(c);let p=document.createElement("div");p.classList.add("race-info-middle-div"),r.appendChild(p);let m=document.createElement("div");m.classList.add("race-info-bottom-div"),r.appendChild(m);let u=document.createElement("p");u.classList.add("race-info-name","black-outline"),u.innerHTML=t.name,c.appendChild(u);let h=document.createElement("p");h.id="race-time-left",h.classList.add("race-time-left","black-outline"),h.innerHTML="Finished",c.appendChild(h),new Date<new Date(t.start)?h.innerHTML="Coming Soon!":new Date(t.end)>new Date&&(ud(new Date(t.end),h.id),Ke=setInterval((()=>ud(new Date(t.end),h.id)),1e3));let g=document.createElement("p");g.classList.add("race-info-dates","black-outline"),g.innerHTML=`${new Date(t.start).toLocaleDateString()} - ${new Date(t.end).toLocaleDateString()}`,p.appendChild(g);let L=document.createElement("p");L.classList.add("race-info-total-scores","black-outline"),L.innerHTML=`Total Scores: ${0==t.totalScores?"No Data":t.totalScores.toLocaleString()}`,p.appendChild(L);let b=document.createElement("div");b.classList.add("race-info-rules","start-button","black-outline"),b.innerHTML="Details",b.addEventListener("click",(()=>{ht(),Ia("events",t.metadata,"Race")})),m.appendChild(b);let v=document.createElement("div");v.classList.add("race-info-leaderboard","where-button","black-outline"),v.innerHTML="Leaderboard",v.addEventListener("click",(()=>{xa("events",t,"Race")})),m.appendChild(v),new IntersectionObserver(((e,d)=>{e.forEach((async e=>{if(e.isIntersecting&&(await H(a),"string"!=typeof n[a].metadata)){console.log(t.metadata),d.unobserve(e.target),s.src=Object.keys(Me.mapsInOrder).includes(t.metadata.map)?ie(t.metadata.map):t.metadata.mapURL;let a=Ha(t.metadata),l=Sa(t.metadata);for(let e of Object.values(a)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,i.appendChild(t)}for(let e of l){if(console.log(e),"No Round 100 Reward"==e)continue;if("Paragon Limit"==e)continue;let t=document.createElement("img");t.classList.add("challenge-rule-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${We[e]}.webp`,i.appendChild(t)}o.innerHTML=`Rounds ${t.metadata.startRound}/${t.metadata.endRound}`}}))})).observe(l)}))}function ka(e){let t=document.getElementById("events-content");t.innerHTML="";let a=document.createElement("div");a.classList.add("switch-banner"),a.style.backgroundImage=`url(../Assets/UI/${Ve?"":"Elite"}Ribbon.webp)`,t.appendChild(a);let d=document.createElement("div");d.classList.add("switch-boss-div"),a.appendChild(d);let l=["Bloonarius","Lych","Vortex","Dreadbloon","Phayze"];for(let e of l){let t=document.createElement("img");t.classList.add("switch-boss-img"),t.src=`./Assets/BossIcon/${e}Portrait${Ve?"":"Elite"}.webp`,d.appendChild(t)}let n=document.createElement("p");n.classList.add("switch-text","black-outline"),n.innerHTML=`Switch to ${Ve?"Standard":"Elite"}  Bosses`,a.appendChild(n),a.addEventListener("click",(()=>{Ve=!Ve,Ke&&clearInterval(Ke),ka(Ve)})),Object.values(u).forEach(((a,d)=>{let l=a.bossType.toLowerCase().replace(/\b\w/g,(e=>e.toUpperCase())),n=a.name.replace(/\D/g,""),s=`${e?"Elite":""} ${l} ${n}`,i={name:l,elite:e,eventNumber:n,scoringType:a.scoringType},o=document.createElement("div");o.classList.add("race-div"),o.style.backgroundImage=`url(../Assets/EventBanner/EventBannerSmall${l}.webp)`,t.appendChild(o);let r=document.createElement("div");r.classList.add("race-map-div","boss-border"),o.appendChild(r);let c=document.createElement("img");c.classList.add("race-map-img"),c.src="./Assets/MapIcon/MapLoadingImage.webp",r.appendChild(c);let p=document.createElement("img");p.classList.add("boss-map-boss-icon"),p.src=`./Assets/BossIcon/${l}Portrait${e?"Elite":""}.webp`,r.appendChild(p);let m=document.createElement("div");m.classList.add("race-challenge-icons"),r.appendChild(m);let h=document.createElement("p");h.classList.add("race-map-rounds"),r.appendChild(h);let g=document.createElement("div");g.classList.add("race-info-div","boss-info-div"),o.appendChild(g);let L=document.createElement("div");L.classList.add("race-info-top-div"),g.appendChild(L);let b=document.createElement("div");b.classList.add("race-info-middle-div"),g.appendChild(b);let v=document.createElement("div");v.classList.add("race-info-bottom-div",e?"btn-rotate-boss-elite":"btn-rotate-boss"),g.appendChild(v);let y=document.createElement("p");y.classList.add("race-info-name","black-outline"),y.innerHTML=s,L.appendChild(y);let C=document.createElement("p");C.id="boss-time-left",C.classList.add("race-time-left","black-outline"),C.innerHTML="Finished",L.appendChild(C),new Date<new Date(a.start)?C.innerHTML="Coming Soon!":new Date(a.end)>new Date&&(ud(new Date(a.end),C.id),Ke=setInterval((()=>ud(new Date(a.end),C.id)),1e3));let E=document.createElement("p");E.classList.add("race-info-dates","black-outline"),E.innerHTML=`${new Date(a.start).toLocaleDateString()} - ${new Date(a.end).toLocaleDateString()}`,b.appendChild(E);let w=document.createElement("p");w.classList.add("race-info-total-scores","black-outline"),w.innerHTML=`Total Scores: ${0==(e?a.totalScores_elite:a.totalScores_standard)?"No Data":(e?a.totalScores_elite:a.totalScores_standard).toLocaleString()}`,b.appendChild(w);let f=document.createElement("div");f.classList.add("race-info-rules","start-button","black-outline"),f.innerHTML="Details",f.addEventListener("click",(()=>{ht(),Ia("events",e?a.metadataElite:a.metadataStandard,"Boss",i)})),v.appendChild(f);let k=document.createElement("div");k.classList.add("race-info-leaderboard","start-button","black-outline"),k.innerHTML="Leaderboard",k.addEventListener("click",(()=>{xa("events",a,e?"BossElite":"Boss")})),v.appendChild(k),new IntersectionObserver(((t,l)=>{t.forEach((async t=>{if(t.isIntersecting&&(await $(d,e),"string"!=typeof u[d][e?"metadataElite":"metadataStandard"])){let d=document.createElement("img");switch(d.classList.add("challenge-modifier-icon-event"),a.scoringType){case"LeastCash":d.src="./Assets/ChallengeRulesIcon/LeastCashIcon.webp",m.appendChild(d);break;case"LeastTiers":d.src="./Assets/ChallengeRulesIcon/LeastTiersIcon.webp",m.appendChild(d)}console.log(e?a.metadataElite:a.metadataStandard),l.unobserve(t.target);let n=Ha(e?a.metadataElite:a.metadataStandard),s=Sa(e?a.metadataElite:a.metadataStandard);for(let e of Object.values(n)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,m.appendChild(t)}for(let e of s){if(console.log(e),"No Round 100 Reward"==e)continue;let t=document.createElement("img");t.classList.add("challenge-rule-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${We[e]}.webp`,m.appendChild(t)}c.src=Object.keys(Me.mapsInOrder).includes(e?a.metadataElite.map:a.metadataStandard.map)?ie(e?a.metadataElite.map:a.metadataStandard.map):e?a.metadataElite.mapURL:a.metadataStandard.mapURL}}))})).observe(r)}))}function Ma(){let e=document.getElementById("events-content");e.innerHTML="",document.getElementById("loading").style.transform="scale(0)",Object.values(h).forEach(((t,a)=>{let d=document.createElement("div");d.classList.add("race-div","ct-div"),d.style.backgroundImage="url(../Assets/ProfileBanner/TeamsBanner8.webp)",e.appendChild(d);let l=document.createElement("div");l.classList.add("ct-info-div"),d.appendChild(l);let n=document.createElement("div");n.classList.add("ct-info-top-div"),l.appendChild(n);let s=document.createElement("div");s.classList.add("ct-info-bottom-div"),l.appendChild(s);let i=document.createElement("p");i.classList.add("race-info-name","black-outline"),i.innerHTML="Contested Territory",n.appendChild(i);let o=document.createElement("p");o.id="race-time-left",o.classList.add("race-time-left","black-outline"),o.innerHTML="Finished",n.appendChild(o),new Date<new Date(t.start)?o.innerHTML="Coming Soon!":new Date(t.end)>new Date&&(ud(new Date(t.end),o.id),Ke=setInterval((()=>ud(new Date(t.end),o.id)),1e3));let r=document.createElement("div");r.classList.add("ct-info-left-div"),s.appendChild(r);let c=document.createElement("p");c.classList.add("race-info-dates","ct-info-dates","black-outline"),c.innerHTML=`${new Date(t.start).toLocaleDateString()} - ${new Date(t.end).toLocaleDateString()}`,r.appendChild(c);let p=document.createElement("div");p.classList.add("race-info-rules","start-button","currency-trophies-div","black-outline"),p.innerHTML="Relic Reveal",p.addEventListener("click",(()=>{console.log(t),ht(),Ua("events",t.tiles,`${new Date(t.start).toLocaleDateString()} - ${new Date(t.end).toLocaleDateString()}`)})),r.appendChild(p);let m=document.createElement("div");m.classList.add("ct-leaderboards-div"),s.appendChild(m);let u=document.createElement("p");u.classList.add("ct-leaderboards-header","black-outline"),u.innerHTML="Leaderboards",m.appendChild(u);let h=document.createElement("div");h.classList.add("ct-leaderboards-btns"),m.appendChild(h);let g=document.createElement("div");g.classList.add("race-info-leaderboard","ct-info-leaderboard","start-button","blue-btn","black-outline"),g.innerHTML="Players",g.addEventListener("click",(()=>{xa("events",t,"CTPlayer")})),h.appendChild(g);let L=document.createElement("div");L.classList.add("race-info-leaderboard","ct-info-leaderboard","start-button","blue-btn","black-outline"),L.innerHTML="Teams",L.addEventListener("click",(()=>{xa("events",t,"CTTeam")})),h.appendChild(L);let b=document.createElement("div");b.classList.add("race-info-middle-div","ct-info-middle-div"),m.appendChild(b);let v=document.createElement("p");v.classList.add("race-info-total-scores","black-outline"),v.innerHTML=`Total Scores: ${0==t.totalScores_player?"No Data":t.totalScores_player.toLocaleString()}`,b.appendChild(v);let y=document.createElement("p");y.classList.add("race-info-total-scores","black-outline"),y.innerHTML=`Total Scores: ${0==t.totalScores_team?"No Data":t.totalScores_team.toLocaleString()}`,b.appendChild(y)}))}async function Ta(e){let t=document.getElementById("events-content");t.innerHTML="",await D();let a=Object.values(g).filter((t=>{switch(e){case"DailyChallenges":return t.name.startsWith("Standard");case"AdvancedDailyChallenges":return t.name.startsWith("Advanced");case"CoopDailyChallenges":return t.name.startsWith("coop")}})),d=new Date;"CoopDailyChallenges"==e&&(a=a.filter((e=>new Date(e.createdAt)<d)),a=a.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))));let l=0;if(Object.values(a).forEach(((e,t)=>{let a=e.name.match(/^(Standard|Advanced|coop)(?: (\d+))?: (.*)$/),d="";a&&(d=a[2]||null,null!=d&&d>l&&(l=d))})),"DailyChallenges"==e||"AdvancedDailyChallenges"==e){let a=document.createElement("div");a.classList.add("race-div","event-select-challenge-div"),t.appendChild(a);let d=document.createElement("p");d.classList.add("challenge-select-info-name","black-outline"),d.innerHTML=("DailyChallenges"==e?"Standard":"Advanced")+" Challenges",a.appendChild(d);let n=document.createElement("p");n.classList.add("challenge-info-desc"),n.innerHTML=`Select a challenge by entering a date or ID below. IDs can be no less than 1000, and the date cannot be earlier than ${"DailyChallenges"==e?new Date(Date.UTC(2021,4,7)).toISOString().split("T")[0]:new Date(Date.UTC(2021,4,20)).toISOString().split("T")[0]} for ${"DailyChallenges"==e?"Standard":"Advanced"} challenges.`,a.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-selectors"),a.appendChild(s);let i=document.createElement("div");i.classList.add("challenge-selector-date"),s.appendChild(i);let o=document.createElement("p");o.classList.add("challenge-selector-date-text","black-outline"),o.innerHTML="Date",i.appendChild(o);let r=document.createElement("input");r.classList.add("challenge-selector-date-input"),r.type="date",r.value=new Date(Date.now()).toISOString().split("T")[0],r.addEventListener("change",(()=>{new Date(r.value)>new Date&&(r.value=(new Date).toISOString().split("T")[0]),new Date(r.value)<new Date("DailyChallenges"==e?"2021-05-07":"2021-05-20")&&(r.value="DailyChallenges"==e?"2021-05-07":"2021-05-20")})),i.appendChild(r);let c=document.createElement("img");c.classList.add("challenge-selector-date-img"),c.src="../Assets/UI/ContinueBtn.webp",c.addEventListener("click",(async()=>{console.log(r.value),console.log(F(r.value),e),ht(),Ia("events",await R(F(r.value,"AdvancedDailyChallenges"==e)),e)})),i.appendChild(c);let p=document.createElement("p");p.classList.add("challenge-selector-or","black-outline"),p.innerHTML="OR",s.appendChild(p);let m=document.createElement("div");m.classList.add("challenge-selector-id"),s.appendChild(m);let u=document.createElement("p");u.classList.add("challenge-selector-id-text","black-outline"),u.innerHTML="Challenge ID",m.appendChild(u);let h=document.createElement("input");h.classList.add("challenge-selector-id-input"),h.type="number",h.min=1e3,h.max=l,h.value=l,h.addEventListener("change",(()=>{h.value<1e3&&(h.value=1e3),h.value>l&&(h.value=l)})),m.appendChild(h);let g=document.createElement("img");g.classList.add("challenge-selector-id-img"),g.src="../Assets/UI/ContinueBtn.webp",g.addEventListener("click",(async()=>{console.log(h.value),ht(),Ia("events",await R(_(h.value,"AdvancedDailyChallenges"==e)),e)})),m.appendChild(g)}Object.values(a).forEach(((a,d)=>{let n=a.name.match(/^(Standard|Advanced|coop)(?: (\d+))?: (.*)$/),s="",i="",o="";n&&(s=n[1]||null,i=n[2]||null,o=n[3]||null,null!=i&&i>l&&(l=i));let r=document.createElement("div");r.classList.add("race-div","event-challenge-div"),t.appendChild(r);let c=document.createElement("div");c.classList.add("race-map-div","silver-border"),r.appendChild(c);let p=document.createElement("img");p.classList.add("race-map-img"),p.src="./Assets/MapIcon/MapLoadingImage.webp",c.appendChild(p);let m=document.createElement("div");m.classList.add("race-challenge-icons"),c.appendChild(m);let u=document.createElement("p");u.classList.add("race-map-rounds","black-outline"),c.appendChild(u);let h=document.createElement("div");h.classList.add("race-info-div"),r.appendChild(h);let g=document.createElement("div");g.classList.add("challenge-info-top-div"),h.appendChild(g);let L=document.createElement("div");L.classList.add("challenge-info-left-right"),h.appendChild(L);let b=document.createElement("div");b.classList.add("challenge-info-middle-div"),L.appendChild(b);let v=document.createElement("div");v.classList.add("challenge-info-bottom-div"),L.appendChild(v);let y=document.createElement("p");y.classList.add("challenge-info-name","black-outline"),y.innerHTML="CoopDailyChallenges"==e?a.name.replace("coop - ",""):o,g.appendChild(y);let C=document.createElement("p");C.classList.add("challenge-date","black-outline"),C.innerHTML=`${new Date(a.createdAt).toLocaleDateString()}`,b.appendChild(C);let E=document.createElement("p");E.classList.add("challenge-date","black-outline"),E.innerHTML="CoopDailyChallenges"==e?"Coop":`${s} ${i}`,b.appendChild(E);let w=document.createElement("div");w.classList.add("challenge-info-rules","start-button","black-outline"),w.innerHTML="Details",w.addEventListener("click",(async()=>{ht(),Ia("events",await R(a.id),e)})),b.appendChild(w);let f=["Attempts","Wins","Fails","Unique Players","Victorious Players"],k=document.createElement("div");k.classList.add("challenge-stats-div"),v.appendChild(k);for(let e of f){let t=document.createElement("div");t.classList.add("challenge-stat"),k.appendChild(t);let d=document.createElement("p");d.classList.add("challenge-stat-key"),d.innerHTML=e,t.appendChild(d);let l=document.createElement("p");l.id=`${a.id}-${e}`,l.classList.add("challenge-stat-value"),l.innerHTML="Loading...",t.appendChild(l)}new IntersectionObserver(((t,d)=>{t.forEach((async t=>{if(t.isIntersecting){let l=await R(a.id);if(d.unobserve(t.target),null!=l){let t=Ha(l),d=Sa(l);for(let e of Object.values(t)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,m.appendChild(t)}for(let t of d){if(console.log(t),"No Round 100 Reward"==t&&"AdvancedDailyChallenges"!=e)continue;if("Paragon Limit"==t)continue;let a=document.createElement("img");a.classList.add("challenge-rule-icon-event"),a.src=`./Assets/ChallengeRulesIcon/${We[t]}.webp`,m.appendChild(a)}p.src=Object.keys(Me.mapsInOrder).includes(l.map)?ie(l.map):l.mapURL,u.innerHTML=`Rounds ${l.startRound}/${l.endRound}`,f={Attempts:l.plays+l.restarts,Wins:l.winsUnique,Fails:l.lossesUnique+l.restarts,"Unique Players":l.playsUnique,"Victorious Players":l.winsUnique};for(let[e,t]of Object.entries(f))document.getElementById(`${a.id}-${e}`).innerHTML=t.toLocaleString()}}}))})).observe(c)}))}function Ba(e,t){let a={};return console.log(t),null==t&&("-1"!=e.leastCashUsed?a.scoringType="Least Cash":"-1"!=e.leastTiersUsed?a.scoringType="Least Tiers":a.scoringType=null,a["Random Seed"]=e.seed),a["Date Created"]=new Date(e.createdAt).toLocaleDateString(),a.ID=e.id,a.Creator=e.creator,a["Game Version"]=e.gameVersion,a.Stats={Plays:e.plays,Wins:e.wins,Losses:e.losses,Restarts:e.restarts,"Unique Plays":e.playsUnique,"Unique Wins":e.winsUnique,"Unique Losses":e.lossesUnique},a.Upvotes=e.upvotes,a["Player Completion Rate"]=0==e.playsUnique?"0%":e.winsUnique-e.playsUnique==0?"100%":`${(e.winsUnique/e.playsUnique*100).toFixed(2)}%`,a["Player Win Rate"]=0==e.playsUnique?"0%":`${(e.wins/(e.plays+e.restarts)*100).toFixed(2)}%`,a.statsValid=!1,"n/a"!=e.id&&(a.statsValid=!0),console.log(a),a}async function Ia(e,t,a,d){if(null==t)return;document.getElementById("challenge-content").style.display="flex",document.getElementById("challenge-content").innerHTML="",document.getElementById(`${e}-content`).style.display="none",bd(),console.log(d);let l=Ba(t);if("Boss"==a&&"GameTime"!=d.scoringType)switch(d.scoringType){case"LeastCash":l.scoringType="Least Cash";break;case"LeastTiers":l.scoringType="Least Tiers"}let n=document.createElement("div");n.classList.add("challenge-model"),document.getElementById("challenge-content").appendChild(n);let s=document.createElement("div");s.classList.add("challenge-model-header"),n.appendChild(s);let i=document.createElement("div");i.classList.add("challenge-model-header-icons"),s.appendChild(i);let o=document.createElement("img");o.classList.add("challenge-model-header-difficulty"),i.appendChild(o);let r=document.createElement("div");r.classList.add("challenge-model-header-texts"),s.appendChild(r);let c=document.createElement("p");c.classList.add("challenge-model-header-name","black-outline"),c.innerHTML=t.name,r.appendChild(c);let p=document.createElement("p");p.classList.add("challenge-model-header-mode-diff","black-outline"),p.innerHTML=`${t.difficulty} - ${ve("Mode "+t.mode)} ${null==l.scoringType?"":` - ${l.scoringType}`}`,r.appendChild(p);let m=document.createElement("div");m.classList.add("challenge-header-right-container"),s.appendChild(m);let u=document.createElement("div");u.classList.add("challenge-header-right-top"),m.appendChild(u);let h=document.createElement("img");h.classList.add("modal-close"),h.src="./Assets/UI/CloseBtn.webp",h.addEventListener("click",(()=>{Pa(e)})),u.appendChild(h);let g=document.createElement("div");g.classList.add("challenge-header-right-bottom"),m.appendChild(g);let L=document.createElement("div");L.classList.add("challenge-model-top"),n.appendChild(L);let b=document.createElement("img");b.classList.add("challenge-model-map-icon","boss-border"),b.src=Object.keys(Me.mapsInOrder).includes(t.map)?ie(t.map):t.mapURL,L.appendChild(b);let v=document.createElement("div");v.classList.add("challenge-model-settings"),L.appendChild(v);let y=document.createElement("div");y.classList.add("challenge-model-settings-left"),v.appendChild(y);let C=document.createElement("div");C.classList.add("challenge-model-settings-right"),v.appendChild(C);console.log(t),Object.entries({"Starting Cash":{icon:"CoinIcon",key:"startingCash"},"Start Round":{icon:"StartRoundIconSmall",key:"startRound"},"Starting Lives":{icon:"LivesIcon",key:"lives"},"End Round":{icon:"EndRoundIconSmall",key:"endRound"},"Max Lives":{icon:"LivesIcon",key:"maxLives"},"Max Monkeys":{icon:"MaxMonkeysIcon",key:"maxTowers"}}).forEach((([e,a],d)=>{let l=document.createElement("div");l.classList.add("challenge-setting"),d%2?C.appendChild(l):y.appendChild(l);let n=document.createElement("img");n.classList.add("challenge-setting-icon"),n.src=`./Assets/UI/${a.icon}.webp`,l.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-setting-texts"),l.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-setting-text","black-outline"),i.innerHTML=e+":",s.appendChild(i);let o=document.createElement("p");o.classList.add("challenge-setting-value","black-outline"),o.innerHTML=t[a.key],s.appendChild(o),"maxTowers"!=a.key||0!=t[a.key]&&9999!=t[a.key]||(o.innerHTML="Unlimited"),"maxLives"!=a.key&&"lives"!=a.key&&"startingCash"!=a.key&&"startRound"!=a.key&&"endRound"!=a.key||0!=t[a.key]||(o.innerHTML="Default")}));let E=document.createElement("div");E.classList.add("challenge-setting"),v.appendChild(E);let w=document.createElement("img");w.classList.add("challenge-setting-icon"),E.appendChild(w);let f=document.createElement("div");f.classList.add("challenge-setting-texts"),E.appendChild(f);let k=document.createElement("p");switch(k.classList.add("challenge-setting-text","black-outline"),f.appendChild(k),a){case"Race":o.src="./Assets/UI/EventRaceBtn.webp",k.innerHTML="Race Event",w.src="./Assets/UI/RaceIcon.webp",s.style.backgroundColor="#FFC300";break;case"Boss":o.src=`./Assets/BossIcon/${d.name}EventIcon.webp`,k.innerHTML=(d.elite?"Elite ":"")+"Boss Event",w.src=`./Assets/BossIcon/${d.name}Portrait${d.elite?"Elite":""}.webp`,c.innerHTML=`${d.elite?"Elite ":""}${d.name} ${d.eventNumber}`,s.style.background=d.elite?"linear-gradient(180deg, #401DB4, #A144E2)":"linear-gradient(180deg, #1882A5, #07A4CB)";break;case"Odyssey":o.src="./Assets/UI/OdysseyEventBtn.webp";break;case"ContestedTerritory":o.src="./Assets/UI/ContestedTerritoryEventBtn.webp";break;case"DailyChallenges":k.innerHTML="Daily Challenge",w.src="./Assets/UI/ChallengesIcon.webp",o.src="./Assets/UI/DailyChallengeBtn.webp",s.style.backgroundColor="rgb(70,148,213)";break;case"AdvancedDailyChallenges":k.innerHTML="Advanced Daily",w.src="./Assets/UI/ChallengesIcon.webp",o.src="./Assets/UI/DailyChallengeBtn.webp",s.style.backgroundColor="rgb(234,99,52)";break;case"CoopDailyChallenges":k.innerHTML="Coop Challenge",w.src="./Assets/UI/ChallengesIcon.webp",o.src="./Assets/UI/DailyChallengeBtn.webp",s.style.backgroundColor="rgb(255,150,0)";break;case"Custom":k.innerHTML="Custom Challenge",w.src="./Assets/UI/CustomChallenge.webp",o.src="./Assets/UI/CreateChallengeIcon.webp";let e=document.createElement("p");e.classList.add("challenge-id","black-outline"),e.innerHTML=t.id,e.addEventListener("click",(a=>{a.preventDefault(),a.stopPropagation(),za(t.id,e)})),g.appendChild(e);let a=document.createElement("img");a.classList.add("browser-copy-img"),a.src="../Assets/UI/CopyClipboardBtn.webp",a.addEventListener("click",(a=>{a.preventDefault(),a.stopPropagation(),za(t.id,e)})),g.appendChild(a);let l=document.createElement("img");l.classList.add("browser-go-img"),l.src="../Assets/UI/GoBtnSmall.webp",l.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();let a=document.createElement("iframe");a.style.display="none",a.src=`btd6://Challenge/${t.id}`,document.body.appendChild(a)})),g.appendChild(l)}if(null!=l.scoringType){let e="Boss"==a;console.log(e);let d=document.createElement("div");d.classList.add("challenge-setting"),v.appendChild(d);let n=document.createElement("img");n.classList.add("challenge-setting-icon"),d.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-setting-texts"),d.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-setting-text","black-outline"),s.appendChild(i);let o=document.createElement("p");switch(o.classList.add("challenge-setting-value","black-outline"),o.innerHTML="ERROR",e||s.appendChild(o),l.scoringType){case"Least Cash":i.innerHTML=e?"Least Cash":"Least Cash:",n.src="./Assets/UI/LeastCashIconSmall.webp",o.innerHTML=t.leastCashUsed;break;case"Least Tiers":i.innerHTML=e?"Least Tiers":"Least Tiers:",n.src="./Assets/UI/LeastTiersIconSmall.webp",o.innerHTML=t.leastTiersUsed}}let M={},T={},B=!1;if(Object.entries(t._towers).forEach((([e,t])=>{0!=t.max&&("ChosenPrimaryHero"===t.tower&&0!=t.max&&(B=!0),t.isHero?M[t.tower]=t:T[t.tower]=t)})),console.log(M),console.log(T),console.log(B),B){let e=document.createElement("div");e.classList.add("challenge-tower-selector"),n.appendChild(e)}let I=document.createElement("div");if(I.classList.add("challenge-tower-selector"),n.appendChild(I),B){let e=document.createElement("div");e.classList.add("tower-selector-hero"),I.appendChild(e);let t=document.createElement("img");t.classList.add("hero-selector-img"),t.src="./Assets/UI/AllHeroesIcon.webp",e.appendChild(t)}else for(let[e,t]of Object.entries(Me.heroesInOrder)){if(!M[e])continue;let t=document.createElement("div");t.id=e+"-selector",t.classList.add("tower-selector-hero");let a=document.createElement("img");a.id=e+"-selector-img",a.classList.add("hero-selector-img"),a.src=Q(e,"000"),t.appendChild(a),I.appendChild(t)}for(let[e,t]of Object.entries(Me.towersInOrder)){if(!T[e])continue;let a=document.createElement("div");a.id=e+"-selector",a.classList.add(`tower-selector-${t.toLowerCase()}`),I.appendChild(a);let d=document.createElement("img");if(d.id=e+"-selector-img",d.classList.add("tower-selector-img"),d.src=Q(e,"000"),a.appendChild(d),0!=T[e].path1NumBlockedTiers||0!=T[e].path2NumBlockedTiers||0!=T[e].path3NumBlockedTiers){let t=document.createElement("p");t.classList.add("tower-selector-tiers","black-outline"),t.innerHTML=`${-1==T[e].path1NumBlockedTiers?"0":5-T[e].path1NumBlockedTiers}-${-1==T[e].path2NumBlockedTiers?"0":5-T[e].path2NumBlockedTiers}-${-1==T[e].path3NumBlockedTiers?"0":5-T[e].path3NumBlockedTiers}`,a.appendChild(t)}else if(T[e].hasOwnProperty("restrictParagon")&&T[e].restrictParagon){let e=document.createElement("p");e.classList.add("tower-selector-tiers","black-outline"),e.innerHTML="5-5-5",a.appendChild(e)}}let H=document.createElement("div");H.classList.add("challenge-model-columns"),n.appendChild(H);let S=document.createElement("div");S.classList.add("challenge-model-left"),H.appendChild(S);let x=document.createElement("div");x.classList.add("challenge-model-right"),H.appendChild(x);let $=Ha(t),A=document.createElement("div");A.classList.add("challenge-modifiers-div"),S.appendChild(A);let P=document.createElement("p");P.classList.add("challenge-modifiers-header"),P.classList.add("black-outline"),P.innerHTML="Modifiers",A.appendChild(P),Object.entries($).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("challenge-modifier"),A.appendChild(a);let d=document.createElement("img");d.classList.add("challenge-modifier-icon"),d.src=`./Assets/ChallengeRulesIcon/${t.icon}.webp`,a.appendChild(d);let l=document.createElement("div");l.classList.add("challenge-modifier-texts"),a.appendChild(l);let n=document.createElement("p");n.classList.add("challenge-modifier-text"),n.classList.add("black-outline"),n.innerHTML=`${e}:`,l.appendChild(n);let s=document.createElement("p");s.classList.add("challenge-modifier-value"),s.classList.add("black-outline"),s.innerHTML=isNaN(t.value)?t.value:`${(100*t.value).toFixed(0)}%`,l.appendChild(s)}));let D=Sa(t),R=document.createElement("p");R.classList.add("challenge-rules-header"),R.classList.add("black-outline"),R.innerHTML="Rules",x.appendChild(R);let O=document.createElement("div");if(O.classList.add("challenge-rules-div"),x.appendChild(O),D.forEach((e=>{if("No Round 100 Reward"==e&&"AdvancedDailyChallenges"!=a)return;if("Paragon Limit"==e&&0==t.maxParagons&&"Boss"!=a)return;let d=document.createElement("div");d.classList.add("challenge-rule"),O.appendChild(d);let l=document.createElement("img");l.classList.add("challenge-modifier-icon"),l.src=`./Assets/ChallengeRulesIcon/${We[e]}.webp`,d.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-rule-text-div"),d.appendChild(n);let s=document.createElement("p");if(s.classList.add("challenge-rule-text"),s.classList.add("black-outline"),s.innerHTML=e,n.appendChild(s),console.log(t.roundSets),"Custom Rounds"==e&&"Boss"==a){let e=null;if(t.roundSets.includes("bloonarius")&&(e="BloonariusRoundSet"),t.roundSets.includes("lych")&&(e="LychRoundSet"),t.roundSets.includes("vortex")&&(e="VortexRoundSet"),t.roundSets.includes("dreadbloon")&&(e="DreadbloonRoundSet"),t.roundSets.includes("phayze")&&(e="PhayzeRoundSet"),null!=e){let t=document.createElement("div");t.classList.add("challenge-rule-subtext","start-button","black-outline"),t.innerHTML="Open",n.appendChild(t),t.addEventListener("click",(()=>{Xa("challenge",e)}))}}if("Paragon Limit"==e){let e=document.createElement("p");e.classList.add("challenge-rule-value","black-outline"),e.innerHTML=t.maxParagons,n.appendChild(e)}})),l.statsValid){let e=document.createElement("div");e.classList.add("challenge-model-stats-div"),e.style.display="none",n.appendChild(e);let t=document.createElement("p");t.classList.add("challenge-stats-header","black-outline"),t.innerHTML="Challenge Stats",e.appendChild(t);let a=document.createElement("div");a.classList.add("challenge-stats-left-right"),e.appendChild(a);let d=document.createElement("div");d.classList.add("challenge-stats-left"),a.appendChild(d);let s=document.createElement("p");s.classList.add("challenge-stats-x"),s.innerHTML="X",s.addEventListener("click",(()=>{e.style.display="none"})),e.appendChild(s);let i=document.createElement("div");if(i.classList.add("challenge-usv-div"),d.appendChild(i),0!=l.Upvotes){let e=document.createElement("div");e.classList.add("challenge-upvote-div"),i.appendChild(e);let t=document.createElement("img");t.classList.add("challenge-upvote-icon"),t.src="./Assets/UI/ChallengeThumbsUpIcon.webp",e.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-upvote-value"),a.innerHTML=l.Upvotes,e.appendChild(a)}let o=document.createElement("div");o.classList.add("challenge-trophy-div"),i.appendChild(o);let r=document.createElement("img");r.classList.add("challenge-trophy-icon"),r.src="./Assets/UI/ChallengeTrophyIcon.webp",o.appendChild(r);let c=document.createElement("p");c.classList.add("challenge-trophy-value"),c.innerHTML=l["Player Completion Rate"],o.appendChild(c);let p=document.createElement("div");p.classList.add("challenge-skull-div"),i.appendChild(p);let m=document.createElement("img");m.classList.add("challenge-skull-icon"),m.src="./Assets/UI/DeathRateIcon.webp",p.appendChild(m);let h=document.createElement("p");if(h.classList.add("challenge-skull-value"),h.innerHTML=l["Player Win Rate"],p.appendChild(h),"n/a"!=l.Creator&&null!=l.Creator){let e=document.createElement("div");e.classList.add("challenge-creator"),d.appendChild(e);let t=document.createElement("div");t.classList.add("avatar"),e.appendChild(t);let a=50,n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${a}px`,n.src="../Assets/UI/InstaTowersContainer.webp",t.appendChild(n);let s=document.createElement("img");s.classList.add("avatar-img","noSelect"),s.style.width=`${a}px`,s.src="../Assets/ProfileAvatar/ProfileAvatar01.webp",t.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-creator-name","black-outline"),i.innerHTML="Loading...",e.appendChild(i),await U(l.Creator).then((t=>{i.innerHTML=t.displayName,s.src=ge(t),e.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${Le(t)})`,e.addEventListener("click",(()=>{Ra("challenge",l.Creator)}))}))}["Date Created","Game Version","Random Seed"].forEach((e=>{if("Game Version"==e&&0==l[e])return;let t=document.createElement("div");t.classList.add("challenge-stat"),d.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-stat-label"),a.innerHTML=`${e}: ${l[e]}`,t.appendChild(a)}));let g=document.createElement("div");g.classList.add("challenge-stats-right"),a.appendChild(g),Object.entries(l.Stats).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("challenge-stat"),g.appendChild(a);let d=document.createElement("p");d.classList.add("challenge-stat-label"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.classList.add("challenge-model-stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}));let L=document.createElement("img");L.classList.add("challenge-stats-btn"),L.src="./Assets/UI/InfoBtn.webp",L.addEventListener("click",(()=>{e.style.display="none"==e.style.display?"flex":"none"})),u.appendChild(L)}}function Ha(e){let t={};return 1!=e._bloonModifiers.speedMultiplier&&(t["Bloon Speed"]={value:e._bloonModifiers.speedMultiplier,icon:e._bloonModifiers.speedMultiplier>1?"FasterBloonsIcon":"SlowerBloonsIcon"}),1!=e._bloonModifiers.moabSpeedMultiplier&&(t["MOAB Speed"]={value:e._bloonModifiers.moabSpeedMultiplier,icon:e._bloonModifiers.moabSpeedMultiplier>1?"FasterMoabIcon":"SlowerMoabIcon"}),e._bloonModifiers.hasOwnProperty("regrowRateMultiplier")&&1!=e._bloonModifiers.regrowRateMultiplier&&(t["Regrow Rate"]={value:e._bloonModifiers.regrowRateMultiplier,icon:e._bloonModifiers.regrowRateMultiplier>1?"RegrowRateIncreaseIcon":"RegrowRateDecreaseIcon"}),e.hasOwnProperty("abilityCooldownReductionMultiplier")&&1!=e.abilityCooldownReductionMultiplier&&(t["Ability Cooldown Rate"]={value:e.abilityCooldownReductionMultiplier,icon:e.abilityCooldownReductionMultiplier>1?"AbilityCooldownReductionIncreaseIcon":"AbilityCooldownReductionDecreaseIcon"}),1!=e.removeableCostMultiplier&&-1!=e.removeableCostMultiplier&&(t["Removeable Cost"]={value:0==e.removeableCostMultiplier?"Free":12==e.removeableCostMultiplier?"Disabled":e.removeableCostMultiplier,icon:e.removeableCostMultiplier>1?"RemovableCostIncreaseIcon":"RemovableCostDecreaseIcon"}),1!=e._bloonModifiers.healthMultipliers.bloons&&(t["Ceramic Health"]={value:e._bloonModifiers.healthMultipliers.bloons,icon:e._bloonModifiers.healthMultipliers.bloons>1?"CeramicIncreaseHPIcon.webp":"CeramicDecreaseHPIcon"}),1!=e._bloonModifiers.healthMultipliers.moabs&&(t["MOAB Health"]={value:e._bloonModifiers.healthMultipliers.moabs,icon:e._bloonModifiers.healthMultipliers.moabs>1?"MoabBoostIcon":"MoabDecreaseHPIcon"}),e._bloonModifiers.healthMultipliers.hasOwnProperty("boss")&&1!=e._bloonModifiers.healthMultipliers.boss&&(t["Boss Health"]={value:e._bloonModifiers.healthMultipliers.boss,icon:e._bloonModifiers.healthMultipliers.boss>1?"BossBoostIcon":"BossDecreaseHPIcon"}),e._bloonModifiers.hasOwnProperty("bossSpeedMultiplier")&&1!=e._bloonModifiers.bossSpeedMultiplier&&(t["Boss Speed"]={value:e._bloonModifiers.bossSpeedMultiplier,icon:e._bloonModifiers.bossSpeedMultiplier>1?"FasterBossIcon":"SlowerBossIcon"}),t}function Sa(e){let t=[];return e.disableMK&&t.push("Monkey Knowledge Disabled"),1==e.lives&&t.push("No Lives Lost"),e.disableSelling&&t.push("Selling Disabled"),e.disablePowers&&t.push("Powers Disabled"),e.noContinues&&t.push("No Continues"),e._bloonModifiers.allCamo&&t.push("All Camo"),e._bloonModifiers.allRegen&&t.push("All Regrow"),e.disableDoubleCash&&t.push("Double Cash Disabled"),t.push("No Round 100 Reward"),(e.roundSets.includes("default")&&e.roundSets.length>1||1==e.roundSets.length&&"default"!=e.roundSets[0])&&t.push("Custom Rounds"),10!=e.maxParagons&&t.push("Paragon Limit"),t}function xa(e,t,a){switch(a){case"Boss":i!=t.leaderboard_standard_players_1&&(o=1),i=t.leaderboard_standard_players_1;break;case"BossElite":i!=t.leaderboard_elite_players_1&&(o=1),i=t.leaderboard_elite_players_1;break;case"CTPlayer":i!=t.leaderboard_player&&(o=1),i=t.leaderboard_player;break;case"CTTeam":i!=t.leaderboard_team&&(o=1),i=t.leaderboard_team;break;default:i!=t.leaderboard&&(o=1),i=t.leaderboard}let d=document.getElementById("leaderboard-content");d.style.display="flex",d.innerHTML="",document.getElementById(`${e}-content`).style.display="none";let l=document.createElement("div");l.classList.add("leaderboard-div"),d.appendChild(l);let n=document.createElement("div");n.classList.add("leaderboard-top"),l.appendChild(n);let s=document.createElement("div");s.classList.add("leaderboard-header"),n.appendChild(s);let c=document.createElement("div");c.classList.add("leaderboard-header-left"),s.appendChild(c);let m=document.createElement("img");m.classList.add("modal-close"),m.src="./Assets/UI/CloseBtn.webp",m.addEventListener("click",(()=>{d.style.display="none",document.getElementById(`${e}-content`).style.display="flex"})),c.appendChild(m);let u=document.createElement("div");u.classList.add(`leaderboard-header-middle-${a.toLowerCase()}`),s.appendChild(u);let h=document.createElement("div");switch(h.classList.add(`leaderboard-header-${a.toLowerCase()}`,"black-outline"),u.appendChild(h),a){case"Race":h.innerHTML="Race Leaderboard";break;case"Boss":h.innerHTML="Boss Leaderboard";break;case"BossElite":h.innerHTML="Elite Boss Leaderboard";break;case"CTPlayer":h.innerHTML="Contested Territory <br> Player Leaderboard";break;case"CTTeam":h.innerHTML="Contested Territory <br> Team Leaderboard"}let g=document.createElement("div");g.classList.add("leaderboard-header-right"),s.appendChild(g);let L=document.createElement("div");L.id="leaderboard-column-labels",L.classList.add("leaderboard-column-labels"),n.appendChild(L);let b=document.createElement("div");b.id="leaderboard-entries",b.classList.add("leaderboard-entries"),l.appendChild(b);let v=document.createElement("div");v.classList.add("leaderboard-footer"),l.appendChild(v);let y=document.createElement("div");y.classList.add("leaderboard-footer-left"),v.appendChild(y);let C=document.createElement("img");C.classList.add("leaderboard-footer-refresh"),C.src="./Assets/UI/RefreshBtn.webp",C.addEventListener("click",(()=>{p||($a(t),C.style.filter="grayscale(1) brightness(0.5)",setTimeout((()=>{C.style.filter="none",p=!1}),1e4),p=!0)})),y.appendChild(C);let E=document.createElement("div");E.classList.add("leaderboard-footer-middle"),v.appendChild(E);let w=document.createElement("img");w.classList.add("leaderboard-footer-page-left","black-outline"),w.src="./Assets/UI/NextArrowSmallYellow.webp",E.appendChild(w);let f=document.createElement("div");f.id="leaderboard-footer-page-number",f.classList.add("leaderboard-footer-page-number","black-outline"),f.innerHTML="Loading...",E.appendChild(f);let k=document.createElement("img");k.classList.add("leaderboard-footer-page-right","black-outline"),k.src="./Assets/UI/NextArrowSmallYellow.webp",w.addEventListener("click",(()=>{o--,f.innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,b.innerHTML="",rd(b),$a(t)})),k.addEventListener("click",(()=>{o++,f.innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,b.innerHTML="",rd(b),$a(t)})),E.appendChild(k);let M=document.createElement("div");M.classList.add("leaderboard-footer-right"),v.appendChild(M);let T=document.createElement("input");T.classList.add("leaderboard-footer-page-input"),T.type="number",T.min="1",T.max=1e3/r,T.value=`${o}`,T.addEventListener("change",(()=>{T.value<1&&(T.value=1),T.value>1e3/r&&(T.value=1e3/r)})),M.appendChild(T);let B=document.createElement("img");B.classList.add("leaderboard-go-img"),B.src="../Assets/UI/ContinueBtn.webp",B.addEventListener("click",(()=>{o=T.value,f.innerHTML=`Page ${o} (#${o*r-(r-1)} - ${o*r})`,b.innerHTML="",rd(b),$a(t)})),M.appendChild(B),rd(b),$a(t,a)}async function $a(e,t){await S(),console.log(s);let a=null;switch(t){case"CTTeam":a="CTTeam";break;case"CTPlayer":a="CTPlayer"}if(e.hasOwnProperty("leaderboard")&&e.leaderboard.includes("races")&&(a="GameTime"),e.hasOwnProperty("bossType"))switch(e.scoringType){case"GameTime":a="GameTime";break;case"LeastCash":a="LeastCash";break;case"LeastTiers":a="LeastTiers"}Aa(a);let d=document.getElementById("leaderboard-entries");if(d.innerHTML="",null!=s)s.forEach(((a,l)=>{let n={};a.hasOwnProperty("scoreParts")&&a.scoreParts.forEach(((e,t)=>{n[e.name]=e}));let s=document.createElement("div");s.classList.add("leaderboard-entry"),"CTTeam"!=t&&s.addEventListener("click",(()=>{Ra("leaderboard",a.profile)})),d.appendChild(s);let i=document.createElement("div");i.classList.add("leaderboard-entry-div"),s.appendChild(i);let c=document.createElement("p");c.classList.add("leaderboard-entry-rank"),c.classList.add("black-outline"),c.innerHTML=l+(o-1)*r+1,i.appendChild(c);let p=document.createElement("div");p.classList.add("leaderboard-entry-player"),i.appendChild(p);let m=null,u=null,h=null;"CTTeam"==t?(m=document.createElement("div"),m.classList.add("leaderboard-entry-icon-ct"),p.appendChild(m),u=document.createElement("img"),u.classList.add("leaderboard-entry-frame"),u.src="./Assets/UI/TeamFrame1.webp",m.appendChild(u),h=document.createElement("img"),h.classList.add("leaderboard-entry-emblem"),h.src="./Assets/UI/TeamIcon1.webp",m.appendChild(h)):(m=document.createElement("img"),m.classList.add("leaderboard-entry-icon"),m.src="./Assets/ProfileAvatar/ProfileAvatar01.webp",p.appendChild(m));let g=document.createElement("p");g.classList.add("leaderboard-entry-name","leaderboard-outline"),g.innerHTML=a.displayName,p.appendChild(g);let L=document.createElement("div");L.classList.add("leaderboard-entry-time-submit-div"),i.appendChild(L);let b=document.createElement("div");b.classList.add("leaderboard-entry-score"),i.appendChild(b);let v=document.createElement("img");v.classList.add("leaderboard-entry-score-icon"),v.src="./Assets/UI/StopWatch.webp",b.appendChild(v);let y=document.createElement("p");if(y.classList.add("leaderboard-entry-main-score","leaderboard-outline"),b.appendChild(y),console.log(e),e.hasOwnProperty("leaderboard")&&e.leaderboard.includes("races")){let t=new Date(e.start+n["Time after event start"].score),d=document.createElement("p");d.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),d.innerHTML=t.toLocaleString(),L.appendChild(d);let l=document.createElement("p");l.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),l.innerHTML=hd(new Date,t),L.appendChild(l),y.innerHTML=pd(a.score)}if(e.hasOwnProperty("bossType"))switch(e.scoringType){case"GameTime":let t=new Date(e.start+n["Time after event start"].score),d=document.createElement("p");d.classList.add("leaderboard-entry-time-submitted","leaderboard-outline"),d.innerHTML=t.toLocaleString(),L.appendChild(d);let l=document.createElement("p");l.classList.add("leaderboard-entry-time-submitted-relative","leaderboard-outline"),l.innerHTML=hd(new Date,t),L.appendChild(l),y.innerHTML=pd(a.score);break;case"LeastCash":y.innerHTML=a.score.toLocaleString(),v.src="./Assets/UI/LeastCashIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large");let s=document.createElement("div");s.classList.add("leaderboard-entry-game-time"),i.appendChild(s);let o=document.createElement("img");o.classList.add("leaderboard-entry-score-icon"),o.src="./Assets/UI/StopWatch.webp",s.appendChild(o);let r=document.createElement("p");r.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),r.innerHTML=pd(n["Game Time"].score),s.appendChild(r);break;case"LeastTiers":y.innerHTML=a.score.toLocaleString(),v.src="./Assets/UI/LeastTiersIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large");let c=document.createElement("div");c.classList.add("leaderboard-entry-game-time"),i.appendChild(c);let p=document.createElement("img");p.classList.add("leaderboard-entry-score-icon"),p.src="./Assets/UI/StopWatch.webp",c.appendChild(p);let m=document.createElement("p");m.classList.add("leaderboard-entry-game-time-value","leaderboard-outline"),m.innerHTML=pd(n["Game Time"].score),c.appendChild(m),b.classList.add("leaderboard-entry-score-tiers")}e.hasOwnProperty("tiles")&&(v.src="./Assets/UI/CtPointsIconSmall.webp",v.classList.add("leaderboard-entry-score-icon-large"),y.innerHTML=a.score.toLocaleString(),p.classList.add("leaderboard-entry-team")),new IntersectionObserver(((e,t)=>{e.forEach((async e=>{if(e.isIntersecting){let d=await U(a.profile);null!=d&&(console.log(d),d.hasOwnProperty("owner")?(u.src=d.frameURL,h.src=d.iconURL,i.style.backgroundImage=`url(${Le(d)})`,t.unobserve(e.target)):(m.src=ge(d),i.style.backgroundImage=`url(${Le(d)})`,t.unobserve(e.target)))}}))})).observe(m)}));else{let e=document.createElement("p");e.classList.add("no-data-found"),e.classList.add("black-outline"),e.style.width="250px",e.innerHTML="No Data Found",d.appendChild(e)}}function Aa(e){let t=document.getElementById("leaderboard-column-labels");t.innerHTML="";let a=document.createElement("p");a.classList.add("leaderboard-column-rank","black-outline"),a.innerHTML="Rank",t.appendChild(a);let d=document.createElement("p");switch(d.classList.add("leaderboard-column-name","black-outline"),d.innerHTML="Player",t.appendChild(d),e){case"GameTime":let e=document.createElement("p");e.classList.add("leaderboard-column-time-submitted","black-outline"),e.innerHTML="Time Submitted",t.appendChild(e);let a=document.createElement("p");a.classList.add("leaderboard-column-time-score","black-outline"),a.innerHTML="Game Time",t.appendChild(a);break;case"LeastCash":let l=document.createElement("p");l.classList.add("leaderboard-column-cash-spent","black-outline"),l.innerHTML="Cash Spent",t.appendChild(l);let n=document.createElement("p");n.classList.add("leaderboard-column-time-score","black-outline"),n.innerHTML="Game Time",t.appendChild(n);break;case"LeastTiers":let s=document.createElement("p");s.classList.add("leaderboard-column-tiers-used","black-outline"),s.innerHTML="Tiers Used",t.appendChild(s);let i=document.createElement("p");i.classList.add("leaderboard-column-time-score","black-outline"),i.innerHTML="Game Time",t.appendChild(i);break;case"CTTeam":d.innerHTML="Team";case"CTPlayer":let o=document.createElement("p");o.classList.add("leaderboard-column-ct-points","black-outline"),o.innerHTML="CT Points",t.appendChild(o)}}function Pa(e){document.getElementById("challenge-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}function Da(e){document.getElementById("map-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}async function Ra(e,t){if(null==(t=await U(t)))return;bd(),document.getElementById(`${e}-content`).style.display="none";let a=document.getElementById("publicprofile-content");a.style.display="flex",a.innerHTML="";let d=document.createElement("div");d.classList.add("publicprofile-div"),a.appendChild(d);let l=document.createElement("img");l.classList.add("error-modal-close"),l.src="./Assets/UI/CloseBtn.webp",l.addEventListener("click",(()=>{Oa(e)})),d.appendChild(l);let n=document.createElement("div");n.id="profile-header",n.classList.add("profile-header"),n.classList.add("profile-banner"),n.style.backgroundImage=`linear-gradient(to bottom, transparent 50%, var(--profile-primary) 70%),url('${Le(t)}')`,d.appendChild(n),n.appendChild(Ht(100,ge(t)));let s=document.createElement("div");s.id="profile-top-bottom",s.classList.add("profile-top-bottom"),n.appendChild(s);let i=document.createElement("div");i.id="profile-top",i.classList.add("profile-top-public"),s.appendChild(i);let o=document.createElement("p");o.id="profile-name",o.classList.add("profile-name"),o.classList.add("black-outline"),o.innerHTML=t.displayName,i.appendChild(o);let r=document.createElement("div");r.id="rank-star",r.classList.add("rank-star-public"),i.appendChild(r);let c=document.createElement("img");c.id="rank-img",c.classList.add("rank-img"),c.src="../Assets/UI/LvlHolder.webp",r.appendChild(c);let p=document.createElement("p");p.id="rank-text",p.classList.add("rank-text"),p.classList.add("black-outline"),p.innerHTML=t.rank,r.appendChild(p);let m=document.createElement("div");m.id="rank-star",m.classList.add("rank-star-public"),i.appendChild(m);let u=document.createElement("img");u.id="rank-img",u.classList.add("rank-img"),u.src="../Assets/UI/LvlHolderVeteran.webp",m.appendChild(u);let h=document.createElement("p");h.id="rank-text",h.classList.add("rank-text"),h.classList.add("black-outline"),h.innerHTML=t.veteranRank,m.appendChild(h);let g=document.createElement("div");g.classList.add("profile-followers"),i.appendChild(g);let L=document.createElement("p");L.classList.add("followers-label"),L.classList.add("black-outline"),L.innerHTML="Followers",g.appendChild(L);let b=document.createElement("p");b.classList.add("followers-count"),b.innerHTML=t.followers.toLocaleString(),g.appendChild(b);let v=document.createElement("div");v.id="below-profile-header",v.classList.add("below-profile-header"),d.appendChild(v);let y=document.createElement("div");y.id="left-column-div",y.classList.add("left-column-div"),v.appendChild(y);let C=document.createElement("div");C.id="left-column-header",C.classList.add("left-column-header"),y.appendChild(C);let E=document.createElement("p");E.id="left-column-header-text",E.classList.add("column-header-text"),E.classList.add("black-outline"),E.innerHTML="Medals",C.appendChild(E);let w={},f={};for(let[e,a]of Object.entries(Y))w["Medal"+a]=t._medalsSinglePlayer[e]||0,f["MedalCoop"+a]=t._medalsMultiplayer[e]||0;w={...w,...f},w.PhayzeEliteBadge=t.bossBadgesElite.Phayze||0,w.PhayzeBadge=t.bossBadgesNormal.Phayze||0,w.DreadbloonEliteBadge=t.bossBadgesElite.Dreadbloon||0,w.DreadbloonBadge=t.bossBadgesNormal.Dreadbloon||0,w.VortexEliteBadge=t.bossBadgesElite.Vortex||0,w.VortexBadge=t.bossBadgesNormal.Vortex||0,w.LychEliteBadge=t.bossBadgesElite.Lych||0,w.LychBadge=t.bossBadgesNormal.Lych||0,w.BloonariusEliteBadge=t.bossBadgesElite.Bloonarius||0,w.BloonariusBadge=t.bossBadgesNormal.Bloonarius||0,w.MedalEventBronzeMedal=t._medalsRace.Bronze||0,w.MedalEventSilverMedal=t._medalsRace.Silver||0,w.MedalEventGoldSilverMedal=t._medalsRace.GoldSilver||0,w.MedalEventDoubleGoldMedal=t._medalsRace.DoubleGold||0,w.MedalEventGoldDiamondMedal=t._medalsRace.GoldDiamond||0,w.MedalEventRedDiamondMedal=t._medalsRace.RedDiamond||0,w.MedalEventBlackDiamondMedal=t._medalsRace.BlackDiamond||0,w.OdysseyStarIcon=t.gameplay.totalOdysseyStars||0,w.BossMedalEventBronzeMedal=t._medalsBoss.Bronze||0,w.BossMedalEventSilverMedal=t._medalsBoss.Silver||0,w.BossMedalEventDoubleSilverMedal=t._medalsBoss.DoubleSilver||0,w.BossMedalEventGoldSilverMedal=t._medalsBoss.GoldSilver||0,w.BossMedalEventDoubleGoldMedal=t._medalsBoss.DoubleGold||0,w.BossMedalEventGoldDiamondMedal=t._medalsBoss.GoldDiamond||0,w.BossMedalEventDiamondMedal=t._medalsBoss.Diamond||0,w.BossMedalEventRedDiamondMedal=t._medalsBoss.RedDiamond||0,w.BossMedalEventBlackDiamondMedal=t._medalsBoss.BlackDiamond||0,w.EliteBossMedalEventBronzeMedal=t._medalsBossElite.Bronze||0,w.EliteBossMedalEventSilverMedal=t._medalsBossElite.Silver||0,w.EliteBossMedalEventDoubleSilverMedal=t._medalsBossElite.DoubleSilver||0,w.EliteBossMedalEventGoldSilverMedal=t._medalsBossElite.GoldSilver||0,w.EliteBossMedalEventDoubleGoldMedal=t._medalsBossElite.DoubleGold||0,w.EliteBossMedalEventGoldDiamondMedal=t._medalsBossElite.GoldDiamond||0,w.EliteBossMedalEventDiamondMedal=t._medalsBossElite.Diamond||0,w.EliteBossMedalEventRedDiamondMedal=t._medalsBossElite.RedDiamond||0,w.EliteBossMedalEventBlackDiamondMedal=t._medalsBossElite.BlackDiamond||0,w.CtLocalPlayerBronzeMedal=t._medalsCTLocal.Bronze||0,w.CtLocalPlayerSilverMedal=t._medalsCTLocal.Silver||0,w.CtLocalPlayerDoubleGoldMedal=t._medalsCTLocal.DoubleGold||0,w.CtLocalPlayerDiamondMedal=t._medalsCTLocal.Diamond||0,w.CtLocalPlayerRedDiamondMedal=t._medalsCTLocal.RedDiamond||0,w.CtLocalPlayerBlackDiamondMedal=t._medalsCTLocal.BlackDiamond||0,w.CtGlobalPlayerBronzeMedal=t._medalsCTGlobal.Bronze||0,w.CtGlobalPlayerSilverMedal=t._medalsCTGlobal.Silver||0,w.CtGlobalPlayerDoubleSilverMedal=t._medalsCTGlobal.DoubleSilver||0,w.CtGlobalPlayerGoldSilverMedal=t._medalsCTGlobal.GoldSilver||0,w.CtGlobalPlayerDoubleGoldMedal=t._medalsCTGlobal.DoubleGold||0,w.CtGlobalPlayerGoldDiamondMedal=t._medalsCTGlobal.GoldDiamond||0,w.CtGlobalPlayerDiamondMedal=t._medalsCTGlobal.Diamond||0;let k=document.createElement("div");k.id="currency-medals-div",k.classList.add("currency-medals-div"),y.appendChild(k);let M=document.createElement("div");M.id="medals-div",M.classList.add("medals-div"),k.appendChild(M);for(let[e,t]of Object.entries(w)){if(0===t)continue;let a=document.createElement("div");a.id="medal-div",a.classList.add("medal-div"),M.appendChild(a);let d=document.createElement("img");d.id="medal-img",d.classList.add("medal-img"),d.src=pe(e),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Ld(3,70,256,0,d.width)}px`:d.style.height=`${Ld(3,70,256,0,d.height)}px`,d.style.removeProperty("display")})),a.appendChild(d);let l=document.createElement("p");l.id="medal-text",l.classList.add("medal-text"),l.classList.add("black-outline"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}let T=document.createElement("div");T.id="top-heroes-monkeys-div",T.classList.add("top-heroes-monkeys-div"),y.appendChild(T);let B=document.createElement("div");B.id="top-heroes-div",B.classList.add("top-heroes-div"),T.appendChild(B);let I=document.createElement("div");I.id="top-heroes-top-div",I.classList.add("top-heroes-top-div"),B.appendChild(I);let H=document.createElement("div");H.id="top-heroes-top-div",H.classList.add("top-heroes-top-ribbon-div"),I.appendChild(H);let S=document.createElement("p");S.id="top-heroes-text",S.classList.add("top-heroes-text"),S.classList.add("black-outline"),S.innerHTML="Top Heroes",H.appendChild(S);let x=document.createElement("div");x.id="maps-progress-coop-toggle",x.classList.add("maps-progress-coop-toggle"),I.appendChild(x);let $=document.createElement("p");$.id="maps-progress-coop-toggle-text",$.classList.add("maps-progress-coop-toggle-text"),$.classList.add("black-outline"),$.innerHTML="Show All: ",x.appendChild($);let A=document.createElement("input");A.classList.add("maps-progress-coop-toggle-input"),A.type="checkbox",A.addEventListener("change",(()=>{A.checked?document.getElementById("other-heroes-div-public").style.display="flex":document.getElementById("other-heroes-div-public").style.display="none"})),x.appendChild(A);let P=document.createElement("div");P.id="top-heroes-list",P.classList.add("top-heroes-list"),B.appendChild(P);let D=document.createElement("div");D.id="top-3-heroes-div",D.classList.add("top-3-heroes-div"),P.appendChild(D);let R=document.createElement("div");R.id="other-heroes-div-public",R.classList.add("other-heroes-div"),R.style.display="none",P.appendChild(R);let O=0,G=Object.keys(Me.heroesInOrder);for(let[e,a]of Object.entries(t.heroesPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===a)continue;if(!G.includes(e))continue;let t=document.createElement("div");t.id="hero-div",t.classList.add("hero-div"),O<3?D.appendChild(t):R.appendChild(t);let d=document.createElement("img");d.id="hero-img",d.classList.add("hero-img"),d.src=de(e,1),d.style.display="none",d.addEventListener("load",(()=>{d.width<d.height?d.style.width=`${Ld(3,150,1920,0,d.width)}px`:d.style.height=`${Ld(3,150,1920,0,d.height)}px`,d.style.removeProperty("display")})),t.appendChild(d);let l=document.createElement("p");l.id="hero-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),O++}let N=document.createElement("div");N.id="top-towers-div",N.classList.add("top-heroes-div"),T.appendChild(N);let j=document.createElement("div");j.id="top-towers-top-div",j.classList.add("top-heroes-top-div"),N.appendChild(j);let _=document.createElement("div");_.id="top-towers-top-div",_.classList.add("top-heroes-top-ribbon-div"),j.appendChild(_);let F=document.createElement("p");F.id="top-towers-text",F.classList.add("top-heroes-text"),F.classList.add("black-outline"),F.innerHTML="Top Towers",_.appendChild(F);let q=document.createElement("div");q.id="maps-progress-coop-toggle",q.classList.add("maps-progress-coop-toggle"),j.appendChild(q);let z=document.createElement("p");z.id="maps-progress-coop-toggle-text",z.classList.add("maps-progress-coop-toggle-text"),z.classList.add("black-outline"),z.innerHTML="Show All: ",q.appendChild(z);let K=document.createElement("input");K.classList.add("maps-progress-coop-toggle-input"),K.type="checkbox",K.addEventListener("change",(()=>{K.checked?document.getElementById("other-towers-div-public").style.display="flex":document.getElementById("other-towers-div-public").style.display="none"})),q.appendChild(K);let W=document.createElement("div");W.id="top-towers-list",W.classList.add("top-heroes-list"),N.appendChild(W);let V=document.createElement("div");V.id="top-3-towers-div",V.classList.add("top-3-heroes-div"),W.appendChild(V);let Z=document.createElement("div");Z.id="other-towers-div-public",Z.classList.add("other-heroes-div"),Z.style.display="none",W.appendChild(Z),O=0;let X=Object.keys(Me.towersInOrder);for(let[e,a]of Object.entries(t.towersPlaced).sort(((e,t)=>t[1]-e[1]))){if(0===a)continue;if(!X.includes(e))continue;let t=document.createElement("div");t.id="tower-div",t.classList.add("hero-div"),O<3?V.appendChild(t):Z.appendChild(t);let d=document.createElement("img");d.id="tower-img",d.classList.add("hero-img"),d.src=Q(e,"000"),t.appendChild(d);let l=document.createElement("p");l.id="tower-text",l.classList.add("hero-text"),l.classList.add("black-outline"),l.innerHTML=a.toLocaleString(),t.appendChild(l),O++}let J=document.createElement("div");J.id="right-column-div",J.classList.add("right-column-div"),v.appendChild(J);let ee=document.createElement("div");ee.id="right-column-header",ee.classList.add("overview-right-column-header"),J.appendChild(ee);let te=document.createElement("p");te.id="right-column-header-text",te.classList.add("column-header-text"),te.classList.add("black-outline"),te.innerHTML="Overall Stats",ee.appendChild(te);let ae={};ae["Games Played"]=t.gameplay.gameCount,ae["Games Won"]=t.gameplay.gamesWon,ae["Highest Round (All Time)"]=t.gameplay.highestRound,ae["Highest Round (CHIMPS)"]=t.gameplay.highestRoundCHIMPS,ae["Highest Round (Deflation)"]=t.gameplay.highestRoundDeflation,ae["Monkeys Placed"]=t.gameplay.monkeysPlaced,ae["Total Pop Count"]=t.bloonsPopped.bloonsPopped,ae["Total Co-Op Pop Count"]=t.bloonsPopped.coopBloonsPopped,ae["Camo Bloons Popped"]=t.bloonsPopped.camosPopped,ae["Lead Bloons Popped"]=t.bloonsPopped.leadsPopped,ae["Purple Bloons Popped"]=t.bloonsPopped.purplesPopped,ae["Regrow Bloons Popped"]=t.bloonsPopped.regrowsPopped,ae["Ceramic Bloons Popped"]=t.bloonsPopped.ceramicsPopped,ae["MOABs Popped"]=t.bloonsPopped.moabsPopped,ae["BFBs Popped"]=t.bloonsPopped.bfbsPopped,ae["ZOMGs Popped"]=t.bloonsPopped.zomgsPopped,ae["DDTs Popped"]=t.bloonsPopped.ddtsPopped,ae["BADs Popped"]=t.bloonsPopped.badsPopped,ae["Bloons Leaked"]=t.bloonsPopped.bloonsLeaked,ae["Cash Generated"]=t.gameplay.cashEarned,ae["Cash Gifted"]=t.gameplay.coopCashGiven,ae["Abilities Used"]=t.gameplay.abilitiesUsed,ae["Powers Used"]=t.gameplay.powersUsed,ae["Insta Monkeys Used"]=t.gameplay.instaMonkeysUsed,ae["Daily Reward Chests Opened"]=t.gameplay.dailyRewards,ae["Challenges Completed"]=t.gameplay.challengesCompleted,ae.Achievements=`${t.achievements}/150`,ae["Odysseys Completed"]=t.gameplay.totalOdysseysCompleted,ae["Lifetime Trophies"]=t.gameplay.totalTrophiesEarned,ae["Necro Bloons Reanimated"]=t.bloonsPopped.necroBloonsReanimated,ae["Transforming Tonics Used"]=t.bloonsPopped.transformingTonicsUsed,ae["Most Experienced Monkey"]=ve(t.mostExperiencedMonkey),ae["Insta Monkey Collection"]=`${t.gameplay.instaMonkeyCollection}/${Me.totalInstaMonkeys}`,ae["Collection Chests Opened"]=t.gameplay.collectionChestsOpened,ae["Golden Bloons Popped"]=t.bloonsPopped.goldenBloonsPopped,ae["Monkey Teams Wins"]=t.gameplay.monkeyTeamsWins,ae["Bosses Popped"]=t.bloonsPopped.bossesPopped,ae["Damage Done To Bosses"]=t.gameplay.damageDoneToBosses;let le=document.createElement("div");le.id="profile-stats",le.classList.add("profile-stats"),J.appendChild(le);for(let[e,t]of Object.entries(ae)){let a=document.createElement("div");a.id="stat",a.classList.add("stat"),le.appendChild(a);let d=document.createElement("p");d.id="stat-name",d.classList.add("stat-name"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.id="stat-value",l.classList.add("stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}}function Oa(e){document.getElementById("publicprofile-content").style.display="none",document.getElementById(`${e}-content`).style.display="flex"}async function Ua(e,t,a){console.log(t);let d=await P(t);if(console.log(d),null==d)return;document.getElementById(`${e}-content`).style.display="none";let l=document.getElementById("relics-content");l.style.display="flex",l.innerHTML="";let n=document.createElement("div");n.classList.add("relic-container"),l.appendChild(n),bd();let s=document.createElement("div");s.classList.add("relic-header"),n.appendChild(s);let i=document.createElement("div");i.classList.add("relic-header-views"),s.appendChild(i);let o=document.createElement("div");o.classList.add("maps-progress-view","black-outline","stats-tab-yellow"),o.innerHTML="List",i.appendChild(o);let r=document.createElement("div");r.classList.add("maps-progress-view","black-outline"),r.innerHTML="Tile",i.appendChild(r),o.addEventListener("click",(()=>{o.classList.add("stats-tab-yellow"),r.classList.remove("stats-tab-yellow"),document.querySelectorAll(".relic-text-div").forEach((e=>{e.classList.contains("relic-tile-view")&&e.classList.remove("relic-tile-view")}))})),r.addEventListener("click",(()=>{r.classList.add("stats-tab-yellow"),o.classList.remove("stats-tab-yellow"),document.querySelectorAll(".relic-text-div").forEach((e=>{e.classList.contains("relic-tile-view")||e.classList.add("relic-tile-view")}))}));let c=document.createElement("p");c.classList.add("relic-header-title","black-outline"),c.innerHTML=`Contested Territory<br>${a}`,s.appendChild(c);let p=document.createElement("div");p.classList.add("relic-header-right"),s.appendChild(p);let m=document.createElement("img");m.classList.add("modal-close"),m.src="./Assets/UI/CloseBtn.webp",m.addEventListener("click",(()=>{l.style.display="none",document.getElementById(`${e}-content`).style.display="flex"})),p.appendChild(m);let u=d.tiles.filter((e=>e.type.includes("Relic")));console.log(u),u.sort(((e,t)=>e.id.localeCompare(t.id))),console.log(u);let h=document.createElement("div");h.classList.add("relics-div"),n.appendChild(h),u.forEach((e=>{let t=e.type.split(" ")[2];console.log(t);let a=document.createElement("div");switch(a.classList.add("relic-div"),h.appendChild(a),e.id.charAt(0)){case"A":a.style.backgroundColor="#9C55E4";break;case"B":a.style.backgroundColor="#E978AA";break;case"C":a.style.backgroundColor="#00DD6B";break;case"D":a.style.backgroundColor="#04A6F3";break;case"E":a.style.backgroundColor="#F7D302";break;case"F":a.style.backgroundColor="#F4413F";break;case"M":a.style.backgroundColor="#B9E546"}let d=document.createElement("p");d.classList.add("relic-id"),d.innerHTML=e.id,a.appendChild(d);let l=document.createElement("img");l.classList.add("relic-icon"),l.src=`./Assets/RelicIcon/${t}.webp`,a.appendChild(l);let n=document.createElement("div");n.classList.add("relic-text-div"),a.appendChild(n);let s=document.createElement("p");s.classList.add("relic-name"),s.classList.add("black-outline"),s.innerHTML=ve(`Relic${t}`),n.appendChild(s);let i=document.createElement("p");i.classList.add("relic-description"),i.innerHTML=ve(`Relic${t}Description`),n.appendChild(i)}))}function Ga(){let e=document.getElementById("explore-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("progress-page"),e.appendChild(t);let a=document.createElement("div");a.classList.add("selectors-div"),t.appendChild(a);["Challenge Browser","Map Browser"].forEach((t=>{let d=document.createElement("div");d.id=t.toLowerCase()+"-div",d.classList.add("selector-div"),d.addEventListener("click",(()=>{e.style.display="none",document.getElementById("browser-content").style.display="flex",Na(t)})),a.appendChild(d);let l=document.createElement("img");switch(l.id=t.toLowerCase()+"-img",l.classList.add("selector-img"),d.appendChild(l),t){case"Challenge Browser":l.src="../Assets/UI/PatchNotesMonkeyIcon.webp",d.classList.add("blueprint-bg");break;case"Map Browser":l.src="../Assets/UI/MapEditorBtn.webp",d.classList.add("map-model-bg","map-browser-selector")}let n=document.createElement("p");n.id=t.toLowerCase()+"-text",n.classList.add("selector-text","black-outline"),n.innerHTML=t,d.appendChild(n);let s=document.createElement("img");s.id=t.toLowerCase()+"-go-img",s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",d.appendChild(s)}));["Enter Challenge ID","Enter Map ID"].forEach((e=>{let t=document.createElement("div");t.id=e.toLowerCase()+"-div",t.classList.add("selector-div"),a.appendChild(t);let d=document.createElement("img");d.id=e.toLowerCase()+"-img",d.classList.add("selector-img"),t.appendChild(d);let l=document.createElement("div");l.classList.add("enter-code-middle-div"),t.appendChild(l);let n=document.createElement("p");n.id=e.toLowerCase()+"-text",n.classList.add("selector-text","selector-text-code","black-outline"),n.innerHTML=e,l.appendChild(n);let s=document.createElement("input");s.id=e.toLowerCase()+"-input",s.classList.add("selector-input"),s.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation()})),l.appendChild(s);let i=document.createElement("img");switch(i.id=e.toLowerCase()+"-go-img",i.classList.add("selector-go-img"),i.src="../Assets/UI/ContinueBtn.webp",t.appendChild(i),e){case"Enter Challenge ID":d.src="../Assets/UI/EnterCodeIcon.webp",t.classList.add("blueprint-bg"),s.value="ZMGVLCF",i.addEventListener("click",(async()=>{ht();let e=s.value.trim();e.length>6&&Ia("explore",await R(e),"Custom")}));break;case"Enter Map ID":d.src="../Assets/UI/EnterCodeIcon.webp",t.classList.add("map-model-bg","map-browser-selector"),s.value="ZMYXDVU",i.addEventListener("click",(async()=>{ht();let e=s.value.trim();e.length>6&&Wa("explore",await G(e))}))}}))}function Na(e){switch(bd(),Ye="Grid",e){case"Challenge Browser":v="https://data.ninjakiwi.com/btd6/challenges/filter/";break;case"Map Browser":v="https://data.ninjakiwi.com/btd6/maps/filter/"}ja(e)}function ja(e){let t=document.getElementById("browser-content");t.innerHTML="";let a=document.createElement("div");a.classList.add("browser-div"),t.appendChild(a);let d=document.createElement("div");d.classList.add("maps-progress-header-bar","browser-header-bar"),a.appendChild(d);let l=document.createElement("div");l.classList.add("map-progress-header-top"),d.appendChild(l);let n=document.createElement("p");n.classList.add("browser-header-title","black-outline"),n.innerHTML=e,l.appendChild(n);let s=document.createElement("p");s.classList.add("browser-header-desc"),s.innerHTML="Only 100 entries (4 pages) are available on the API. You can enter a specific ID at the bottom right",l.appendChild(s);let i=document.createElement("div");i.classList.add("map-progress-header-bottom"),d.appendChild(i);let o=document.createElement("div");o.id="maps-progress-views",o.classList.add("maps-progress-views"),i.appendChild(o);let r=document.createElement("p");r.id="maps-progress-views-text",r.classList.add("maps-progress-coop-toggle-text"),r.classList.add("black-outline"),r.innerHTML="Display Type:",o.appendChild(r);let c=document.createElement("div");c.id="maps-progress-filter",c.classList.add("maps-progress-filter"),d.appendChild(c);let m=document.createElement("div");m.id="map-progress-filter-difficulty",m.classList.add("map-progress-filter-difficulty"),c.appendChild(m);let u=document.createElement("p");u.id="maps-progress-filter-difficulty-text",u.classList.add("maps-progress-coop-toggle-text"),u.classList.add("black-outline"),u.innerHTML="Category Type:",m.appendChild(u);let h=document.createElement("select");h.id="map-progress-filter-difficulty-select",h.classList.add("map-progress-filter-difficulty-select"),h.addEventListener("change",(()=>{_a(e,h.value)})),m.appendChild(h);let g=document.createElement("div");g.id="browser-entries",a.appendChild(g);let L=document.createElement("div");L.classList.add("browser-footer"),a.appendChild(L);let b=document.createElement("div");b.classList.add("leaderboard-footer-left","browser-footer-left"),L.appendChild(b);let v=document.createElement("img");v.classList.add("leaderboard-footer-refresh"),v.src="./Assets/UI/RefreshBtn.webp",v.addEventListener("click",(()=>{p||(w=!0,Fa(e),v.style.filter="grayscale(1) brightness(0.5)",setTimeout((()=>{v.style.filter="none",p=!1}),1e4),p=!0)})),b.appendChild(v);let C=document.createElement("div");C.classList.add("leaderboard-footer-middle","browser-footer-middle"),L.appendChild(C);let E=document.createElement("img");E.classList.add("leaderboard-footer-page-left","black-outline"),E.src="./Assets/UI/NextArrowSmallYellow.webp",C.appendChild(E);let f=document.createElement("div");f.id="browser-footer-page-number",f.classList.add("leaderboard-footer-page-number","black-outline"),f.innerHTML="Loading...",C.appendChild(f);let k=document.createElement("img");k.classList.add("leaderboard-footer-page-right","black-outline"),k.src="./Assets/UI/NextArrowSmallYellow.webp",E.addEventListener("click",(()=>{y<=1||(y--,f.innerHTML=`Page ${y} of 4`,g.innerHTML="",rd(g),Fa(e))})),k.addEventListener("click",(()=>{y>=4||(y++,f.innerHTML=`Page ${y} of 4`,g.innerHTML="",rd(g),Fa(e))})),C.appendChild(k);let M=document.createElement("div");M.classList.add("leaderboard-footer-right","browser-footer-right"),L.appendChild(M);let T=document.createElement("p");T.classList.add("leaderboard-footer-goto","black-outline"),T.innerHTML="ID:",M.appendChild(T);let B=document.createElement("input");B.classList.add("leaderboard-footer-page-input","browser-footer-input"),B.type="text",B.value="Map Browser"==e?"ZMYXDVU":"ZMGVLCF",M.appendChild(B);let I=document.createElement("img");switch(I.classList.add("leaderboard-go-img"),I.src="../Assets/UI/ContinueBtn.webp",I.addEventListener("click",(async()=>{ht(),"Map Browser"==e?Wa("browser",await G(B.value.trim())):Ia("browser",await R(B.value.trim()),"Custom")})),M.appendChild(I),e){case"Challenge Browser":let t=document.createElement("div");t.classList.add("maps-progress-view","stats-tab-yellow","black-outline"),t.innerHTML="Grid",o.appendChild(t);let a=document.createElement("div");a.id="maps-progress-game",a.classList.add("maps-progress-view","black-outline"),a.innerHTML="List",o.appendChild(a),t.addEventListener("click",(()=>{Ye="Grid",t.classList.add("stats-tab-yellow"),a.classList.remove("stats-tab-yellow"),Fa(e)})),a.addEventListener("click",(()=>{Ye="List",a.classList.add("stats-tab-yellow"),t.classList.remove("stats-tab-yellow"),Fa(e)})),["Featured","Newest"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,h.appendChild(t)})),_a(e,"Featured");break;case"Map Browser":let d=document.createElement("div");d.id="maps-progress-game",d.classList.add("maps-progress-view","stats-tab-yellow","black-outline"),d.innerHTML="Grid",o.appendChild(d);let l=document.createElement("div");l.id="maps-progress-gallery",l.classList.add("maps-progress-view","black-outline"),l.innerHTML="Gallery",o.appendChild(l),d.addEventListener("click",(()=>{Ye="Grid",d.classList.add("stats-tab-yellow"),l.classList.remove("stats-tab-yellow"),Fa(e)})),l.addEventListener("click",(()=>{Ye="Gallery",l.classList.add("stats-tab-yellow"),d.classList.remove("stats-tab-yellow"),Fa(e)})),["Most Liked","Trending","Newest"].forEach((e=>{let t=document.createElement("option");t.value=e,t.innerHTML=e,h.appendChild(t)})),_a(e,"Most Liked")}g.classList.add("challenge-card-entries"),rd(g)}function _a(e,t){switch(t){case"Newest":E="newest";break;case"Featured":case"Trending":E="trending";break;case"Most Liked":E="mostLiked"}y=1,Fa(e)}async function Fa(e){await O(),console.log(b);let t=document.getElementById("browser-entries");if(t.innerHTML="",null!=b)switch(e){case"Challenge Browser":qa(t);break;case"Map Browser":Ka(t)}else{let e=document.createElement("p");e.classList.add("no-data-found"),e.classList.add("black-outline"),e.style.width="250px",e.innerHTML="No Data Found",t.appendChild(e)}}function qa(e){b.forEach((async(t,a)=>{let d=document.createElement("div");switch(d.addEventListener("click",(async()=>{ht(),Ia("browser",await R(t.id),"Custom")})),e.appendChild(d),Ye){case"Grid":d.classList.add("challenge-entry");let e=document.createElement("div");e.classList.add("challenge-top"),d.appendChild(e);let a=document.createElement("p");a.classList.add("challenge-name","black-outline"),a.innerHTML=t.name,t.name.length>30&&(a.style.fontSize="18px"),e.appendChild(a);let l=document.createElement("div");l.classList.add("challenge-middle"),d.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-left"),l.appendChild(n);let s=document.createElement("div");s.classList.add("race-map-div","silver-border"),n.appendChild(s);let i=document.createElement("img");i.classList.add("race-map-img"),i.src="./Assets/MapIcon/MapLoadingImage.webp",s.appendChild(i);let o=document.createElement("div");o.classList.add("race-challenge-icons"),s.appendChild(o);let r=document.createElement("p");r.classList.add("race-map-rounds","black-outline"),s.appendChild(r);let c=document.createElement("div");c.classList.add("browser-usv-div"),l.appendChild(c);let p=document.createElement("div");p.classList.add("challenge-upvote-div"),c.appendChild(p);let m=document.createElement("img");m.classList.add("browser-upvote-icon"),m.src="./Assets/UI/ChallengeThumbsUpIcon.webp",p.appendChild(m);let u=document.createElement("p");u.classList.add("browser-upvote-value"),u.innerHTML=0,p.appendChild(u);let h=document.createElement("div");h.classList.add("challenge-trophy-div"),c.appendChild(h);let g=document.createElement("img");g.classList.add("browser-trophy-icon"),g.src="./Assets/UI/ChallengeTrophyIcon.webp",h.appendChild(g);let L=document.createElement("p");L.classList.add("browser-trophy-value"),L.innerHTML=0,h.appendChild(L);let b=document.createElement("div");b.classList.add("challenge-skull-div"),c.appendChild(b);let v=document.createElement("img");v.classList.add("browser-skull-icon"),v.src="./Assets/UI/DeathRateIcon.webp",b.appendChild(v);let y=document.createElement("p");y.classList.add("browser-skull-value"),y.innerHTML=0,b.appendChild(y);let C=document.createElement("div");C.classList.add("challenge-bottom"),d.appendChild(C);let E=document.createElement("div");E.classList.add("challenge-creator"),C.appendChild(E);let w=document.createElement("div");w.classList.add("avatar"),E.appendChild(w);let f=50,k=document.createElement("img");k.classList.add("avatar-frame","noSelect"),k.style.width=`${f}px`,k.src="../Assets/UI/InstaTowersContainer.webp",w.appendChild(k);let M=document.createElement("img");M.classList.add("avatar-img","noSelect"),M.style.width=`${f}px`,M.src="../Assets/ProfileAvatar/ProfileAvatar01.webp",w.appendChild(M);let T=document.createElement("p");T.classList.add("browser-creator-name","black-outline"),T.innerHTML="Loading...",E.appendChild(T);let B=document.createElement("div");B.classList.add("challenge-id-and-play"),C.appendChild(B);let I=document.createElement("p");I.classList.add("browser-id","black-outline"),I.innerHTML=t.id,I.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,I)})),B.appendChild(I);let H=document.createElement("img");H.classList.add("browser-copy-img"),H.src="../Assets/UI/CopyClipboardBtn.webp",H.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,I)})),B.appendChild(H);let S=document.createElement("img");S.classList.add("browser-go-img"),S.src="../Assets/UI/GoBtnSmall.webp",S.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),od(`btd6://Challenge/${t.id}`)})),B.appendChild(S),new IntersectionObserver(((e,a)=>{e.forEach((async e=>{if(e.isIntersecting){a.unobserve(e.target);let d=await R(t.id);if(null==d)return;console.log(d),i.src=d.mapURL;let l=Ha(d),n=Sa(d);for(let e of Object.values(l)){console.log(e);let t=document.createElement("img");t.classList.add("challenge-modifier-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${e.icon}.webp`,o.appendChild(t)}for(let e of n){if("No Round 100 Reward"==e)continue;if("Paragon Limit"==e)continue;let t=document.createElement("img");t.classList.add("challenge-rule-icon-event"),t.src=`./Assets/ChallengeRulesIcon/${We[e]}.webp`,o.appendChild(t)}r.innerHTML=`Rounds ${0==d.startRound?Me.startRound[d.difficulty]:d.startRound}/${0==d.endRound?Me.endRound[d.difficulty]:d.endRound}`,u.innerHTML=d.upvotes.toLocaleString(),L.innerHTML=0==d.playsUnique||d.winsUnique-d.playsUnique==0?"0%":`${(d.winsUnique/d.playsUnique*100).toFixed(2)}%`,y.innerHTML=0==d.playsUnique?"0%":`${(d.wins/(d.plays+d.restarts)*100).toFixed(2)}%`;let s=await U(d.creator);if(null==s)return;T.innerHTML=s.displayName,s.displayName.length>13&&(T.style.fontSize="17px"),M.src=ge(s),C.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${Le(s)})`}}))})).observe(d);break;case"List":d.classList.add("browser-list-entry");let x=document.createElement("img");x.classList.add("browser-list-map-img"),x.src="./Assets/MapIcon/MapLoadingImage.webp",d.appendChild(x);let $=document.createElement("div");$.classList.add("browser-top-bottom"),d.appendChild($);let A=document.createElement("div");A.classList.add("browser-list-entry-top"),$.appendChild(A);let P=document.createElement("div");P.classList.add("browser-list-entry-bottom"),$.appendChild(P);let D=document.createElement("p");D.classList.add("challenge-name","browser-list-name","black-outline"),D.innerHTML=t.name,t.name.length>30&&(D.style.fontSize="18px"),A.appendChild(D);let O=document.createElement("div");O.classList.add("challenge-creator","browser-challenge-creator"),A.appendChild(O);let G=document.createElement("div");G.classList.add("avatar"),O.appendChild(G);let N=45,j=document.createElement("img");j.classList.add("avatar-frame","noSelect"),j.style.width=`${N}px`,j.src="../Assets/UI/InstaTowersContainer.webp",G.appendChild(j);let _=document.createElement("img");_.classList.add("avatar-img","noSelect"),_.style.width=`${N}px`,_.src="../Assets/ProfileAvatar/ProfileAvatar01.webp",G.appendChild(_);let F=document.createElement("p");F.classList.add("browser-creator-name","black-outline"),F.innerHTML="Loading...",O.appendChild(F);let q=document.createElement("div");q.classList.add("browser-usv-list-div"),P.appendChild(q);let z=document.createElement("div");z.classList.add("challenge-upvote-div"),q.appendChild(z);let K=document.createElement("img");K.classList.add("browser-upvote-icon"),K.src="./Assets/UI/ChallengeThumbsUpIcon.webp",z.appendChild(K);let W=document.createElement("p");W.classList.add("browser-upvote-value"),W.innerHTML=0,z.appendChild(W);let V=document.createElement("div");V.classList.add("challenge-trophy-div"),q.appendChild(V);let Y=document.createElement("img");Y.classList.add("browser-trophy-icon"),Y.src="./Assets/UI/ChallengeTrophyIcon.webp",V.appendChild(Y);let Z=document.createElement("p");Z.classList.add("browser-trophy-value"),Z.innerHTML=0,V.appendChild(Z);let X=document.createElement("div");X.classList.add("challenge-skull-div"),q.appendChild(X);let J=document.createElement("img");J.classList.add("browser-skull-icon"),J.src="./Assets/UI/DeathRateIcon.webp",X.appendChild(J);let Q=document.createElement("p");Q.classList.add("browser-skull-value"),Q.innerHTML=0,X.appendChild(Q);let ee=document.createElement("div");ee.classList.add("challenge-id-and-play"),P.appendChild(ee);let te=document.createElement("p");te.classList.add("browser-id","black-outline"),te.innerHTML=t.id,te.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,te)})),ee.appendChild(te);let ae=document.createElement("img");ae.classList.add("browser-copy-img"),ae.src="../Assets/UI/CopyClipboardBtn.webp",ae.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,te)})),ee.appendChild(ae);let de=document.createElement("img");de.classList.add("browser-go-img"),de.src="../Assets/UI/GoBtnSmall.webp",de.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),od(`btd6://Challenge/${t.id}`)})),ee.appendChild(de);let le=new IntersectionObserver(((e,a)=>{e.forEach((async e=>{if(e.isIntersecting){a.unobserve(e.target);let d=await R(t.id);if(null==d)return;console.log(d),x.src=d.mapURL,W.innerHTML=d.upvotes.toLocaleString(),Z.innerHTML=0==d.playsUnique||d.winsUnique-d.playsUnique==0?"0%":`${(d.winsUnique/d.playsUnique*100).toFixed(2)}%`,Q.innerHTML=0==d.playsUnique?"0%":`${(d.wins/(d.plays+d.restarts)*100).toFixed(2)}%`;let l=await U(d.creator);if(null==l)return;F.innerHTML=l.displayName,l.displayName.length>13&&(F.style.fontSize="17px"),_.src=ge(l),O.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-primary) 100%),url(${Le(l)})`}}))}));le.observe(d)}}))}function za(e,t){navigator.clipboard.writeText(e).then((function(){console.log("Copying to clipboard was successful!"),t.innerHTML="Copied!",setTimeout((()=>{t.innerHTML=e}),2e3)}),(function(e){console.log("Could not copy text: ",e)}))}function Ka(e){b.forEach(((t,a)=>{let d=document.createElement("div");switch(d.addEventListener("click",(async()=>{ht(),Wa("browser",await G(t.id))})),e.appendChild(d),console.log(Ye),Ye){case"Grid":d.classList.add("challenge-entry","map-browser-bg");let e=document.createElement("div");e.classList.add("challenge-top"),d.appendChild(e);let a=document.createElement("p");a.classList.add("challenge-name","black-outline"),a.innerHTML=t.name,t.name.length>30&&(a.style.fontSize="18px"),t.name.length>35&&(a.style.fontSize="17px"),e.appendChild(a);let l=document.createElement("div");l.classList.add("challenge-middle"),d.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-left"),l.appendChild(n);let s=document.createElement("div");s.classList.add("race-map-div","silver-border"),n.appendChild(s);let i=document.createElement("img");i.classList.add("race-map-img"),i.src=be(t.id),i.onerror=function(){this.onerror=null,this.src="./Assets/MapIcon/MapLoadingImage.webp"},s.appendChild(i);let o=document.createElement("div");o.classList.add("browser-usv-div"),l.appendChild(o);let r=document.createElement("div");r.classList.add("challenge-upvote-div"),o.appendChild(r);let c=document.createElement("img");c.classList.add("browser-upvote-icon"),c.src="./Assets/UI/ChallengeThumbsUpIcon.webp",r.appendChild(c);let p=document.createElement("p");p.classList.add("browser-upvote-value"),p.innerHTML=0,r.appendChild(p);let m=document.createElement("div");m.classList.add("challenge-trophy-div"),o.appendChild(m);let u=document.createElement("img");u.classList.add("browser-trophy-icon"),u.src="./Assets/UI/ChallengeTrophyIcon.webp",m.appendChild(u);let h=document.createElement("p");h.classList.add("browser-trophy-value"),h.innerHTML=0,m.appendChild(h);let g=document.createElement("div");g.classList.add("challenge-skull-div"),o.appendChild(g);let L=document.createElement("img");L.classList.add("browser-skull-icon"),L.src="./Assets/UI/DeathRateIcon.webp",g.appendChild(L);let b=document.createElement("p");b.classList.add("browser-skull-value"),b.innerHTML=0,g.appendChild(b);let v=document.createElement("div");v.classList.add("challenge-bottom"),d.appendChild(v);let y=document.createElement("div");y.classList.add("challenge-creator"),v.appendChild(y);let C=document.createElement("div");C.classList.add("avatar"),y.appendChild(C);let E=50,w=document.createElement("img");w.classList.add("avatar-frame","noSelect"),w.style.width=`${E}px`,w.src="../Assets/UI/InstaTowersContainer.webp",C.appendChild(w);let f=document.createElement("img");f.classList.add("avatar-img","noSelect"),f.style.width=`${E}px`,f.src="../Assets/ProfileAvatar/ProfileAvatar01.webp",C.appendChild(f);let k=document.createElement("p");k.classList.add("browser-creator-name","black-outline"),k.innerHTML="Loading...",y.appendChild(k);let M=document.createElement("div");M.classList.add("challenge-id-and-play"),v.appendChild(M);let T=document.createElement("p");T.classList.add("browser-id","black-outline"),T.innerHTML=t.id,T.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,T)})),M.appendChild(T);let B=document.createElement("img");B.classList.add("browser-copy-img"),B.src="../Assets/UI/CopyClipboardBtn.webp",B.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,T)})),M.appendChild(B);let I=document.createElement("img");I.classList.add("browser-go-img"),I.src="../Assets/UI/GoBtnSmall.webp",I.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),od(`btd6://Map/${t.id}`)})),M.appendChild(I),new IntersectionObserver(((e,a)=>{e.forEach((async e=>{if(e.isIntersecting){a.unobserve(e.target);let d=await G(t.id);if(null==d)return;console.log(d),p.innerHTML=d.upvotes.toLocaleString(),h.innerHTML=0==d.playsUnique||d.winsUnique-d.playsUnique==0?"0%":`${(d.winsUnique/d.playsUnique*100).toFixed(2)}%`,b.innerHTML=0==d.playsUnique?"0%":`${(d.wins/(d.plays+d.restarts)*100).toFixed(2)}%`;let l=await U(d.creator);if(null==l)return;k.innerHTML=l.displayName,l.displayName.length>13&&(k.style.fontSize="17px"),f.src=ge(l),v.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${Le(l)})`}}))})).observe(d);break;case"Gallery":let H=document.createElement("div");H.classList.add("race-map-div","silver-border"),d.appendChild(H);let S=document.createElement("p");S.classList.add("browser-id","gallery-id","black-outline"),S.innerHTML=t.id,S.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,S)})),H.appendChild(S);let x=document.createElement("img");x.classList.add("race-map-img"),x.src=be(t.id),x.onerror=function(){this.onerror=null,this.src="./Assets/MapIcon/MapLoadingImage.webp"},H.appendChild(x)}new IntersectionObserver(((e,t)=>{e.forEach((async e=>{e.isIntersecting&&t.unobserve(e.target)}))})).observe(d)}))}async function Wa(e,t){if(null==t)return;bd();let a=document.getElementById("map-content");a.style.display="flex",a.innerHTML="",document.getElementById(`${e}-content`).style.display="none";let d=Ba(t),l=document.createElement("div");l.classList.add("challenge-model"),a.appendChild(l);let n=document.createElement("div");n.classList.add("challenge-model-header"),l.appendChild(n);let s=document.createElement("div");s.classList.add("challenge-model-header-icons"),n.appendChild(s);let i=document.createElement("img");i.classList.add("challenge-model-header-difficulty"),i.src="./Assets/UI/EditMapIcon.webp",s.appendChild(i);let o=document.createElement("div");o.classList.add("challenge-model-header-texts"),n.appendChild(o);let r=document.createElement("p");r.classList.add("challenge-model-header-name","black-outline"),r.innerHTML=t.name,o.appendChild(r);let c=document.createElement("div");c.classList.add("challenge-header-right-container"),n.appendChild(c);let p=document.createElement("div");p.classList.add("challenge-header-right-top"),c.appendChild(p);let m=document.createElement("img");m.classList.add("modal-close"),m.src="./Assets/UI/CloseBtn.webp",m.addEventListener("click",(()=>{Da(e)})),p.appendChild(m);let u=document.createElement("div");u.classList.add("challenge-header-right-bottom"),c.appendChild(u);let h=document.createElement("p");h.classList.add("challenge-id","black-outline"),h.innerHTML=t.id,h.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,h)})),u.appendChild(h);let g=document.createElement("img");g.classList.add("browser-copy-img"),g.src="../Assets/UI/CopyClipboardBtn.webp",g.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),za(t.id,h)})),u.appendChild(g);let L=document.createElement("img");L.classList.add("browser-go-img"),L.src="../Assets/UI/GoBtnSmall.webp",L.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),od(`btd6://Map/${t.id}`)})),u.appendChild(L);let b=document.createElement("div");b.classList.add("map-model-top","map-model-bg"),l.appendChild(b);let v=document.createElement("img");if(v.classList.add("map-model-img","boss-border"),v.src=Object.keys(Me.mapsInOrder).includes(t.map)?ie(t.map):t.mapURL,b.appendChild(v),d.statsValid){let e=document.createElement("div");e.classList.add("map-model-stats-div"),b.appendChild(e);let t=document.createElement("p");t.classList.add("challenge-stats-header","black-outline"),t.innerHTML="Challenge Stats",e.appendChild(t);let a=document.createElement("div");a.classList.add("challenge-stats-left-right"),e.appendChild(a);let l=document.createElement("div");l.classList.add("challenge-stats-left"),a.appendChild(l);let n=document.createElement("div");if(n.classList.add("challenge-usv-div"),l.appendChild(n),0!=d.Upvotes){let e=document.createElement("div");e.classList.add("challenge-upvote-div"),n.appendChild(e);let t=document.createElement("img");t.classList.add("challenge-upvote-icon"),t.src="./Assets/UI/ChallengeThumbsUpIcon.webp",e.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-upvote-value"),a.innerHTML=d.Upvotes,e.appendChild(a)}let s=document.createElement("div");s.classList.add("challenge-trophy-div"),n.appendChild(s);let i=document.createElement("img");i.classList.add("challenge-trophy-icon"),i.src="./Assets/UI/ChallengeTrophyIcon.webp",s.appendChild(i);let o=document.createElement("p");o.classList.add("challenge-trophy-value"),o.innerHTML=d["Player Completion Rate"],s.appendChild(o);let r=document.createElement("div");r.classList.add("challenge-skull-div"),n.appendChild(r);let c=document.createElement("img");c.classList.add("challenge-skull-icon"),c.src="./Assets/UI/DeathRateIcon.webp",r.appendChild(c);let p=document.createElement("p");if(p.classList.add("challenge-skull-value"),p.innerHTML=d["Player Win Rate"],r.appendChild(p),"n/a"!=d.Creator&&null!=d.Creator){let e=document.createElement("div");e.classList.add("challenge-creator"),l.appendChild(e);let t=document.createElement("div");t.classList.add("avatar"),e.appendChild(t);let a=50,n=document.createElement("img");n.classList.add("avatar-frame","noSelect"),n.style.width=`${a}px`,n.src="../Assets/UI/InstaTowersContainer.webp",t.appendChild(n);let s=document.createElement("img");s.classList.add("avatar-img","noSelect"),s.style.width=`${a}px`,s.src="../Assets/ProfileAvatar/ProfileAvatar01.webp",t.appendChild(s);let i=document.createElement("p");i.classList.add("challenge-creator-name","black-outline"),i.innerHTML="Loading...",e.appendChild(i),await U(d.Creator).then((t=>{i.innerHTML=t.displayName,s.src=ge(t),e.style.backgroundImage=`linear-gradient(to right, transparent 80%, var(--profile-secondary) 100%),url(${Le(t)})`,e.addEventListener("click",(()=>{Ra("map",d.Creator)}))}))}["Date Created","Game Version"].forEach((e=>{if("Game Version"==e&&0==d[e])return;let t=document.createElement("div");t.classList.add("challenge-stat"),l.appendChild(t);let a=document.createElement("p");a.classList.add("challenge-stat-label"),a.innerHTML=`${e}: ${d[e]}`,t.appendChild(a)}));let m=document.createElement("div");m.classList.add("challenge-stats-right"),a.appendChild(m),Object.entries(d.Stats).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("challenge-stat"),m.appendChild(a);let d=document.createElement("p");d.classList.add("challenge-stat-label"),d.innerHTML=e,a.appendChild(d);let l=document.createElement("p");l.classList.add("challenge-model-stat-value"),l.innerHTML=t.toLocaleString(),a.appendChild(l)}))}}function Va(){let e=document.getElementById("extras-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("progress-page"),e.appendChild(t);let a=document.createElement("div");a.classList.add("selectors-div"),t.appendChild(a);["Custom Round Sets","Send Feedback"].forEach((t=>{let d=document.createElement("div");d.id=t.toLowerCase()+"-div",d.classList.add("selector-div","blueprint-bg"),d.addEventListener("click",(()=>{e.style.display="none",document.getElementById("extras-content").style.display="flex",Ya(t)})),a.appendChild(d);let l=document.createElement("img");switch(l.id=t.toLowerCase()+"-img",l.classList.add("selector-img"),d.appendChild(l),t){case"Custom Round Sets":l.src="../Assets/ChallengeRulesIcon/CustomRoundIcon.webp";break;case"Monkey Money Helper":default:l.src="../Assets/UI/WoodenRoundButton.webp";break;case"Send Feedback":l.src="../Assets/UI/FeedbackBtn.webp";break;case"Settings":l.src="../Assets/UI/OptionsBtn.webp"}let n=document.createElement("p");n.id=t.toLowerCase()+"-text",n.classList.add("selector-text","black-outline"),n.innerHTML=t,d.appendChild(n);let s=document.createElement("img");s.id=t.toLowerCase()+"-go-img",s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",d.appendChild(s)}))}function Ya(e){switch(bd(),e){case"Custom Round Sets":Za();break;case"Send Feedback":window.open("https://forms.gle/Tg1PuRNj2ftojMde6","_blank");break;case"Settings":sd()}}function Za(){let e=document.getElementById("extras-content");e.innerHTML="";let t=document.createElement("div");t.classList.add("progress-page"),e.appendChild(t);let a=document.createElement("div");a.classList.add("selectors-div"),t.appendChild(a);let d=Object.fromEntries(Object.entries(Me.roundSets).filter((([e,t])=>"quest"!=t.type))),l=Object.fromEntries(Object.entries(Me.roundSets).filter((([e,t])=>"quest"===t.type)));Object.entries(d).forEach((([e,t])=>{let d=document.createElement("div");d.classList.add("roundset-selector-div"),"boss"==t.type?d.classList.add("veteran-container"):d.classList.add("wood-container"),d.addEventListener("click",(()=>{ht(),Xa("extras",e)})),a.appendChild(d);let l=document.createElement("img");l.classList.add("roundset-selector-img"),l.src=`../Assets/UI/${t.icon}.webp`,d.appendChild(l);let n=document.createElement("p");n.classList.add("selector-text","black-outline"),n.innerHTML=t.name,d.appendChild(n);let s=document.createElement("img");s.classList.add("selector-go-img"),s.src="../Assets/UI/ContinueBtn.webp",d.appendChild(s)}));let n=document.createElement("p");n.classList.add("other-roundsets-selector-text","black-outline"),n.innerHTML="Quest Custom Rounds",a.appendChild(n);let s=document.createElement("div");s.classList.add("other-roundsets-selector-div"),a.appendChild(s),Object.entries(l).forEach((([e,t])=>{let a=document.createElement("div");a.classList.add("other-roundset-selector-div"),a.addEventListener("click",(()=>{Xa("extras",e)})),s.appendChild(a);let d=document.createElement("p");d.classList.add("other-roundset-selector-text","black-outline");let l=e.match(/(Part|Stage)(\d+)/i);null!=l&&(d.innerHTML=`${l[1]} ${l[2]}`,a.appendChild(d));let n=document.createElement("img");n.classList.add("other-roundset-selector-img"),n.src=`../Assets/QuestIcon/${t.icon}.webp`,a.appendChild(n)}))}async function Xa(e,t){let a=document.getElementById("roundset-content");a.style.display="flex",a.innerHTML="",document.getElementById(`${e}-content`).style.display="none",bd();let d=await fetch(`./data/${t}.json`).then((e=>e.json())),l=["BloonariusRoundSet","LychRoundSet","VortexRoundSet","DreadbloonRoundSet","PhayzeRoundSet"].includes(t);Xe=Ja(d),console.log(Xe);let n=document.createElement("div");n.classList.add("roundset-header-bar"),a.appendChild(n);let s=document.createElement("div");s.classList.add("roundset-header-title"),n.appendChild(s);let i=document.createElement("div");i.classList.add("roundset-header-left"),s.appendChild(i);let o=document.createElement("p");o.classList.add("roundset-header-text","black-outline"),o.innerHTML=Me.roundSets[t].name,s.appendChild(o);let r=document.createElement("div");r.classList.add("roundset-header-right"),s.appendChild(r);let c=document.createElement("img");c.classList.add("modal-close"),c.src="./Assets/UI/CloseBtn.webp",c.addEventListener("click",(()=>{a.style.display="none",document.getElementById(`${e}-content`).style.display="flex"})),r.appendChild(c);let p=document.createElement("div");p.classList.add("roundset-header-bar-bottom"),n.appendChild(p);let m=document.createElement("div");m.classList.add("maps-progress-views"),p.appendChild(m);let u=document.createElement("p");u.classList.add("maps-progress-coop-toggle-text","maps-progress-view-list","black-outline"),u.innerHTML="Display Type:",m.appendChild(u);let h=document.createElement("div");h.classList.add("maps-progress-view","stats-tab-yellow","black-outline"),h.innerHTML="Simple",m.appendChild(h);let g=document.createElement("div");g.classList.add("maps-progress-view","black-outline"),g.innerHTML="Detailed",m.appendChild(g);let L=document.createElement("div");L.classList.add("maps-progress-view","black-outline"),L.innerHTML="Preview",m.appendChild(L);let b=document.createElement("div");b.classList.add("maps-progress-filter"),p.appendChild(b);let v=document.createElement("div");v.classList.add("map-progress-filter-difficulty");let y=document.createElement("p");y.classList.add("maps-progress-coop-toggle-text"),y.classList.add("black-outline"),y.innerHTML="Only Modified:",v.appendChild(y);let C=document.createElement("input");C.id="roundset-modified-checkbox",C.classList.add("maps-progress-coop-toggle-input"),C.type="checkbox",v.appendChild(C),l?(at=[],Xe.rounds.forEach(((e,t)=>{e.hasOwnProperty("modified")&&at.push(e.roundNumber)})),C.checked=!0,b.appendChild(v),tt=C):tt=null;let E=document.createElement("div");E.classList.add("maps-progress-coop-toggle"),b.appendChild(E);let w=document.createElement("p");w.classList.add("maps-progress-coop-toggle-text"),w.classList.add("black-outline"),w.innerHTML="Reverse:",E.appendChild(w);let f=document.createElement("input");f.id="roundset-reverse-checkbox",f.classList.add("maps-progress-coop-toggle-input"),f.type="checkbox",E.appendChild(f);let k=document.createElement("div");k.id="rounds-content",k.classList.add("rounds-content"),a.appendChild(k),h.addEventListener("click",(()=>{h.classList.add("stats-tab-yellow"),g.classList.remove("stats-tab-yellow"),L.classList.remove("stats-tab-yellow"),Ze="Simple",Qa(Ze,f.checked,C.checked)})),g.addEventListener("click",(()=>{g.classList.add("stats-tab-yellow"),h.classList.remove("stats-tab-yellow"),L.classList.remove("stats-tab-yellow"),Ze="Topper",Qa(Ze,f.checked,C.checked)})),L.addEventListener("click",(()=>{L.classList.add("stats-tab-yellow"),h.classList.remove("stats-tab-yellow"),g.classList.remove("stats-tab-yellow"),Ze="Preview",Qa(Ze,f.checked,C.checked)})),f.addEventListener("change",(()=>{td(f.checked)})),C.addEventListener("change",(()=>{ed(C.checked)})),Je=0,Ze="Simple",Qa(Ze,f.checked,C.checked),ed(C.checked)}function Ja(e,t){return null!=t&&t.rounds.forEach(((t,a)=>{let d=e.rounds.findIndex((e=>e.roundNumber==t.roundNumber));t.addToRound?-1!=d&&(e.rounds[d].bloonGroups=e.rounds[d].bloonGroups.concat(t.bloonGroups),e.rounds[d].addToRound=!0):-1!=d&&(e.rounds[d]=t)})),e}async function Qa(e,t,a){let d=document.getElementById("rounds-content");switch(d.innerHTML="",e){case"Simple":nd();let e=!1;Xe.rounds.forEach((async(t,a)=>{let l=document.createElement("div");l.id=`round-${t.roundNumber}`,l.classList.add("round-div"),e&&l.classList.add("round-div-alt");let n=document.createElement("p");n.classList.add("round-number","black-outline"),n.innerHTML=t.roundNumber,l.appendChild(n);let s=document.createElement("div");s.id=`round-${t.roundNumber}-groups`,s.classList.add("round-bloon-groups"),l.appendChild(s);let i=document.createDocumentFragment();t.bloonGroups.sort(((e,t)=>e.start-t.start)).forEach(((e,t)=>{let a=document.createElement("div");a.classList.add("bloon-group-div");let d=document.createElement("p");d.classList.add("bloon-group-number","black-outline"),d.innerHTML="x"+e.count,a.appendChild(d);let l=document.createElement("img");l.classList.add("bloon-group-bloon"),l.src=`../Assets/BloonIcon/${e.bloon}.webp`,l.loading="lazy",a.appendChild(l),i.appendChild(a)})),s.appendChild(i),d.appendChild(l),e=!e})),document.getElementById("roundset-reverse-checkbox").checked&&td(),null!=tt&&tt.checked&&ed(!0);break;case"Topper":nd();let a=document.createElement("div");a.classList.add("rounds-detailed-div"),d.appendChild(a),rd(a),setTimeout((()=>{let e=document.createDocumentFragment(),d=document.createElement("div");d.classList.add("disclaimer-div"),e.appendChild(d);let l=document.createElement("p");l.classList.add("disclaimer"),l.innerHTML="This layout is based on Topper's website:",d.appendChild(l);let n=document.createElement("a");n.classList.add("disclaimer-link"),n.href="https://topper64.co.uk/nk/btd6/rounds/",n.target="_blank",n.innerHTML="Topper's Round Information",d.appendChild(n);Xe.rounds.forEach((async(a,d)=>{let l=document.createElement("div");l.id=`round-${a.roundNumber}`,l.classList.add("round-div-detailed"),t&&l.classList.add("round-div-reverse");let n=document.createElement("div");n.classList.add("rounds-div-header"),l.appendChild(n);let s=document.createElement("p");s.classList.add("round-number","round-number-detailed","black-outline"),s.innerHTML=`Round ${a.roundNumber}`,n.appendChild(s);let i=document.createElement("div");i.classList.add("income-div"),n.appendChild(i);let o=document.createElement("img");o.classList.add("income-img"),o.src="../Assets/UI/CoinIcon.webp",i.appendChild(o);let r=document.createElement("div");r.classList.add("income-text-div"),i.appendChild(r);let c=document.createElement("p");c.classList.add("round-income","black-outline"),c.innerHTML=`Income: ${a.income.toLocaleString()}`,r.appendChild(c);let p=document.createElement("p");p.classList.add("round-income-total","black-outline"),p.innerHTML=`Total: ${a.incomeSum.toLocaleString()}`,r.appendChild(p);let m=document.createElement("div");m.classList.add("rbe-div"),n.appendChild(m);let u=document.createElement("img");u.classList.add("rbe-img"),u.src="../Assets/BloonIcon/Red.webp",m.appendChild(u);let h=document.createElement("div");h.classList.add("rbe-text-div"),m.appendChild(h);let g=document.createElement("p");g.classList.add("round-rbe","black-outline"),g.innerHTML=`RBE: ${a.rbe.toLocaleString()}`,h.appendChild(g);let L=document.createElement("p");L.classList.add("round-rbe-total","black-outline"),L.innerHTML=`Total: ${a.rbeSum.toLocaleString()}`,h.appendChild(L);let b=Math.max(...a.bloonGroups.map((e=>e.duration))),v=document.createElement("p");v.classList.add("round-duration","black-outline"),v.innerHTML=`Duration: ${b.toFixed(2)}s`,n.appendChild(v);let y=document.createElement("div");y.classList.add("timeline-div"),l.appendChild(y),a.bloonGroups.forEach(((e,t)=>{let a=document.createElement("div");a.classList.add("bloon-group-div-detailed"),y.appendChild(a);let d=document.createElement("div");d.classList.add("left-div"),a.appendChild(d);let l=document.createElement("img");l.classList.add("bloon-image"),l.src=`../Assets/BloonIcon/${e.bloon}.webp`,d.appendChild(l);let n=document.createElement("p");n.classList.add("bloon-count","black-outline"),n.innerHTML="x"+e.count,d.appendChild(n);let s=document.createElement("div");s.classList.add("timeline-right-div"),a.appendChild(s);let i=document.createElement("div");i.classList.add("bloon-bar"),s.appendChild(i);let o=document.createElement("div");o.classList.add("bloon-bar-fill"),o.style.background=Cd[e.bloon.replace("Camo","").replace("Regrow","").replace("Fortified","")].color,e.bloon.includes("Rainbow")||(o.style.border=`4px solid ${Cd[e.bloon.replace("Camo","").replace("Regrow","").replace("Fortified","")].border}`);let r=(e.duration-e.start)/b*100,c=e.start/b*100;r<5&&(r=5),c+r>100&&(c=100-r),o.style.width=`${r}%`,o.style.left=`${c}%`,i.appendChild(o)})),e.appendChild(l)})),a.innerHTML="",a.appendChild(e),document.getElementById("roundset-reverse-checkbox").checked&&td(),null!=tt&&tt.checked&&ed(!0)}),0);break;case"Preview":let l=document.createElement("div");l.classList.add("preview-container-div"),d.appendChild(l);let n=document.createElement("div");n.classList.add("preview-div"),l.appendChild(n);let s=document.createElement("div");s.classList.add("preview-header"),n.appendChild(s);let i=document.createElement("p");i.id="round-number-preview",i.classList.add("round-number","round-number-preview","black-outline"),i.innerHTML=`Round ${Je+1}`,s.appendChild(i);let o=document.createElement("input");o.id="select-round-num-preview",o.classList.add("select-round-num"),o.type="number",o.min=1,o.max=Xe.rounds.length,o.value=Je+1,o.addEventListener("change",(()=>{o.value<1&&(o.value=1),o.value>Xe.rounds.length&&(o.value=Xe.rounds.length),i.innerHTML=`Round ${o.value}`,Je=o.value-1,ad()})),s.appendChild(o);let r=document.createElement("div");r.classList.add("preview-right-div"),s.appendChild(r);let c=document.createElement("img");c.classList.add("clear-button"),c.src="../Assets/UI/DestroyBloonsBtn.webp",c.addEventListener("click",(()=>{ld()})),r.appendChild(c);let p=document.createElement("img");p.classList.add("play-normal-button"),p.src="../Assets/UI/GoBtnSmall.webp",p.addEventListener("click",(()=>{yd=1,i.innerHTML=`Round ${Je+1}`,ld(),xd(Xe.rounds[Je])})),r.appendChild(p);let m=document.createElement("img");m.classList.add("play-fast-button"),m.src="../Assets/UI/FastForwardBtn.webp",m.addEventListener("click",(()=>{yd=3,i.innerHTML=`Round ${Je+1}`,ld(),xd(Xe.rounds[Je])})),r.appendChild(m),Mt=document.createElement("canvas"),Mt.id="roundset-canvas",Mt.classList.add("roundset-canvas"),Mt.width=800,Mt.height=300,n.appendChild(Mt);let u=document.createElement("div");u.classList.add("preview-footer-div"),n.appendChild(u);let h=document.createElement("div");h.classList.add("difficulty-div"),u.appendChild(h);let g=document.createElement("div");g.classList.add("maps-progress-view","stats-tab-yellow","black-outline"),g.innerHTML="Easy",h.appendChild(g);let L=document.createElement("div");L.classList.add("maps-progress-view","black-outline"),L.innerHTML="Medium",h.appendChild(L);let b=document.createElement("div");b.classList.add("maps-progress-view","black-outline"),b.innerHTML="Hard",h.appendChild(b),g.addEventListener("click",(()=>{Bd=1,g.classList.add("stats-tab-yellow"),L.classList.remove("stats-tab-yellow"),b.classList.remove("stats-tab-yellow")})),L.addEventListener("click",(()=>{Bd=1.1,g.classList.remove("stats-tab-yellow"),L.classList.add("stats-tab-yellow"),b.classList.remove("stats-tab-yellow")})),b.addEventListener("click",(()=>{Bd=1.26,g.classList.remove("stats-tab-yellow"),L.classList.remove("stats-tab-yellow"),b.classList.add("stats-tab-yellow")}));let v=document.createElement("div");v.classList.add("next-prev-div"),u.appendChild(v);let y=document.createElement("div");y.classList.add("maps-progress-view","black-outline"),y.innerHTML="Previous",y.addEventListener("click",(()=>{null!=tt&&tt.checked?(Qe--,Qe<0&&(Qe=at.length-1),Je=at[Qe]-1):(Je--,Je<0&&(Je=Xe.rounds.length-1)),o.value=Je+1,ad()})),v.appendChild(y);let C=document.createElement("div");C.classList.add("maps-progress-view","black-outline"),C.innerHTML="Next",C.addEventListener("click",(()=>{null!=tt&&tt.checked?(Qe++,Qe>=at.length&&(Qe=0),Je=at[Qe]-1):(Je++,Je>=Xe.rounds.length&&(Je=0)),o.value=Je+1,ad()})),v.appendChild(C);let E=document.createElement("div");E.id="preview-round-info-div",E.classList.add("round-info-div"),n.appendChild(E),Tt=Mt.getContext("2d");let w=performance.now();et=!0,requestAnimationFrame((function e(){if(!et)return void console.log("stopping");const t=performance.now(),a=(t-w)/1e3;w=t,Hd(a),Sd(),requestAnimationFrame(e)})),null!=tt&&tt.checked&&ed(!0),ad(),document.getElementById("roundset-reverse-checkbox").checked&&td()}}function ed(e){switch(Ze){case"Simple":let t=!1;Xe.rounds.forEach((async(a,d)=>{let l=document.getElementById(`round-${a.roundNumber}`);e&&!a.hasOwnProperty("modified")?l.style.display="none":(l.style.display="flex",t?l.classList.add("round-div-alt"):Array.from(l.classList).includes("round-div-alt")&&l.classList.remove("round-div-alt"),t=!t)}));break;case"Topper":Xe.rounds.forEach((async(t,a)=>{let d=document.getElementById(`round-${t.roundNumber}`);e&&!t.hasOwnProperty("modified")?d.style.display="none":d.style.display="flex"}));break;case"Preview":e?(Qe=0,Je=at[0]-1,document.getElementById("round-number-preview").innerHTML=`Round ${at[0]}`,document.getElementById("select-round-num-preview").value=at[0],ad()):(Je=0,document.getElementById("round-number-preview").innerHTML=`Round ${Je+1}`,document.getElementById("select-round-num-preview").value=Je+1,ad())}}function td(){switch(Ze){case"Simple":Xe.rounds.forEach(((e,t)=>{let a=document.getElementById(`round-${e.roundNumber}-groups`);Array.from(a.children).reverse().forEach((e=>a.appendChild(e)))}));break;case"Topper":let e=document.getElementsByClassName("timeline-div");for(let t of e)t.classList.toggle("timeline-div-reverse");let t=document.getElementsByClassName("timeline-right-div");for(let e of t)e.classList.toggle("flip-horizontal");break;case"Preview":document.getElementById("preview-timeline-div").classList.toggle("timeline-div-reverse");let a=document.getElementsByClassName("preview-timeline-right-div");for(let e of a)e.classList.toggle("flip-horizontal")}}function ad(){let e=document.getElementById("preview-round-info-div");e.innerHTML="";let t=Xe.rounds[Je],a=document.createElement("div");a.classList.add("round-div-detailed"),e.appendChild(a);let d=document.createElement("div");d.classList.add("rounds-div-header"),a.appendChild(d);let l=document.createElement("p");l.classList.add("round-number","round-number-detailed","black-outline"),l.innerHTML=`Round ${t.roundNumber}`,d.appendChild(l);let n=document.createElement("div");n.classList.add("income-div"),d.appendChild(n);let s=document.createElement("img");s.classList.add("income-img"),s.src="../Assets/UI/CoinIcon.webp",n.appendChild(s);let i=document.createElement("div");i.classList.add("income-text-div"),n.appendChild(i);let o=document.createElement("p");o.classList.add("round-income","black-outline"),o.innerHTML=`Income: ${t.income.toLocaleString()}`,i.appendChild(o);let r=document.createElement("p");r.classList.add("round-income-total","black-outline"),r.innerHTML=`Total: ${t.incomeSum.toLocaleString()}`,i.appendChild(r);let c=document.createElement("div");c.classList.add("rbe-div"),d.appendChild(c);let p=document.createElement("img");p.classList.add("rbe-img"),p.src="../Assets/BloonIcon/Red.webp",c.appendChild(p);let m=document.createElement("div");m.classList.add("rbe-text-div"),c.appendChild(m);let u=document.createElement("p");u.classList.add("round-rbe","black-outline"),u.innerHTML=`RBE: ${t.rbe.toLocaleString()}`,m.appendChild(u);let h=document.createElement("p");h.classList.add("round-rbe-total","black-outline"),h.innerHTML=`Total: ${t.rbeSum.toLocaleString()}`,m.appendChild(h);let g=Math.max(...t.bloonGroups.map((e=>e.duration))),L=document.createElement("p");L.classList.add("round-duration","black-outline"),L.innerHTML=`Duration: ${g.toFixed(2)}s`,d.appendChild(L);let b=document.createElement("div");b.id="preview-timeline-div",b.classList.add("timeline-div"),a.appendChild(b);t.bloonGroups.forEach(((e,t)=>{let a=document.createElement("div");a.classList.add("bloon-group-div-detailed"),b.appendChild(a);let d=document.createElement("div");d.classList.add("left-div"),a.appendChild(d);let l=document.createElement("img");l.classList.add("bloon-image"),l.src=`../Assets/BloonIcon/${e.bloon}.webp`,d.appendChild(l);let n=document.createElement("p");n.classList.add("bloon-count","black-outline"),n.innerHTML="x"+e.count,d.appendChild(n);let s=document.createElement("div");s.classList.add("timeline-right-div","preview-timeline-right-div"),a.appendChild(s);let i=document.createElement("div");i.classList.add("bloon-bar"),s.appendChild(i);let o=document.createElement("div");o.classList.add("bloon-bar-fill"),o.style.background=Cd[e.bloon.replace("Camo","").replace("Regrow","").replace("Fortified","")].color,e.bloon.includes("Rainbow")||(o.style.border=`4px solid ${Cd[e.bloon.replace("Camo","").replace("Regrow","").replace("Fortified","")].border}`);let r=(e.duration-e.start)/g*100,c=e.start/g*100;r<5&&(r=5),c+r>100&&(c=100-r),o.style.width=`${r}%`,o.style.left=`${c}%`,i.appendChild(o)})),document.getElementById("roundset-reverse-checkbox").checked&&td()}function dd(e){let t=document.getElementById("preview-timeline-div"),a=document.createElement("div");a.id="preview-playhead",a.classList.add("playhead"),t.appendChild(a),a.style.animation=`playhead ${e}s linear`,a.addEventListener("animationend",(function(){a.remove()}))}function ld(){document.getElementById("preview-playhead")&&document.getElementById("preview-playhead").remove(),Td=null,Md.length=0}function nd(){et=!1,ld()}function sd(){let e=document.getElementById("extras-content");e.innerHTML="";let t=document.createElement("p");t.classList.add("no-data-found","black-outline"),t.innerHTML="Coming Soon",e.appendChild(t);let a=document.createElement("div");a.id="settings-container",a.classList.add("settings-container"),e.appendChild(a);let d=document.createElement("div");d.id="settings-options-container",d.classList.add("settings-options-container"),a.appendChild(d);let l=document.createElement("p");l.id="where-button",l.classList.add("where-button"),l.classList.add("return-entry-button"),l.classList.add("black-outline"),l.innerHTML="Clear Local Storage",l.addEventListener("click",(()=>{localStorage.clear(),location.reload()})),d.appendChild(l)}function id(e){let t={},a=e.split("#"),d=0;for(let e of a){t[d]={};let a=e.split(":"),l=a[0];if(!["MonkeyMoney","Power","InstaMonkey","KnowledgePoints","RandomInstaMonkey","Trophy"].includes(l)){t[d].type="Other",t[d].value=l,d++;continue}let n=a[1].split(",");switch(l){case"MonkeyMoney":t[d].type="MonkeyMoney",t[d].amount=parseInt(n[0]);break;case"Power":t[d].type="Power",t[d].power=n[0],t[d].amount=parseInt(n[1]),null==n[1]&&(t[d].amount=1);break;case"InstaMonkey":t[d].type="InstaMonkey",t[d].tower=n[0],t[d].tiers=n[1];break;case"KnowledgePoints":t[d].type="KnowledgePoints",t[d].amount=parseInt(n[0]);break;case"RandomInstaMonkey":t[d].type="RandomInstaMonkey",t[d].tier=n[0],t[d].amount=parseInt(n[1]);break;case"Trophy":t[d].type="Trophy",t[d].trophy=n[0]}d++}return t}function od(e){let t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t)}function rd(e){let t=document.getElementsByClassName("loading-icon")[0].cloneNode(!0);t.classList.add("loading-icon-leaderboard"),t.style.height="unset",e.appendChild(t)}function cd(e){return[Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60)].map((e=>e<10?"0"+e:e)).join(":")}function pd(e){let t=Math.floor(e/1e3),a=e%1e3,d=Math.floor(t/3600);t%=3600;let l=Math.floor(t/60),n=t%60;l=l.toString().padStart(2,"0"),n=n.toString().padStart(2,"0"),a=a.toString().padStart(3,"0");let s=`${l}:${n}.${a}`;return d>0&&(d=d.toString().padStart(2,"0"),s=`${d}:${s}`),s}function md(e){return(e-new Date)/1e3}function ud(e,t){const a=md(e),d=document.getElementById(t);if(a>172800){const e=Math.ceil(a/86400);d.textContent=`${e} days`}else d.textContent=cd(a)}function hd(e,t){const a=[{name:"year",ms:31536e6},{name:"month",ms:2592e6},{name:"day",ms:864e5},{name:"hour",ms:36e5},{name:"minute",ms:6e4},{name:"second",ms:1e3}],d=e-t;for(const e of a){if(d<e.ms)continue;let t=Math.round(d/e.ms);return`${t} ${e.name}${t>1?"s":""} ago`}}function gd(e){null!=e?document.body.style.backgroundColor=`rgb(${255*e[0]},${255*e[1]},${255*e[2]})`:document.body.style.removeProperty("background-color")}function Ld(e,t,a,d,l){switch(e){case 1:return a*(d/l);case 2:return t*(l/d);case 3:return l*(t/a);case 4:return d*(a/t)}}function bd(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function vd(e,t,a){if(console.log(a),f&&!a)return;let d=document.createElement("div");d.classList.add("error-modal-overlay"),document.body.appendChild(d);let l=document.createElement("div");l.id="error-modal",l.classList.add("error-modal"),d.appendChild(l);let n=document.createElement("div");n.id="error-modal-header",n.classList.add("error-modal-header"),l.appendChild(n);let s=document.createElement("img");s.id="error-modal-header-img",s.classList.add("error-modal-header-img"),s.src="./Assets/UI/BadConnectionBtn.webp",n.appendChild(s);let i=document.createElement("p");i.id="error-modal-header-text",i.classList.add("error-modal-header-text"),i.classList.add("black-outline"),i.innerHTML="Error",n.appendChild(i);let o=document.createElement("div");o.classList.add("error-modal-dummy"),n.appendChild(o);let r=document.createElement("div");r.id="error-modal-content",r.classList.add("error-modal-content"),r.innerHTML=""+e,l.appendChild(r);let c=document.createElement("div");if(c.id="error-modal-content2",c.classList.add("error-modal-content"),"Invalid user ID / Player Does not play this game"===e)c.innerHTML="Please try again or create a new Open Access Key.";l.appendChild(c);let p=document.createElement("div");p.classList.add("error-modal-ok-button-div"),l.appendChild(p);let m=document.createElement("div");m.classList.add("start-button","modal-ok-button","black-outline"),m.innerHTML="OK",m.addEventListener("click",(()=>{f=!1,document.body.removeChild(d)})),p.appendChild(m);let u=document.createElement("img");u.classList.add("error-modal-close"),u.src="./Assets/UI/CloseBtn.webp",u.addEventListener("click",(()=>{f=!1,document.body.removeChild(d)})),r.appendChild(u),f=!0}let yd=1,Cd={Red:{name:"Red",rbe:1,speed:25,layer:1,scale:.8,color:"#ED0F0F",border:"#690000"},Blue:{name:"Blue",rbe:2,speed:35,layer:2,scale:.85,color:"#2797E0",border:"#004772"},Green:{name:"Green",rbe:3,speed:45,layer:3,scale:.9,color:"#77A80F",border:"#3D5400"},Yellow:{name:"Yellow",rbe:4,speed:80,layer:4,scale:.95,color:"#FFD50F",border:"#8E620C"},Pink:{name:"Pink",rbe:5,speed:87.5,layer:5,scale:1,color:"#F15060",border:"#A92626"},Black:{name:"Black",rbe:11,speed:45,layer:6,scale:.58,color:"#161616",border:"#414141"},Purple:{name:"Purple",rbe:11,speed:75,layer:7,scale:.95,color:"#9326E0",border:"#00E4FF"},White:{name:"White",rbe:12,speed:50,layer:6,scale:.58,color:"#D7D7D7",border:"#727272"},Lead:{name:"Lead",rbe:23,speed:25,layer:7,scale:.95,color:"#7E7E7E",border:"#2F2F2F"},Zebra:{name:"Zebra",rbe:23,speed:45,layer:7,scale:.9,color:"repeating-linear-gradient(145deg, #040404, #040404 10px, #ffffff 10px, #ffffff 20px)",border:"#5A5A5A"},Rainbow:{name:"Rainbow",rbe:47,speed:55,layer:8,scale:1,color:"linear-gradient(180deg, rgba(228,26,26,1) 0%, rgba(255,159,0,1) 16%, rgba(255,224,0,1) 33%, rgba(125,181,4,1) 48%, rgba(83,176,222,1) 66%, rgba(226,74,226,1) 84%, rgba(132,21,132,1) 100%)",border:"transparent"},Ceramic:{name:"Ceramic",rbe:47,speed:62.5,layer:9,scale:1,color:"#BE6C1D",border:"#61370B"},Moab:{name:"Moab",rbe:616,speed:25,layer:10,color:"#2AC2FF",border:"#FFFFFF"},Bfb:{name:"Bfb",rbe:3164,speed:6.25,layer:11,color:"#C00505",border:"#FFFFFF"},Zomg:{name:"Zomg",rbe:16656,speed:4.5,layer:12,color:"#575757",border:"#B7F700"},Ddt:{name:"Ddt",rbe:3164,speed:66,layer:12,color:"#3C3C3C",border:"#A5A5A5"},Bad:{name:"Bad",rbe:16464,speed:4.5,layer:13,color:"#AB02AC",border:"#500151"}},Ed=new Image;Ed.src="../Assets/BloonIcon/preview_bloons_spritesheet.webp";let wd={CeramicCamo:{x:1153,y:0,width:129,height:163},CeramicFortified:{x:993,y:547,width:140,height:163},CeramicFortifiedCamo:{x:993,y:711,width:140,height:163},CeramicRegrow:{x:0,y:782,width:176,height:162},CeramicRegrowCamo:{x:177,y:782,width:176,height:162},CeramicRegrowFortified:{x:629,y:0,width:186,height:162},CeramicRegrowFortifiedCamo:{x:629,y:163,width:186,height:162},Black:{x:1283,y:790,width:78,height:97},BlackCamo:{x:1283,y:888,width:78,height:97},BlackRegrow:{x:833,y:945,width:105,height:97},BlackRegrowCamo:{x:708,y:782,width:105,height:97},Blue:{x:1283,y:148,width:110,height:139},BlueCamo:{x:1283,y:288,width:110,height:139},BlueRegrow:{x:408,y:641,width:150,height:138},BlueRegrowCamo:{x:993,y:146,width:150,height:138},Ceramic:{x:1153,y:164,width:129,height:163},LeadFortifiedCamo:{x:993,y:875,width:133,height:156},LeadRegrow:{x:816,y:326,width:168,height:154},LeadRegrowCamo:{x:816,y:481,width:168,height:154},LeadRegrowFortified:{x:629,y:326,width:178,height:154},LeadRegrowFortifiedCamo:{x:629,y:481,width:178,height:154},Green:{x:878,y:1100,width:116,height:147},GreenCamo:{x:995,y:1100,width:116,height:147},GreenRegrow:{x:468,y:474,width:159,height:145},GreenRegrowCamo:{x:629,y:636,width:159,height:145},Lead:{x:134,y:1100,width:123,height:156},LeadCamo:{x:258,y:1100,width:123,height:156},LeadFortified:{x:0,y:1100,width:133,height:156},WhiteRegrow:{x:1153,y:1132,width:105,height:97},WhiteRegrowCamo:{x:1283,y:428,width:105,height:97},Yellow:{x:382,y:1100,width:123,height:156},YellowCamo:{x:506,y:1100,width:123,height:156},YellowRegrow:{x:816,y:636,width:168,height:154},YellowRegrowCamo:{x:0,y:945,width:168,height:154},Zebra:{x:1153,y:984,width:116,height:147},ZebraCamo:{x:1283,y:0,width:116,height:147},ZebraRegrow:{x:816,y:791,width:159,height:145},ZebraRegrowCamo:{x:993,y:0,width:159,height:145},Pink:{x:1153,y:328,width:129,height:163},PinkCamo:{x:1153,y:492,width:129,height:163},PinkRegrow:{x:354,y:782,width:176,height:162},PinkRegrowCamo:{x:531,y:782,width:176,height:162},Purple:{x:630,y:1100,width:123,height:156},PurpleCamo:{x:754,y:1100,width:123,height:156},PurpleRegrow:{x:169,y:945,width:168,height:154},PurpleRegrowCamo:{x:338,y:945,width:168,height:154},Rainbow:{x:1153,y:656,width:129,height:163},RainbowCamo:{x:1153,y:820,width:129,height:163},RainbowRegrow:{x:816,y:0,width:176,height:162},RainbowRegrowCamo:{x:816,y:163,width:176,height:162},Red:{x:1283,y:526,width:103,height:131},RedCamo:{x:1283,y:658,width:103,height:131},RedRegrow:{x:993,y:285,width:143,height:130},RedRegrowCamo:{x:993,y:416,width:143,height:130},White:{x:1283,y:986,width:78,height:97},WhiteCamo:{x:1283,y:1084,width:78,height:97},Bad:{x:0,y:238,width:326,height:235},BadFortified:{x:0,y:0,width:326,height:237},Bfb:{x:234,y:474,width:233,height:164},BfbFortified:{x:0,y:474,width:233,height:166},DdtCamo:{x:0,y:641,width:203,height:140},DdtFortifiedCamo:{x:204,y:641,width:203,height:140},Moab:{x:670,y:945,width:162,height:105},MoabFortified:{x:507,y:945,width:162,height:110},Zomg:{x:327,y:0,width:301,height:194},ZomgFortified:{x:327,y:195,width:301,height:194}};class fd{constructor(e){this.speed=Cd[e.replace("Camo","").replace("Regrow","").replace("Fortified","")].speed,this.scale=Cd[e.replace("Camo","").replace("Regrow","").replace("Fortified","")].scale,this.x=-Ld(1,0,100,wd[e].width,wd[e].height),this.y=100+(100-100*this.scale)/2,this.type=e,this.width=Ld(1,0,100,wd[e].width,wd[e].height)}move(e){this.x+=this.speed*e*6.86*yd*Id*Bd}shouldDelete(){return this.x>=800}render(e){let t=wd[this.type];e.drawImage(Ed,t.x,t.y,t.width,t.height,this.x,this.y,this.scale*this.width,100*this.scale)}}class kd{constructor(e){this.speed=Cd[e.replace("Camo","").replace("Regrow","").replace("Fortified","")].speed,this.x=-1.62*wd[e].width,this.type=e}move(e){this.x+=this.speed*e*6.86*yd*Id*Bd}shouldDelete(){return this.x>=800}render(e){let t=wd[this.type];e.drawImage(Ed,t.x,t.y,t.width,t.height,this.x,150-1.62*t.height/2,1.62*t.width,1.62*t.height)}}const Md=[];let Td,Bd=1,Id=1;const Hd=e=>{const t=performance.now();Md.forEach(((t,a)=>{t.move(e),t.shouldDelete()&&Md.splice(a,1)})),null!=Td&&Td.bloonGroups.forEach((a=>{if(t>=a.startTime&&a.count>0)if(0==a.activeTime&&(a.spawnBloon(),a.count--),a.activeTime+=e,a.spawnAccumulator+=e,0===a.spawnInterval){for(let e=0;e<a.count;e++)a.spawnBloon();a.count=0,a.spawnAccumulator=0}else for(;a.spawnAccumulator>=a.spawnInterval;){const e=Math.floor(a.spawnAccumulator/a.spawnInterval);for(let t=0;t<e;t++)a.spawnBloon(),a.count--;a.spawnAccumulator-=a.spawnInterval*e}}))},Sd=()=>{Tt.clearRect(0,0,Mt.width,Mt.height),Md.forEach((e=>e.render(Tt)))};function xd(e){if(Id=Ad(e.roundNumber),Td=JSON.parse(JSON.stringify(e)),document.getElementById("roundset-reverse-checkbox").checked){let t=Math.max(...e.bloonGroups.map((e=>e.duration)));for(let e of Td.bloonGroups){let a=e.duration-e.start;e.start=t-e.duration,e.duration=e.start+a}}dd(Math.max(...Td.bloonGroups.map((e=>e.duration)))/yd);for(let e of Td.bloonGroups)e.startTime=performance.now()+1e3*e.start/yd,e.activeTime=0,e.spawnAccumulator=0,e.spawnInterval=(e.duration-e.start)/(e.count-1)/yd,isFinite(e.spawnInterval)||(e.spawnInterval=0),e.spawnBloon=$d(e)}function $d(e){return function(){let t=e.bloon,a=["Moab","MoabFortified","Bfb","BfbFortified","Zomg","ZomgFortified","DdtCamo","DdtFortifiedCamo","Bad","BadFortified"].includes(t)?new kd(t):new fd(t),d=Cd[t.replace("Camo","").replace("Regrow","").replace("Fortified","")].layer,l=Md.findIndex((e=>Cd[e.type.replace("Camo","").replace("Regrow","").replace("Fortified","")].layer>d));-1===l?Md.push(a):Md.splice(l,0,a)}}function Ad(e){let t=0;return t=e<=80?1:e<=100?1+.02*(e-80):e<=150?1.6+.02*(e-101):e<=200?3+.02*(e-151):e<=250?4.5+.02*(e-201):6+.02*(e-252),t}